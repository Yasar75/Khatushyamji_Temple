!(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return b(a,c)})}else{if(typeof exports==="object"){b(a,require("jquery"))}else{b(a,a.jQuery||a.Zepto)}}})(this,function(s,f){var r="remodal";var e=s.REMODAL_GLOBALS&&s.REMODAL_GLOBALS.NAMESPACE||r;var k=f.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(y){return y+"."+e}).join(" ");var i=f.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(y){return y+"."+e}).join(" ");var a=f.extend({hashTracking:true,closeOnConfirm:true,closeOnCancel:true,closeOnEscape:true,closeOnOutsideClick:true,modifier:""},s.REMODAL_GLOBALS&&s.REMODAL_GLOBALS.DEFAULTS);var t={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"};var d={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"};var u=(function(){var y=document.createElement("div").style;return y.animationName!==undefined||y.WebkitAnimationName!==undefined||y.MozAnimationName!==undefined||y.msAnimationName!==undefined||y.OAnimationName!==undefined})();var o=/iPad|iPhone|iPod/.test(navigator.platform);var q;var c;function m(B){if(u&&B.css("animation-name")==="none"&&B.css("-webkit-animation-name")==="none"&&B.css("-moz-animation-name")==="none"&&B.css("-o-animation-name")==="none"&&B.css("-ms-animation-name")==="none"){return 0}var F=B.css("animation-duration")||B.css("-webkit-animation-duration")||B.css("-moz-animation-duration")||B.css("-o-animation-duration")||B.css("-ms-animation-duration")||"0s";var D=B.css("animation-delay")||B.css("-webkit-animation-delay")||B.css("-moz-animation-delay")||B.css("-o-animation-delay")||B.css("-ms-animation-delay")||"0s";var A=B.css("animation-iteration-count")||B.css("-webkit-animation-iteration-count")||B.css("-moz-animation-iteration-count")||B.css("-o-animation-iteration-count")||B.css("-ms-animation-iteration-count")||"1";var z;var y;var C;var E;F=F.split(", ");D=D.split(", ");A=A.split(", ");for(E=0,y=F.length,z=Number.NEGATIVE_INFINITY;E<y;E++){C=parseFloat(F[E])*parseInt(A[E],10)+parseFloat(D[E]);if(C>z){z=C}}return z}function h(){if(f(document.body).height()<=f(window).height()){return 0}var B=document.createElement("div");var z=document.createElement("div");var y;var A;B.style.visibility="hidden";B.style.width="100px";document.body.appendChild(B);y=B.offsetWidth;B.style.overflow="scroll";z.style.width="100%";B.appendChild(z);A=z.offsetWidth;B.parentNode.removeChild(B);return y-A}function n(){if(o){return}var y=f("html");var z=g("is-locked");var B;var A;if(!y.hasClass(z)){A=f(document.body);B=parseInt(A.css("padding-right"),10)+h();y.addClass(z)}}function v(){if(o){return}var y=f("html");var z=g("is-locked");var B;var A;if(y.hasClass(z)){A=f(document.body);B=parseInt(A.css("padding-right"),10)-h();A.css("padding-right",B+"px");y.removeClass(z)}}function p(z,A,D,C){var B=g("is",A);var y=[g("is",t.CLOSING),g("is",t.OPENING),g("is",t.CLOSED),g("is",t.OPENED)].join(" ");z.$bg.removeClass(y).addClass(B);z.$overlay.removeClass(y).addClass(B);z.$wrapper.removeClass(y).addClass(B);z.$modal.removeClass(y).addClass(B);z.state=A;!D&&z.$modal.trigger({type:A,reason:C},[{reason:C}])}function x(D,z,y){var C=0;var A=function(E){if(E.target!==this){return}C++};var B=function(E){if(E.target!==this){return}if(--C===0){f.each(["$bg","$overlay","$wrapper","$modal"],function(F,G){y[G].off(k+" "+i)});z()}};f.each(["$bg","$overlay","$wrapper","$modal"],function(E,F){y[F].on(k,A).on(i,B)});D();if(m(y.$bg)===0&&m(y.$overlay)===0&&m(y.$wrapper)===0&&m(y.$modal)===0){f.each(["$bg","$overlay","$wrapper","$modal"],function(E,F){y[F].off(k+" "+i)});z()}}function j(y){if(y.state===t.CLOSED){return}f.each(["$bg","$overlay","$wrapper","$modal"],function(z,A){y[A].off(k+" "+i)});y.$bg.removeClass(y.settings.modifier);y.$overlay.removeClass(y.settings.modifier).hide();y.$wrapper.hide();v();p(y,t.CLOSED,true)}function b(D){var B={};var z;var y;var C;var A;D=D.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",");z=D.split(",");for(A=0,y=z.length;A<y;A++){z[A]=z[A].split(":");C=z[A][1];if(typeof C==="string"||C instanceof String){C=C==="true"||(C==="false"?false:C)}if(typeof C==="string"||C instanceof String){C=!isNaN(C)?+C:C}B[z[A][0]]=C}return B}function g(){var y=e;for(var z=0;z<arguments.length;++z){y+="-"+arguments[z]}return y}function l(){var B=location.hash.replace("#","");var y;var z;if(!B){if(q&&q.state===t.OPENED&&q.settings.hashTracking){q.close()}}else{try{z=f("[data-"+r+'-id="'+B+'"]')}catch(A){}if(z&&z.length){y=f[r].lookup[z.data(r)];if(y&&y.settings.hashTracking){y.open()}}}}function w(z,y){var A=f(document.body);var B=this;B.settings=f.extend({},a,y);B.index=f[r].lookup.push(B)-1;B.state=t.CLOSED;B.$overlay=f("."+g("overlay"));if(!B.$overlay.length){B.$overlay=f("<div>").addClass(g("overlay")+" "+g("is",t.CLOSED)).hide();A.append(B.$overlay)}B.$bg=f("."+g("bg")).addClass(g("is",t.CLOSED));B.$modal=z.addClass(e+" "+g("is-initialized")+" "+B.settings.modifier+" "+g("is",t.CLOSED)).attr("tabindex","-1");B.$wrapper=f("<div>").addClass(g("wrapper")+" "+B.settings.modifier+" "+g("is",t.CLOSED)).hide().append(B.$modal);A.append(B.$wrapper);B.$wrapper.on("click."+e,"[data-"+r+'-action="close"]',function(C){C.preventDefault();B.close()});B.$wrapper.on("click."+e,"[data-"+r+'-action="cancel"]',function(C){C.preventDefault();B.$modal.trigger(d.CANCELLATION);if(B.settings.closeOnCancel){B.close(d.CANCELLATION)}});B.$wrapper.on("click."+e,"[data-"+r+'-action="confirm"]',function(C){C.preventDefault();B.$modal.trigger(d.CONFIRMATION);if(B.settings.closeOnConfirm){B.close(d.CONFIRMATION)}});B.$wrapper.on("click."+e,function(D){var C=f(D.target);if(!C.hasClass(g("wrapper"))){return}if(B.settings.closeOnOutsideClick){B.close()}})}w.prototype.open=function(){var y=this;var z;if(y.state===t.OPENING||y.state===t.CLOSING){return}z=y.$modal.attr("data-"+r+"-id");if(z&&y.settings.hashTracking){c=f(window).scrollTop();location.hash=z}if(q&&q!==y){j(q)}q=y;n();y.$bg.addClass(y.settings.modifier);y.$overlay.addClass(y.settings.modifier).show();y.$wrapper.show().scrollTop(0);y.$modal.focus();x(function(){p(y,t.OPENING)},function(){p(y,t.OPENED)},y)};w.prototype.close=function(y){var z=this;if(z.state===t.OPENING||z.state===t.CLOSING){return}if(z.settings.hashTracking&&z.$modal.attr("data-"+r+"-id")===location.hash.substr(1)){location.hash="";f(window).scrollTop(c)}x(function(){p(z,t.CLOSING,false,y)},function(){z.$bg.removeClass(z.settings.modifier);z.$overlay.removeClass(z.settings.modifier).hide();z.$wrapper.hide();v();p(z,t.CLOSED,false,y)},z)};w.prototype.getState=function(){return this.state};w.prototype.destroy=function(){var z=f[r].lookup;var y;j(this);this.$wrapper.remove();delete z[this.index];y=f.grep(z,function(A){return !!A}).length;if(y===0){this.$overlay.remove();this.$bg.removeClass(g("is",t.CLOSING)+" "+g("is",t.OPENING)+" "+g("is",t.CLOSED)+" "+g("is",t.OPENED))}};f[r]={lookup:[]};f.fn[r]=function(A){var y;var z;this.each(function(B,C){z=f(C);if(z.data(r)==null){y=new w(z,A);z.data(r,y.index);if(y.settings.hashTracking&&z.attr("data-"+r+"-id")===location.hash.substr(1)){y.open()}}else{y=f[r].lookup[z.data(r)]}});return y};f(document).ready(function(){f(document).on("click","[data-"+r+"-target]",function(A){A.preventDefault();var z=A.currentTarget;var B=z.getAttribute("data-"+r+"-target");var y=f("[data-"+r+'-id="'+B+'"]');f[r].lookup[y.data(r)].open()});f(document).find("."+e).each(function(A,y){var B=f(y);var z=B.data(r+"-options");if(!z){z={}}else{if(typeof z==="string"||z instanceof String){z=b(z)}}B[r](z)});f(document).on("keydown."+e,function(y){if(q&&q.settings.closeOnEscape&&q.state===t.OPENED&&y.keyCode===27){q.close()}});f(window).on("hashchange."+e,l)})});