function createPopup(iframeSource, isRefreshSelect) { if (isRefreshSelect != undefined) { try { eval(callParent("isTstructPopup") + " = true") } catch (ex) { console.log(ex.message) } } htmlContent = createIframeMarkup(iframeSource); $("head").append(htmlContent); var options = { closeOnOutsideClick: false, hashTracking: false }; var inst = $("[data-remodal-id=axpertPopupModal]").remodal(options); $("#popupIframeRemodal").on("load", function () { $("#popupIframeRemodal").contents().find("head").append($('<style>#backforwrdbuttons{display:none;}a[title="List View"]{display: none !important;}#design{display: none !important;}#new{display: none !important;}#dvGoBack{display: none !important;}</style>')); $("#popupIframeRemodal").contents().find("head").append($("<script>$(document).ready(function() { if ($('[id^=gridToggleBtn]').length > 0 && recordid !='0') { $($('[id^=gridToggleBtn]')).each(function (index) { toggleTheEditLayout($('[id^=gridToggleBtn]')[index].id.substr($('[id^=gridToggleBtn]')[index].id.indexOf('gridToggleBtn') + 13)); }); } });<\/script>")); try { if (eval(callParent("isTstructPopup"))) { $("#popupIframeRemodal").contents().find("head").append($("<style>#icons li a:not([alt=Save]){display: none !important;}</style>")) } } catch (ex) { console.log(ex.message) } inst.open(); ShowDimmer(false) }) } function createIframeMarkup(b) { var d = checkForAxpPopUpExists(); var a = ""; if (d > 0) { d++; a = "height:" + (100 - d * 10) + "vh;width:" + (100 - d * 10) + "vw" } var c = '<div id="axpertPopupWrapper" style="' + a + '" class="remodal" data-remodal-id="axpertPopupModal">'; c += '<button data-remodal-action="close" class="remodal-close icon-basic-remove"style="color:black;"></button>'; c += '<iframe src="' + b + '" id="popupIframeRemodal" width="100%" height="100%" style="border:0px; "></iframe>'; c += "</div>"; return c } $(document).on("opening", "#axpertPopupWrapper", function () { $("#wrapperForMainNewData", eval(callParent("wrapperForMainNewData", "id"))).hide(); ShowDimmer(true) }); function checkForAxpPopUpExists() { if (eval(callParent("axpertPopupWrapper", "id"))) { return $("#axpertPopupWrapper", eval(callParent("axpertPopupWrapper", "id"))).length } else { return false } } $(document).on("closing", "#axpertPopupWrapper", function () { if (!checkForAxpPopUpExists()) { $("#wrapperForMainNewData", eval(callParent("wrapperForMainNewData", "id"))).show() } if ($("#axpertPopupWrapper").find("#popupIframeRemodal").attr("src").indexOf("AxPop=true") > -1 && window.document.title == "Iview") { window.location.href = window.location.href } }); $(document).on("opened", "#axpertPopupWrapper", function () { $("#dvSelectedGlobalVar,#ExportImportCogIcon", eval(callParent("ExportImportCogIcon", "id"))).hide(); MainNewEdit = true }); $(document).on("closed", "#axpertPopupWrapper", function () { var inst = $("[data-remodal-id=axpertPopupModal]").remodal(); inst.destroy(); if (eval(callParent("uName")).toLowerCase() == "admin" || eval(callParent("uOwner")).toLowerCase() == "true") { if (!checkForAxpPopUpExists()) { $("#ExportImportCogIcon", eval(callParent("ExportImportCogIcon", "id"))).show() } } else { if (!checkForAxpPopUpExists()) { $("#ExportImportCogIcon", eval(callParent("ExportImportCogIcon", "id"))).hide() } } if (!checkForAxpPopUpExists()) { $("#dvSelectedGlobalVar", eval(callParent("dvSelectedGlobalVar", "id"))).show() } MainNewEdit = false; parent.isTstructPopup = false; ShowDimmer(false) }); function closeRemodalPopup() { var a = $("[data-remodal-id=axpertPopupModal]").remodal(); a.close() };