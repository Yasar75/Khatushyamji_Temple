/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/var clickedDc="";function openProprtySht(e){PropertySheetHTML(e),$("#Wrapperpropsheet").css("display","block"),$("#updateWidget").prop("title","Save"),$("#propertySrchCls").prop("title","Cancel"),$("#propTableContent input:not([class=form-range])").val(""),$("#propTableContent select").each(function(){$(this).data("noClear")||($(this).removeAttr("selected"),$(this).find("option:first").prop("selected",!0))}),$("#fldWidth").val(10),"Numeric"!=$("#seldataType").val()&&($(".decimalFld").addClass("notSearchable").hide(),$("#fldDecimal").val(0)),setTimeout(function(){var e=$j("#propertySheet").html(),a=new BSModal("modalIdNewItem","",e,function(){designLayoutProperties()},function(){setDesignProperties()});a.hideFooter(),a.hideHeader(),a.showFloatingClose()},50),$("#fldName").focus()}function CheckToOpenPropSheet(){checkIfFormChanges(),isFormChange?confirmOnAction(!0):openProprtySht("addFieldPS")}function PropertySheetHTML(e){var a=$("#"+e).data("title")||"Property",b=0!=$("#"+e).data("save");$("#Wrapperpropsheet #propertySheet .hpbHeaderTitle span.title").text(a),b?$("#Wrapperpropsheet #propertySheet .hpbHeaderTitle #updateWidget").show():$("#Wrapperpropsheet #propertySheet .hpbHeaderTitle #updateWidget").hide();var t=null;if($("#Wrapperpropsheet table").length>0&&(t=$("#Wrapperpropsheet table")),null!=t){if(t.prop("id")!=e){var o=t.data("parent");$("#"+o).append(t.hide().detach()),$("#Wrapperpropsheet #propTableContent").append($("#"+e).show().detach())}}else $("#Wrapperpropsheet #propTableContent").append($("#"+e).show().detach());if($("#"+e).find("select#seldc").length>0&&$("select#seldc option").length<=0){var r="";DCCaption.forEach(function(e,a){r+='<option value="'.concat(DCName[a],'">').concat(e,"</option>")}),$("#seldc").html(r)}$("#propertySearchFld").on("keyup",function(e){var a=$(this),b=a.val().toLowerCase();$("#propTableContent table tbody .noDatFoundTr").remove(),$("#propTableContent table tr:not('.notSearchable')").each(function(e,a){var t=$(this),o=t.find("td:first");""!=b&&o.hasClass("subHeading")?t.hide():-1===o.text().toLowerCase().indexOf(b)?t.hide():t.show()}),""!=a.val()&&0==$("#propTableContent table tr:visible").length&&$("#propTableContent table tbody").append('<tr class="noDatFoundTr"><td colspan="2" class="center">No data found</td></tr>')}),$("#propTableContent .propShtDataToggleIcon").on("click",function(e){var a=$(this),b=a.data("target");$("#propTableContent table tr[data-group='"+b+"']:not('.notSearchable')").toggle(),a.hasClass("icon-arrows-up")?a.removeClass("icon-arrows-up").addClass("icon-arrows-down"):a.hasClass("icon-arrows-down")&&a.removeClass("icon-arrows-down").addClass("icon-arrows-up")}),$(document).on("keydown",".customError",function(e){$(this).removeClass("customError")}),$("#seldataType").on("change",function(e){"Numeric"==$("#seldataType").val()?$(".decimalFld").removeClass("notSearchable").show():($(".decimalFld").addClass("notSearchable").hide(),$("#fldDecimal").val(0))})}function closeProprtySht(e,a){if($("#propertySheet").hasClass("scale-out"))return!0;$("#propertySheet").data("target");return $("#propertySheet").data("target","").removeClass("scale-in").addClass("scale-out"),!0}function updateField(){var dcName=$("#seldc option:selected").val(),dcNo=parseInt(dcName.substring(2)),orderNumber=0,isValidated=validateData();if(orderNumber=parseInt(FldDcRange[dcNo-1].split(",")[1])+1,isValidated){var SuccessCallbackAction=function(e,a){console.log(e),ShowDimmer(!1);var b=$.parseJSON(e).result[0].msg;"done"==b.toLowerCase()?($("#propertySheet").data("target","").removeClass("scale-in").addClass("scale-out"),showAlertDialog("success","Field added successfully"),callParentNew("IsfieldaddInDesignMode=",!0),window.location.href="tstruct.aspx?transid="+transid+"&theMode=design"+"&openerIV=".concat(transid,"&isIV=false")):(b=b.replace("<error>","").replace("</error>",""),showAlertDialog("failure",b))},OnException=function(e){ShowDimmer(!1)},jsonData={tstructs:{axpapp:eval(callParent("mainProject")),s:eval(callParent("mainSessionId")),trace:tracePath,username:eval(callParent("mainUserName")),transid:eval(callParent("transid")),caption:RepSpecialCharsInHTML(eval(callParent("tstructCaption"))),flds:[{name:$("#fldName").val(),actmode:"new",caption:$("#fldCaption").val(),dcname:dcName,ordno:orderNumber,datatype:$("#seldataType").val(),moe:$("#selmoe option:selected").val(),width:$("#fldWidth").val(),decimal:$("#fldDecimal").val(),saveval:"T",readonly:$("#fldReadOnly option:selected").val(),visible:$("#selvisible option:selected").val(),sql:$("#sqlSource").val(),expr:"",stransid:"",stable:"",skey:"",isnormalized:$("#selvisible option:selected").val(),allowempty:$("#selAlwEmpty option:selected").val(),allowduplicate:$("#selAlwDup option:selected").val(),applycomma:"F",hint:"",vexpr:""}]}};ShowDimmer(!0);try{ASB.WebService.CallRestWS(JSON.stringify(jsonData),"savestruct",SuccessCallbackAction,OnException)}catch(exp){}}}function validateData(){var e=$("#fldName").val();if(""==e)return $("#fldName").addClass("customError"),showAlertDialog("warning","Name cannot be empty"),!1;if(e.indexOf(" ")>0)return $("#fldName").addClass("customError"),showAlertDialog("warning","Name field cannot have empty spaces"),!1;return null!=e.toLowerCase().match(/\busername\b|\brecordid\b|\bfinyrst\b|\bfinyred\b|\bafinyrst\b|\bafinyred\b|\busergroup\b|\busergroupno\b|\bactiverow\b|\b_maincurr\b|\brolename\b|\bresponsibilities\b|\bsiteno\b|\bwf_applevel\b|\bwf_status\b|\baxp_language\b|\baxp_timezone\b|\baxp_datemode\b|\baxp_service\b|\badd\b|\balter\b|\band\b|\bany\b|\bas\b|\basc\b|\baudit\b|\bbetween\b|\bby\b|\bchar\b|\bcheck\b|\bcluster\b|\bcolumn\b|\bcomment\b|\bcompress\b|\bconnect\b|\bcreate\b|\bcurrent\b|\bdate\b|\bdecimal\b|\bdefault\b|\bdeletue\b|\bdesc\b|\bdistinct\b|\bdrop\b|\belse\b|\bexclusive\b|\bexists\b|\bfile\b|\bfloat\b|\bfor\b|\bfrom\b|\bgrant\b|\bgroup\b|\bhaving\b|\bidentified\b|\bimmediate\b|\bin\b|\bincrement\b|\bindex\b|\binitial\b|\binsert\b|\binteger\b|\bintersect\b|\binto\b|\bis\b|\blevel\b|\blike\b|\block\b|\blong\b|\bmaxextents\b|\bminus\b|\bmode\b|\bmodify\b|\bnoaudit\b|\bnocompress\b|\bnot\b|\bnowait\b|\bnull\b|\bnumber\b|\bof\b|\boffline\b|\boption\b|\bor\b|\border\b|\bpctfree\b|\bprior\b|\bprivileges\b|\bpublic\b|\braw\b|\brename\b|\bresource\b|\brevoke\b|\brow\b|\browid\b|\browlabel\b|\brownum\b|\brows\b|\bselect\b|\bsession\b|\bset\b|\bshare\b|\bsize\b|\bsmallint\b|\bstart\b|\bsuccessful\b|\bsynonym\b|\bsysdate\b|\btable\b|\bthen\b|\bto\b|\btrigger\b|\buid\b|\bunion\b|\bunique\b|\buser\b|\bvalidate\b|\bvalues\b|\bvarchar\b|\bvarchar2\b|\bview\b|\bwhenever\b|\bwhere\b|\bwith\b|\bsize\b|\bselect\b|\bdrop\b|\bas\b|\bin\b|\badd\b|\bupdate\b|\balter\b|\bfield\b|\bcolumn\b|\border\b|\bview\b|\btable\b|\btab\b|\bfrom\b|\bdatabase\b|\bvalues\b|\border\b|\bby\b|\bdefault\b|\bvalue\b|\bjoint\b|\bpassword\b|\bgroup\b|\bno\b|\bnot\b|\bto\b|\bfieldchanged\b|\bgetrcell\b|\bupper\b|\blower\b|\bdtoc\b|\bctod\b|\brnd\b|\bround\b|\bstuff\b|\biif\b|\bamtword\b|\bval\b|\bstr\b|\bsubstr\b|\bconvert\b|\brevconvert\b|\bencode\b|\bdecode\b|\bhashchar\b|\bmandy\b|\bdayselapsed\b|\btimeelapsed\b|\baddtotime\b|\baddtodate\b|\baddtomonth\b|\bisemptyvalue\b|\blastdayofmonth\b|\bvalidencodedate\b|\beval\b|\bisempty\b|\babs\b|\bmakedate\b|\bdate\b|\bformatdatetime\b|\btime\b|\bdayofdate\b|\bmonthofdate\b|\byearofdate\b|\bgen_id\b|\btotal\b|\bsum\b|\bgetmax\b|\bgetvalue\b|\bgetid\b|\bgetrow\b|\bgetrowcount\b|\bgetcostrate\b|\bgetadjustedamount\b|\bsumtill\b|\bgetcell\b|\bgetinteger\b|\bpower\b|\bcreatedby\b|\bcreatedon\b|\baxpceil\b|\baxpfloor\b|\bdays360\b|\bdata\b/g)?($("#fldName").addClass("customError"),showAlertDialog("warning","Invalid name"),!1):""==$("#fldCaption").val()?($("#fldCaption").addClass("customError"),showAlertDialog("warning","Caption cannot be empty"),!1):$("#fldWidth").val().match(/^[0-9]+$/)?$("#fldWidth").val().match(/^[0-9]+$/)&&$("#fldWidth").val()>4e3?($("#fldWidth").addClass("customError"),showAlertDialog("warning","Width cannot exceed 4000"),!1):$("#fldDecimal").val().match(/^[0-9]+$/)?$("#fldDecimal").val().match(/^[0-9]+$/)&&$("#fldDecimal").val()>15?($("#fldDecimal").addClass("customError"),showAlertDialog("warning","Decimal value cannot exceed 15."),!1):"Select"!=$("#selmoe option:selected").val()||(""!=$("#sqlSource").val()||(showAlertDialog("warning","SQL cannot be empty."),!1)):($("#fldDecimal").addClass("customError"),showAlertDialog("warning","Decimal should be numeric."),!1):($("#fldWidth").addClass("customError"),showAlertDialog("warning","Width should be numeric"),!1)}function moeChanger(e){"Image"===(e=$(e)).val()?$("#sqlSource").prop("disabled",!0):$("#sqlSource").prop("disabled",!1)}