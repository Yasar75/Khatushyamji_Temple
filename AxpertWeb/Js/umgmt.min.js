/*http://demo.agile-labs.com/minZIP/*//*version=3.9.1*/var X,Y,arrPages=new Array,arrStruc=new Array,arrRes=new Array,arrRoles=new Array,NewTree=new Array,DivId,StrDtID,saved=!1,UserEditfld=null,isEnterPressed=!1,updatedRecord=!1;function alphanumeric(e){for(var t=e,r=0;r<t.length;r++){var a=t.charAt(r).charCodeAt(0);if(!(a>47&&a<58||a>64&&a<91||a>96&&a<123))return!1}return!0}function disableEnterKey(e){return 13!=(window.event?window.event.keyCode:e.which)}function CheckSpecialCharsInXml(e){return e=(e=(e=(e=(e=(e=e).replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")}function SetAutoComplete(){var e=document.getElementById("txtReSePages");e!=undefined&&new actb(e,arrPages);var t=document.getElementById("txtReSeStruct");t!=undefined&&new actb(t,arrStruc);var r=document.getElementById("txtRoSePages");r!=undefined&&new actb(r,arrPages);var a=document.getElementById("txtRoSeStruct");a!=undefined&&new actb(a,arrStruc);var n=document.getElementById("txtUsSePages");n!=undefined&&new actb(n,arrPages);var s=document.getElementById("txtUsSeStruct");s!=undefined&&new actb(s,arrStruc);var l=document.getElementById("txtRoSeResp");l!=undefined&&new actb(l,arrRes);var i=document.getElementById("txtUsSeResp");i!=undefined&&new actb(i,arrRes);var c=document.getElementById("txtUsSeRoles");c!=undefined&&new actb(c,arrRoles)}function openChildwintst(e){ShowDimmer(!0);var t=$j("#txtReEditResp").val();parent.displayBootstrapModalDialog("User Access","md","400px",!0,"useraccess.aspx?transid="+e+"&role="+t,!0)}function openChildwiniv(e){ShowDimmer(!0);var t=$j("#txtReEditResp").val();parent.displayBootstrapModalDialog("User Access","md","380px",!0,"useracciview.aspx?iname="+e+"&role="+t,!0)}function client_OnTreeNodeChecked(e){var t,r,a=!1;if("INPUT"==(t=window.event==undefined?e.target:window.event.srcElement).tagName&&"checkbox"==t.type){var n=t;1!=(r=n.checked)&&0!=r||(hdnTree+=""==hdnTree?n.parentElement.children[1].innerText:"~"+n.parentElement.children[1].innerText,NewTree.push(n.parentElement.children[1].innerText));do{t=t.parentElement}while("TABLE"!=t.tagName);var s=t.rows[0].cells.length,l=(t.rows[0].cells[0],t.parentElement.getElementsByTagName("TABLE")),c=l.length;if(c>=1)for(i=0;i<c;i++){if(l[i]==t&&(a=!0,i++,i==c))return;if(1==a){window.parent.globalChange=!0;var o=l[i].rows[0].cells.length;if(!(o>s))return;l[i].rows[0].cells[o-1].getElementsByTagName("INPUT")[0].checked=r}}}}function ValidateDate(Rindx,celno){var grd=document.getElementById("grdUsRoles");Rindx+=1;var now=new Date,curMnt=now.getMonth();curMnt+=1;var Currentdt=curMnt+"/"+now.getDate()+"/"+now.getFullYear();if("NaN"==Rindx){var txtStrdt=grd.rows[Rindx].cells[celno].childNodes[0];if(txtStrdt.value!=undefined&&""!=txtStrdt.value)if(2==celno){var strDt=txtStrdt.value;if("dd/mm/yyyy"==dateString){var strDts=strDt.toString().split("/");strDt=strDts[1]+"/"+strDts[0]+"/"+strDts[2]}Date.parse(strDt)<Date.parse(Currentdt)&&(ShowErrorMsg(eval(callParent("lcm[88]"))),txtStrdt.value="",txtStrdt.focus())}else{var txtStrDt=grd.rows[Rindx].cells[2].childNodes[0],txtEndDt=grd.rows[Rindx].cells[celno].childNodes[0],strDt=txtStrDt.value,EndDt=txtEndDt.value;if("dd/mm/yyyy"==dateString){var strDts=strDt.toString().split("/");strDt=strDts[1]+"/"+strDts[0]+"/"+strDts[2];var EndDts=EndDt.toString().split("/");EndDt=EndDts[0]+"/"+EndDts[0]+"/"+EndDts[2]}Date.parse(strDt)>Date.parse(EndDt)&&(ShowErrorMsg(eval(callParent("lcm[89]"))),txtEndDt.value="",txtEndDt.focus())}}}function ValidateResp(){var lblNodenotFound=$j("#lblNodenotFound");lblNodenotFound.length>0&&lblNodenotFound.text("");var txtSrchNode=$j("#txtSearchNode");txtSrchNode.val("");var respName=$j("#txtReEditResp");return""==respName.val()?(showAlertDialog("warning",eval(callParent("lcm[90]"))),respName.focus(),!1):CheckAlphaNumeric(respName.val())?(showAlertDialog("warning",eval(callParent("lcm[91]"))),respName.focus(),!1):0==IsTreeChecked()?(showAlertDialog("warning",eval(callParent("lcm[92]"))),$("#treeEditResn0").focus(),!1):($("#treeEditRes tbody tr td a").each(function(){href=$(this).prop("href"),-1!=href.indexOf("javascript:openChildwiniv")?$(this).siblings().first().is(":checked")&&$('[href="'+href+'"]').siblings().attr("checked",!0):-1!=href.indexOf("javascript:openChildwintst")&&$(this).siblings().first().is(":checked")&&$('[href="'+href+'"]').siblings().attr("checked",!0)}),ShowDimmer(!0),!0)}function CheckAlphaNumeric(e){return!/^[a-zA-Z0-9_]+$/.test(e)}function AxWaitCursor(e){e?document.body.style.cursor="wait":(document.body.style.cursor="arrow",document.body.style.cursor="default")}function IsTreeChecked(){var e=document.getElementById("treeEditRes").getElementsByTagName("input");for(i=0;i<e.length;i++)if("checkbox"==e[i].type&&e[i].checked)return!0;return!1}function ValidateRole(){var txtRole=$j("#txtRoEditRole");return""==txtRole.val()?(ShowErrorMsg(eval(callParent("lcm[93]"))),!1):CheckAlphaNumeric(txtRole.val())?(ShowErrorMsg(eval(callParent("lcm[94]"))),txtRole.focus(),!1):0!=IsRoleChecked()||(ShowErrorMsg(eval(callParent("lcm[95]"))),!1)}function IsRoleChecked(){var e=document.getElementById("chkLstRoEd").getElementsByTagName("input"),t=0;for(t=0;t<e.length;t++)if("checkbox"==e[t].type&&e[t].checked)return!0;return!1}function ValidateUser(){var username=$j("#txtUsAdName");if(""==username.val())return ShowErrorMsg(eval(callParent("lcm[96]"))),username.focus(),UserEditfld=$j("#txtUsAdName"),isEnterPressed=!1,!1;if(CheckAlphaNumeric(username.val()))return ShowErrorMsg(eval(callParent("lcm[97]"))),username.focus(),UserEditfld=$j("#txtUsAdName"),isEnterPressed=!1,!1;var newsw=$j("#txtUsAdsw"),consw=$j("#txtUsAdConsw"),emailw=$j("#txtUsAdEmail");if(""==newsw.val())return ShowErrorMsg(eval(callParent("lcm[98]"))),newsw.focus(),UserEditfld=$j("#txtUsAdsw"),!1;if(""==consw.val())return ShowErrorMsg(eval(callParent("lcm[99]"))),newsw.focus(),UserEditfld=$j("#txtUsAdConsw"),!1;if(newsw.val()!=consw.val())return ShowErrorMsg(eval(callParent("lcm[100]"))),UserEditfld=$j("#txtUsAdsw"),newsw.focus(),!1;if($j("#pwdExpiryDays").val()&&(isNaN($j("#pwdExpiryDays").val())||!$j("#pwdExpiryDays").val().match(/^\d+$/)))return ShowErrorMsg(eval(callParent("lcm[101]"))),$j("#pwdExpiryDays").val(""),UserEditfld=$j("#pwdExpiryDays"),!1;if(""==emailw.val())return ShowErrorMsg(eval(callParent("lcm[102]"))),UserEditfld=$j("#txtUsAdEmail"),emailw.focus(),!1;if(0==echeck(emailw.val()))return UserEditfld=$j("#txtUsAdEmail"),emailw.focus(),!1;if(0==IsRoleAdded())return ShowErrorMsg(eval(callParent("lcm[103]"))),UserEditfld=$j("#grdUsRoles_ctl02_ddlUsRole"),!1;var swhash=$j("#sw000F0");return newsw.val(swhash.val()),consw.val(swhash.val()),UserEditfld=$j("#grdUsRoles_ctl02_ddlUsRole"),!0}function IsRoleAdded(){var e=document.getElementById("grdUsRoles");if(null==e)return!1;var t=e.rows.length;if(0==t)return!1;if(2==t){var r="",a=e.rows[1].cells[1].getElementsByTagName("select")[0];return a!=undefined&&(r=a.options[a.selectedIndex].value),""!=r}return!0}function echeck(str){var at="@",dot=".",lat=str.indexOf(at),lstr=str.length,ldot=str.indexOf(dot);return""==str||(-1==str.indexOf(at)?(ShowErrorMsg(eval(callParent("lcm[104]"))),!1):-1==str.indexOf(at)||0==str.indexOf(at)||str.indexOf(at)==lstr?(ShowErrorMsg(eval(callParent("lcm[104]"))),!1):-1==str.indexOf(dot)||0==str.indexOf(dot)||str.indexOf(dot)==lstr?(ShowErrorMsg(eval(callParent("lcm[104]"))),!1):-1!=str.indexOf(at,lat+1)?(ShowErrorMsg(eval(callParent("lcm[104]"))),!1):str.substring(lat-1,lat)==dot||str.substring(lat+1,lat+2)==dot?(ShowErrorMsg(eval(callParent("lcm[104]"))),!1):-1==str.indexOf(dot,lat+2)?(ShowErrorMsg(eval(callParent("lcm[104]"))),!1):-1==str.indexOf(" ")||(ShowErrorMsg(eval(callParent("lcm[104]"))),!1))}function ValidateEmail(){var e=$j("#txtUsAdEmail");return null==e.val()||e.val(),0!=echeck(e.val())||(e.val(""),UserEditfld=$j("#txtUsAdEmail"),e.focus(),!1)}var digits="0123456789",phoneNumberDelimiters="()- ",validWorldPhoneChars=phoneNumberDelimiters+"+",minDigitsInIPhoneNumber=10;function isInteger(e){var t;for(t=0;t<e.length;t++){var r=e.charAt(t);if(r<"0"||r>"9")return!1}return!0}function trim(e){var t,r="";for(t=0;t<e.length;t++){var a=e.charAt(t);" "!=a&&(r+=a)}return r}function stripCharsInBag(e,t){var r,a="";for(r=0;r<e.length;r++){var n=e.charAt(r);-1==t.indexOf(n)&&(a+=n)}return a}function checkInternationalPhone(e){var t=3;if((e=trim(e)).indexOf("+")>1)return!1;if(-1!=e.indexOf("-")&&(t+=1),-1!=e.indexOf("(")&&e.indexOf("(")>t)return!1;var r=e.indexOf("(");return(-1==e.indexOf("(")||")"==e.charAt(r+2))&&((-1!=e.indexOf("(")||-1==e.indexOf(")"))&&(s=stripCharsInBag(e,validWorldPhoneChars),""==e||isInteger(s)&&s.length>=minDigitsInIPhoneNumber))}function HideErrDiv(e){var t=$j("#"+e);t.length>0&&t.hide()}function CheckForUnsavedChanges(){if(1==window.parent.globalChange){var e=document.getElementById("lblDisErrMsg");(""==e.innerText||"undefined"==e.innerText||navigator.userAgent.indexOf("Firefox"))&&ShowConfirmMessage("resp"),HideBackgroundFade()}window.parent.globalChange=!1}function hiddenFloatingDiv(e,t,r){allUsersSrcWin&&!allUsersSrcWin.closed&&allUsersSrcWin.close();var a=$j("#dvPopErrMsg"),n=$j("#lblDisErrMsg");if(HideBackgroundFade(),"Users"==document.title){if(isUserEditMode=!1,"success"!=r?CheckForUnsavedChangesUser():window.parent.globalChange=!1,(a=document.getElementById("lblDisErrMsg"))&&""!=a.innerText&&"close"!=t)return}else"Responsibility"==document.title?("success"!=r?CheckForUnsavedChanges():window.parent.globalChange=!1,n.text(""),a.hide()):"Roles"==document.title&&("success"!=r?CheckForUnsavedChangesRole():window.parent.globalChange=!1,n.text(""),a.hide());saved?(AxWaitCursor(!0),ShowBackgroundFade()):(document.getElementById(e).innerHTML=originalDivHTML,document.getElementById(e).style.visibility="hidden",document.getElementById("dimmer").style.visibility="hidden",DivID="",document.body.style.cursor="default",HideBackgroundFade()),saved=!1}function ShowDimmer(e){DimmerCalled=!0;var t=$j("#waitDiv");if(t.length>0&&t!=undefined)if(1==e){var r=$j("#middle1",parent.document);r&&t.width(r.width()),t.show(),document.onkeydown=function(){return!1}}else t.hide(),document.onkeydown=function(){if(1==DimmerCalled)return!0};else window.opener!=undefined&&(t=$j("#waitDiv",window.opener.document)).length>0&&(1==e?t.show():t.hide());DimmerCalled=!1}function ValidatePswdExpDays(){!$j("#pwdExpiryDays").val()||!isNaN($j("#pwdExpiryDays").val())&&$j("#pwdExpiryDays").val().match(/^\d+$/)||(ShowErrorMsg(eval(callParent("lcm[101]"))),$j(".msgButton").focus(),$j("input.msgButton").click(function(e){e.preventDefault(),$j("#pwdExpiryDays").focus(),$j("#pwdExpiryDays").val("")}))}var curSearchIndex=0,curSearchCount=0;function setCurrentSearchInfo(){msg=curSearchIndex+1+" / "+curSearchCount,$("#lblSearchRecMsg").text(msg),curSearchCount>0&&expandAllTreeNodes()}function clearResponsibility(){$("#txtReEditResp").val(""),$("#ddlStatus").val("Active"),$("#treeEditRes input[type='checkbox']").prop("checked",!1)}$(document).ready(function(){bindModalCloseEvent();try{callParentNew("middle1","id").contentWindow.ShowDimmer(!1)}catch(ex){}try{callParentNew("middle1","id").contentWindow.axpiframeac.ShowDimmer(!1)}catch(ex){}$("#lblResponsibility").text(eval(callParent("lcm[224]"))),$("#txtSearchNode").attr("placeholder",eval(callParent("lcm[350]"))),$("#spnTreeHeading").text(eval(callParent("lcm[316]"))),$("#searchclear").attr("title",eval(callParent("lcm[318]"))),$("#searchPrevPages").attr("title",eval(callParent("lcm[163]"))),$("#searchNextPages").attr("title",eval(callParent("lcm[162]"))),$("#btnReEdSave").prop({value:eval(callParent("lcm[200]")),title:eval(callParent("lcm[200]"))}),$("#btnClose").prop({value:eval(callParent("lcm[249]")),title:eval(callParent("lcm[249]"))}),respAction=$("#hdnAction").val(),window.parent.document.getElementById("iFrameAddResponsibility"),modalHeader=eval(callParent("divModalHeader","id")+".getElementById('divModalHeader')"),modalHeader.innerText=("Add"==respAction?eval(callParent("lcm[314]")):eval(callParent("lcm[168]")))+" "+eval(callParent("lcm[224]")),$('input[type="text"], input[type="radio"], input[type="checkbox"], select').not("#txtSearchNode").each(function(e){$(this).change(function(){$(this).addClass("dirty")})}),tabFocusEvent("txtReEditResp","btnClose"),$("#rdbStatusList label").addClass("lbl-status"),$("#txtSearchNode").focusin(function(){$(".search-form").addClass("focusTheField")}).focusout(function(){$(".search-form").removeClass("focusTheField")}),$("#txtSearchNode").keyup(function(e){curSearchCount=0,curSearchIndex=0,$("#dvEditResp td").removeClass("search-highlight");var t=$("#txtSearchNode").val();""!=t?searchNode(t):$("#dvEditResp td").removeClass("search-highlight"),t.length>0?$("#searchclear").show():($("#dvEditResp td a, #dvEditResp td span").removeClass("filter-a"),$("#searchclear,#searchNextPages, #searchPrevPages, #lblSearchRecMsg").hide())}),$("#txtSearchNode").on("keydown",function(e){13==e.which&&e.preventDefault()}),$("#searchNextPages").click(function(){curSearchCount==curSearchIndex&&(curSearchIndex=0),$(".search-highlight").eq(curSearchIndex).find("a").length>0?$(".search-highlight").eq(curSearchIndex).find("a").focus():$(".search-highlight").eq(curSearchIndex).find("span").focus(),setCurrentSearchInfo(),curSearchIndex++}),$("#searchPrevPages").click(function(){0==curSearchIndex&&(curSearchIndex=curSearchCount),curSearchIndex--,$(".search-highlight").eq(curSearchIndex).find("a").length>0?$(".search-highlight").eq(curSearchIndex).find("a").focus():$(".search-highlight").eq(curSearchIndex).find("span").focus(),setCurrentSearchInfo()}),$("#searchclear").click(function(){$("#txtSearchNode").val("").focus(),$("#dvEditResp td").removeClass("search-highlight"),$("#dvEditResp td a, #dvEditResp td span").removeClass("filter-a"),$(this).hide(),$("#searchNextPages, #searchPrevPages, #lblSearchRecMsg").hide(),$(".treenode-content").animate({scrollTop:0},"fast")}),$("#treeEditRes tbody tr td img").each(function(){var e=$(this).prop("alt");if("TStruct"==e||"IView"==e){"TStruct"==e?$(this).prop("title","TStruct").css("height","16px"):$(this).prop("title","IView").css("height","17px"),$(this).parent().next().find("input[type='checkbox']").after($(this)),$(this).css("margin","0px 2px 4px -3px");var t=$(this).attr("href");t!=undefined&&$(this).next().contents().unwrap().wrap('<a href="'+t+'"></a>')}}),$("#treeEditRes tbody tr td a img").each(function(){var e=$(this).prop("alt");"TStruct"!=e&&"IView"!=e||("TStruct"==e?$(this).prop("title","TStruct").css("height","16px"):$(this).prop("title","IView").css("height","17px"),$(this).parent().parent().next().find("input[type='checkbox']").after($(this)),$(this).parent().css({"margin-right":"2px","margin-left":"0px"}))}),$("#treeEditRes tbody tr td input[type='checkbox']").change(function(){checked=$(this).is(":checked"),id=$(this).attr("id"),href=$(this).siblings().next().attr("href"),checked?$('[href="'+href+'"]').siblings().closest("input[type='checkbox']").not("#"+id).prop("checked",!0):void 0===$(this).attr("title")&&$('[href="'+href+'"]').siblings().closest("input[type='checkbox']").not("#"+id).prop("checked",!1)}),"ar"==parent.gllangType&&$("#treeEditRes input[type='checkbox']").siblings().closest("a,span").css("margin-right","5px")});var hdnTree="",isFormDirty=!1;function searchNode(e){var t=!1;if(""!=e){for(var r=document.getElementById("treeEditRes").querySelectorAll("a,span"),a=$("#txtSearchNode").val(),n=new RegExp("^.*"+a+".*$","i"),s=0,l=r.length;s<l;s++)n.test($(r[s]).text())?(t||(t=!0),$(r[s]).parent().addClass("search-highlight"),$(r[s]).addClass("filter-a").attr("tabindex","0"),curSearchCount++):$(r[s]).removeClass("filter-a");t?($("#searchNextPages, #searchPrevPages, #lblSearchRecMsg").show(),setCurrentSearchInfo(),$("#txtSearchNode").focus(),expandAllTreeNodes()):($("#searchNextPages, #searchPrevPages, #lblSearchRecMsg").hide(),$("#dvEditResp td a, #dvEditResp td span").removeClass("filter-a"),$("#dvEditResp td").removeClass("search-highlight"),showAlertDialog("warning","No pages found"))}else showAlertDialog("warning","Please enter Responsibility name to search"),$("a,span").removeClass("search-highlight"),$("#txtSearchNode").focus()}function expandAllTreeNodes(){$("#treeEditRes div").show(),$("#treeEditRes a").each(function(){$(this).attr("href").indexOf("javascript:TreeView_ToggleNode")>-1&&$(this).find("img").attr("src",treeEditRes_Data.images[5])})}function bindModalCloseEvent(){$("#btnClose").on("click",function(e){checkIfFormChanges()?ConfirmLeave():parent.closeModalDialog()})}function bindResponsibilityGrid(){parent.document.getElementById("middle1").contentWindow.bindGridData(""),window.parent.globalChange=!1}function tabFocusEvent(firstFocusId,lastFocusId){modalButton=eval(callParent("btnModalClose","id")+".getElementById('btnModalClose')"),-1==modalButton.className.indexOf("firstFocusable")&&(modalButton.className+=" firstFocusable"),$("#"+lastFocusId).addClass("lastFocusable"),$(".lastFocusable").on("keydown.tabRot",function(e){9!==e.which||e.shiftKey||(e.preventDefault(),modalButton.focus())}),modalButton.addEventListener("keydown",function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),$(".lastFocusable").focus())}),setTimeout(function(){$("#"+firstFocusId).focus()},300)}function checkIfFormChanges(){return $('input[type="text"], input[type="radio"], input[type="checkbox"], select').each(function(e){!isFormDirty&&$(this).hasClass("dirty")&&(isFormDirty=!0)}),isFormDirty}function ConfirmLeave(){if($(".jconfirm").length>0)$(".jconfirm").remove();else var ConfirmSaveCB=$.confirm({theme:"modern",title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind"),$(".jconfirm-buttons button").each(function(){var e=$(this).text();$(this).prop("title",e.charAt(0).toUpperCase()+e.slice(1))}),$(".jconfirm-buttons .hotbtn").focus()},backgroundDismiss:"false",escapeKey:"cancel",content:eval(callParent("lcm[319]")),buttons:{confirm:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){ConfirmSaveCB.close(),parent.closeModalDialog(),parent.checkIfAnyActionPerformed(),window.parent.globalChange=!1}},cancel:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy"),parent.actionsClicked=""}}}})}function ChangeTheme(){var theme="";if(theme=eval(callParent("currentThemeColor")),""!=theme)$j("#themecss").attr("href","../App_Themes/"+theme+"/Stylesheet.min.css?v=23");else{var themeref="";window.opener&&(themeref=$j("#themecss",window.opener.document).attr("href"),""!=themeref&&$j("#themecss").attr("href",themeref)),parent.parent.document&&(themeref=$j("#themecss",parent.parent.document).attr("href"),""!=themeref&&$j("#themecss").attr("href",themeref)),""!=themeref&&themeref!=undefined||(themeref="../App_Themes/"+axTheme+"/Stylesheet.min.css?v=23",$j("#themecss").attr("href",themeref))}}