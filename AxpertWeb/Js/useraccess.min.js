/*http://demo.agile-labs.com/minZIP/*//*version=3.9.1*/var isFormDirty=!1,totelements="",dcres="",fldres="",butres="",lvbutres="",tcindex=0;function setAccessValues(){for(i=0;i<totelements;i++)if("checkbox"==document.form1.elements[i].type){var e=document.form1.elements[i].id,t=e.substring(0,e.length-3);if("dcview"==t){var a=document.form1.elements[i].checked,l=document.form1.elements[i].value,c=document.form1.elements[i+1].checked,n=document.form1.elements[i+2].value;dcres=dcres+"<"+l+' cap="'+n+'" view="'+a+'" enable="'+c+'" ></'+l+">",i+=1}else if("fldview"==t){a=document.form1.elements[i].checked;var o=document.form1.elements[i].value,r=(c=document.form1.elements[i+1].checked,document.form1.elements[i+2].value);fldres=fldres+"<"+o+' cap="'+r+'"  view="'+a+'" enable="'+c+'" ></'+o+">",i+=1}else if("butview"==t){a=document.form1.elements[i].checked;var s=document.form1.elements[i].value,d=document.form1.elements[i+1].value;c=document.form1.elements[i+1].checked;butres=butres+"<"+s+' cap="'+d+'" view="'+a+'" enable="'+c+'" ></'+s+">",i+=1}else if("lvbview"==t){a=document.form1.elements[i].checked,s=document.form1.elements[i].value,d=document.form1.elements[i+1].value,c=document.form1.elements[i+1].checked;lvbutres=lvbutres+"<"+s+'  cap="'+d+'" view="'+a+'" enable="'+c+'" ></'+s+">",i+=1}}""!=dcres&&(document.getElementById("dc_xml").value=dcres);""!=fldres&&(document.getElementById("fld_xml").value=fldres);""!=butres&&(document.getElementById("but_xml").value=butres);""!=lvbutres&&(document.getElementById("lv_xml").value=lvbutres)}function checkIfFormChanges(){return isFormDirty=JSON.parse($("#hdnFormChanges").val())}function ConfirmLeave(){if($(".jconfirm").length>0)$(".jconfirm").remove();else var ConfirmSaveCB=$.confirm({theme:"modern",title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind"),$(".jconfirm-buttons button").each(function(){var e=$(this).text();$(this).prop("title",e.charAt(0).toUpperCase()+e.slice(1))}),$(".jconfirm-buttons .hotbtn").focus()},backgroundDismiss:"false",escapeKey:"cancel",content:eval(callParent("lcm[319]")),buttons:{confirm:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){ConfirmSaveCB.close(),parent.closeModalDialog(),parent.checkIfAnyActionPerformed()}},cancel:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy"),parent.actionsClicked=""}}}})}function validateTransactionControl(){return fld=$("#tc_fld_cb"),opr=$("#tc_opr_cb"),values=$("#tc_values_cb"),btwnvalues=$("#tc_betvalues_cb"),""==fld.val()?(showAlertDialog("warning",eval(callParent("lcm[343]"))),fld.focus(),!1):""==opr.val()?(showAlertDialog("warning",eval(callParent("lcm[344]"))),opr.focus(),!1):""==values.val()?(showAlertDialog("warning",eval(callParent("lcm[345]"))),values.focus(),!1):"Between"==opr.val()&&""==btwnvalues.val()?(showAlertDialog("warning",eval(callParent("lcm[345]"))),btwnvalues.focus(),!1):void tcUpdate(transid)}function tabFocusEvent(firstFocusId,lastFocusId){modalButton=eval(callParent("btnModalClose","id")+".getElementById('btnModalClose')"),-1==modalButton.className.indexOf("firstFocusable")&&(modalButton.className+=" firstFocusable"),$(".lastFocusable").removeClass("lastFocusable"),$("#"+lastFocusId).addClass("lastFocusable").focus(),$(".lastFocusable").on("keydown.tabRot",function(e){9!==e.which||e.shiftKey||(e.preventDefault(),modalButton.focus())}),modalButton.addEventListener("keydown",function(e){9===e.which&&e.shiftKey&&(e.preventDefault(),$(".lastFocusable").focus())}),setTimeout(function(){$("#"+firstFocusId).focus()},100)}function enableDisableChkboxes(){$.each(["dc","fld","btn","lbtn"],function(e,t){$("[data-"+t+"-view]").change(function(){var e=$(this).attr("data-"+t+"-view");$(this).is(":checked")||$("[data-"+t+"-enable='"+e+"']").prop("checked",!1)}),$("[data-"+t+"-enable]").change(function(){var e=$(this).attr("data-"+t+"-enable");$(this).is(":checked")&&$("[data-"+t+"-view='"+e+"']").prop("checked",!0)})})}function closeWindow(){checkIfFormChanges()?ConfirmLeave():parent.closeModalDialog()}function editTransactionControl(index){ShowDimmer(!0),$.ajax({type:"POST",url:"../aspx/UserAccess.aspx/getTCDetails",contentType:"application/json;charset=utf-8",data:'{transid:"'+transid+'", index:"'+index+'"}',dataType:"json",success:function success(data){"SessionExpiry"==data.d?parent.window.location.href="../aspx/sess.aspx":"Error"==data.d?showAlertDialog("warning",eval(callParent("lcm[346]"))):(showTransactionFields(),$("#tc_fld_cb").val(data.d.tc_fld_cb),$("#tc_opr_cb").val(data.d.tc_opr_cb),$("#tc_values_cb").val(data.d.tc_values_cb),$("#tc_view_cb").prop("checked",data.d.tc_view_cb),$("#tc_edit_cb").prop("checked",data.d.tc_edit_cb),$("#tc_delete_cb").prop("checked",data.d.tc_delete_cb),""!=data.d.tc_betvalues_cb?$("#tc_betvalues_cb").val(data.d.tc_betvalues_cb).removeAttr("disabled"):$("#tc_betvalues_cb").val("").attr("disabled","disabled"),actionType="update",tcindex=index),ShowDimmer(!1)},error:function error(response){showAlertDialog("warning",eval(callParent("lcm[342]"))),ShowDimmer(!1)}})}function deleteTransactionControl(index){ShowDimmer(!0),$.ajax({type:"POST",url:"../aspx/UserAccess.aspx/DeleteTC",contentType:"application/json;charset=utf-8",data:'{transid:"'+transid+'", index:"'+index+'"}',dataType:"json",success:function success(data){"SessionExpiry"==data.d?parent.window.location.href="../aspx/sess.aspx":"Error"==data.d?showAlertDialog("warning",eval(callParent("lcm[347]"))):(showAlertDialog("success",eval(callParent("lcm[348]"))),createDataTable(data.d)),ShowDimmer(!1)},error:function error(response){showAlertDialog("warning",eval(callParent("lcm[347]"))),ShowDimmer(!1)}})}function showTransactionExp(){$("#tblTC_wrapper,#tcadd").show(),$("#tc_flds").hide()}function showTransactionFields(){$("#tblTC_wrapper,#tcadd").hide(),$("#tc_flds").show()}function cancelTransactionControl(){$("#tc_fld_cb, #tc_opr_cb, #tc_values_cb,tc_betvalues_cb").val(""),showTransactionExp()}function confirmDeleteTransaction(index){if($(".jconfirm").length>0)$(".jconfirm").remove();else var ConfirmSaveCB=$.confirm({theme:"modern",title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind"),$(".jconfirm-buttons button").each(function(){var e=$(this).text();$(this).prop("title",e.charAt(0).toUpperCase()+e.slice(1))}),$(".jconfirm-buttons .hotbtn").focus()},backgroundDismiss:"false",escapeKey:"cancel",content:"Are you sure, you want to delete this Transaction control?",buttons:{confirm:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){ConfirmSaveCB.close(),deleteTransactionControl(index)}},cancel:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy")}}}})}function bindGridData(transid){ShowDimmer(!0),$.ajax({type:"POST",url:"../aspx/UserAccess.aspx/BindGridData",contentType:"application/json;charset=utf-8",data:'{transid:"'+transid+'"}',dataType:"json",success:function success(data){"SessionExpiry"==data.d?parent.window.location.href="../aspx/sess.aspx":"Error"==data.d?showAlertDialog("warning",eval(callParent("lcm[346]"))):createDataTable(data.d),$("#chkSelectAll").prop("checked",!1),ShowDimmer(!1)},error:function error(response){showAlertDialog("warning",eval(callParent("lcm[346]"))),ShowDimmer(!1)}})}$(document).ready(function(){var respModal=window.parent.document.getElementById("iFrameAddResponsibility");respModal==undefined&&(respModal=window.parent.document.getElementById("iFrameEditResponsibility")),respModal.contentWindow.ShowDimmer(!1),iframe=eval(callParent("divModalHeader","id")+".getElementById('divModalHeader')"),modalHeader=eval(callParent("divModalUserAccess","id")+".getElementById('divModalUserAccess')"),$(modalHeader).find("#divModalHeader").text(eval(callParent("lcm[328]"))),$(".dialog-footer div").addClass("pull-"+("ar"!=parent.gllangType?"right":"left")),$("#save").prop({value:eval(callParent("lcm[200]")),title:eval(callParent("lcm[200]"))}),$("#btnClose").prop({value:eval(callParent("lcm[249]")),title:eval(callParent("lcm[249]"))}),$("#aViewControl").text(eval(callParent("lcm[333]"))),$("#aTransactionControl").text(eval(callParent("lcm[334]"))),$("#aDCs").text(eval(callParent("lcm[329]"))),$("#aFields").text(eval(callParent("lcm[330]"))),$("#aButtons").text(eval(callParent("lcm[331]"))),$("#aListViewButtons").text(eval(callParent("lcm[332]"))),$("#thDCName").text(eval(callParent("lcm[353]"))),$("#thFieldName").text(eval(callParent("lcm[354]"))),$("#thButtonName,#thLVButtonName").text(eval(callParent("lcm[355]"))),$(".view").text(eval(callParent("lcm[335]"))),$(".enable").text(eval(callParent("lcm[336]"))),$("#lblFieldColumn").text(eval(callParent("lcm[354]"))),$("#lblOperator").text(eval(callParent("lcm[327]"))),$("#lblValues,#lblValuesBtw").text(eval(callParent("lcm[352]"))),$("[for='tc_view_cb']").text(eval(callParent("lcm[335]"))),$("[for='tc_edit_cb']").text(eval(callParent("lcm[168]"))),$("[for='tc_delete_cb']").text(eval(callParent("lcm[248]"))),$("#btnTCOK").prop({value:eval(callParent("lcm[281]")),title:eval(callParent("lcm[281]"))}),$("#btnTCCancel").prop({value:eval(callParent("lcm[192]")),title:eval(callParent("lcm[192]"))}),$("#tcadd").attr("title",eval(callParent("lcm[314]"))),checkSuccessAxpertMsg(),$('#ViewControl input[type="checkbox"]').each(function(e){$(this).change(function(){$("#hdnFormChanges").val("true")})}),setAccessValues(),totelements=document.form1.elements.length,$("#save").click(function(){return setAccessValues(),"none"==$("#tc_flds").css("display")?(ShowDimmer(!0),!0):(showAlertDialog("warning",eval(callParent("lcm[341]"))),$("#liTransactionControl, #TransactionControl").addClass("active"),$("#liViewControl,#ViewControl").removeClass("active"),$("#tc_ok").focus(),!1)}),tabFocusEvent("save","cancel"),enableDisableChkboxes(),$("#liTransactionControl").click(function(){$("#tc_opr_cb").change(function(){"Between"==$(this).val()?$("#tc_betvalues_cb").removeAttr("disabled"):$("#tc_betvalues_cb").attr("disabled","disabled")})}),bindGridData(transid),$("#liTransactionControl, #liTransactionControl a").click(function(){$(".dataTables_scrollHeadInner, .gridData").css("width","100%")}),$("#tcadd").click(function(){$("#tblTC_wrapper,#tcadd").hide(),$("#tc_flds").show(),$("#editmode, #tc_betvalues_cb, #tc_fld_cb, #tc_opr_cb, #tc_opr_cb, #tc_values_cb").val(""),$("#tc_betvalues_cb").attr("disabled","disabled"),$("#tc_view_cb,#tc_edit_cb,#tc_delete_cb").prop("checked","checked"),actionType="add",tcindex=0})});var dt="";function createDataTable(data){var rowIndex=0;dt=$("#tblTC").DataTable({data:data,language:{search:"",searchPlaceholder:eval(callParent("lcm[287]")),zeroRecords:eval(callParent("lcm[0]")),info:"",infoEmpty:""},paging:!1,autoWidth:!1,destroy:!0,scrollY:"250px",scrollCollapse:!0,bSort:!1,columns:[{data:"Expression",width:"73%",title:eval(callParent("lcm[337]"))},{data:"View",width:"5%",title:eval(callParent("lcm[335]")),render:function(e,t,a,l){return'<input type="checkbox" disabled '+(e?"checked='true'":"")+'  value="'+$("<div/>").text(e).html()+'"/>'}},{data:"Edit",width:"5%",title:eval(callParent("lcm[168]")),render:function(e,t,a,l){return'<input type="checkbox" disabled '+(e?"checked='true'":"")+'  value="'+$("<div/>").text(e).html()+'"/>'}},{data:"Delete",width:"5%",title:eval(callParent("lcm[248]")),render:function(e,t,a,l){return'<input type="checkbox" disabled '+(e?"checked='true'":"")+'  value="'+$("<div/>").text(e).html()+'"/>'}},{data:"Expression",width:"12%",render:function render(data,type,full,meta){return'<span onclick="editTransactionControl('+rowIndex+')"  class="colorButton icon-pencil tc-action" title="'+eval(callParent("lcm[168]"))+'"></span><span onclick="confirmDeleteTransaction('+rowIndex+++')" class="colorButton icon-trash tc-action" title="'+eval(callParent("lcm[248]"))+'"></a>'}}]}),$("#tblTC tbody tr td:not(:first-child)").css("text-align","center"),$("#tblTC_filter").hide(),setTimeout(function(){dt.columns.adjust().draw()},1e3)}function tcUpdate(transid){tc_betvalues_cb=$("#tc_betvalues_cb").val(),tc_fld_cb=$("#tc_fld_cb").val(),tc_opr_cb=$("#tc_opr_cb").val(),tc_values_cb=$("#tc_values_cb").val(),tc_view_cb=$("#tc_view_cb").prop("checked"),tc_edit_cb=$("#tc_edit_cb").prop("checked"),tc_delete_cb=$("#tc_delete_cb").prop("checked"),ShowDimmer(!0),$.ajax({type:"POST",url:"../aspx/UserAccess.aspx/tcUpdate",contentType:"application/json;charset=utf-8",data:'{transid:"'+transid+'", tc_betvalues_cb:"'+tc_betvalues_cb+'", tc_fld_cb:"'+tc_fld_cb+'", tc_opr_cb:"'+tc_opr_cb+'", tc_values_cb:"'+tc_values_cb+'", tc_view_cb:"'+tc_view_cb+'", tc_edit_cb:"'+tc_edit_cb+'", tc_delete_cb:"'+tc_delete_cb+'", actionType:"'+actionType+'" , index:"'+tcindex+'"}',dataType:"json",success:function success(data){"SessionExpiry"==data.d?parent.window.location.href="../aspx/sess.aspx":"Error"==data.d?showAlertDialog("warning",eval(callParent("lcm[342]"))):(showAlertDialog("success",eval(callParent("lcm[338]"))),showTransactionExp(),createDataTable(data.d)),$("#hdnFormChanges").val("true"),ShowDimmer(!1)},error:function error(response){showAlertDialog("warning",eval(callParent("lcm[342]"))),ShowDimmer(!1)}})}