/*www.agilecloud.biz/minZIP?v=3.6*/var apiBase=parent.nodeApi,sId=parent.mainSessionId,username=parent.mainUserName,utls=parent.utl,nls_paramter=[],tstructData={},tstructTables={},tstructTableCols={},groups=[],selectedCols=[],widgetType="",mainSqlCM,tableSqlCm,updateSqlCM,codeMirrorHintObj={},updateObj={},widgetMetaData,deleteCnfrmBx,presentView="widget",dataTableApi,newWidgetData=!1,widgetTableData={},theme=eval(callParent("currentThemeColor"));theme=theme||"default",$j("#homeBuilderLink").attr("href","../App_Themes/"+theme+"/home_builder.min.css?v=4");var chartConfiguration={"3columns":{fieldsCount:3,fields:["Data Label","Xaxis Label","Value~fun"],type:["*","*","n"]},"2columns":{fieldsCount:2,fields:["Xaxis Label","Value~fun"],type:["*","n"]},"4columns":{fieldsCount:4,fields:["Data Label","Xaxis Label","Group Column","Value~fun"],type:["*","*","*","n"]}},ajaxCallObj=new AjaxCallObj,isValidPage=ajaxCallObj.isPageValid();function htmlEntity(e,a){return"encode"==e?a=(a=a.replace(/'/g,"&apos;")).replace(/"/g,"&quot;"):"decode"==e&&(a=(a=a.replace(/&apos;/g,"'")).replace(/&quot;/g,'"')),a}function makeWidgetpanel(){$j.ajax({async:!0,crossDomain:!0,url:apiBase+"getdashboardwidgets",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:{session_id:sId,utl:utls,rty:userResps,username:username,authorization:parent.nodeAccessToken,appSKey:appsessionKey},success:function(e){if(!e.status)return valSessByApi(e),!1;var a=e.querymetaData;for(i=0;i<a.length;i++)mappingdata[a[i].name]=i;if(0==e.data)$j(".leftPartODshBrd").addClass("leftPartODshBrdFull"),$j("#qlbox").addClass("quickLinksPanel"),$j("#divtaskfull").addClass("tasksPanel"),$j("#divmesfull").addClass("messagesPanel"),$j(".rightPartODshBrd").addClass("none");else{var t=e.data,s=e.data.length,r=1,l={};for(widgetGroup=[],i=0;i<s;i++){l.SUB_TYPE=t[i][mappingdata.SUB_TYPE],l.WIDGET_TYPE=t[i][mappingdata.WIDGET_TYPE],l.WIDGET_ID=t[i][mappingdata.WIDGET_ID],l.TITLE=t[i][mappingdata.TITLE],chartUid+=l.WIDGET_ID+";";var n=renameTheTabId(l.SUB_TYPE);-1==$.inArray(n,widgetGroup)&&(1==r?$(".listUlDb").append('<li class="tab col s2"><a class="active" href="#'+n+'" title="'+l.SUB_TYPE+'">'+l.SUB_TYPE+"</a></li>"):$(".listUlDb").append('<li class="tab col s2 firstTimeTab"><a href="#'+n+'" title="'+l.SUB_TYPE+'">'+l.SUB_TYPE+"</a></li>"),$("#divDetailsLinks").append('<div id="'+n+'" class="widgetgroup"></div>'),r++),$("ul.tabs").tabs(),widgetGroup.push(n),$("#divDetailsLinks #"+n).append(getPanelHtml(l.WIDGET_TYPE,l.TITLE,l.WIDGET_ID,"dashboard")),"table"!=l.WIDGET_TYPE&&"kpi"!=l.WIDGET_TYPE||(tableWidgetsCount[n]=tableWidgetsCount.hasOwnProperty(n)?tableWidgetsCount[n]+1:1)}var o=$(".listUlDb .active").attr("href").substr(1);adjustTheKpis(o),makeshowwidget(o),$("#"+o+" .wgtBtn").each(function(){chartResize($(this),"reflow")})}}})}function gradientClick(e,a){var t='<div class="gradientSelected"><span class="icon-check"></span></div>';if("colorClick"!=e){if("colorPick"==e){$(".gradientSelected").remove();var i=$("#propertySheet").data("target");$(".gradientPalletWrapper .pallet ."+a).append(t),$("#gradientPicker").attr("class","colorMe "+a+" center-align"),$("#gradientPicker a").data("color",a).text(a),updateObj.attrs={kpiColor:a},$("#"+i).find(".kpiCard").attr("class","kpiCard card colorMe "+a),$("#"+i).find(".colorMe").data("kpicolor",a)}}else{$(".gradientPalletWrapper").toggle("medium");var s=$("#gradientPicker a").data("color");$(".gradientPalletWrapper .pallet ."+s).append(t)}}function AjaxCallObj(){this.getTstructs=function(e){var a={async:!0,crossDomain:!0,url:apiBase+"getTstructs",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:{session_id:sId,utl:utls,dname:"dc1",username:username,authorization:parent.nodeAccessToken,appSKey:appsessionKey}};$.ajax(a).done(function(e){if(1==e.status){var a=e.data;if(a){for(var t=a.length,i=0;i<t;i++){var s=a[i];tstructData[s[1]]=s[0]}$("input#widgetTstructName").autocomplete({isKeyImage:!1,data:tstructData,limit:20,onAutocomplete:function(e){var a=$("input#widgetTstructName").data("key");if(a){var t=tstructTables[a];t?($("input#widgetTstrctColumn").autocomplete("destroy"),$("input#widgetTstrctColumn").autocomplete({isKeyImage:!1,data:t,limit:20,onAutocomplete:function(e){var a=$("input#widgetTstructName").data("key"),t=$("input#widgetTstrctColumn").data("key"),i=t.split("__~__")[0];t&&(tstructTableCols[a+i]?(showTheTableRemainigData(a+i),createSqlForTableData()):ajaxCallObj.getTableCols(a,t))},minLength:0}).prop("disabled",!1).focus()):ajaxCallObj.getTstructTables(a)}else showAlertDialog("warning","Please select tstruct.")},minLength:0})}}else valSessByApi(e),showAlertDialog("error",e.errMsg)}).fail(function(e,a,t){showAlertDialog("error","Unable to connect node server.")})},this.getTstructTables=function(e){var a={async:!0,crossDomain:!0,url:apiBase+"getTtable",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:{session_id:sId,utl:utls,tstruct:e,username:username,authorization:parent.nodeAccessToken,appSKey:appsessionKey}};$.ajax(a).done(function(a){if(1==a.status){var t=a.data;if(t){for(var i=t.length,s={},r=0;r<i;r++){var l=t[r];s[l[1]]=l[2]+"__~__"+l[0]}tstructTables[e]=s,$("input#widgetTstrctColumn").autocomplete({isKeyImage:!1,data:s,limit:20,onAutocomplete:function(e){var a=$("input#widgetTstrctColumn").data("key"),t=a.split("__~__")[0];if(a){var i=$("input#widgetTstructName").data("key");ajaxCallObj.getTableCols(i,a),tstructTableCols[i+t]?(showTheTableRemainigData(i+t),createSqlForTableData()):ajaxCallObj.getTableCols(i,a)}},minLength:0}).prop("disabled",!1).focus()}}else valSessByApi(a),showAlertDialog("error",a.errMsg)}).fail(function(e,a,t){showAlertDialog("error","Unable to connect node server.")})},this.getTableCols=function(e,a){a=a.split("__~__")[0];var t={async:!0,crossDomain:!0,url:apiBase+"getTableCols",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:{session_id:sId,utl:utls,tstruct:e,tablename:a,username:username,authorization:parent.nodeAccessToken,appSKey:appsessionKey}};$.ajax(t).done(function(t){if(1==t.status){var i=t.data,s={},r={};if(i){for(var l=i.length,n=0;n<l;n++){var o=i[n],d=o[1],c=o[0],p=o[2];s[d]=c+"__~__"+p,"n"===p&&(r[d]=c+"__~__"+p)}tstructTableCols[e+a]={all:s},tstructTableCols[e+a].num=r,showTheTableRemainigData(e+a),createSqlForTableData()}}else valSessByApi(t),showAlertDialog("error",t.errMsg)}).fail(function(e,a,t){showAlertDialog("error","Unable to connect node server.")})},this.getAllGroups=function(){var e={async:!0,crossDomain:!0,url:apiBase+"getWidgetGroup",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:{session_id:sId,utl:utls,username:username,authorization:parent.nodeAccessToken,appSKey:appsessionKey}};$.ajax(e).done(function(e){if(1==e.status){var a=e.data,t={};a&&(groups=a);for(var i=0;i<groups.length;i++)t[groups[i]]=groups[i];$("#widgetGroupsInp").autocomplete({isKeyImage:!1,data:t,limit:20,onAutocomplete:function(e){},minLength:0})}else valSessByApi(e),showAlertDialog("error",e.errMsg)}).fail(function(e,a,t){showAlertDialog("error","Unable to connect node server.")})},this.isValidQuery=function(e,a){var t={async:!0,crossDomain:!0,url:apiBase+"getQuery",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:{session_id:sId,utl:utls,q:e,isStriked:!0,username:username,authorization:parent.nodeAccessToken,appSKey:appsessionKey}};$.ajax(t).done(function(e){if(1==e.status)if("update"===a){$("#propertySheet").data("target").substr(8);var t=updateSqlCM.getDoc().getValue();updateObj.sql=t,$("#prpShtTxtBx").val(t),$("#customTxtAreaWrapperBg").hide(),$("#customTxtAreaWrapper").removeClass("centerMe").removeAttr("style")}else $("#isValidSQl").val("true").data("err",""),$("#wizardNextbtn").hasClass("iAmClicked")&&$("#wizardNextbtn").removeClass("iAmClicked").click();else"update"===a||($("#wizardNextbtn").hasClass("iAmClicked")&&$("#wizardNextbtn").removeClass("iAmClicked"),$("#isValidSQl").val("false").data("err",e.errMsg)),valSessByApi(e),showAlertDialog("error",e.errMsg)}).fail(function(e,a,t){showAlertDialog("error","Unable to connect node server.")})},this.getHintsForCodeMirror=function(){var e={async:!0,crossDomain:!0,url:apiBase+"getTstructs",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:{session_id:sId,utl:utls,username:username,authorization:parent.nodeAccessToken,appSKey:appsessionKey}};$.ajax(e).done(function(e){if(1==e.status){var a=e.data;a&&$.each(a,function(e,a){codeMirrorHintObj[a[0]]?codeMirrorHintObj[a[0]].push(a[1]):codeMirrorHintObj[a[0]]=[a[1]]})}else valSessByApi(e),showAlertDialog("error",e.errMsg)}).fail(function(e,a,t){showAlertDialog("error","Unable to connect node server.")})},this.getDetails=function(e,a){var t={async:!0,crossDomain:!0,url:apiBase+"getWidgets",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:{session_id:sId,utl:utls,username:username,authorization:parent.nodeAccessToken,appSKey:appsessionKey}};$.ajax(t).done(function(e){if(1==e.status){var a=e.data;if(a)for(var t=a.length,i=widgetTableData.data=[],s=widgetTableData.title={},r=widgetTableData.type={},l=0;l<t;l++){var n=a[l],o=n[0],d=n[1],c=n[2];$("#widgetPanelWrapper").append(getPanelHtml(c,o,d)),s["w"+d]=o,r["w"+d]=c,i.push({id:d,title:o,widget_type:c}),ajaxCallObj.getAxpertWidgetDetails(d)}}else valSessByApi(e),showAlertDialog("error",e.errMsg)}).fail(function(e,a,t){showAlertDialog("error","Unable to connect node server.")})},this.getAxpertWidgetDetails=function(e,a){var t={async:!0,crossDomain:!0,url:apiBase+"getwidgetdetails",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:{session_id:sId,widget_id:e,pValue:a=void 0!==a&&a?a:null,utl:utls,calledFrom:"widget",dateFormat:"",username:username,authorization:parent.nodeAccessToken,appSKey:appsessionKey}};$.ajax(t).done(function(a){var t="axWidget"+e;if(1==a.status){if(a.queryData&&0===a.queryData.length){var i=a;if(!widgetMetaData){widgetMetaData={};for(var s=i.datametaData,r=s.length,l=0;l<r;l++)widgetMetaData[s[l].name]=l}var n=i.data;if(widgetTableData.qry)var o=widgetTableData.qry,d=widgetTableData.attr,c=widgetTableData.roles;else o=widgetTableData.qry={},d=widgetTableData.attr={},c=widgetTableData.roles={};"widget"==presentView&&(newWidgetData=!1),o["w"+e]=n[widgetMetaData.SQLTEXT],d["w"+e]=n[widgetMetaData.ATTRIBUTES],c["w"+e]=n[widgetMetaData.ROLES];var p=widgetTableData.attr["w"+e];return p=p?JSON.parse(p):{},$("#"+t+" .cardContentLoader").remove(),$("#"+t+" .wrapperForWidgets").html('<div class="kpiCard"><div class="valign-wrapper" style="height: 100%;"><p class="center-align" style="width: 100%;">No data found.</p></div></div>'),void $("#"+t+" .card-content:first").css("padding",0)}newWidgetData=!0,createAxpertWidget(a,t)}else valSessByApi(a),$("#"+t+" .cardContentLoader").remove(),$("#"+t+" .wrapperForWidgets").html('<div class="reloadWidgetWrapper"><p>'+a.errMsg+'</p><button type="button" onclick="ajaxCallObj.getAxpertWidgetDetails(\''+e+'\')" class="reloadBtn cutsomColorbtn icon-refresh btn-floating waves-effect waves-light " style="margin-bottom: 10px;font-size: 23px;"></button></div>')}).fail(function(e,a,t){showAlertDialog("error","Unable to connect node server.")})},this.isPageValid=function(){var e=!1,a={appsession:{s:sId,axpapp:parent.mainProject,appsessionkey:appsessionKey,username:parent.mainUserName}},t={headers:{"content-type":"application/x-www-form-urlencoded"},url:parent.mainRestDllPath+"ASBDefineRest.dll/datasnap/rest/TASBDefineRest/VerifySessionValidity",method:"POST",async:!1,data:JSON.stringify(a)};return $.ajax(t).done(function(a){"true"===(a=JSON.parse(a)).result[0].status&&(e=!0)}),e}}function createAxpertWidget(e,a){if(enableSlick="undefined"!=typeof enableSlick&&enableSlick,!widgetMetaData){widgetMetaData={};for(var t=e.datametaData,i=t.length,s=0;s<i;s++)widgetMetaData[t[s].name]=s}var r=e.data,l=e.queryData,n=e.querymetaData,o=parseHyperLink(n,l[0]);if(widgetTableData.qry)var d=widgetTableData.qry,c=widgetTableData.attr,p=widgetTableData.roles;else d=widgetTableData.qry={},c=widgetTableData.attr={},p=widgetTableData.roles={};var u=r[widgetMetaData.WIDGET_TYPE].toLowerCase(),g=a.substr(8);if(d["w"+g]=r[widgetMetaData.SQLTEXT],c["w"+g]=r[widgetMetaData.ATTRIBUTES],p["w"+g]=r[widgetMetaData.ROLES],"widget"==presentView&&(newWidgetData=!1),"table"==u||"kpi"==u){var h=l,m=h.length,f=n,v=f.length,w=widgetTableData.attr["w"+g];w=w?JSON.parse(w):{};var b="",T="",y=r[widgetMetaData.TITLE],D=!!o&&o.i,C=w.kpiColor||"blue",k=!!w.shwKpiTtl,x="",_=checkForHiddenColumns(f);k&&(b="<div class ='kpiHeader'><span class='icon-cube kpittlIcn'></span><span class='kpiTtl'>"+y+"</span></div>",T="kpiTtlExsts");var S=v-_.length;if(1==(S=!1===D?S:S-1)&&1==m){if(1===v)var A=f[0].name,O=h[0][0];else for(s=0;s<v;s++){var I=f[s].name.toLowerCase();if(-1===I.indexOf("axphide_")&&"link"!==I){A=I;var P=s;O=h[0][s];break}}if(A=makeMeInitCap(A),O=customizeData(O),-1===A.indexOf("axphide_")&&-1===A.indexOf("axphideh_")&&(x+='<p class="head">'+A+"</p>"),!1===D)-1===A.indexOf("axphidec_")?x+='<span class="card-title"><h2 style="margin:0;">'+customizeData(O)+"</h2></span>":x+="";else{var M=getTheHyperLink(h[0][D],o,customizeData(O),P);-1===A.indexOf("axphidec_")?x+='<span class="card-title"><h2 style="margin:0;">'+M+"</h2></span>":x+=""}x+='<span class="icon-cube kpiImage"></span>',x='<div data-kpicolor = "'+C+'" class="kpiCard card colorMe '+C+'">'+b+' <div class="card-content smallKpi '+T+' white-text">'+(x+='<p class="kpiTitle">'+y+"</p>")+"</div></div>"}else if(0===_.length&&1==m){if(x+='  <table class="kpiSingleRow"><tbody>',(S=!1===D?v:v-1)>3){for(s=0;s<3;s++){if(x+="<tr>",x+="<td>",x+='<p class="head">'+(A=makeMeInitCap(A=f[s].name))+"</p>",!1===D)-1===A.indexOf("axphidec_")?x+='<p class="val">'+h[0][s]+"</p>":x+="";else{M=getTheHyperLink(h[0][D],o,h[0][s],s);-1===A.indexOf("axphidec_")?x+='<p class="val">'+M+"</p>":x+=""}if(x+="</td>",h[0][s+3]!=undefined){if(x+="<td>",x+='<p class="head">'+(A=makeMeInitCap(A=f[s+3].name))+"</p>",!1===D)-1===A.indexOf("axphidec_")?x+='<p class="val">'+h[0][s+3]+"</p>":x+="";else{M=getTheHyperLink(h[0][D],o,h[0][s+3],s+3);-1===A.indexOf("axphidec_")?x+='<p class="val">'+M+"</p>":x+=""}x+="</td>"}else x+="<td>",x+="</td>";x+="</tr>"}addEventsAfterWidgetCreated(a)}else for(s=0;s<S;s++){if(x+="<tr><td>",x+='<p class="head">'+makeMeInitCap(f[s].name)+"</p>",!1===D)x+='<p class="val">'+h[0][s]+"</p>";else x+='<p class="val">'+(M=getTheHyperLink(h[0][D],o,h[0][s],s))+"</p>";x+="</tr></td>"}x+="</tbody></table>",x='<div data-kpicolor = "'+C+'" class="kpiCard card colorMe '+C+'"> '+b+'<div class="card-content smallKpi '+T+' white-text">'+(x+='<span class="icon-cube kpiImage"></span>')+"</div></div>",addEventsAfterWidgetCreated(a)}else{var W="<thead><tr>";for(s=0;s<v;s++){A=makeMeInitCap(A=f[s].name),!1!==D&&s===D||(-1!==A.indexOf("axphide_")?W+="<th style='display:none;'></th>":-1===A.indexOf("axphideh_")?W+="<th>"+A+"</th>":W+="<th></th>")}W+="</tr></thead>";for(var j="<tbody>",L=0;L<m;L++){var E=h[L];j+="<tr>";for(s=0;s<v;s++){if(A=makeMeInitCap(A=f[s].name),!1===D||s!==D)if(-1!==A.indexOf("axphide_"))j+="<td style='display:none;'></td>";else if(!1===D)-1===A.indexOf("axphidec_")?j+="<td>"+E[s]+"</td>":j+="<td></td>";else{M=getTheHyperLink(E[D],o,E[s],s);-1===A.indexOf("axphidec_")?j+="<td>"+M+"</td>":j+="<td></td>"}}j+="</tr>"}x="<div data-kpicolor = '"+C+"' class=\"kpiCard card colorMe "+C+'">'+b+' <div class="card-content smallKpi '+T+' white-text"><div class="smallKpiTableWrapper"><table class=\'kpiTable kpiPTable\'>'+W+(j+="</tbody>")+"</table></div><span class='icon-cube kpiImage'></span></div>"}$("#"+a+" .cardContentLoader").remove(),$("#"+a+" .card-content").html(x),$("#"+a+" .card-content:first").css("padding",0),addEventsAfterWidgetCreated(a)}else if("chart"==u){$("#"+a+" .cardContentLoader").remove(),$("#"+a+" .wrapperForWidgets").addClass("maxHeight");var B=r[widgetMetaData.CHARTTYPE],K=r[widgetMetaData.TITLE],q=(a="#"+a+" .wrapperForWidgets",parseInt($(a).css("height")));$(a).is(":visible")||$(a).addClass("setChartHeight");n.length;var H=r[widgetMetaData.ATTRIBUTES];H=H?JSON.parse(H):{},createAgileChart({target:a,data:l,type:B,title:K,height:q,isCompressed:!1,attr:H,metaData:n,hyperLink:o})}}function parseHyperLink(e,a){try{for(var t=e.length,i=!1,s={},r=0;r<t;r++){if("link"===e[r].name.toLowerCase()){i=!0,s.i=r;break}}if(i){var l=a[s.i];l=l.split("~");var n=s.data={},o=l.length;for(r=0;r<o;r++){var d=l[r],c=d.indexOf("="),p={},u=d.substring(0,c).replace(/ /g,"").replace("h",""),g=d.substring(c+1);p.col=u;var h=g.indexOf("(");if(-1!==h){p.isParams=h;var m=g.substring(0,h).replace(/ /g,""),f="&"}else{p.isParams=!1;m=g,f=""}var v=m.substr(0,1),w=m.substring(1),b="";"i"===v?b="ivtoivload.aspx?ivname="+w+f:"t"===v&&(b="tstruct.aspx?transid="+w+f),p.url=b,n["col"+u]=p}return s}return!1}catch(T){return console.log("Error while parsing hyperlink : "+T),!1}}function getTheHyperLink(e,a,t,i){var s=a.data;if(i+=1,s&&s["col"+i]){var r=s["col"+i],l="";if(!1!==r.isParams){for(var n=(e=e.split("~")).length,o=0;o<n;o++){var d=e[o].trim(),c=d.indexOf("=");d.substr(0,c)==="h"+i&&(e=d)}l=(l=e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))).replace(/\^/g,"&")}return"<a class='whiteLink' href='javascript:void(0);' onclick=\"javascript:parent.LoadIframe('"+r.url+l+"');\">"+t+"</a>"}return t}function checkForHiddenColumns(e){for(var a=e.length,t=[],i=0;i<a;i++){-1!==e[i].name.toLowerCase().indexOf("axphide_")&&t.push(i)}return t}function addEventsAfterWidgetCreated(e){$("#"+e+" .smallKpiTableWrapper").first().mCustomScrollbar({axis:"yx",theme:"minimal-dark",scrollInertia:500,autoExpandScrollbar:!1,updateOnContentResize:!0})}function getPanelHtml(e,a,t,i){i=void 0!==i&&i?i:null;var s="icon-paper-plane";switch(e){case"tstruct":s="icon-register";break;case"iview":s="icon-clipboard-user";break;case"widget":s="icon-cube";break;case"Custom__html":s="icon-pencil5";break;case"Custom__sql":s="icon-cloud-database";break;case"Custom__rss":s="icon-wifi";break;case"Custom__txt":s="icon-feather3";break;case"Custom__img":s="icon-picture2";break;case"Custom__mytsk":s="icon-envelope-open";break;default:s="icon-paper-plane"}var r="",l=i?"":"l3";("table"!=e&&"kpi"!=e||(e="table"),r+='<div id="axWidget'+t+'" data-id='+t+' data-val="'+a.toLowerCase()+'" data-type="'+e+'" class="col s12 m4 '+l+' widgetWrapper">',r+='<div class="card hoverable ">',"table"!==e&&"kpi"!==e&&(r+='<div class="cardTitleWrapper">',r+='<i class="'+s+'"></i>',r+='<span class="cardTitle">'+a+"</span>","dashboard"==i&&(r+='<button type="button" title="Zoom In" class="wgtBtn closeDBLoader btn-flat waves-effect btn-floating right"><i class="icon-expand  wgtIcon" tabindex="-1"></i></button>'),r+='<div class="clear"></div>',r+="</div>"),r+='<div class="cardContentMainWrapper">',i||(r+='<button type="button" title="Delete Widget" class="cardTitleClear titleLessCardTitleClear  red waves-effect btn-floating right"><i class="icon-cross2"></i></button>'),"chart"==e||"table"==e||"kpi"==e)&&(r+='<div class="card-content '+e+" "+("table"==e||"kpi"==e?"colorMe blue":"")+'">',r+='<div class="wrapperForWidgets" '+("table"==e||"kpi"==e?'style="min-height:0px;"':"")+">",r+="</div>",r+='<div class="cardContentLoader valign-wrapper">',r+='<div class="preloader-wrapper small active">',r+='<div class="spinner-layer spinner-green-only">',r+='<div class="circle-clipper left">',r+='<div class="circle"></div>',r+="</div>",r+='<div class="gap-patch">',r+='<div class="circle"></div>',r+="</div>",r+='<div class="circle-clipper right">',r+='<div class="circle"></div>',r+="</div>",r+="</div>",r+="</div>",r+="</div>",r+="</div>");return r+="</div>",r+="</div>",r+="</div>"}function chartResize(e){$("#"+e+" .setChartHeight:visible").each(function(e,a){var t=$(this);t.removeClass("setChartHeight"),(e=t.data("highchartsChart"))&&Highcharts.charts[e].setSize(null,200)})}function makeMeInitCap(e){return e&&""!=e?-1!==(e=customizeData(e)).toLowerCase().indexOf("axphide")?e.toLowerCase():(e=e.replace(/_/g," ")).toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}):e}function customizeData(e){return e&&"string"==typeof e&&(e=e.replace(/__\^__/g,":")),e}function createGlobalVars(){var e="";try{for(var a=globalVars.split(";"),t=a.length,i=0;i<t;i++){var s=a[i].split("=")[1];s&&(e+=(s=s.replace(/"/g,"")).replace("~",":")+"~")}}catch(r){console.log("error in global vars rendering:"+r)}return e}isValidPage?makeWidgetpanel():valSessByApi({statusCode:401,errMsg:"not a valid session"}),$("input#widgetTstrctColumn,#widgetTstructName").on("keyup",function(e){if(e.which<=111&&e.which>=48||8==e.which||46==e.which){var a=$(this);a.removeData("key"),a.data("key",undefined),"widgetTstructName"===a.attr("id")?($("#widgetTableRemData").hide(),$("#widgetTstrctColumn").data("key",undefined).val("").removeClass("valSelected").removeData("key").prop("disabled",!0)):(tableSqlCm&&tableSqlCm.getDoc().setValue(" "),$("#widgetTableRemData").hide(),selectedCols=[])}});