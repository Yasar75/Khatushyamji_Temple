/*http://demo.agile-labs.com/minZIP/*//*version=3.9.1*/var totalResSelected=0;function ShowDimmer(e){DimmerCalled=!0;var t=$j("#waitDiv");if(t.length>0&&t!=undefined)if(1==e){var a=$j("#middle1",parent.document);a&&t.width(a.width()),t.show(),document.onkeydown=function(){return!1}}else t.hide(),document.onkeydown=function(){if(1==DimmerCalled)return!0};else window.opener!=undefined&&(t=$j("#waitDiv",window.opener.document)).length>0&&(1==e?t.show():t.hide());DimmerCalled=!1}function getselectedResp(){totalResSelected=0;$("#tblResponsibilities td:nth-child(1) input[type='checkbox']");var e=document.getElementById("tblResponsibilities").getElementsByTagName("input");return $("#chkSelectAll").is(":checked")?totalResSelected=1==e.length?0:"All":dt.column(0).nodes().to$().each(function(e){$(this).find("input[type='checkbox']").prop("checked")&&totalResSelected++}),0!=totalResSelected}function ChangeTheme(){var theme="";if(theme=eval(callParent("currentThemeColor")),""!=theme)$j("#themecss").attr("href","../App_Themes/"+theme+"/Stylesheet.min.css?v=23");else{var themeref="";window.opener&&(themeref=$j("#themecss",window.opener.document).attr("href"),""!=themeref&&$j("#themecss").attr("href",themeref)),parent.parent.document&&(themeref=$j("#themecss",parent.parent.document).attr("href"),""!=themeref&&$j("#themecss").attr("href",themeref)),""!=themeref&&themeref!=undefined||(themeref="../App_Themes/"+axTheme+"/Stylesheet.min.css?v=23",$j("#themecss").attr("href",themeref))}}function copyResponsibility(){return 0==getselectedResp()?(showAlertDialog("warning",eval(callParent("lcm[48]"))),!1):1!=totalResSelected?(showAlertDialog("warning",eval(callParent("lcm[49]"))),!1):(ShowDimmer(!0),!0)}function confirmDelete(){if(0==getselectedResp())return showAlertDialog("warning",eval(callParent("lcm[85]"))),!1;var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var ConfirmDelCB=$.confirm({theme:"modern",title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind"),$(".jconfirm-buttons button").each(function(){var e=$(this).text();$(this).prop("title",e.charAt(0).toUpperCase()+e.slice(1))}),$(".jconfirm-buttons .hotbtn").focus()},backgroundDismiss:"false",rtl:isRTL,escapeKey:"buttonB",content:eval(callParent("lcm[87]")),buttons:{buttonA:{text:eval(callParent("lcm[248]")),btnClass:"btn btn-primary",action:function(){disableBackDrop("destroy"),deleteResponsibilities()}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){return ConfirmDelCB.close(),disableBackDrop("destroy"),!1}}}})}function deleteResponsibilities(){var e="";dt.column(1).nodes().to$().each(function(t){$(this).siblings().find("input[type='checkbox']").prop("checked")&&(e+=$(this).find("a").text()+",")}),e=e.substr(0,e.length-1),$.ajax({type:"POST",url:"../aspx/Responsibilities.aspx/DeleteResponsibilities",contentType:"application/json;charset=utf-8",data:'{selectedResp:"'+e+'"}',dataType:"json",success:function(e){"Success"==e.d?(showAlertDialog("success","Responsibility deleted successfully"),bindGridData("")):"SessionExpiry"==e.d?parent.window.location.href="../aspx/sess.aspx":"Error"==e.d?window.location.href="../aspx/err.aspx":(showAlertDialog("warning",e.d),bindGridData("")),$("#searchclear").click(),$("#chkSelectAll").prop("checked",!1),ShowDimmer(!1)}})}$(document).ready(function(){try{AxBeforeResponsibilityReady()}catch(ex){console.log("AxBeforeResponsibilityReady Hook is failed"+ex.message)}hdnTree=document.getElementById("hdnTreeSelVal").value,actionsHtml=$("#spnResponsibilityActions").html(),bindGridData(""),$("#txtGridSearch").attr("placeholder",eval(callParent("lcm[287]"))).focus(),$("#searchclear").click(function(){$("#txtGridSearch").val("").focus(),dt.search("").columns().search("").draw(),$(this).hide()}),$("#lnkAddResponsibility").click(function(){$(this).text(),$(this).attr("data-status"),ShowDimmer(!0),parent.displayBootstrapModalDialog("Add Responsibility","md","430px",!0,"../aspx/AddEditResponsibility.aspx?action=add",!0)}).attr("title",eval(callParent("lcm[314]"))),$("#lnkDeleteResponsibility").click(function(){confirmDelete()}).attr("title",eval(callParent("lcm[248]"))),$("#ddlSearchColumns").change(function(){$("#searchclear").click()}),$("#lblHeader").text(eval(callParent("lcm[313]"))),$("#optSearchAll").text(eval(callParent("lcm[317]"))),$("#optSearchName").text(eval(callParent("lcm[224]"))),$("#optSearchAccessRights").text(eval(callParent("lcm[316]"))),gridSearchEvent();try{AxAfterResponsibilityReady()}catch(ex){console.log("AxAfterResponsibilityReady Hook  is failed"+ex.message)}});var navAction="";function BackForwardButtonClicked(e){if(!("FALSE"==enableBackButton.toString().toUpperCase()&&"back"==e||"FALSE"==enableForwardButton.toString().toUpperCase()&&"forward"==e)){navAction=e,ShowDimmer(!0);try{$j.ajax({type:"POST",url:"../WebService.asmx/NavigateBackForwardButton",contentType:"application/json;charset=utf-8",data:'{buttonName: "'+e+'"}',dataType:"json",success:function(e){SuccessButtonClicked(e.d)},failure:function(e){OnNavException(data.d)},error:function(e){OnNavException(data.d)}})}catch(t){OnNavException("Failure during the process"),ShowDimmer(!0)}}}function SuccessButtonClicked(e){if(""!=e)return window.location=e,!1}function OnNavException(e){ShowDimmer(!1),showAlertDialog("error",e._message)}function bindGridData(e){ShowDimmer(!0),$.ajax({type:"POST",url:"../aspx/Responsibilities.aspx/BindGridData",contentType:"application/json;charset=utf-8",dataType:"json",data:'{act:"'+e+'"}',success:function(e){"SessionExpiry"==e.d?parent.window.location.href="../aspx/sess.aspx":"Error"==e.d?window.location.href="../aspx/err.aspx":createDataTable(e.d),$("#chkSelectAll").prop("checked",!1),ShowDimmer(!1)},error:function(e){showAlertDialog("warning","Failed to load Responsibilities"),ShowDimmer(!1)}})}var dt="";function createDataTable(data){dt=$("#tblResponsibilities").DataTable({data:data,language:{search:"",searchPlaceholder:eval(callParent("lcm[287]")),lengthMenu:eval(callParent("lcm[288]")),zeroRecords:eval(callParent("lcm[0]")),info:eval(callParent("lcm[290]")),infoEmpty:"",infoFiltered:eval(callParent("lcm[289]")),paginate:{previous:eval(callParent("lcm[163]")),next:eval(callParent("lcm[162]"))}},autoWidth:!1,destroy:!0,scrollY:"250px",scrollCollapse:!0,order:[[1,"asc"]],columns:[{targets:0,searchable:!1,bSortable:!1,orderable:!1,className:"dt-body-center",render:function(e,t,a,n){return'<input type="checkbox" name="id[]" value="'+$("<div/>").text(e).html()+'">'},width:"4%"},{data:"Name",title:eval(callParent("lcm[224]")),width:"16%"},{data:"AccessRights",title:eval(callParent("lcm[316]")),width:"80%"}]}),dt.on("draw",function(){gridDataboundEvent()}),gridDataboundEvent()}var actionsHtml="",currentStatus="";function gridDataboundEvent(){$("#tblResponsibilities_length").css("float","right").find("select").addClass("form-control resp-dt-select"),$("#tblResponsibilities_filter").hide(),$("#tblResponsibilities_wrapper").css("top","40px"),$("#chkSelectAll").on("click",function(){var e=dt.rows({search:"applied"}).nodes();$('td input[type="checkbox"]',e).prop("checked",this.checked)});var e=$(dt.rows().nodes()).find("input[type='checkbox']");$("#tblResponsibilities tbody").on("change",'input[type="checkbox"]',function(){this.checked?$(dt.rows().nodes()).find("input[type='checkbox']:checked").length==e.length&&$("#chkSelectAll").prop("checked",!0):$("#chkSelectAll").prop("checked",!1)}),$("#chkSelectAll").on("click",function(){var e=dt.rows({search:"applied"}).nodes();$('td input[type="checkbox"]',e).prop("checked",this.checked)}),$("#tblResponsibilities_previous").hasClass("disabled")&&$("#tblResponsibilities_next").hasClass("disabled")?$("#tblResponsibilities_paginate").hide():$("#tblResponsibilities_paginate").show(),$("table tbody tr td").bind("mouseenter",function(){var e=$(this);this.offsetWidth<this.scrollWidth&&!e.attr("title")&&e.attr("title",e.text())})}function gridSearchEvent(){$("#txtGridSearch").keyup(function(){var e=parseInt($("#ddlSearchColumns").val()),t=$("#txtGridSearch").val();e<0?dt.search(t).draw():dt.columns(e).search(t).draw(),t.length>0?$("#searchclear").show():$("#searchclear").hide(),$("#chkSelectAll").attr("checked",!1),dt.column(0).nodes().to$().each(function(e){$(this).find("input[type='checkbox']").prop("checked",!1)})})}