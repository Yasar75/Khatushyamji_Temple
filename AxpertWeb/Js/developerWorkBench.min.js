/*http://demo.agile-labs.com/minZIP/*//*version=3.9.1*/var isDWB=!0,heightOfToolbar=0,dwbTitle=0,hightofmiddle1=0,isSuccessAlertInPopUp=!1,isRefreshParentOnClose=!1,mainSqlHintObj={},tstAxpFileFlds=!1;function setMiddle1Height(){var e=0;try{e=$(".left-section").outerHeight(!0)}catch(n){}var t=0;try{$(".developerbreadcrumb-panel").is(":visible")&&(t=$(".developerbreadcrumb-panel").outerHeight(!0))}catch(n){}var i=0;try{$(".developerWorkBenchToolbar").is(":visible")&&(i=$(".developerWorkBenchToolbar").outerHeight(!0))}catch(n){}var a=e-(t+i);$("#middle1").css({height:a})}function getParamsTstURL(){var e=$("#middle1").contents().find("#hdnparamValues").val(),t="";return"string"==typeof e&&e.replace(/¿/g,"♣").split("♣").forEach(function(e,i){if(e){var a=e.split("~");"tstname"==CheckSpecialCharsInStr(a[0])&&(t=CheckSpecialCharsInStr(a[1]))}}),"tstruct.aspx?act=open&transid=".concat(t,"&theMode=design&AxPop=true")}function getParamsValuefrmName(){var e=$("#middle1").contents().find("#hdnparamValues").val(),t="";return"string"==typeof e&&e.replace(/¿/g,"♣").split("♣").forEach(function(e,i){if(e){var a=e.split("~");"captitle"==CheckSpecialCharsInStr(a[0])&&(t=CheckSpecialCharsInStr(a[1]))}}),t}function LoadTstFrmDesign(){var e=getParamsTstURL(),t="",i=$j("#axpiframe",parent.document);t!=undefined&&""!=t||!i.hasClass("frameSplited")||(t="split");try{e=loadTstUrlReWrite(e)||e}catch(a){}"split"===t?(ShowDimmer(!1),callParentNew("OpenOnPropertyBase(".concat(e,")"),"function")):"popup"===t?LoadPopPage(e):"default"===t||""==t?ReloadIframe(e):"newpage"===t&&popupFullPage(e)}function LoadPopPageDesign(){loadPop=createPopupdesign(getParamsTstURL())}function createPopupdesign(e,t,i,a){iframeHtmlSrc=e,htmlContent='<div id="axpertPopupWrapper" style="width:90vw;height:80vh;top:100px;left:34px;" class="remodal" data-remodal-id="axpertPopupModal"><button data-remodal-action="close" class="remodal-close remodalCloseBtn icon-basic-remove" title="Close"></button><div style="height:100%;" id="iframeMarkUp"></div></div>',$("head").append(htmlContent);var n=$("[data-remodal-id=axpertPopupModal]:not(.remodal-is-initialized):not(.remodal-is-closed):eq(0)").remodal({closeOnOutsideClick:!0,hashTracking:!1,closeOnEscape:!0});return n&&"opened"!=n.state&&n.open(),n}function BeforeWindowClose(){if("false"!=doPageUnload)try{var e=top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/"));sessionStorage.removeItem("homeJsonObj"),sessionStorage.clear();var t=parseInt(window.localStorage.getItem("axpertLocalsession-"+e));t&&0!=t?window.localStorage.setItem("axpertLocalsession-"+e,t-1):(clearLocalStorage(["projInfo-","versionInfo-","langInfo-","hybridGUID-","compressedMode-"],!0),window.localStorage.removeItem("axpertLocalsession-"+e),ASB.WebService.SignOut())}catch(i){}else doPageUnload="true"}function createLocalSession(){var e=top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/"));if(null==window.localStorage.getItem("axpertLocalsession-"+e))window.localStorage.setItem("axpertLocalsession-"+e,0);else{var t=parseInt(window.localStorage.getItem("axpertLocalsession-"+e));window.localStorage.setItem("axpertLocalsession-"+e,t+1)}}function LoadIframeDwb(e){splitfullDwb(),isTstructSplited=!1;try{AxOnLoadIframe()}catch(i){}if(1!==e.indexOf("iviewInteractive")&&(e=e.replace("iviewInteractive","iview")),window.globalChange){if(!confirm(lcm[31]))return;SetFormDirty(!1)}else if($("#middle1")[0].contentWindow.designChanged!=undefined&&1==$("#middle1")[0].contentWindow.designChanged&&!confirm(lcm[31]))return;var t="";try{(t=AxOnLoadMiddleIframe(e))==undefined&&""==t||(t.src="../../aspx/"+e)}catch(i){}return t!==undefined&&""!==t||(document.getElementById("middle1").src=e),isTstructPopup=!1,!1}function splitfullDwb(){$(".panel-fisrt-partdwb").css({width:"100%",float:"left"}),$(".panel-second-partdwb").hide(),$("#axpiframe").hasClass("frameSplited")&&-1!=$("#middle1").attr("src").indexOf("iview.aspx")&&null!=findGetParameter("tstcaption",$("#middle1").attr("src"))&&(isTstructSplited=!0,$("#middle1").attr("src",$("#axpiframe").attr("src"))),$("#axpiframe").attr("src",""),$("#axpiframe").removeClass("frameSplited")}function assocateIframe(e){var t=!1;if(!($("#middle1").contents().find("#Panel1").length<=0)){var i=frames.middle1.window.location.href;if(-1==window.navigator.userAgent.indexOf("MSIE ")&&-1==window.navigator.userAgent.indexOf("Trident/")||(i=middle1URL||$("#middle1").attr("src").toLowerCase()),!1===$("#axpiframe").hasClass("frameSplited")){if(i==undefined||""==i)return void splitfullDwb();var a="";if(-1!=i.indexOf("tstruct.aspx")){a=(a=i.replace("tstruct","iview")).replace("transid","ivname");try{a+="&tstcaption="+$($("#middle1")[0].contentWindow.document).find("#breadcrumb-panel div.bcrumb span").text()}catch(o){}}else if(-1!=i.indexOf("listiview.aspx"))a=(a=i.replace("listiview","tstruct")).replace("tid","transid");else if(-1!=i.indexOf("iview.aspx")||-1!=i.indexOf("ivtoivload.aspx")){var n=$("#middle1").contents().find("#hdnKey").val();try{$.ajax({type:"POST",url:"../WebService.asmx/GetAssociatedTstruct",data:JSON.stringify({key:n}),cache:!1,async:!1,contentType:"application/json;charset=utf-8",dataType:"json",success:function(e){if(""!=e.d)a="tstruct.aspx?transid="+e.d;else if(-1!=i.indexOf("ivtoivload.aspx")||-1!=i.indexOf("iview.aspx")){var n=$("#middle1",parent.document).contents().find("#GridView1 a:first");if(n!=undefined&&n.length>0)if(n.data("url")!=undefined)a=n.data("url");else{var r=!1;n.attr("onclick")!=undefined?ivlink=n.attr("onclick"):n.attr("href")!=undefined&&(ivlink=n.attr("href"),r=!0);var s=ivlink.replace("javascript:","").replace(new RegExp("'","g"),"").split(",");if(s!=undefined&&""!=s&&-1!=s[0].indexOf("OpenIviewFromIv"))frames[0].window.OpenIviewFromIv(s[0].replace("OpenIviewFromIv(",""),s[1],s[2],"split"),t=!0;else if(-1==s[0].indexOf("OpenIviewFromIv")&&1==r){try{var d=s[0].substr(0,s[0].indexOf("?")),l=s[0].substr(s[0].indexOf("&")),c=s[0].substr(s[0].indexOf("=")+1,5);frames[0].window.LoadTstFrmIview(d,l,c,"split")}catch(o){}t=!0}}}}})}catch(o){}}else-1!=i.indexOf("ivtstload.aspx")&&(a=(a=i.replace("ivtstload","listiview")).replace("tstname","tid"));if(a!=undefined&&""!=a){if(-1!=a.indexOf("listiview.aspx")){a=(a=a.replace("listiview.aspx","iview.aspx")).replace("?tid","?ivname");try{a+="&tstcaption="+$($("#middle1")[0].contentWindow.document).find("#breadcrumb-panel div.bcrumb span").text()}catch(o){}}$("#divaxpiframe").css("display","block"),$("#axpiframe").css("display","block"),$("#axpiframe").addClass("frameSplited"),-1!=i.indexOf("tstruct.aspx")?($("#axpiframe").attr("src",i+"&AxSplit=true"),$("#middle1").attr("src",a+"&AxSplit=true")):$("#axpiframe").attr("src",a+"&AxSplit=true"),e&&resetSplitter("vertical")}else{if(t)return $("#divaxpiframe").css("display","block"),$("#axpiframe").css("display","block"),void resetSplitter("vertical");$("#axpiframe").attr("src","")}}}}function autoSplitWindow(){var e=frames.middle1.window.location.href;if(e!=undefined&&""!=e){-1!=e.indexOf("tstruct.aspx")&&(e.replace("tstruct","listiview").replace("transid","tid"),l)}}function OpenOnPropertyBase(e){!1===$("#axpiframe").hasClass("frameSplited")&&splitvertical(),$("#divaxpiframe").css("display","block"),$("#axpiframe").css("display","block"),-1==e.indexOf("&AxSplit")&&(e+="&AxSplit=true"),$("#axpiframe").attr("src",e)}function splitvertical(){if($(".split-btn i").hasClass("fa-times"))return $(".split-btn i").removeClass("fa-times").addClass("fa-sort"),void splitfullDwb()}function initializeSplitter(e){$(".panel-fisrt-part").customResizable("destroy"),"horizantal"==e?$(".panel-fisrt-part").customResizable({handleSelector:".splitter-horizontal",resizeWidth:!1}):$(".panel-fisrt-part").customResizable({handleSelector:".splitter",resizeHeight:!1})}function resetSplitter(e){$(".panel-fisrt-partdwb, .panel-second-partdwb").show(),"horizantal"==e?$(".panel-fisrt-partdwb,.panel-second-partdwb").css({height:"50%",width:"100%"}):($(".panel-fisrt-partdwb").css({width:"250px",position:"absolute",left:"0px"}),$(".panel-second-partdwb").css({position:"absolute",left:"250px",width:"calc(100vw - 370px)"}))}function getAppSessionKey(){var e="";return $.ajax({type:"POST",url:"../WebService.asmx/GetSession",cache:!1,async:!1,contentType:"application/json;charset=utf-8",data:JSON.stringify({key:"appsessionkey"}),dataType:"json",success:function(t){"Session does not exist"!=t.d&&(e=t.d)}}),e}function signout(e){if("undefined"!=typeof axOktaSessionInit&&"undefined"!=typeof axOktaLogOut)try{axOktaLogOut()}catch(n){}var t=!1;t="ar"==gllangType;var i=lcm[155],a=$.confirm({theme:"modern",title:i,onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",rtl:t,escapeKey:"buttonaB",content:lcm[27],buttons:{buttonA:{text:lcm[164],btnClass:"btn btn-primary",action:function(){a.close(),window.location.href=e}},buttonaB:{text:lcm[192],btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy")}}}})}$(document).ready(function(){window.onbeforeunload=BeforeWindowClose,createLocalSession(),LoadIframeDwb("ivtoivload.aspx?ivname=Formn"),$("#developerLogout").click(function(){var e=window.location.href,t=e.substring(0,e.lastIndexOf("/"));window.location.replace(t+"/mainnew.aspx")}),$(".loadForms").click(function(){LoadIframeDwb("ivtoivload.aspx?ivname=Formn")}),$(".axwidgets").click(function(){LoadIframeDwb("PageDesigner.aspx"),$("#btn_opentstr").hide(),$(".dwbwidget").closest("li").show(),$(".developerbreadcrumbTitle").text("Page Builder")}),$(".axwizard").click(function(){LoadIframeDwb("wizardsetting_new.aspx"),$(".developerbreadcrumbTitle").text("Wizard Setting")}),$(".arrangeMenu").click(function(){LoadIframeDwb("ArrangeMenu.aspx"),$(".developerbreadcrumbTitle").text("Arrange Menu")}),$(".dbScript").click(function(){LoadIframeDwb("AxDBScript.aspx"),$(".developerbreadcrumbTitle").text("DB Console")}),$(".axpertAPI").click(function(){LoadIframeDwb("axpertAPI.aspx"),$(".developerbreadcrumbTitle").text("Axpert API")}),$("#WorkFlow").hide();var e="";$("#middle1").on("load",function(){""!=$("#middle1").contents().find(".tstivCaption").text()&&((e=getParamsValuefrmName()).length>0&&(e=" - "+e),$(".developerbreadcrumbTitle").text($("#middle1").contents().find(".tstivCaption").text()+e)),"AxDBScript.aspx"==$("#middle1").attr("src")?$(".developerWorkBenchToolbar").hide():"axpertAPI.aspx"==$("#middle1").attr("src")?$(".developerWorkBenchToolbar").hide():"wizardsetting_new.aspx"==$("#middle1").attr("src")?($(".developerWorkBenchToolbar").hide(),$(".developerbreadcrumb-panel").is(":visible")&&(dwbTitle=$(".developerbreadcrumb-panel").outerHeight(!0))):"ArrangeMenu.aspx"==$("#middle1").attr("src")?($(".developerWorkBenchToolbar").show(),$(".dwbiconsUl").hide(),$("#ArrangeMtb").show()):$("#middle1").attr("src").toLowerCase().indexOf("?ivname=flist")>-1?($(".developerWorkBenchToolbar").show(),$(".dwbiconsUl").hide(),$("#iviewListToolbar").show(),$(".developerWorkBenchToolbar").hide()):"PageDesigner.aspx"==$("#middle1").attr("src")?($(".developerWorkBenchToolbar").show(),$(".dwbiconsUl").hide(),$("#wbtb").show()):"tstruct.aspx?transid=axstc"==$("#middle1").attr("src")?($(".developerWorkBenchToolbar").show(),$(".dwbiconsUl").hide()):$("#middle1").attr("src").toLowerCase().indexOf("tstruct.aspx?transid=sect")>-1||$("#middle1").attr("src").toLowerCase().indexOf("iview.aspx?ivname=sect")>-1?$("#middle1").contents().find("#form1").attr("action").indexOf("./iview.aspx")>-1?($(".developerWorkBenchToolbar").show(),$(".dwbiconsUl").hide(),$("#htmlPagesIvToolBar").show()):($(".developerWorkBenchToolbar").show(),$(".dwbiconsUl").hide()):($(".developerWorkBenchToolbar").show(),$(".dwbiconsUl").hide(),$("#ArrangeMtb").hide(),$("#Formstb").show(),$.each($("#Formstb").children("li"),function(t,i){var a=$(i).children("a").attr("id");return"btn_opentstr"==a.trim()&&""==e?($(i).show(),!0):"btn_opentstr"!=a.trim()&&""!=e?($(i).show(),!0):void $(i).hide()}))}),getMainSqlHintObj(),$("html").on("click",".btntoolbar",function(){createPopupdesign("ToolbarManager.aspx?stype="+$(this).data("pgtype")+"&name="+$(".developerbreadcrumbTitle").text().substring($(".developerbreadcrumbTitle").text().indexOf("(")+1,$(".developerbreadcrumbTitle").text().length-1),"","85vw","85vh")})}),clearLocalStorage=function(e,t){t=t||!1;localStorage;var a=[];e=[].concat(e);for($.each(localStorage,function(e,t){a.push(e)}),i=0;i<a.length;i++){var n=a[i],o=!0;for(j=0;j<e.length;j++){var r=e[j];n.indexOf(r)>-1&&t?o=!1:n==r&&(o=!1)}o&&localStorage.removeItem(n)}},$(document).on("click",".dwbBtn",function(){var e=$(this).attr("id");$(this).text();0!=$("#middle1").contents().find("#"+e).length?$($("#middle1").contents().find("#"+e)).trigger("click"):0!=$("#middle1").contents().find("#popupIframeRemodal").contents().find("li [id='"+e+"']").length?$($("#middle1").contents().find("#popupIframeRemodal").contents().find("li [id='"+e+"']")).trigger("click"):0!=$("#middle1").contents().find('li:not([style*="display: none"])').filter(function(){return/Save/i.test($(this).text())}).length?$($("#middle1").contents().find('li:not([style*="display: none"]) a').filter(function(){return/Save/i.test($(this).text())})).trigger("click"):0!=$("#middle1").contents().find("#popupIframeRemodal").contents().find('li:not([style*="display: none"])').filter(function(){return/Save/i.test($(this).text())}).length&&$($("#middle1").contents().find("#popupIframeRemodal").contents().find('li:not([style*="display: none"]) a').filter(function(){return/Save/i.test($(this).text())})).trigger("click")});var appGlobalVarsObject={};function appGlobalObj(){_this=this,this.lcm=lcm,this._CONSTANTS=new globalConstants,this.methods={toggleCompressModeUI:function(e){_this._CONSTANTS.compressedMode?(e.addClass("compressedModeUI"),e.find("iframe").length>0&&$(e.find("iframe")).each(function(e,t){_this.methods.toggleCompressModeUI($(t.contentDocument.body))})):(e.removeClass("compressedModeUI"),e.find("iframe").length>0&&$(e.find("iframe")).each(function(e,t){_this.methods.toggleCompressModeUI($(t.contentDocument.body))}))}}}function globalConstants(){this.MALICIOUSNPUTDETECTED="Invalid input detected, Please try again.",this.isHybrid=!(!hybridGUID||""==hybridGUID),this.compressedMode=getCompressedMode()}function getCompressedMode(){var e=top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/"));return null!=window.localStorage.getItem("compressedMode-"+e)&&window.localStorage.getItem("compressedMode-"+e)!=undefined?JSON.parse(window.localStorage.getItem("compressedMode-"+e)):compressedMode}function ShowDimmer(e){DimmerCalled=!0;var t=$j("#waitDiv");if(t.length>0&&t!=undefined)if(1==e){closeParentFrame();var i=$j("#middle1",parent.document);i&&t.width(i.width()),t.show(),document.onkeydown=function(){return!1}}else t.hide(),document.onkeydown=function(){if(1==DimmerCalled)return!0};else window.opener!=undefined&&(t=$j("#waitDiv",window.opener.document)).length>0&&(1==e?t.show():t.hide());DimmerCalled=!1}function getMainSqlHintObj(){""!=SQLHintObj&&(hintObj=JSON.parse(SQLHintObj),"undefined"!=typeof hintObj.result.row&&0!=hintObj.result.row.length&&$.each(hintObj.result.row,function(e,t){mainSqlHintObj[t.table_name]?mainSqlHintObj[t.table_name].push(t.column_name):mainSqlHintObj[t.table_name]=[t.column_name]}))}function SetFormDirty(e){IsFormDirty=e,window.globalChange=e,void 0!==$("#middle1")&&$("#middle1").attr("src").indexOf("tstruct.aspx")>-1&&1==tstAxpFileFlds&&(tstAxpFileFlds=!1,ASB.WebService.RemoveUnwantedAxpFiles())}function loadFrame(){"undefined"!=typeof $("#middle1")[0].contentWindow.ShowDimmer&&$("#middle1")[0].contentWindow.ShowDimmer(!1),$.LoadingOverlay("show",{fixedBackgroundSize:"135px",zIndex:99999999})}function loadFrameOnline(){"undefined"!=typeof $("#axpiframe")[0].contentWindow.ShowDimmer&&$("#axpiframe")[0].contentWindow.ShowDimmer(!1),$.LoadingOverlay("show",{fixedBackgroundSize:"135px",zIndex:99999999})}function closeFrame(){$.LoadingOverlay("hide",!0)}appGlobalVarsObject=new appGlobalObj;