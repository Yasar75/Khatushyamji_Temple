/*http://demo.agile-labs.com/minZIP/*//*version=3.8*/function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,a){return _arrayWithHoles(e)||_iterableToArrayLimit(e,a)||_unsupportedIterableToArray(e,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],i=!0,r=!1,n=undefined;try{for(var l,o=e[Symbol.iterator]();!(i=(l=o.next()).done)&&(t.push(l.value),!a||t.length!==a);i=!0);}catch(s){r=!0,n=s}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw n}}return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);a&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,i)}return t}function _objectSpread(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ownKeys(Object(t),!0).forEach(function(a){_defineProperty(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,a){if(e){if("string"==typeof e)return _arrayLikeToArray(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,a):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,i=new Array(a);t<a;t++)i[t]=e[t];return i}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),e}var structureParams={},ivTstData={},widgetClickedValue={},sqlParamsInfo={},querymetaDataInfo={},iviewInfo={},defaultPageSize=10,redisUtl=callParentNew("redisutl"),database_type="oracle",mainUserName=parent.mainUserName,maxRssFeed=10,rowMaxCount=10,shortIviewCol=5,shortIviewRows=5,chartColorCount=10,ax_language=parent.gllangType,ax_language_full=parent.gllangauge,ax_direction="ar"===ax_language?"rtl":"ltr",nls_paramter=[],mainProjName=parent.mainProject,currentUserName=parent.mainUserName,mainRestDllPath="";mainRestDllPath=parent.mainRestDllPath!=undefined?parent.mainRestDllPath:callParentNew("restdllPath");var apiBase="";apiBase=parent.nodeApi!=undefined?parent.nodeApi:callParentNew("nodeAPI");var sId="";sId=parent.mainSessionId!=undefined?parent.mainSessionId:callParentNew("sid");var utls="";if(utls=parent.utl!=undefined?parent.utl:callParentNew("utl"),parent.userResp!=undefined)var userResps=parent.userResp;else userResps=callParentNew("userResps");if(parent.AxUserRoles!=undefined)var userroles=parent.AxUserRoles;else userroles=callParentNew("userroles");var dummytstructText=eval(callParent("lcm[119]")),widgetMetaData,jsonMetaData,globalVarsKeyValueObject=createGlobalVars({keyValObj:!0}),isMobile=isMobileDevice();isMobile&&$("body").addClass("isMobile");var chartConfiguration={"3columns":{charts:["area","line","bar","stacked-bar","column","stacked-column","stacked-percentage-column"],fieldsCount:3,fields:["Data Label","X-axis Label","Value~fun"],type:["*","*","n"]},"3columnsNumeric":{charts:["scatter-plot"],fieldsCount:3,fields:["Data Label","X-axis Data~fun","Y-axis data~fun"],type:["*","n","n"]},"2columns":{charts:["pie","semi-donut","donut"],fieldsCount:2,fields:["Xaxis Label","Value~fun"],type:["*","n"]},"4columns":{charts:["stacked-group-column"],fieldsCount:4,fields:["Data Label","Xaxis Label","Group Column","Value~fun"],type:["*","*","*","n"]},"4columnsNumeric":{charts:["scatter-plot-3D"],fieldsCount:4,fields:["Data Label","X-axis Data~fun","Y-axis Data~fun","Z-axis Data~fun"],type:["*","n","n","n"]}},chartTypeConfiguration=function(){var e={};for(config in chartConfiguration){chartConfiguration[config].charts.forEach(function(a){e[a]=config})}return e}(),globalMessages={invalidDecimalVal:"Please enter a valid decimal value.",invalidColWidth:"Please enter a valid column width.",noCaption:"Please enter the caption.",invalidName:"Please enter a valid name.",multipleHypParams:"Parameter name should not be duplicate.",noTypeSelected:"Please select the type.",validStructureName:"Please enter a valid structure name."};if("undefined"!=typeof initialTemplate)var presTemplateObj=initialTemplate;var inheritsFrom=function(e,a){e.prototype=Object.create(a.prototype)},primaryApiSettings=function(){var e="home";return"undefined"!=typeof isPageBuilder&&isPageBuilder&&(e="page"),{async:!0,crossDomain:!0,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:{session_id:sId,utl:utls,username:mainUserName,authorization:callParentNew("nodeAccessToken"),appSKey:appsessionKey,module:e}}},MainAjaxCalls=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getIviewData",value:function(e){var a=primaryApiSettings();a.url=apiBase+"getIview",a.data.iview=e.substr(1),a.data.noCol="3",$.ajax(a).done(function(a){if($("#"+e+"Wrapper .cardContentLoader").remove(),1==a.status){a.data;$("#"+e+"Wrapper .cardContentData").html(getDummyIviewData(a,4))}else $("#"+e+"Wrapper .card-content.iview ").css("padding","0"),$("#"+e+"Wrapper .cardContentData").html('<div class="card-content card-image imageCard"><img src="../images/builder/iview.png" /></div>'),filterErrorMessageAndShow(a)}).fail(function(e,a,t){onAjaxFailure()})}},{key:"getIviewDataNew",value:function(e){var a=e.target,t=void 0===a?"":a,i=e.calledFrom,r=e.customParams,n=void 0===r?"":r,l=e.isPagination,o=void 0!==l&&l,s=e.page,d=e.ivHid,c=t.substr(1);if("C__dynamic"===t&&(c=$("#C__dynamicWrapper").data("dwidgetid").substr(1)),"undefined"!=typeof isWebServiceCall&&"true"==isWebServiceCall){if("refreshWidget"===i)return void ajaxCallObj.getIndividualWidgetDetail({rtId:d,rwidgetId:t,rwidgetType:"iview"});var p=wsQueryData[d];if(void 0!==p){$("#"+t+"Wrapper .cardContentLoader").remove(),iviewInfo[c]||(iviewInfo[c]={});var u=iviewInfo[c];o||("dependency"===i?$("#C__dynamicWrapper .widgetFooterHoverButtons .flipNShowParams").hide():$("#".concat(t,"Wrapper .widgetFooterHoverButtons .flipNShowParams")).hide());var v=p.data,m=p.iviewmetaData;if("onParamChange"!==i&&"customParameters"!==i||delete u.dataReachedMax,o&&0===v.length)return;var f=createTableHtml({data:v,metaData:m,calledFrom:"iviewData"});if(querymetaDataInfo[t]=m.reduce(function(e,a){var t=a.name;return[].concat(_toConsumableArray(e),[t])},[]),"dependency"===i||"C__dynamic"===t)resetTheFlippedContainer({container:$("#C__dynamicWrapper")}),$("#C__dynamicWrapper .card-content").removeClass("noScroll").html('<div class="dynamicContentCard">'.concat(f,"</div>")),$("#C__dynamicWrapper .card-content .dynamicContentCard").mCustomScrollbar({axis:"yx",theme:"minimal-dark",scrollInertia:500,autoExpandScrollbar:!1,updateOnContentResize:!0}),o||$("#C__dynamicWrapper").data("dwidgetid","".concat("C__dynamic"===t?"i"+c:t)),ajaxCallObj.getIviewHyperLink({ivName:c,isDynamicWidget:!0,calledFrom:"undefined",ivData:p.sqldata,ivmetaData:p.hlmetaData});else if(resetTheFlippedContainer({container:$("#"+t+"Wrapper")}),$("#"+t+"Wrapper .cardContentData").html(f),"homeRun"===presBuiildMode){var h=o?"pagination":"";ajaxCallObj.getIviewHyperLink({ivName:c,isDynamicWidget:!1,calledFrom:h,ivData:p.sqldata,ivmetaData:p.hlmetaData})}}else filterErrorMessageAndShowWs("no data found","warning")}else{var g=primaryApiSettings();g.url=apiBase+"getIviewData";var y=iviewInfo[c];if(o){g.data.page_size=y.pageSize;var C=parseInt(y.pageNo||1);if("next"===s){if(y.dataReachedMax)return;C+=1}else{if(1===C)return;C-=1,y.dataReachedMax=!1}g.data.page_no=C}n||(n=y&&y.oldParamValues||{}),g.data.pValue=_objectSpread(_objectSpread({},globalVarsKeyValueObject),n),g.data.iv_name=c,$.ajax(g).done(function(e){if(1==e.status){$("#"+t+"Wrapper .cardContentLoader").remove(),iviewInfo[c]||(iviewInfo[c]={});var a=iviewInfo[c];if(!o){var r=e.params||[];r&&r.length?(r.forEach(function(e){sqlParamsInfo[e]||(sqlParamsInfo[e]=[]),-1===$.inArray(t,sqlParamsInfo[e])&&sqlParamsInfo[e].push(t)}),a.params=r):"dependency"===i?$("#C__dynamicWrapper .widgetFooterHoverButtons .flipNShowParams").hide():$("#".concat(t,"Wrapper .widgetFooterHoverButtons .flipNShowParams")).hide()}var n=e.data,l=e.metaData;if("onParamChange"!==i&&"customParameters"!==i||delete a.dataReachedMax,a.pageSize=null===e.pageSize?defaultPageSize:e.pageSize,a.pageNo=e.pageNo||1,o&&"next"===s&&n.length<a.pageSize&&(a.dataReachedMax=!0),o&&0===n.length)return;var d=createTableHtml({data:n,metaData:l,calledFrom:"iviewData"});if(querymetaDataInfo[t]=l.reduce(function(e,a){var t=a.name;return[].concat(_toConsumableArray(e),[t])},[]),"dependency"===i||"C__dynamic"===t)resetTheFlippedContainer({container:$("#C__dynamicWrapper")}),$("#C__dynamicWrapper .card-content").removeClass("noScroll").html('<div class="dynamicContentCard">'.concat(d,"</div>")),$("#C__dynamicWrapper .card-content .dynamicContentCard").mCustomScrollbar({axis:"yx",theme:"minimal-dark",scrollInertia:500,autoExpandScrollbar:!1,updateOnContentResize:!0}),o||$("#C__dynamicWrapper").data("dwidgetid","".concat("C__dynamic"===t?"i"+c:t)),ajaxCallObj.getIviewHyperLink({ivName:c,isDynamicWidget:!0});else if(resetTheFlippedContainer({container:$("#"+t+"Wrapper")}),$("#"+t+"Wrapper .cardContentData").html(d),"homeRun"===presBuiildMode){var p=o?"pagination":"";ajaxCallObj.getIviewHyperLink({ivName:c,calledFrom:p})}}else ajaxCallObj.getIviewData(t)}).fail(function(e,a,t){onAjaxFailure()})}}},{key:"getIviewHyperLink",value:function(e){var a=e.ivName,t=e.isDynamicWidget,i=(e.calledFrom,e.ivData),r=e.ivmetaData;if("undefined"!=typeof isWebServiceCall&&"true"==isWebServiceCall){if(iviewInfo[a]){var n=iviewInfo[a].hyperlink_params;if(n){for(var l in n){var o=n[l];createIvWidgetHyperlink({ivName:a,hyperlink:o,calledFrom:"cache",isDynamicWidget:t})}return}}if(void 0!==i){var s=i,d=r;if(s&&s.length){if(!metaDataCacher.ivHyperLink){var c=metaDataCacher.ivHyperLink={};d.forEach(function(e,a){c[e.name]=a})}iviewInfo[a]||(iviewInfo[a]={}),iviewInfo[a].hyperlink_params||(iviewInfo[a].hyperlink_params={});iviewInfo[a].hyperlink_params,metaDataCacher.ivHyperLink;s.forEach(function(e){createIvWidgetHyperlink({ivName:a,hyperlink:e,isDynamicWidget:t})})}}}else{if(iviewInfo[a]){var p=iviewInfo[a].hyperlink_params;if(p){for(var l in p){var u=p[l];createIvWidgetHyperlink({ivName:a,hyperlink:u,calledFrom:"cache",isDynamicWidget:t})}return}}var v=primaryApiSettings();v.url=apiBase+"getIviewHyperLink",v.data.iv_name=a,$.ajax(v).done(function(e){if(1==e.status){var i=e.data,r=e.metaData;if(i&&i.length){if(!metaDataCacher.ivHyperLink){var n=metaDataCacher.ivHyperLink={};r.forEach(function(e,a){n[e.name]=a})}iviewInfo[a]||(iviewInfo[a]={}),iviewInfo[a].hyperlink_params||(iviewInfo[a].hyperlink_params={});iviewInfo[a].hyperlink_params,metaDataCacher.ivHyperLink;i.forEach(function(e){createIvWidgetHyperlink({ivName:a,hyperlink:e,isDynamicWidget:t})})}}else filterErrorMessageAndShow(e)}).fail(function(e,a,t){onAjaxFailure()})}}},{key:"fireMySql",value:function(e,a,t,i,r){if("undefined"!=typeof isWebServiceCall&&"true"==isWebServiceCall){if("refreshWidget"===i)return void(a.indexOf("C__mytsk")>-1?ajaxCallObj.getIndividualWidgetDetail({rtId:r,rwidgetId:a,rwidgetType:"custom__mytsk"}):ajaxCallObj.getIndividualWidgetDetail({rtId:r,rwidgetId:a,rwidgetType:"custom__sql"}));var n=wsQueryData[r];if(void 0!==n){var l=n.data,o=n.sqlmetaData,s=homeJsonObj.jsonContent.jsonData[a];if("myTasks"==i||a.indexOf("C__mytsk")>-1)return void createMyTaskData(n,a);var d=s.dep?"-dependency":"";i!==undefined&&"prpShtUpdateSql"!==i&&"onSQLWidgetLoad"!==i||(parseSqlForParams({sql:e,pushIntoParamsInfo:!0,widgetId:a}),querymetaDataInfo[a]=o.reduce(function(e,a){var t=a.name;return[].concat(_toConsumableArray(e),[t])},[]));var c=createTableHtml({data:l,metaData:o,calledFrom:"fireSQL".concat(d)});$("#"+a+" .sqlContentCard").html(c),"homeBuild"===presBuiildMode&&isPageBuilder&&"onSQLWidgetLoad"!==i?addInitialColumnPropsForTheWidget({widgetId:a,calledFrom:i,metaData:o}):"homeRun"===presBuiildMode&&isPageBuilder&&applyColumnPropertiesForWidgets({widgetId:a})}else $("#"+a+" .sqlContentCard").html("<p>no data found</p>"),$("#"+a).addClass("errorOccured"),"undefined"!=typeof changeWidgetStatus&&changeWidgetStatus("saveFailed",a)}else{t=t||!1;var p="ssql",u=homeJsonObj.jsonContent.jsonData[a];e&&"parameterChanges"!==i||(e=u.sql),t?p="":e=validateTheSql(e);var v="";"myTasks"!=i&&(v=rowMaxCount),"homeRun"===presBuiildMode&&(v="");createGlobalVars();t&&"";var m=primaryApiSettings();m.url=apiBase+"getQuery",m.data.q=e,m.data.isEncrypted=t,m.data.rowMaxCount=v,m.data.pValue=globalVarsKeyValueObject,m.data.calledFrom=p,m.data.dateFormat=nls_paramter.nls_date_format,!u||"Custom__sql"!==u.c||"prpShtUpdateSql"===i||"Y"!==u.cwd&&!0!==u.cwd||("refreshWidget"===i&&(m.data.rwd=!0),m.data.cwd=!0,m.data.cei=parseInt(u.cei||0)||0,m.data.cwk=getTheCacheKey({widgetId:u.ctg,sql:e}),m.data.rUtl=redisUtl),$.ajax(m).done(function(t){if(1==t.status){var r=t.data,n=t.metaData;if("myTasks"==i)return void createMyTaskData(t,a);var l=u.dep?"-dependency":"";i!==undefined&&"prpShtUpdateSql"!==i&&"onSQLWidgetLoad"!==i||(parseSqlForParams({sql:e,pushIntoParamsInfo:!0,widgetId:a}),querymetaDataInfo[a]=n.reduce(function(e,a){var t=a.name;return[].concat(_toConsumableArray(e),[t])},[]));var o=createTableHtml({data:r,metaData:n,calledFrom:"fireSQL".concat(l)});$("#"+a+" .sqlContentCard").html(o),"homeBuild"===presBuiildMode&&isPageBuilder&&"onSQLWidgetLoad"!==i?addInitialColumnPropsForTheWidget({widgetId:a,calledFrom:i,metaData:n}):"homeRun"===presBuiildMode&&isPageBuilder&&applyColumnPropertiesForWidgets({widgetId:a})}else $("#"+a+" .sqlContentCard").html("<p>"+t.errMsg+"</p>"),$("#"+a).addClass("errorOccured"),"undefined"!=typeof changeWidgetStatus&&changeWidgetStatus("saveFailed",a),filterErrorMessageAndShow(t)}).fail(function(e,a,t){onAjaxFailure()})}}},{key:"getIndividualWidgetDetail",value:function(e){var a=e.rtId,t=e.rwidgetId,i=e.rwidgetType;$.ajax({type:"POST",url:"../WidgetWebService.asmx/GetIndividualWidgetDetail",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({widgetIds:a,tPageId:tempPageId,widGetType:i,ivName:t,ivPageSize:"0"}),async:!0,cache:!1,success:function(e){""!==e.d.gwdData?(wsQueryData=$.parseJSON(e.d.gwdData),"widget"===i?ajaxCallObj.getAxpertWidgetDetails({tId:t,widgetId:t.substr(6),wgHid:a}):"iview"===i?ajaxCallObj.getIviewDataNew({target:t,calledFrom:"undefined",customParams:"",isPagination:!1,page:"undefined",ivHid:a}):ajaxCallObj.fireMySql("",t,"","onSQLWidgetLoad",a)):filterErrorMessageAndShowWs("no data found","warning")},failure:function(e){onAjaxFailure()}})}},{key:"getAxpertWidgetDetails",value:function(e){var a=e.tId,t=void 0===a?"":a,i=e.widgetId,r=e.calledFrom,n=e.refreshWidget,l=void 0!==n&&n,o=e.cacheWidget,s=void 0!==o&&o,d=e.widgetSQL,c=void 0===d?"":d,p=e.cacheRefreshTime,u=void 0===p?0:p,v=e.customParams,m=void 0===v?{}:v,f=e.wgHid,h=void 0===f?"":f;if("undefined"!=typeof isWebServiceCall&&"true"==isWebServiceCall){s="Y"===s||!0===s,l="Y"===l||!0===l,i||(i=parseInt(t.substr(6)||0));var g="home";if("homeRun"===presBuiildMode&&(g="homeRun"),"widgetBuild"===presBuiildMode)var y="axWidget"+i;else y=t+"Wrapper";if("customParameters"===r&&resetTheFlippedContainer({container:$("#"+y)}),l)return void ajaxCallObj.getIndividualWidgetDetail({rtId:h,rwidgetId:t,rwidgetType:"widget"});var C=wsQueryData[h];if(void 0!==C&&"undefined"!=typeof C.data[0]){if(!widgetMetaData){widgetMetaData={};for(var b=C.datametaData,w=b.length,D=0;D<w;D++)widgetMetaData[b[D].name]=D}if("homeBuild"===presBuiildMode){var k=querymetaDataInfo[i]=[];C.sqlmetaData.forEach(function(e){var a=e.name;k.push(a)})}var x=C.data[widgetMetaData.SQLTEXT],P=[];if("dependency"!==r&&"customParameters"!==r&&(P=parseSqlForParams({sql:x,pushIntoParamsInfo:!0,widgetId:i})),"homeRun"===presBuiildMode&&isPageBuilder&&(P.length?homeJsonObj.jsonContent.jsonData[y].wParams=P:"dependency"!==r&&"customParameters"!==r&&$("#".concat(y," .widgetFooterHoverButtons .flipNShowParams")).hide()),C.sqldata&&0===C.sqldata.length&&($("#"+y+" .cardContentLoader").remove(),$("#"+y+" .cardContentData").html('<p class="center-align">No data found.</p>'),"widgetBuild"!==presBuiildMode)){homeJsonObj.jsonContent.jsonData[y].wsql=x,homeJsonObj.jsonContent.jsonData[y].wtyp=C.data[widgetMetaData.CHARTTYPE];C.data;return}"widgetBuild"===presBuiildMode?(newWidgetData=!0,$("#"+y).removeClass("errorOccured"),createMainObj(C,y,t)):createAxpertWidget(C,y,r)}else"widgetBuild"===presBuiildMode&&(createMainObj(C,y,"error"),$("#"+y).addClass("errorOccured")),"undefined"!=typeof changeWidgetStatus&&changeWidgetStatus("saveFailed",y),$("#"+y+" .cardContentLoader").remove(),$("#"+y+" .cardContentData").html('<div class="reloadWidgetWrapper"><p>No data found.</p><button type="button" onclick="ajaxCallObj.getAxpertWidgetDetails({widgetId:\''.concat(i,'\',calledFrom:\'new\'})" class="reloadBtn themeButton cutsomColorbtn icon-refresh btn-floating waves-effect waves-light " style="margin-bottom: 10px;font-size: 23px;"></button></div>'))}else{if(s="Y"===s||!0===s,l="Y"===l||!0===l,"refreshWidget"===r||s){var I=homeJsonObj.jsonDataa[t+"Wrapper"];c="homeBuild"===presBuiildMode&&isPageBuilder?I.wsql:I.sql,u=parseInt(I.cei||0)||0}i||(i=parseInt(t.substr(6)||0));createGlobalVars(),g="home";if("homeRun"===presBuiildMode&&(g="homeRun"),"widgetBuild"===presBuiildMode){g="widget",widgetTableData.apiCalledFor||(widgetTableData.apiCalledFor=[]);var T=widgetTableData.apiCalledFor;-1===$.inArray(i,T)&&T.push(i)}var S=primaryApiSettings();S.url=apiBase+"getwidgetdetails",S.data.widget_id=i,S.data.calledFrom=g,S.data.pValue=_objectSpread(_objectSpread({},globalVarsKeyValueObject),m),S.data.rowMaxCount=rowMaxCount,S.data.rwd=l,S.data.cwd=s,S.data.cei=u,S.data.cwk=getTheCacheKey({widgetId:i,sql:c}),S.data.rUtl=redisUtl,S.data.dateFormat=nls_paramter.nls_date_format,$.ajax(S).done(function(e){if("widgetBuild"===presBuiildMode)var a="axWidget"+i;else a=t+"Wrapper";if("customParameters"===r&&resetTheFlippedContainer({container:$("#"+a)}),1==e.status){if("widgetBuild"!==presBuiildMode&&404===e.statusCode)return $("#"+a+" .cardContentLoader").remove(),void $("#"+a+" .cardContentData").html('<p class="center-align">Widget not found.</p>');var n=e;if(!widgetMetaData){widgetMetaData={};for(var l=n.datametaData,o=l.length,s=0;s<o;s++)widgetMetaData[l[s].name]=s}if("homeBuild"===presBuiildMode){var d=querymetaDataInfo[i]=[];n.querymetaData.forEach(function(e){var a=e.name;d.push(a)})}var c=n.data[widgetMetaData.SQLTEXT],p=[];if("dependency"!==r&&"customParameters"!==r&&(p=parseSqlForParams({sql:c,pushIntoParamsInfo:!0,widgetId:i})),"homeRun"===presBuiildMode&&isPageBuilder&&(p.length?homeJsonObj.jsonContent.jsonData[a].wParams=p:"dependency"!==r&&"customParameters"!==r&&$("#".concat(a," .widgetFooterHoverButtons .flipNShowParams")).hide()),e.queryData&&0===e.queryData.length&&($("#"+a+" .cardContentLoader").remove(),$("#"+a+" .cardContentData").html('<p class="center-align">No data found.</p>'),"widgetBuild"!==presBuiildMode)){homeJsonObj.jsonContent.jsonData[a].wsql=c,homeJsonObj.jsonContent.jsonData[a].wtyp=n.data[widgetMetaData.CHARTTYPE];n.data;return}"widgetBuild"===presBuiildMode?(newWidgetData=!0,$("#"+a).removeClass("errorOccured"),createMainObj(e,a,t)):createAxpertWidget(e,a,r)}else"widgetBuild"===presBuiildMode&&(createMainObj(e,a,"error"),$("#"+a).addClass("errorOccured")),"undefined"!=typeof changeWidgetStatus&&changeWidgetStatus("saveFailed",a),$("#"+a+" .cardContentLoader").remove(),$("#"+a+" .cardContentData").html('<div class="reloadWidgetWrapper"><p>'.concat(e.errMsg,'</p><button type="button" onclick="ajaxCallObj.getAxpertWidgetDetails({widgetId:\'').concat(i,'\',calledFrom:\'new\'})" class="reloadBtn themeButton cutsomColorbtn icon-refresh btn-floating waves-effect waves-light " style="margin-bottom: 10px;font-size: 23px;"></button></div>')),filterErrorMessageAndShow(e)}).fail(function(e,a,t){onAjaxFailure()})}}},{key:"getTypeDetails",value:function(e){var a=e;"i"===e&&(a="i,n");var t=primaryApiSettings();t.url=apiBase+"detailprovider",t.data.pname=a,$.ajax(t).done(function(a){if(1==a.status){for(var t=a.data,i=t.length,r={},n=0;n<i;n++){var l=t[n];r[l[0]]=l[1]}ivTstData[e]=r,crateAutoCompleteFld("#ivColHypStName",r)}else filterErrorMessageAndShow(a)}).fail(function(e,a,t){onAjaxFailure()})}},{key:"getStructureParams",value:function(e){var a=primaryApiSettings();a.url=apiBase+"paramprovider",a.data.rawname=e,$.ajax(a).done(function(a){if(resetIvHyperlinks(),1==a.status){var t=a.data;if(t){var i={};$.each(t,function(e,a){i[a[1]]=a[0]}),structureParams[e]=i,crateAutoCompleteFld("#ivColHyPName0",i)}}else filterErrorMessageAndShow(a)}).fail(function(e,a,t){onAjaxFailure()})}},{key:"fireRssFeed",value:function(e,a,t){var i="";i+='<div class="carousel-item {white-text}" href="#one!">',i+='   <div class="rssImagePane {customRssImage}">',i+=' <img src="{teaserImage}">',i+=" </div>","homeBuild"===presBuiildMode?i+=' <div class="rssDetailsPane {imgAvailable}">':i+=" <div onclick=\"performDirectAction('link','{url}')\" class=\"rssDetailsPane {imgAvailable}\">",i+='<div class="positionMeDown">',i+=' <h6 class="rssFedTitle">{title}</h6>',i+=' <p class="rssFeedDesc beige-text">{shortBody}</p>',i+=' <p class="rssFeedDate">{date}</p>',i+=" </div>",i+=" </div>",i+=" </div>";var r={async:!0,crossDomain:!0,url:apiBase+"rssfeed?q="+e,method:"GET"};$.ajax(r).done(function(e){if(1==e.status){var t=e.data,r=t.length;maxRssFeed<r&&(r=maxRssFeed);for(var n="",l=0;l<r;l++){var o=t[l],s=i,d="../images/builder/rss.png";if((o=parseRssFeed(o)).origin){var c=o.image;if(c)d=c,s=parseInt(o.imageWidth)>150?(s=(s=s.replace(/{customRssImage}/,"")).replace(/{imgAvailable}/,"imgAvailable")).replace(/{white-text}/,"white-text"):s.replace(/{customRssImage}/,"customRssImage");else s=s.replace(/{customRssImage}/,"customRssImage")}else s=s.replace(/{customRssImage}/,"customRssImage");n+=s="homeRun"===presBuiildMode?s.replace(/{url}/,o.link).replace(/{teaserImage}/,d).replace(/{title}/,o.title).replace(/{shortBody}/,o.content).replace(/{date}/,o.published):s.replace(/{url}/,"javascript:void(0)").replace(/{teaserImage}/,d).replace(/{title}/,o.title).replace(/{shortBody}/,o.content).replace(/{date}/,o.published)}var p=$("#"+a+" .carousel");p.hasClass("initialized")&&p.removeClass("initialized"),""!=n?(p.addClass("corusalAdded").html(n),p.carousel({fullWidth:!0})):p.html("<p>No feed available</p>")}else $("#"+a+" .carousel").removeClass("corusalAdded").html(e.errMsg),filterErrorMessageAndShow(e)}).fail(function(e,a,t){onAjaxFailure()})}},{key:"getNLSparameter",value:function(){if("homeBuild"===presBuiildMode)ajaxCallObj.getOnLoadData();else if("homeRun"===presBuiildMode)if("undefined"!=typeof isPageBuilder&&isPageBuilder){metaDataCacher.tabData={PAGE_ID:0,TEMPLATE:2,TITLE:1};for(var e=window.location.search.substr(1).split("&"),a={pageParams:{},extraParams:{}},t=0;t<e.length;t++){var i=e[t].split("="),r=decodeURIComponent(i[0]),n=decodeURIComponent(i[1]);n=n.replace(/\+/g," ").replace(/&#43/g,"+"),0===r.indexOf("axpage_")?a.pageParams[r]=n:(globalVarsKeyValueObject[r]=n,a.extraParams[r]=n)}var l=a.pageParams,o=l.axpage_id,s=l.axpage_title,d=l.axpage_t_id;if((o||s)&&"undefined"!=typeof isWebServiceCall&&"true"==isWebServiceCall){var c=GetHomePageWS("PAGE",s==undefined?"":s,o==undefined?"":o);if(""!==c&&""!==c.ppData){var p=$.parseJSON(c.ppData),u=$.parseJSON(c.ptData),v=$.parseJSON(c.pwData);""!==c.gwdData&&(wsQueryData=$.parseJSON(c.gwdData)),o&&s&&d?(homeJsonObj.jsonContent.pageData=_defineProperty({},o,{tabData:[o,s,d]}),ajaxCallObj.getTabData(o,o,undefined,v),$("#HPBdesignerCanvas .title").text(s)):o||s?("undefined"!=typeof parent.templateInfo&&0!==parent.templateInfo.length||ajaxCallObj.getTmplateInfo(d,u),ajaxCallObj.getPageInfo({pageId:o,title:s,wspiData:p,cb:function(e){var a=e.pageId,t=e.pageTitle,i=e.pageTemplate,r=e.isDefault,n=void 0===r?"N":r,l=e.widgetGroups,o=void 0===l?"N":l;homeJsonObj.jsonContent.pageData=_defineProperty({},a,{tabData:[a,t,i,n,o]}),ajaxCallObj.getTabData(a,a,undefined,v),$("#HPBdesignerCanvas .title").text(t)}})):ajaxCallObj.getSavedTabs()}else filterErrorMessageAndShowWs("no data found","warning")}else o&&s&&d?(homeJsonObj.jsonContent.pageData=_defineProperty({},o,{tabData:[o,s,d]}),ajaxCallObj.getTabData(o,o),$("#HPBdesignerCanvas .title").text(s)):o||s?("undefined"!=typeof parent.templateInfo&&0!==parent.templateInfo.length||ajaxCallObj.getTmplateInfo(d),ajaxCallObj.getPageInfo({pageId:o,title:s,wspiData:"",cb:function(e){var a=e.pageId,t=e.pageTitle,i=e.pageTemplate,r=e.isDefault,n=void 0===r?"N":r,l=e.widgetGroups,o=void 0===l?"N":l;homeJsonObj.jsonContent.pageData=_defineProperty({},a,{tabData:[a,t,i,n,o]}),ajaxCallObj.getTabData(a,a),$("#HPBdesignerCanvas .title").text(t)}})):ajaxCallObj.getSavedTabs()}else ajaxCallObj.getSavedTabs(!0);else"widgetBuild"===presBuiildMode&&(ajaxCallObj.getTstructs(),ajaxCallObj.getAllGroups(),ajaxCallObj.getAllResponsibilities(),isEmptyObject(parent.mainSQLhintObj)?ajaxCallObj.getHintsForCodeMirror():codeMirrorHintObj=parent.mainSQLhintObj,ajaxCallObj.getDetails())}},{key:"isPageValid",value:function(){var e={status:!1,errMsg:""};if("undefined"!=typeof isWebServiceCall&&"true"==isWebServiceCall)return e.status=!0,e;var a={appsession:{s:sId,axpapp:parent.mainProject,appsessionkey:appsessionKey,username:mainUserName}},t={headers:{"content-type":"application/x-www-form-urlencoded"},url:mainRestDllPath+"ASBDefineRest.dll/datasnap/rest/TASBDefineRest/VerifySessionValidity",method:"POST",async:!1,data:JSON.stringify(a)};return $.ajax(t).done(function(a){"true"===(a=JSON.parse(a)).result[0].status?e.status=!0:e.errMsg=JSON.stringify(a)}).fail(function(a,t,i){e.errMsg="Internal server error. Configuration Failed."}),e}},{key:"clearRedisData",value:function(e){if(e&&e.length){var a=primaryApiSettings();a.url=apiBase+"clearkeys",a.data.rKey=JSON.stringify(e),a.data.rUtl=redisUtl,$.ajax(a).done(function(e){0==e.status&&filterErrorMessageAndShow(e)}).fail(function(e,a,t){onAjaxFailure()})}}}]),e}();function getDummyIviewData(e,a){var t="",i="",r="";if(e){var n=e.metaData,l=n.length,o=e.data,s=o.length,d=["axrowtype","rowno","axp__font","pivotghead","docid","docdate"],c=l;l=l<shortIviewCol?l:shortIviewCol,a=s<shortIviewRows?s:shortIviewRows;for(var p=0,u=[],v=0;v<c;v++){var m=n[v].name;if(0!==(m=m.toLowerCase()).indexOf("axp_")&&0!==m.indexOf("hide_")&&-1===$.inArray(m,d)){if(i+="<th>"+(m=makeMeInitCap(m))+"</th>",++p>=l)break}else u.push(v)}for(var f=0;f<a;f++){r+="<tr>";for(v=0;v<c;v++){if(-1===$.inArray(v,u))r+="<td>"+o[f][v]+"</td>"}r+="</tr>"}}else{i="<th>th1</th><th>th2</th><th>th3</th>";for(v=0;v<shortIviewRows;v++){r+="<tr>";for(f=0;f<3;f++)r+="<td>td"+v+f+"</td>";r+="</tr>"}}return t+='<table class="iviewSmallShot">',t+="<thead>",t+=i,t+="</thead>",t+="<tbody>",t+=r,t+="</tbody>",t+="</table>"}function addEventsAfterWidgetCreated(e){var a=$("#"+e+" .card-content");if(a.hasClass("widget"))a.find(".smallKpiTableWrapper").length&&a.find(".smallKpiTableWrapper").mCustomScrollbar({axis:"yx",theme:"minimal-dark",scrollInertia:500,autoExpandScrollbar:!1,updateOnContentResize:!0});else{var t=$("#"+e+" .card-content:not('.card-image,.noScroll,.rssFeedCard,.mtskContentCard')");t.data("mCS")||t.mCustomScrollbar({axis:"yx",theme:"minimal-dark",scrollInertia:500,autoExpandScrollbar:!1,updateOnContentResize:!0})}}function createAxpertWidget(e,a,t){enableSlick="undefined"!=typeof enableSlick&&enableSlick;var i=!1;if("undefined"!=typeof isWebServiceCall&&"true"==isWebServiceCall)if("widgetBuild"!==presBuiildMode){if(!widgetMetaData){widgetMetaData={};for(var r=(p=e.datametaData).length,n=0;n<r;n++)widgetMetaData[p[n].name]=n}var l=e.data[0],o=e.sqldata,s=e.sqlmetaData,d=l[widgetMetaData.WIDGET_TYPE].toLowerCase(),c=l[widgetMetaData.SQLTEXT];"homeBuild"===presBuiildMode?(homeJsonObj.jsonContent.jsonData[a].wsql=c,homeJsonObj.jsonContent.jsonData[a].wtyp=l[widgetMetaData.CHARTTYPE]):i=!!homeJsonObj.jsonContent.jsonData[a].dep;a.substr(8)}else o=e.qrData,s=e.qrMData,d=e.type.toLowerCase(),a.substr(8);else if("widgetBuild"!==presBuiildMode){if(!widgetMetaData){widgetMetaData={};var p;for(r=(p=e.datametaData).length,n=0;n<r;n++)widgetMetaData[p[n].name]=n}l=e.data,o=e.queryData,s=e.querymetaData,d=l[widgetMetaData.WIDGET_TYPE].toLowerCase(),c=l[widgetMetaData.SQLTEXT];"homeBuild"===presBuiildMode?(homeJsonObj.jsonContent.jsonData[a].wsql=c,homeJsonObj.jsonContent.jsonData[a].wtyp=l[widgetMetaData.CHARTTYPE]):i=!!homeJsonObj.jsonContent.jsonData[a].dep;a.substr(8)}else o=e.qrData,s=e.qrMData,d=e.type.toLowerCase(),a.substr(8);var u=parseHyperLink(s,o[0]);if("table"==d||"kpi"==d){var v=o,m=v.length,f=s,h=f.length;if("widgetBuild"===presBuiildMode)var g=e.attr,y=(g=g?JSON.parse(g):{}).kpiColor||"blue",C=!!g.shwKpiTtl;else y="blue",C=!1;var b=!!u&&u.i,w="",D="icon-cube";"widgetBuild"!==presBuiildMode&&"addInitialDataCall"!=t&&(y=homeJsonObj.jsonDataa[a].kpiColor||"blue",D=homeJsonObj.jsonDataa[a].ic||"icon-cube");var k="";if(k="widgetBuild"===presBuiildMode?e.title:l[widgetMetaData.TITLE],C)w="<div class ='kpiHeader'><span class=".concat(D," kpittlIcn'></span><span class='kpiTtl'>").concat(k,"</span></div>");else if("widgetBuild"===presBuiildMode){C=!0;w="<div style='display:none;' class ='kpiHeader'><span class='".concat(D," kpittlIcn'></span><span class='kpiTtl'>").concat(k,"</span></div>")}var x="",P=checkForHiddenColumns(f),I=h-P.length;if(1==(I=!1===b?I:I-1)&&1==m){if(1===h)var T=f[0].name,S=v[0][0];else for(n=0;n<h;n++){var j=f[n].name.toLowerCase();if(-1===j.indexOf("axphide_")&&"link"!==j){T=j;var M=n;S=v[0][n];break}}if(T=makeMeInitCap(T),S=customizeData(S),-1===T.indexOf("axphide_")&&-1===T.indexOf("axphideh_")&&(x+='<p class="head">'+T+"</p>"),!1===b)-1===T.indexOf("axphidec_")?x+='<span class="card-title"><h2 class="singleKPIvalue" style="margin:0;">'+S+"</h2></span>":x+="";else{var W=getTheHyperLink(v[0][b],u,S,M);-1===T.indexOf("axphidec_")?x+='<span class="card-title"><h2 class="singleKPIvalue" style="margin:0;">'+W+"</h2></span>":x+=""}x+='<span class="'+D+" kpiImage "+("white"==y?"blue-grey-text":"")+'"></span>',x+='<p class="kpiTitle">'+k+"</p>",x='<div data-kpicolor = "'.concat(y,'" class="kpiCard card colorMe ').concat(y,'">').concat(w,'<div class="card-content ').concat(i?"dependentWidget":""," singleCellKPI smallKpi ").concat("white"==y?"black-text":"white-text",'">').concat(x,"</div></div>")}else if(0===P.length&&1==m){if(x+='  <table class="'.concat(i?"dependentWidget":"",' kpiSingleRow"><tbody>'),(I=!1===b?h:h-1)>3){for(n=0;n<3;n++){if(x+="<tr>",x+="<td>",x+='<p class="head">'+(T=makeMeInitCap(T=f[n].name))+"</p>",!1===b)-1===T.indexOf("axphidec_")?x+='<p class="val">'+customizeData(v[0][n])+"</p>":x+="";else{W=getTheHyperLink(v[0][b],u,customizeData(v[0][n]),n);-1===T.indexOf("axphidec_")?x+='<p class="val">'+W+"</p>":x+=""}if(x+="</td>",v[0][n+3]!=undefined){if(x+="<td>",x+='<p class="head">'+makeMeInitCap(f[n+3].name)+"</p>",T=f[n+3].name,!1===b)-1===T.indexOf("axphidec_")?x+='<p class="val">'+customizeData(v[0][n+3])+"</p>":x+="";else{W=getTheHyperLink(v[0][b],u,customizeData(v[0][n+3]),n+3);-1===T.indexOf("axphidec_")?x+='<p class="val">'+W+"</p>":x+=""}x+="</td>"}else x+="<td>",x+="</td>";x+="</tr>"}addEventsAfterWidgetCreated(a)}else for(n=0;n<I;n++){if(x+="<tr><td>",x+='<p class="head">'+makeMeInitCap(f[n].name)+"</p>",!1===b)x+='<p class="val">'+customizeData(v[0][n])+"</p>";else x+='<p class="val">'+(W=getTheHyperLink(v[0][b],u,customizeData(v[0][n]),n))+"</p>";x+="</tr></td>"}x+="</tbody></table>",x='<div data-kpicolor = "'+y+'" class="kpiCard card colorMe '+y+'">'+w+' <div class="card-content smallKpi '+("white"==y?"black-text":"white-text")+'">'+(x+='<span class="'+D+" kpiImage "+("white"==y?"blue-grey-text hide":"")+'"></span>')+"</div></div>",addEventsAfterWidgetCreated(a)}else{var O="<thead><tr>";for(n=0;n<h;n++){T=makeMeInitCap(T=f[n].name),!1!==b&&n===b||(-1!==T.indexOf("axphide_")?O+="<th style='display:none;'></th>":-1===T.indexOf("axphideh_")?O+="<th>"+T+"</th>":O+="<th></th>")}O+="</tr></thead>";for(var A="<tbody>",B=0;B<m;B++){var _=v[B];A+="<tr>";for(n=0;n<h;n++){if(T=makeMeInitCap(T=f[n].name),!1===b||n!==b)if(-1!==T.indexOf("axphide_"))A+="<td style='display:none;'></td>";else if(!1===b)-1===T.indexOf("axphidec_")?A+="<td>"+customizeData(_[n])+"</td>":A+="<td></td>";else{W=getTheHyperLink(_[b],u,customizeData(_[n]),n);-1===T.indexOf("axphidec_")?A+="<td>"+W+"</td>":A+="<td></td>"}}A+="</tr>"}A+="</tbody>",x="<div data-kpicolor = '".concat(y,"' class=\"kpiCard card colorMe ").concat(y,'">').concat(w,'<div class="card-content smallKpi ').concat("white"==y?"black-text":"white-text",'"><div class="smallKpiTableWrapper"><table class=\'').concat(i?"dependentWidget":""," kpiTable fullKPItable kpiPTable'>").concat(O+A,"</table></div><span class='").concat(D," kpiImage ").concat("white"==y?"grey-text text-lighten-3 hide":"","'></span></div>")}$("#"+a+" .cardContentLoader").remove(),$("#"+a+" .cardContentData").addClass("maxHeight").html(x),enableSlick&&$("#"+a+" .cardContentData").find(".singleCellKPI").parents(".cardContentMainWrapper").css({"border-radius":"15px",height:"initial"}).prev(".cardTitleWrapper").hide(),$("#"+a+" .card-content:first").css("padding",0),"widgetBuild"!==presBuiildMode&&"addInitialDataCall"==t&&(homeJsonObj.updateDataInJson(a,"kpiColor","blue"),ChangePropertySheet("kpiWidgetAdded")),addEventsAfterWidgetCreated(a)}else if("chart"==d){if($("#"+a+" .cardContentLoader").remove(),$("#"+a+" .cardContentData").addClass("maxHeight"),"widgetBuild"===presBuiildMode)var H=e.cType,N=e.title,F=e.attr;else H=l[widgetMetaData.CHARTTYPE],N=l[widgetMetaData.TITLE],F=l[widgetMetaData.ATTRIBUTES];var L="#"+a+" .cardContentData";parseInt($(a).css("height"));$(a).is(":visible")||$(a).addClass("setChartHeight");s.length;F?"undefined"!=typeof(F=JSON.parse(F)).shwLgnd&&enableSlick&&(F.shwLgnd=!1):F={};var R=$("#"+a+" .card-content").outerHeight();createAgileChart({target:L,data:o,type:H,title:N,height:R,isCompressed:!0,attr:F,metaData:s,hyperLink:u})}else"iview"===d&&($("#"+a+" .cardContentLoader").remove(),$("#"+a+" .cardContentData").addClass("maxHeight").html('<img class="ivDummyImg" src="../images/builder/iview.png" alt="Iview">'));if(enableSlick){groupWidgets("kpi"==d&&void 0!==I&&1==I&&void 0!==m&&1==m?"smallkpi":d,a)}}function customizeData(e){return e&&"string"==typeof e&&(e=e.replace(/__\^__/g,":")),e}function parseHyperLink(e,a){try{for(var t=e.length,i=!1,r={},n=0;n<t;n++){if("link"===e[n].name.toLowerCase()){i=!0,r.i=n;break}}if(i){var l=a[r.i];l=l.split("~");var o=r.data={},s=l.length;for(n=0;n<s;n++){var d=l[n],c=((d=d.split("$"))[1],(d=d[0]).indexOf("=")),p={},u=d.substring(0,c).replace(/ /g,"").replace("h",""),v=d.substring(c+1);p.col=u;var m=v.indexOf("(");if(-1!==m){p.isParams=m;var f=v.substring(0,m).replace(/ /g,""),h="&"}else{p.isParams=!1;f=v,h=""}var g=f.substr(0,1),y=f.substring(1),C="";"i"===g?C="ivtoivload.aspx?ivname="+y+h:"t"===g&&(C="tstruct.aspx?transid="+y+h),p.url=C,o["col"+u]=p}return r}return!1}catch(b){return console.log("Error while parsing hyperlink : "+b),!1}}function getTheHyperLink(e,a,t,i){if("build"===agileChartsObj.mode)return t;var r=a.data;if(i+=1,r&&r["col"+i]){var n=r["col"+i],l="";if(!1!==n.isParams){for(var o=(e=e.split("~")).length,s=0;s<o;s++){var d=e[s].trim(),c=d.indexOf("=");d.substr(0,c)==="h"+i&&(e=d)}l=(l=e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))).replace(/\^/g,"&")}return"<a class='"+(enableSlick?"":"whiteLink")+"' href='javascript:void(0);' onclick=\"javascript:parent.LoadIframe('"+n.url+l+"');\">"+t+"</a>"}return t}function checkForHiddenColumns(e){for(var a=e.length,t=[],i=0;i<a;i++){-1!==e[i].name.toLowerCase().indexOf("axphide_")&&t.push(i)}return t}function parseRssFeed(e){var a=e.published;e.published=moment(a).format("MMMM Do YYYY, h:mm:ss a");try{var t=$(e.content),i=e.feed.source;e.content=t.text().substr(0,120)+"...",e.image="";for(var r=0;r<t.length;r++){var n=$(t[r]);if("img"==n[0].localName){if(parseInt(n.attr("width"))>10){e.image=n.attr("src"),e.imageWidth=n.attr("width");break}}else if(0!=n.find("img").length&&(e.imageWidth=n.find("img").attr("width"),e.imageWidth||(e.imageWidth=151),parseInt(e.imageWidth)>10)){var l=n.find("img").attr("src");0!==l.trim().indexOf("http")&&(l="https:"+l),e.image=l;break}}return-1!==i.indexOf("yahoo.com")?e.origin="yahoo":e.origin="someImageFeed",e}catch(o){return e.content=e.content.substr(0,120)+"...",e}}function makeMeInitCap(e){return e&&""!=e?-1!==(e=customizeData(e)).toLowerCase().indexOf("axphide")?e.toLowerCase():(e=e.replace(/_/g," ")).toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}):e}function createMyTaskData(e,a){"homeRun"===presBuiildMode&&(myTaskDetails=e);if('<div class="carousel-item {white-text}">','   <div class="rssImagePane {customRssImage}">',' <img src="{teaserImage}">'," </div>",' <div class="rssDetailsPane {imgAvailable}">','<div class="positionMeDown">',' <h6 class="rssFedTitle">{title}</h6>',' <p class="rssFeedDesc beige-text">{shortBody}</p>',' <p class="rssFeedDate mttskAdded">Due Date : {dueDate}</p>',' <p class="rssFeedDate mttskAdded">Created Date : {createdDate}</p>'," </div>"," </div>"," </div>",e.data){var t=e.data,i=t.length;maxRssFeed<i&&(i=maxRssFeed);for(var r="",n=0;n<i;n++){var l=t[n],o='<div class="carousel-item {white-text}">   <div class="rssImagePane {customRssImage}"> <img src="{teaserImage}"> </div> <div class="rssDetailsPane {imgAvailable}"><div class="positionMeDown"> <h6 class="rssFedTitle">{title}</h6> <p class="rssFeedDesc beige-text">{shortBody}</p> <p class="rssFeedDate mttskAdded">Due Date : {dueDate}</p> <p class="rssFeedDate mttskAdded">Created Date : {createdDate}</p> </div> </div> </div>';r+=o=o.replace(/{customRssImage}/,"customRssImage").replace(/{teaserImage}/,"../images/Builder/workflow.png").replace(/{title}/,l[0]).replace(/{shortBody}/,l[1]).replace(/{dueDate}/,l[5]).replace(/{createdDate}/,l[2])}var s=$("#"+a+" .sqlContentCard");s.hasClass("initialized")&&s.removeClass("initialized"),""!=r?(s.addClass("corusalAdded").html(r),s.carousel({fullWidth:!0})):s.html("<p>No Data Found.</p>")}else $("#"+a+" .sqlContentCard").removeClass("corusalAdded").html(e.errMsg)}function createGlobalVars(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},a=e.onlyKeys,t=e.keyValObj,i="";a?i=[]:t&&(i={});try{for(var r=globalVars.split(";"),n=r.length,l=0;l<n;l++){var o=r[l].split("=")[1];if(o)if(o=o.replace(/"/g,""),a)i.push(o.split("~")[0].trim().toLowerCase());else if(t){var s=_slicedToArray(o.split("~"),2),d=s[0],c=s[1];i[d.trim().toLowerCase()]=c.trim()}else i+=o.replace("~",":")+"~"}}catch(p){console.log("error in global vars rendering:"+p)}return i}function htmlEntity(e,a){return"encode"==e?a=(a=(a=(a=a.replace(/'/g,"&apos;")).replace(/"/g,"&quot;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"):"decode"==e&&(a=(a=(a=(a=a.replace(/&apos;/g,"'")).replace(/&quot;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">")),a}function filterErrorMessageAndShow(e,a){callParentNew("closeFrame()","function"),valSessByApi(e);var t=a||"warning",i=(e.errMsg||"no data found").toLowerCase();-1===i.indexOf("no data found")&&-1===i.indexOf("no record found")&&-1===i.indexOf("non query column")&&-1===i.indexOf("null required")&&-1===i.indexOf("required hasparams")&&showAlertDialog(t,i)}function filterErrorMessageAndShowWs(e,a){callParentNew("closeFrame()","function");var t=a||"warning",i=(e||"no data found").toLowerCase();showAlertDialog(t,i)}function testRegex(e,a){var t="";return"specialCharsOnly"===e?t=/^[^\'"~`!@#$%^&*()\-{}\[\]\\|;:><?\/.,+]*$/g:"validName"===e?t=/^[a-zA-Z0-9][a-zA-Z0-9 ,.'_-]{0,}$/:"validNameNotStartWithNumber"===e?t=/^[a-zA-Z][a-zA-Z0-9 ,.'_-]{0,}$/:"validNameWithoutSpace"===e?t=/^[a-zA-Z][a-zA-Z0-9_-]{0,}$/:"noSpecialCharactersAndNotStartingWithNumber"==e&&(t=/^[a-zA-Z][a-zA-Z0-9_]{0,}$/),""!=t&&t.test(a)}function validateTheSql(e){""!=e&&(";"===(e=e.trim()).substr(-1)&&(e=e.slice(0,-1)));return e}function makeMePositive(e,a,t){var i=(e=$(e)).val(),r=parseInt(i);a=a||0,t=t||a,(0!=r&&!r||i<a)&&e.val(t)}function isValidNumber(e,a){return a=a||0,!(isNaN(e)||e<a)}function materialModalEventsHandler(e){if("bind"===e)$(".modal-overlay").off("click.modalOutSideClck"),$(".modal-overlay").on("click.modalOutSideClck",function(e){customCloseModal()}),$(document).off("keyup.modalEscClose"),$(document).on("keyup.modalEscClose",function(e){27===e.keyCode&&customCloseModal()});else if("unbind"===e)if($(".modal-overlay").length<=1)$(document).off("keyup.modalEscClose"),$(".modal-overlay").off("click.modalOutSideClck");else{var a=$("body"),t=a.innerWidth();a.css("overflow","hidden"),a.width(t)}}function customCloseModal(){for(var e,a=$(".modal.open"),t=-1,i=a.length-1;i>=0;i--){var r=$(a[i]),n=r.data("overlayId");n&&(n=parseInt(n.substr(-1)))>t&&(t=n,e=r)}validateModalBeforeClose(e)?e.modal("close"):createConfirmBox("onWizardClose",widgetMessages.unsavedChanges)}function validateModalBeforeClose(e){return"wizardModal"!==e.attr("id")||!presWizardData.isDirty}function tabFocusEventHandler(e){var a=e.task,t=e.parentId,i=e.parentElem,r=e.loopInsideParent,n=e.notOf,l=void 0===n?"":n;if(!i&&t&&(i=$("#"+t)),"unbind"===a)return $(document).off("keydown.loopingInsideParent"+i.data("loopingkey")),void i.removeData("loopingkey");var o=Date.now(),s=i.find("a:visible,input:enabled,select:enabled,button:enabled,textarea:enabled").not("".concat(l));if(s.first().focus(),r){var d=s.first(),c=s.last();i.data("loopingkey",o),$(document).off("keydown.loopingInsideParent"+o),$(document).on("keydown.loopingInsideParent"+o,function(e){e.shiftKey||9!=e.keyCode?e.shiftKey&&9==e.keyCode&&$(document.activeElement)[0]==d[0]&&(e.preventDefault(),c.focus()):$(document.activeElement)[0]==c[0]&&(e.preventDefault(),d.focus())})}}function focusOnFrtstFld(e){var a=e.container,t=e.notOf,i=void 0===t?"":t;(a=$(a)).find("a:visible,input:enabled,select:enabled,button:enabled,textarea:enabled").not("".concat(i)).first().focus()}function getObjPassByValue(e){return Object.create(e)}function materialToolTip(e){return'<a class="themeTextColor tooltipped" data-position="bottom" data-delay="50" data-tooltip="'+e+'"><span class="icon-question-circle"></span></a>'}function redirectPage(e){e&&valSessByApi({statusCode:401,errMsg:"not a valid session"})}function parseSqlForParams(e){for(var a,t=e.sql,i=e.onlyValues,r=e.pushIntoParamsInfo,n=void 0!==r&&r,l=e.widgetId,o=/(:)\s*\w+/g,s=[];a=o.exec(t);)if(a){var d=0==(d=(d=a[0]||"").trim()).indexOf(":")?d.substring(1):d;i?s.push(globalVarsKeyValueObject[d]||""):n?(d=d.trim(),sqlParamsInfo[d]||(sqlParamsInfo[d]=[]),-1===$.inArray(l,sqlParamsInfo[d])&&sqlParamsInfo[d].push(l),s.push(d)):-1===$.inArray(d,s)&&s.push(d.trim())}return s}function getTheCacheKey(e){var a=e.widgetId,t=e.sql,i=database_type.replace(" ","").substr(0,3),r=presBuiildMode;switch(presBuiildMode){case"homeBuild":r="hbs";break;case"homeRun":r="hbp";break;default:r=""}return i+"~"+mainProjName+"~"+ax_language+"~"+r+"~"+a+"~"+parseSqlForParams({sql:t,onlyValues:!0}).join("~")}function createDependencyPopup(e){var a=[];e&&(a=homeJsonObj.jsonContent.jsonData[e].dep);var t=_slicedToArray(a[0]||["",""],2),i=t[0],r=t[1],n=$("#propertySheet").data("target"),l=homeJsonObj.jsonContent.jsonData[n],o=l.c,s="",d=[];if("widget"===o){var c=n.substring(6,n.indexOf("Wrapper"));d=l.wtyp?chartConfiguration[chartTypeConfiguration[l.wtyp]].fields||[]:querymetaDataInfo[c]||[]}else"iview"===o?d=querymetaDataInfo[l.tg]||[]:"Custom__sql"===o&&(d=querymetaDataInfo[l.ctg+"Wrapper"]||[]);d.forEach(function(e){e=e.split("~")[0],s+="<option ".concat(r===e?"selected":"",' value="').concat(e,'">').concat(e,"</option>")});var p="";for(param in sqlParamsInfo)p+="<option ".concat(i===param?"selected":"",' value="').concat(param,'">').concat(param,"</option>");var u='<div class="container" id="dependencyWidgetSelectionMain">\n        <div class="row headerRow">\n            <div class="col m10">\n                <div class="col s6">\n                    Parameter\n                </div>\n                <div class="col s6">\n                    Value\n                </div>\n            </div>\n        </div>\n        <div class="row eachParamWrapper">\n            <div class="col m10">\n                <div class="input-field col s6 slctFld">\n                    <select>\n                        <option value="" disabled selected>Choose Paramter</option>\n                        '.concat(p,'\n                    </select>\n                </div>\n                <div class="input-field col s6 slctFld">\n                    <select>\n                        <option value="" disabled selected>Choose value</option>\n                        ').concat(s,'\n                    </select>\n                </div>\n            </div>\n            <div class="col m2">\n                <button onclick="addDeleteNewRow(this,\'add\')" class="waves-effect waves-light addBtn customSmallBtn btn-flat"><span class="icon-plus"></span></button>\n                <button onclick="addDeleteNewRow(this,\'delete\')" class="waves-effect waves-light removeBtn customSmallBtn btn-flat"><span class="icon-cross2"></span></button>\n            </div>\n        </div>\n    </div>'),v=' <div id="dependencyModal" class="modal modal-fixed-footer">\n                        <div class="modal-content">\n                            <h5 style="margin:0" class="extraModelttl">Parameter Mapping</h5>\n                          '.concat(u,'\n                        </div>\n                        <div class="modal-footer">\n                        <button title="Create" onclick="createWidgetDepedency(\'').concat(n,'\')" type="button" style="" class="wizardPrevNxtBtns waves-effect btn themeButton cutsomColorbtn modal-action modal-close">Ok</button>\n                        <button style="margin-right: 4px;" onclick="" type="button" title="Cancel" class="right cancelButton waves-effect btn modal-action modal-close">Cancel</button>\n                        </div>\n                      </div>');$("body").append(v),$("#dependencyModal").modal({ready:function(e,t){a&&a.length>1&&a.forEach(function(e,a){if(0!==a){var t=$("#dependencyWidgetSelectionMain .eachParamWrapper:last");t.find(".customSmallBtn.addBtn").click(),(t=$("#dependencyWidgetSelectionMain .eachParamWrapper:last")).find("select:first").val(e[0]),t.find("select:last").val(e[1])}}),$("#dependencyWidgetSelectionMain .slctFld select").material_select()},complete:function(){$("#dependencyModal").remove()}}),$("#dependencyModal").modal("open")}function addDeleteNewRow(e,a){e=$(e);var t=$("#dependencyWidgetSelectionMain").data("index")||1;if("add"===a){var i=e.parents(".eachParamWrapper"),r=$("<div class='eachParamWrapper row'>"+i.html()+"</div>").insertAfter(i);(r=$(r)).find(".slctFld").each(function(e,a){var t=$(this),i="<select>"+t.find("select").html()+"</select>";t.html(i),t.find("select").val("").material_select()}),$("#dependencyWidgetSelectionMain").data("index",t+1)}else if("delete"===a){if(1===e.parents(".eachParamWrapper").index())return;e.parents(".eachParamWrapper").remove(),$("#dependencyWidgetSelectionMain").data("index",t-1)}}function createWidgetDepedency(e){var a=[];$("#dependencyWidgetSelectionMain .eachParamWrapper").each(function(e,t){var i=$(this),r=i.find("select:first").val(),n=i.find("select:last").val();""!==r&&null!==r&&""!==n&&null!==n&&a.push([r,n])}),homeJsonObj.updateDataInJson(e,"dep",a),$("#parameterMappingBtn").text(a.join("~")).attr("onclick","createDependencyPopup('".concat(e,"')"))}function paramChangedUpdateWidget(e){e&&("String"==typeof e&&(e=[e]),e.length&&e.forEach(function(e){var a=sqlParamsInfo[e];a&&a.forEach(function(e){"i"===e.toString().charAt(0)?ajaxCallObj.getIviewDataNew({target:e,calledFrom:"onParamChange"}):0===e.toString().indexOf("C__sql")?ajaxCallObj.fireMySql("",e,"","parameterChanges",""):ajaxCallObj.getAxpertWidgetDetails({tId:"widget"+e,widgetId:e,calledFrom:"dependency"})})}))}function openHyperLinkInDynamicWidget(e){var a=e.obj,t=void 0===a?{}:a,i=e.clickedElem,r=e.clickedWidgetTarget,n=e.event,l=e.url,o=e.calledFrom,s=$("#C__dynamicWrapper");if(s.length){var d=function(){var e="";if("i"===p&&(e={}),m&&m.length){var a=i.parents("table").find("thead tr");m.forEach(function(t){if("sqlWidget"===o)var r=t.n,n=t.v;else{var l=_slicedToArray(t,2);r=l[0],n=l[1]}var s=a.find("th[data-name='".concat(n.replace(":",""),"']")).index(),d="";-1!==s&&(d=i.find("td:eq(".concat(s,")")).text()),"recordid"===r.toLowerCase()&&(recordIdAsParam=!0),"i"===p?e[r]=d:"t"===p&&(e+="".concat(r,"=").concat(d,"&"))})}return e};if(clearDynamicWidget(),"sqlWidget"===o){var c=t.sname,p=c.charAt(0),u=c.substr(1),v="F"===t.load,m=t.p;":"===t.ssName.charAt(0)&&(p=":",u=t.ssName.substr(1))}else p=t.targetType,u=t.targetId,v=t.isNew,m=t.params;if(":"===p){var f=i.parents("table").find("thead th").filter(function(){return $(this).text().toLowerCase()==u}).index();if("-1"===f)return;var h=i.find("td:eq(".concat(f,")")).text().toString();p=h.charAt(0),u=h.substr(1)}if("widgetLink"===o){var g=_slicedToArray(l.split("?"),2),y=g[0],C=g[1];if("ivtoivload.aspx"===y){C=C.split("&");var b="",w={};C.forEach(function(e,a){if(0===a)b=e.split("=")[1];else{var t=_slicedToArray(e.split("="),2),i=t[0],r=t[1];w[i]=r}}),s.data("widgetid",b),s.data("widgettype","i"),ajaxCallObj.getIviewDataNew({target:"i"+b,calledFrom:"dependency",customParams:w})}else if(l){s.data("widgettype","t");try{s.data("widgetid",l.split("?")[1].split("&")[0].split("=")[1])}catch(T){console.log(T)}s.find(".card-content").html('<iframe id="homePageDynamicFrame" name="homePageDynamicFrame" frameborder="0" scrolling="no" class="" allowtransparency="True" height="100%" width="100%" src="'.concat(l,'"></iframe>'))}return}s.data("widgetid",u),s.data("widgettype",p);if("t"===p){var D="ivtstload.aspx?tstname=".concat(u,"&");if(D+=d(),!v&&(!m||m&&!m.length)){var k=$(n.target),x=k.parents("table").find("thead th:eq(".concat(k.index(),")")).text().toLowerCase(),P=k.text();D+="".concat(x,"=").concat(P,"&")}D+=v?"hltype=open&":"hltype=load&",D=(D+="torecid=false&").slice(0,-1),s.find(".widgetFooterHoverButtons").addClass("hide"),s.find(".card-content").html("<iframe data-called-elemnt-id='".concat(r,'\' id="homePageDynamicFrame" name="homePageDynamicFrame" frameborder="0" scrolling="no" class="" allowtransparency="True" height="100%" width="100%" src="').concat(""+D,'"></iframe>'))}else if("i"===p){s.find(".widgetFooterHoverButtons").removeClass("hide");var I=d();ajaxCallObj.getIviewDataNew({target:"i"+u,calledFrom:"dependency",customParams:I})}}}function createTableHtml(e){var a=e.data,t=e.metaData,i=e.calledFrom,r=a.length,n=t.length,l="";if("iviewData"!==i&&1==n)for(var o=0;o<r;o++){l+=customizeData(a[o][0])+"<br>"}else{var s="<thead><tr>",d=["axphide_","axrnum"],c=[];for(o=0;o<n;o++){var p=t[o].name;p=p.toLowerCase(),-1===$.inArray(p,d)&&0!==p.indexOf("axphide_")?0===p.indexOf("axphideh_")?s+="<th></th>":s+="<th data-name='"+p.toLowerCase()+"' >"+makeMeInitCap(p)+"</th>":c.push(o)}s+="</tr></thead>";var u="<tbody>";for(o=0;o<r;o++){u+="<tr>";for(var v=0;v<n;v++){if(-1===$.inArray(v,c))u+="<td>"+customizeData(a[o][v])+"</td>"}u+="</tr>"}var m="";"fireSQL-dependency"===i?m="themeTable dependentWidget sqlTable":"iviewData"!==i&&"fireSQL"!==i||(m="themeTable dependentWidget iviewTable"),l="<table class='iviewSmallShot ".concat(m,"'>").concat(s+u,"</table>")}return l}function searchTheTableData(e){var a=e.table,t=e.keyword,i=e.columnIndex,r=e.reset,n=e.ignoreCase,l=void 0===n||n;if("string"==typeof a?a="#"!==a.charAt(0)||"#"!==a.charAt(0)?$("#"+a):$(a):"object"===_typeof(a)&&(a=$(a)),"TABLE"===a[0].nodeName){if(a.find("tbody tr").show(),""===t||r)return;a.find("tbody tr").hide();var o="tbody td";i!==undefined&&""!==i&&(o+=":nth-child(".concat(parseInt(i||1),")")),o+=":".concat(l?"i":"","contains('").concat(t,"')"),a.find(o).parent("tr").show()}}function clearDynamicWidget(){$("#C__dynamicWrapper").removeData("dwidgetid")}function resetTheFlippedContainer(e){var a=e.container;a.find(".widgetINParamsCloseIcon").length&&(tabFocusEventHandler({task:"unbind",parentElem:a.find(".flipper-back")}),a.find(".flip-container").removeClass("hover"),a.removeClass("flippedBack"),a.find(".flipper-back").mCustomScrollbar("destroy"),a.find(".flipper-back").html(""))}function reduceTheMetaData(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],a=0;return e.reduce(function(e,t){return e[t.name]=a,a++,e},{})}function reloadTheWidget(e){var a=e.widgetTarget,t=$("#"+a+"Wrapper");if(t.length){var i=t.data("type");"iview"===i?ajaxCallObj.getIviewDataNew({target:a,calledFrom:"onParamChange"}):"widget"===i&&ajaxCallObj.getAxpertWidgetDetails({tId:a,calledFrom:"dependency"})}}function onAjaxFailure(){callParentNew("closeFrame()","function"),showAlertDialog("error","Internal server error. Please check your node server is running.")}function createExtraModel(e){var a=e.type,t=e.details,i=e.metaData,r=(e.calledFrom,"extraMdl"+a),n="";n+='<div id="'+r+'" class="modal modal-fixed-footer">',n+='<div class="modal-content">',n+='<h4 class="extraModelttl">{{headTiltle}}</h4>',n+="{{columnSelection}}",n+="{{body}}",n+="</div>",n+='<div class="modal-footer">',n+='<button title="Apply" onclick="applyTheModalData({{extraColAppCb}})" class="waves-effect btn themeButton cutsomColorbtn">Apply</button>',n+='<button title="Cancel" class="modal-action modal-close cancelButton waves-effect btn">Cancel</button>',n+="</div>",n+="</div>";var l="",o="",s="";if("col"===a){var d={},c="";if("widgetBuild"===presBuiildMode){var p=$(t),u=p.data("original");s="'"+r+"','"+u+"','cols'",d=presWizardData.iviews.cols[u],c=p.text()}else{var v=getActiveWidgetId();s="'".concat(r,"','").concat(v,"','cols'");var m=homeJsonObj.jsonContent.jsonData[v].cols,f=($("#modalColumnSelector").val()||i[0]||"").toLowerCase();m&&m[f]&&(d=m[f])}o=c+" Properties",l+='<div class="container1">',l+='<div class="row">',l+='<div class="col s12">',l+='<div class="row">',l+='<div class="col s12">',l+='<ul class="tabs materialTabs">',"homeBuild"!==presBuiildMode&&(l+='<li class="tab"><a class="active" href="#ivColProp">Properties</a></li>'),l+='<li class="tab"><a href="#ivColLink">Hyperlink</a></li>',l+='<li style="display:none" class="tab"><a href="#ivColCf">Conditional Format</a></li>',l+="</ul>",l+="</div>",l+='<div style="display:'.concat("homeBuild"===presBuiildMode?"none":"block",'" id="ivColProp">'),l+='<div class="row">',l+='<div class="input-field col s12 m6">',l+='<input disabled id="ivColPropName" value="'+d.name+'" class="themeMaterialInp" type="text">',l+='<label for="ivColPropName">Name</label>',l+="</div>",l+='<div class="input-field col s12 m6">';var h=d.dtype;l+="<input "+("Numeric"===h?"":"disabled")+' maxlength="10" id="ivColPropDcml" value="'+d.decimal+'" class="themeMaterialInp" type="text">',l+='<label for="ivColPropDcml">Decimal</label>',l+="</div>",l+='<div class="input-field col s12 m6">',l+='<input maxlength="50" id="ivColPropCptn" value="'+d.caption+'" class="themeMaterialInp mandatoryFld" type="text">',l+='<label for="ivColPropCptn">Caption<sup>*</sup></label>',l+="</div>",l+='<div class="input-field col s12 m6">',l+='<input maxlength="10" id="ivColPropClWdth" value="'+d.width+'" class="themeMaterialInp" type="text">',l+='<label for="ivColPropClWdth">Column Width</label>',l+="</div>",l+='<div class="input-field col s12 m6">',l+='<select id="ivColPropDtTypeSel" class="materialSelect">',l+='<option value="" disabled selected>Choose your option</option>',l+="Character"===h?'<option selected value="Character">Character</option>':'<option value="Character">Character</option>',l+="Numeric"===h?'<option selected value="Numeric">Numeric</option>':'<option value="Numeric">Numeric</option>',l+="Date/Time"===h?'<option selected value="Date/Time">Date</option>':'<option value="Date">Date</option>',l+="</select>",l+="<label>Data Type</label>",l+="</div>",l+='<div class="input-field col s12 m6">',l+='<select id="ivColPropAlign" class="materialSelect">',l+='<option value="" disabled selected>Choose your option</option>';var g=d.align;l+="Left"===g?'<option selected value="Left">Left</option>':'<option value="Left">Left</option>',l+="Right"===g?'<option selected value="Right">Right</option>':'<option value="Right">Right</option>',l+="Center"===g?'<option selected value="Center">Center</option>':'<option value="Center">Center</option>';var y="Numeric"===h?"":"display:none;";l+="</select>",l+="<label>Alignment</label>",l+="</div>",l+="</div>",l+='<div class="row" id="ivColPrpsCheckBox">',l+='<p style="'+y+'" class="ivChckBx ivColPropNumData">',l+="<input "+(M="T"===d.rtotal?"checked":"")+' type="checkbox" id="ivColRnTtl" />',l+='<label for="ivColRnTtl">Running Total</label>',l+="</p>",l+='<p style="'+y+'" class="ivChckBx ivColPropNumData">',l+="<input "+(M="T"===d.disptotal?"checked":"")+' type="checkbox" id="ivColDsTtl" />',l+='<label for="ivColDsTtl">Display Total</label>',l+="</p>",l+='<p style="'+y+'" class="ivChckBx ivColPropNumData">',l+="<input "+(M="T"===d.applycomma?"checked":"")+' type="checkbox" id="ivColAppCom" />',l+='<label for="ivColAppCom">Apply Comma</label>',l+="</p>",l+='<p class="ivChckBx">',l+="<input "+(M="T"===d.norepeat?"checked":"")+' type="checkbox" id="ivColNRpt" />',l+='<label for="ivColNRpt">No Repeat</label>',l+="</p>",l+='<p style="'+y+'" class="ivChckBx ivColPropNumData">',l+="<input "+(M="T"===d.zerooff?"checked":"")+' type="checkbox" id="ivColZrOf" />',l+='<label for="ivColZrOf">Zero Off</label>',l+="</p>",l+='<p class="ivChckBx">',l+="<input "+(M="T"===d.hidden?"checked":"")+' type="checkbox" id="ivColIsHid" />',l+='<label for="ivColIsHid">Hidden</label>',l+="</p>",l+="</div>",l+="</div>";var C="",b=!1;if("widgetBuild"===presBuiildMode){var w=presWizardData.extraData.hyperlinks;if(w){var D=w[d.name];D!==undefined&&(b=!0,C=presWizardData.iviews.hyperlinks[D])}}else"homeBuild"===presBuiildMode&&isPageBuilder&&(C=d.hyperLink)&&(b=!0);l+='<div id="ivColLink">',l+='<div class="row">',l+='<div class="input-field col s12">',l+=b?'<input maxlength="10" value='+C.hname+' id="ivColHypName" class="themeMaterialInp" type="text">':'<input maxlength="10" id="ivColHypName" class="themeMaterialInp" type="text">',l+='<label for="ivColHypName">Name</label>',l+="</div>",l+='<div class="input-field col s12 m6">',l+='<select id="ivColPropTypeSel" class="materialSelect">',l+='<option value="" disabled selected>Choose your option</option>';var k="";b&&(k=C.sname.substr(0,1)),l+="<option "+(M="i"===k?"selected":"")+' value="i">Iview</option>',l+="<option "+(M="t"===k?"selected":"")+' value="t">Tstruct</option>',l+="</select>",l+="<label>Type</label>",l+="</div>",l+='<div class="input-field col s12 m6">',l+=b?"<input data-key="+C.sname.substr(1)+' value="'+C.ssName+'" id="ivColHypStName" class="themeMaterialInp" type="text">':'<input id="ivColHypStName" class="themeMaterialInp" type="text">',l+='<label for="ivColHypStName">Structure Name</label>',l+="</div>",l+='<div class="input-field col s12 m6">',l+='<select id="ivColPropAction" class="materialSelect">',l+='<option value="" disabled>Choose your option</option>';var x="";b&&(x=C.load),l+="<option "+(M="T"===x?"selected":"")+' value="edit">Edit</option>',l+="<option "+(M="F"===x?"selected":"")+' value="new">New</option>',l+="</select>",l+="<label>Action</label>",l+="</div>";var P="F",I="";if(b&&(P=C.pop,I=C.refresh),l+='<p class="ivChckBx">',l+="<input "+(M="T"===P?"checked":"")+' type="checkbox" id="ivHypOpntp" />',l+='<label for="ivHypOpntp">Open as popup</label>',l+="</p>",l+=""===I?'<p style="display:none;" class="ivChckBx">':'<p class="ivChckBx">',l+="<input "+(M="T"===I?"checked":"")+' type="checkbox" id="ivHyprpoc" />',l+='<label for="ivHyprpoc">Refresh Parent on close</label>',l+="</p>",l+="</div>",l+='<div id="ivColHypPramWrapper" class="row">',b)0===(T=C.p).length&&(T=[{n:"",v:"",nn:"",vv:""}]);else var T=[{n:"",v:"",nn:"",vv:""}];l+=createHyperlinkParamHtml({paramData:T}),l+="</div>",l+="</div>",l+='<div id="ivColCf" class="col s12">',l+='<div class="row">',l+='<div class="cloneParent">',l+='<div class="input-field col s8">',l+='<input id="ivColHyPExp1" class="cloneChangeId themeMaterialInp" data-idkey="ivColHyPExp" type="text">',l+='<label for="ivColHyPExp1">Expression</label>',l+="</div>",l+='<div class="col s4 ivColAdDelWrapper">',l+='<button onclick="createExtraModel({type:\'font\',details:this})" class="cutsomColorbtn themeButton waves-effect waves-light btn" title="Font Settings" style="text-transform: capitalize;padding: 0 15px;line-height:0;"><span class="icon-sigma"></span></button>',l+='<button onclick="genericCloneTheRow(this,\'add\')" data-index="1" class="waves-effect addBtn waves-light btn-flat"><span class="icon-plus"></span></button>',l+='<button style="display:none" onclick="genericCloneTheRow(this,\'delete\')" data-index="1" class="waves-effect delBtn waves-light btn-flat"><span class="icon-cross2"></span></button>',l+="</div></div></div></div></div></div></div></div>"}else if("param"===a){o="Parameter Details";var S=$(t).parents(".ivEchPramWrapper").index();s="'"+r+"','"+S+"','params'",l+=getModalHTML({type:a,details:t,idOfModel:r})}else"font"===a&&(o="Font Selector",s="'"+r+"','"+t+"','font-cf'",l+=getModalHTML({type:a,details:t,idOfModel:r}));if(n=(n=(n=n.replace("{{body}}",l)).replace("{{headTiltle}}",o)).replace("{{extraColAppCb}}",s),"homeBuild"===presBuiildMode&&isPageBuilder){var j="";i&&i.length&&(j+='<div id="modelColumnChanger"><label>Column</label>\n                                    <select class="materialSelect" id="modalColumnSelector">',i.forEach(function(e){e=e.toLowerCase(),j+='<option value="'.concat(e,'">').concat(e,"</option>")}),j+="</select></div>"),n=n.replace("{{columnSelection}}",j)}else n=n.replace("{{columnSelection}}","");if("font"===a){$("#fontModelComp").html(n);var M,W=$(t).data("value");if(W)W=W.split(","),$("#fontSelect").val(W[0]),$("#fontSize").val(W[6]),$("#custom").spectrum("set",W[4]),M="t"===W[1],$("#fontBold").prop("checked",M),M="t"===W[2],$("#fontItalic").prop("checked",M),M="t"===W[3],$("#fontUdr").prop("checked",M),M="t"===W[5],$("#fontStr").prop("checked",M)}else $("#extraModelComp").html(n);if($("#"+r).modal({dismissible:!1,ready:function(e,a){tabFocusEventHandler({task:"bind",parentId:r,loopInsideParent:!0}),$("#"+r+" ul.materialTabs").tabs(),$("#ivColPropAction").val($("#ivColPropAction option[selected]").val()).material_select("destroy"),$("#ivColPropAction").material_select(),materialModalEventsHandler("bind")},complete:function(){tabFocusEventHandler({task:"unbind",parentId:r}),materialModalEventsHandler("unbind"),$("#"+r).remove()}}),$("#"+r).modal("open"),"font"===a)afterModalIsCreated({idOfModel:r,type:a});else if("col"===a){if($("#ivColPropDtTypeSel").on("change",function(e){"numeric"===$(this).val().toLowerCase()?($("#ivColPrpsCheckBox .ivColPropNumData").show(),$("#ivColPropDcml").prop("disabled",!1)):($("#ivColPrpsCheckBox .ivColPropNumData").hide(),$("#ivColPropDcml").prop("disabled",!0))}),$("#ivHypOpntp").on("change",function(e){$(this).is(":checked")?$("#ivHyprpoc").parent().show():$("#ivHyprpoc").parent().hide()}),$("#ivColPropTypeSel").on("change",function(e){if($(this).hasClass("manualTrigger")){$(this).removeClass("manualTrigger");var a=$("#ivColPropTypeSel").val(),t=$("#ivColHypStName").data("key"),i=structureParams[a+t];i&&crateAutoCompleteFld("#ivColHyPName0",i)}else $("#ivColHypStName").val("").data("key",undefined),resetIvHyperlinks();var r=$(this).val().toLowerCase(),n=ivTstData[r];n?crateAutoCompleteFld("#ivColHypStName",n):ajaxCallObj.getTypeDetails(r),"i"===r?$("#ivColPropAction").val("edit").addClass("disabled").prop("disabled",!0).material_select():$("#ivColPropAction").val("").removeClass("disabled").prop("disabled",!1).material_select()}),b){$("#ivColPropTypeSel").addClass("manualTrigger").change();var O=$("#ivColPropTypeSel").val(),A=$("#ivColHypStName").data("key"),B=structureParams[O+A];$("#ivColHypPramWrapper .cloneParent [id^='ivColHyPName']").each(function(e,a){crateAutoCompleteFld("#"+$(this).attr("id"),B)})}"homeBuild"===presBuiildMode&&isPageBuilder&&$("#modalColumnSelector").on("change",function(e){changeTheModalPopUpValues({newValue:$(this).val(),idOfModel:r})})}else"param"===a&&$("#ivPropType").on("change",function(e){"numeric"===$(this).val().toLowerCase()?$("#ivPropdcml").prop("disabled",!1):$("#ivPropdcml").prop("disabled",!0)});$("#"+r+" .materialSelect").material_select("destroy"),$("#"+r+" .materialSelect").material_select(),Materialize.updateTextFields()}function applyTheModalData(e,a,t){if(!doModalValidationsOnClose({type:t,index:a}))return!1;if("cols"===t){var i={},r=$("#ivColPropName").val();if(i.name=r,i.decimal=$("#ivColPropDcml").val()||"0",i.caption=$("#ivColPropCptn").val(),i.width=$("#ivColPropClWdth").val(),i.dtype=$("#ivColPropDtTypeSel").val(),i.align=$("#ivColPropAlign").val(),i.norepeat=$("#ivColNRpt").is(":checked")?"T":"F",i.hidden=$("#ivColIsHid").is(":checked")?"T":"F","Numeric"===i.dtype?(i.rtotal=$("#ivColRnTtl").is(":checked")?"T":"F",i.disptotal=$("#ivColDsTtl").is(":checked")?"T":"F",i.applycomma=$("#ivColAppCom").is(":checked")?"T":"F",i.zerooff=$("#ivColZrOf").is(":checked")?"T":"F"):(i.rtotal="F",i.disptotal="F",i.applycomma="F",i.zerooff="F"),""!==$("#ivColHypName").val()){var n=i.hyperLink={};n.source=i.name,n.hname=$("#ivColHypName").val(),n.sname=$("#ivColPropTypeSel").val()+$("#ivColHypStName").data("key"),n.ssName=$("#ivColHypStName").val(),n.load="edit"===$("#ivColPropAction").val()?"T":"F",n.pop=$("#ivHypOpntp").is(":checked")?"T":"F",n.refresh=$("#ivHyprpoc").is(":checked")?"T":"F";var l=i.hyperLink.p=[];$("#ivColHypPramWrapper .cloneParent").each(function(e,a){var t=$(this),i=t.find('input[id^="ivColHyPName"]'),r=t.find('input[id^="ivColHypVal"]'),n=i.data("key"),o=r.data("key");n&&o&&l.push({n:n,v:o,nn:i.val(),vv:r.val()})})}"widgetBuild"===presBuiildMode?(i.index=$("div[data-original="+a+"]").index(),createUpdateIvJsonData("cols",i,a,!1)):(homeJsonObj.jsonContent.jsonData[a].cols[r]=i,homeJsonObj.updateDataInJson(a))}else 0!==t.indexOf("font")&&"params"!==t||applyTheExtraColPropsForIview({idOfModel:e,index:a,type:t});$("#"+e).modal("close")}function doModalValidationsOnClose(e){var a=e.type,t=e.index;if("cols"===a){if(!isValidNumber($("#ivColPropDcml").val()))return $("#ivColPropDcml").focus(),showAlertDialog("warning",globalMessages.invalidDecimalVal),!1;if(!isValidNumber($("#ivColPropClWdth").val()))return $("#ivColPropClWdth").focus(),showAlertDialog("warning",globalMessages.invalidColWidth),!1;if(""===$("#ivColPropCptn").val())return showAlertDialog("warning",globalMessages.noCaption),$("#ivColPropCptn").focus(),!1;var i=$("#ivColHypName").val();if(""!==i||$("a[href='#ivColLink']").hasClass("active")){if(""===i||!testRegex("validNameWithoutSpace",i))return showAlertDialog("warning",globalMessages.invalidName),$("#ivColHypName").focus(),!1;if("widgetBuild"===presBuiildMode){t=t||"";var r=$(".ciColWrapper[data-original="+t+"]").text();if(presWizardData.extraData.hyperlinks){(t=presWizardData.extraData.hyperlinks[r])!==undefined&&(t=parseInt(t));for(var n=presWizardData.iviews.hyperlinks,l=0;l<n.length;l++){if(l!==t)if(n[l].hname.toLowerCase()===i.toLowerCase())return showAlertDialog("warning",widgetMessages.hypNameExists),$("#ivColHypName").focus(),!1}}}var o=[],s=!1;if($("#ivColHypPramWrapper .cloneParent [id^='ivColHyPName']").each(function(e,a){var t=$(this),i=t.data("key");if(i){if(-1!==$.inArray(i,o))return s=globalMessages.multipleHypParams,t.focus(),!1;o.push(i)}}),!1!==s)return showAlertDialog("warning",s),!1;if(""===$("#ivColPropTypeSel").val()||null===$("#ivColPropTypeSel").val())return showAlertDialog("warning",globalMessages.noTypeSelected),$("#ivColPropTypeSel").parent().find("input").click(),!1;if(!$("#ivColHypStName").data("key")||""===$("#ivColHypStName").val())return showAlertDialog("warning",globalMessages.validStructureName),$("#ivColHypStName").focus(),!1}}return"widgetBuild"!==presBuiildMode||doTheIviewValidations(a,t)}function changeTheModalPopUpValues(e){var a=e.newValue,t=e.idOfModel,i={};if("homeBuild"===presBuiildMode&&isPageBuilder){var r=getActiveWidgetId();i=homeJsonObj.jsonContent.jsonData[r].cols[a]||{}}if("homeBuild"===presBuiildMode&&isPageBuilder){if(resetIvHyperlinks({allData:!0}),$("#ivColPropName").val(i.name),$("#ivColPropCptn").val(i.caption),$("#ivColPropDcml").val(i.decimal),$("#ivColPropClWdth").val(i.width),$("#ivColPropDtTypeSel").val(i.dtype),$("#ivColPropAlign").val(i.align),"Numeric"===i.dtype){$("#ivColPrpsCheckBox .ivColPropNumData").show();var n=!1;n="T"===i.rtotal,$("#ivColRnTtl").prop("checked",n),n="T"===i.disptotal,$("#ivColDsTtl").prop("checked",n),n="T"===i.applycomma,$("#ivColAppCom").prop("checked",n),n="T"===i.zerooff,$("#ivColZrOf").prop("checked",n)}else $("#ivColPrpsCheckBox .ivColPropNumData").hide();isChecked="T"===i.norepeat,$("#ivColNRpt").prop("checked",isChecked),isChecked="T"===i.hidden,$("#ivColIsHid").prop("checked",isChecked);var l=i.hyperLink;if(l){$("#ivColHypName").val(l.hname);var o=l.sname;$("#ivColPropTypeSel").val(o.charAt(0)),$("#ivColHypStName").data("key",o.charAt(0)).val(l.ssName);var s="T"===l.load?"edit":"new";$("#ivColPropAction").val(s);var d="T"===l.pop;if($("#ivHypOpntp").prop("checked",d),isChecked="T"===l.refresh,$("#ivHyprpoc").prop("checked",isChecked),d?$("#ivHyprpoc").parent(".ivChckBx").show():$("#ivHyprpoc").parent(".ivChckBx").hide(),l.p){var c=createHyperlinkParamHtml({paramData:l.p});$("#ivColHypPramWrapper").html(c)}}$("#"+t+" .materialSelect").material_select("destroy"),$("#"+t+" .materialSelect").material_select(),Materialize.updateTextFields()}}function genericCloneTheRow(e,a,t,i){i=i||"cloneParent";var r=(e=$(e)).parents("."+i);if("add"===a){var n=e.data("index")+1;r.find(".addBtn").hide(),r.find(".delBtn").show();var l="<div class='"+i+"'>"+r.html()+"</div>",o=$(l).insertAfter(r);if(o.find(".cloneChangeId").each(function(e,a){var t=$(this),i=t.data("idkey");t.attr("id",i+n);var r=t.next();r&&r[0]&&"LABEL"===r[0].nodeName&&r.attr("for",i+n)}),o.find(".addBtn,.delBtn").data("index",n).show(),"ivColHyp"===t){o.find("input").val("").removeData("key").data("key",null);var s=o.find('[id^="ivColHyPName"]').removeClass("valSelected").attr("id"),d=$("#ivColPropTypeSel").val(),c=$("#ivColHypStName").data("key");crateAutoCompleteFld("#"+s,structureParams[d+c])}}else if("delete"===a){var p=r.parent();r.remove();var u=p.find("."+i);1===u.length?(p.find(".delBtn").hide(),p.find(".addBtn").show()):u.last().find(".addBtn,.delBtn").show()}}function resetIvHyperlinks(){var e=(arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}).allData;$("#ivColHypPramWrapper").html('<div class="cloneParent"><div class="input-field col s5"><input value="" id="ivColHyPName0" class="cloneChangeId themeMaterialInp" data-idkey="ivColHyPName" type="text"><label for="ivColHyPName0" class="">Parameter Name</label></div><div class="input-field col s5"><input value="" id="ivColHypVal0" class="cloneChangeId themeMaterialInp" data-idkey="ivColHypVal" type="text"><label for="ivColHypVal0">Value</label></div><div class="col s2 ivColAdDelWrapper"><button onclick="genericCloneTheRow(this,\'add\',\'ivColHyp\')" data-index="0" class="waves-effect waves-light addBtn btn-flat"><span class="icon-plus"></span></button><button style="display:none" onclick="genericCloneTheRow(this,\'delete\',\'ivColHyp\')" data-index="0" class="waves-effect waves-light delBtn btn-flat"><span class="icon-cross2"></span></button></div></div>'),e&&($("#ivColHypName,#ivColPropAction").val(""),$("#ivColHypStName").val("").data("key",undefined),$("#ivColPropTypeSel").val(""),$("#ivHypOpntp,#ivHyprpoc").prop("checked",!1),$("#ivHyprpoc").parent(".ivChckBx").hide())}function applyColumnPropertiesForWidgets(e){var a=e.widgetId,t=e.columnInfo;if(t||(t=homeJsonObj.jsonDataa[a].cols),t){var i=$("#"+a);for(column in t){if(t[column].hyperLink){var r=i.find('table thead th[data-name="'+column+'"]');i.find("tbody td:nth-child(".concat(r.index()+1,")")).addClass("hyperlinkCell")}}}}function createHyperlinkParamHtml(e){for(var a=e.paramData,t=void 0===a?[]:a,i="",r=t.length,n=0;n<r;n++){var l=t[n];i+='<div class="cloneParent">',i+='<div class="input-field col s5">',i+='<input data-key = "'+l.n+'" value="'+l.nn+'" id="ivColHyPName'+n+'" class="cloneChangeId themeMaterialInp" data-idkey="ivColHyPName" type="text">',i+='<label for="ivColHyPName'+n+'">Parameter Name</label>',i+="</div>",i+='<div class="input-field col s5">',i+='<input data-key = "'+l.v+'" value="'+l.vv+'" id="ivColHypVal'+n+'" class="cloneChangeId themeMaterialInp" data-idkey="ivColHypVal" type="text">',i+='<label for="ivColHypVal'+n+'" >Value</label>',i+="</div>",i+='<div class="col s2 ivColAdDelWrapper">',i+=r-1==n?"<button onclick=\"genericCloneTheRow(this,'add','ivColHyp')\" data-index=\""+n+'" class="waves-effect waves-light addBtn btn-flat"><span class="icon-plus"></span></button>':'<button style="display:none" onclick="genericCloneTheRow(this,\'add\',\'ivColHyp\')" data-index="'+n+'" class="waves-effect waves-light addBtn btn-flat"><span class="icon-plus"></span></button>',i+=1===r?'<button style="display:none" onclick="genericCloneTheRow(this,\'delete\',\'ivColHyp\')" data-index="'+n+'" class="waves-effect waves-light delBtn btn-flat"><span class="icon-cross2"></span></button>':"<button onclick=\"genericCloneTheRow(this,'delete','ivColHyp')\" data-index=\""+n+'" class="waves-effect waves-light delBtn btn-flat"><span class="icon-cross2"></span></button>',i+="</div>",i+="</div>"}return i}function crateAutoCompleteFld(e,a,t){var i=$(e);if(t=t===undefined||t,"#ivColHypStName"===e)var r=function(a){var t=$("#ivColPropTypeSel").val()+$(e).data("key"),i=structureParams[t];resetIvHyperlinks(),i?crateAutoCompleteFld("#ivColHyPName0",i):ajaxCallObj.getStructureParams(t)};else if("#searchPage"===e)r=function(e){$("#HPBtabsHaeder .pageTab a.active").attr("title")!=e&&changesTracker("pageChange",undefined,e)?(parent.loadFrame(),$("#sortable").empty(),$(".pageTab").hide(),$(".pageTab").find("a").removeClass("active"),$("#pageTab"+searchPageData[e]).show(),$("ul.tabs").tabs("select_tab","tab"+searchPageData[e]),$("#searchPage").val("")):$("#searchPage").val("")};else r=function(e){};if(i.autocomplete({isKeyImage:!1,data:a,limit:20,onAutocomplete:function(e){r(e)},minLength:0}),t&&i.focus(),1===e.indexOf("ivColHyPName")){var n=i.parents(".cloneParent").find("[id^='ivColHypVal']").removeClass("valSelected").attr("id"),l={};if("widgetBuild"===presBuiildMode)if(presWizardData.extraData.isMetaParsed)l=presWizardData.extraData.metaData;else{var o=presWizardData.extraData.metaData;o&&($.each(o,function(e,a){l[makeMeInitCap(a.name)]=":"+a.name.toLowerCase()}),presWizardData.extraData.isMetaParsed=!0,presWizardData.extraData.metaData=l)}else if("homeBuild"===presBuiildMode){var s=getActiveWidgetId();querymetaDataInfo[s].forEach(function(e){l[makeMeInitCap(e)]=":"+e.toLowerCase()})}crateAutoCompleteFld("#"+n,l,!1)}}function createIvWidgetHyperlink(e){var a=e.calledFrom,t=e.ivName,i=e.hyperlink,r=e.isDynamicWidget,n=iviewInfo[t].hyperlink_params,l=metaDataCacher.ivHyperLink,o="",s="",d="";"cache"===a?(o=i.fldName,s=i.targetId):(o=i[l.HYPSOURCE],s=i[l.SNAME]);var c=(d=r?$("#C__dynamicWrapper .dynamicContentCard table"):$("#i".concat(t,"Wrapper .cardContentData table"))).find("thead th:icontains('".concat(makeMeInitCap(o),"')")).index();if(d.find("tbody td:nth-child(".concat(c+1,")")).addClass("hyperlinkCell"),"cache"!==a&&-1!==c){n[c]||(n[c]={fldName:o,targetType:s.substr(0,1),targetId:s.substr(1),isPopup:"T"===i[l.POPUP],isRefresh:"T"===i[l.HYPREFRESH],isNew:"F"===i[l.LOADNAME],params:[]});var p=i[l.FIELD],u=i[l.PARVALUE];if(u&&p){var v=[p,u];n[c].params.push(v)}}}function isEmptyObject(e){for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a))return!1;return!0}function groupWidgets(e,a){var t=isMobile?2:4,i="",r="",n="",l=!1,o="";switch(e){case"smallkpi":i=$(".smallKpiDiv"),r=$("#"+a),n="KPI";break;case"table":case"kpi":i=$(".kpiDiv"),r=$("#"+a),n="Big KPI";break;case"chart":case"widget":i=$(".widgetDiv"),r=$("#"+a),n="Widgets";break;case"iview":case"Custom__sql":i=$(".iviewDiv").removeClass("hide").show();var s=(r=$("#"+a+"Wrapper")).attr("class")||"";r.removeClass(getClassStartingWith(s,"s")).addClass("s12"),r.removeClass(getClassStartingWith(s,"m")).addClass("m12"),r.removeClass(getClassStartingWith(s,"l")).addClass("l12"),r.find(".cardContentMainWrapper").css({"border-radius":"15px"}),n=r.find(".cardTitleWrapper").hide().find(".cardTitle").hide().text(),l=!0,i.append('<div id="'.concat("slick"+a+"Wrapper",'"></div>')),i=$("".concat("#slick"+a+"Wrapper"));try{o="Custom__sql"!=e?$("#"+a+"Wrapper").data("target"):homeJsonObj.jsonDataa[a+"Wrapper"].tg}catch(d){}o=o&&o.length>0?o.substr(1):o;break;case"tstruct":i=$(".tstructDiv"),r=$("#"+a+"Wrapper"),n="Tstructs";break;case"Custom__html":case"Custom__txt":case"Custom__img":case"Custom__rss":case"Custom__mytsk":case"Custom__dynamic":i=$(".customDiv"),r=$("#"+a+"Wrapper"),n="Custom"}i&&r&&n&&(i.append(r.detach()).removeClass("hide").show(),r.attr("data-wrapper-type",e),i.find(".slickDivTitle").length||i.prepend('\n            <div class="slickDivTitle">\n                <label>'.concat(n,'</label>\n                <a class="slickViewAll" href="javascript:void(0);" title="View All" onclick="$(this).hide();$(this).next().show();$(this).parent().nextAll().show();" style="">\n                    <span>View All</span>\n                </a>\n                <a class="slickHideAll" href="javascript:void(0);" title="Hide" onclick="$(this).hide();$(this).prev().show();$(this).parent().nextAll(\':gt(').concat(t-1,')\').hide();" style="display: none;">\n                    <span>Hide</span>\n                </a>\n            </div>\n            ')),i.children(":not(.slickDivTitle)").length>t?(r.hide(),i.find(".slickDivTitle").find(".slickViewAll").show()):l&&o?i.find(".slickDivTitle").find(".slickViewAll").attr("onclick","callParentNew('LoadIframe')('iview.aspx?ivname=".concat(o,"')")):i.find(".slickDivTitle").find(".slickViewAll").hide())}jQuery.fn.getOuterHTML=function(){return jQuery("<div />").append(this.eq(0).clone()).html()},jQuery.expr[":"].icontains=function(e,a,t){return jQuery(e).text().toUpperCase().indexOf(t[3].toUpperCase())>=0},Array.prototype.removeByValue=function(){for(var e,a,t=arguments,i=t.length;i&&this.length;)for(e=t[--i];-1!==(a=this.indexOf(e));)this.splice(a,1);return this},$(document).on("click",".dependentWidget.fullKPItable tbody tr, .dependentWidget.iviewTable tbody tr ,.dependentWidget.singleCellKPI,.dependentWidget.kpiSingleRow,.dependentWidget.sqlTable tbody tr",function(e){if("homeBuild"!==presBuiildMode){var a=$(this),t="fullTable",i=!1,r=a.parents(".ui-state-default");a.hasClass("singleCellKPI")?t="singleCellKPI":a.hasClass("kpiSingleRow")?t="kpiSingleRow":a.parents("table").hasClass("iviewTable")&&(t="iviewTable"),"Custom__dynamic"===r.data("type")&&(i=!0);var n=[],l=r.data("target"),o=homeJsonObj.jsonContent.jsonData[l+"Wrapper"],s=o.dep,d=!1;if(0===l.indexOf("C__sql")){t="sqlWidget";var c=e.target.cellIndex,p=r.find("table thead th:eq(".concat(c,")")).data("name"),u=(o.cols||{})[p];u&&u.hyperLink&&(d=!0,openHyperLinkInDynamicWidget({obj:u.hyperLink,clickedElem:a,event:e,clickedWidgetTarget:l,calledFrom:"sqlWidget"}))}if("iviewTable"===t){var v=e.target.cellIndex,m="";if(i)"i"===r.data("widgettype")&&(l=r.data("widgetid"),m=iviewInfo["".concat(l)].hyperlink_params);else m=iviewInfo["".concat(l.substr(1))].hyperlink_params;m&&m[v]&&(d=!0,openHyperLinkInDynamicWidget({obj:m=m[v],clickedElem:a,event:e,clickedWidgetTarget:l}))}if(!d&&s&&s.length){var f="";"singleCellKPI"===t&&(f=(a.find(".head").text()||"").toLowerCase()),s.forEach(function(e){var r=_slicedToArray(e,2),o=r[0],s=r[1],d="";if("fullTable"===t||"iviewTable"===t||"sqlWidget"===t){var c=a.parents("table").find("thead th:icontains('".concat(makeMeInitCap(s),"')")).index();if(-1!==c){if("iviewTable"===t){var p="";(p=i?iviewInfo["".concat(l)].hyperlink_params:iviewInfo["".concat(l.substr(1))].hyperlink_params)&&p[c]&&(p=p[c])}d=a.find("td:eq(".concat(c,")")).text()}}else if("singleCellKPI"===t){if(f!==s.toLowerCase())return;d=a.find(".singleKPIvalue").text()||""}else"kpiSingleRow"===t&&(d=a.find(".head:icontains('".concat(s,"')")).next().text()||"");globalVarsKeyValueObject[o]=d,n.push(o)}),paramChangedUpdateWidget(n)}}});