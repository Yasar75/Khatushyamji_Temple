/*http://demo.agile-labs.com/minZIP/*//*version=3.8*/var isHomeLoadStatus="notYetLoaded";"undefined"==typeof isPageBuilder&&(isPageBuilder=!1);var rssSlideTime=3e3,rssRefreshData={},homeBuilderJson={},homeJsonObj,ajaxCallObj,cachedJson,myTaskDetails,orderJsonData={},localLangFile={},presBuiildMode="homeRun",userResps=parent.userResp.split(",");inheritsFrom(MakeHBAjaxCall,HomePage),ajaxCallObj=new MakeHBAjaxCall,homeJsonObj=new HomeBuilderJsonObj;var isValidPage=ajaxCallObj.isPageValid();callParentNew("nodeApi")||"undefined"!=typeof homepagews&&"true"==homepagews?isValidPage&&isValidPage.status?ajaxCallObj.getNLSparameter():'{"result":[{"status":"false","msg":"Session Authentication failed..."}]}'==isValidPage.errMsg?setTimeout(function(){$.ajax({type:"POST",url:"".concat(encodeURI(mainPageUrl=window.location.href.toLowerCase())&&(webUrl=mainPageUrl.substr(0,mainPageUrl.indexOf("/aspx"))),"/WebService.asmx/GetSession"),cache:!1,async:!1,contentType:"application/json;charset=utf-8",data:JSON.stringify({key:"appsessionkey"}),dataType:"json",success:function(e){"Session does not exist"!=e.d?(appsessionKey=e.d,(isValidPage=ajaxCallObj.isPageValid())&&isValidPage.status?ajaxCallObj.getNLSparameter():isValidPage&&isValidPage.errMsg?showAlertDialog("error",isValidPage.errMsg):redirectPage(!0)):showAlertDialog("error","Session Authentication failed...")},error:function(e,a,t){(isValidPage=ajaxCallObj.isPageValid())&&isValidPage.status?ajaxCallObj.getNLSparameter():isValidPage&&isValidPage.errMsg?showAlertDialog("error",isValidPage.errMsg):redirectPage(!0)}})},200):isValidPage&&isValidPage.errMsg?showAlertDialog("error",isValidPage.errMsg):redirectPage(!0):callParentNew("closeFrame()","function");var theme=eval(callParent("currentThemeColor"));function handleLanguageSupprt(){if("en"!=ax_language){var e=parent.lcm;localLangFile["new"]=e[244]||"New",localLangFile.pdf=e[241]||"PDF",localLangFile.print=e[242]||"Print",localLangFile.excel=e[243]||"Excel",localLangFile.listview=e[245]||"List View",$("#HPBdesignerCanvas .hpbHeaderTitle .title").text(e[240])}else localLangFile["new"]="New",localLangFile.pdf="PDF",localLangFile.print="Print",localLangFile.excel="Excel",localLangFile.listview="List View"}function HomeBuilderJsonObj(){this.jsonContent={},this.jsonContent.length=0,this.jsonContent.jsonData={},this.jsonContent.customWidget={},this.jsonContent.jsonOrder=[],this.jsonContent.pageData={},this.jsonDataa=this.jsonContent.jsonData}function MakeHBAjaxCall(){this.onLoadObj={},this.getPublishedData=function(){isHomeLoadStatus="loading";var e=primaryApiSettings();e.url=apiBase+"getHomeBuildPublish",e.data.rty=userResps.toString(),$.ajax(e).done(function(e){if(1==e.status){if(isHomeLoadStatus="loaded",!jsonMetaData){jsonMetaData={};for(var a=e.metaData,t=a.length,n=0;n<t;n++){var r=a[n].name;jsonMetaData[r]=n}}var i=e.data,s=i.length,o=homeJsonObj.jsonContent.jsonOrder=[];orderJsonData.userResps=[],orderJsonData.admin=[],orderJsonData.others=[];var l={};for(n=0;n<s;n++){var d=i[n],c=d[jsonMetaData.TARGET],m=d[jsonMetaData.IS_PRIVATE],p=(d[jsonMetaData.IS_PUBLISH],d[jsonMetaData.RESPONSIBILITY]),u=!1;p=p.split(",");var h=c+"Wrapper",g=$.inArray(h,o),f=!1,v="";if("Y"===m){var y=d[jsonMetaData.CREATED_BY];if(currentUserName!==y)continue;f=!0,p=["userRep"]}-1!==c.indexOf("C__mytsk")&&(h="C__mytskWrapper",g=$.inArray(h,o),c="C__mytsk");for(var b=0;b<p.length;b++){var C=p[b];if(f||-1!==$.inArray(C,userResps)){var w=orderJsonData.userResps;v=3}else if("default"===C){w=orderJsonData.admin;v=2}else{w=orderJsonData.others;v=1}l[h]?u=v>l[h]:l[h]=v,w.push(h)}if("Y"===m&&-1!==g&&(o[g]="",g=-1),u||-1===g){o.push(h);var D=d[jsonMetaData.CONTENT];(D=D?JSON.parse(D):{}).hid=d[jsonMetaData.HOMEBUILD_ID],D.pid=d[jsonMetaData.PARENT_HOMEBUILD_ID],-1!==h.indexOf("C__")&&(D.ctg=c),homeJsonObj.jsonContent.jsonData[h]=D}}var j=$.merge($.merge(orderJsonData.userResps,orderJsonData.admin),orderJsonData.others);o=homeJsonObj.jsonContent.jsonOrder=jQuery.unique(j);homeJsonObj.jsonDataa=homeJsonObj.jsonContent.jsonData,createHomeWidgets(homeJsonObj.jsonContent)}else filterErrorMessageAndShow(e)}).fail(function(e,a,t){onAjaxFailure()})}}function onAllWidgetsCreated(){if(setInterval(function(){$("div[data-type='Custom__rss'] .rssFeedCard  .carousel").carousel("next")},rssSlideTime),!jQuery.isEmptyObject(rssRefreshData))for(var e in rssRefreshData){var a=60*parseInt(e)*1e3;setInterval(function(){for(var a=rssRefreshData[e],t=0;t<a.length;t++){var n=a[t];ajaxCallObj.fireRssFeed(n[1],n[0])}},a)}}function performDirectAction(e,a){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:" ";switch(e){case"listiview":window.document.location.href="./iview.aspx?ivname=".concat(a,"&tstcaption=").concat(t);break;case"tstruct":parent.LoadIframe("tstruct.aspx?transid="+a);break;case"link":window.open(a,"_blank");break;case"iview-print":var n=screen.width/2-420,r=screen.height/2-300,i="../aspx/htmliv.aspx?ivname="+a+"&ivtype=iview&ivKey=&params=&isPrint=true&AxFromhome=True";window.open(i,"_blank");break;case"iview-pdf":n=screen.width/2-420,r=screen.height/2-300,i="../aspx/pdfiview.aspx?ivname="+a+"&ivtype=iview&ivKey=&params=&AxFromhome=True";window.open(i,"_self","width=840,height=600,scrollbars=yes,top="+r+",left="+n);break;case"iview-excel":n=screen.width/2-420,r=screen.height/2-300,i="../aspx/excelweb.aspx?ivname="+a+"&ivtype=iview&params=&AxFromhome=True";window.open(i,"_self","width=840,height=600,scrollbars=yes,top="+r+",left="+n)}}function createMyTaskDeatiledData(){if("undefined"!=typeof isWebServiceCall&&"true"==isWebServiceCall){var tableHtml="",tableBodyHtml="",tableHeadHtml="",headData=myTaskDetails.sqlmetaData,headDataLength=headData.length,bodyData=myTaskDetails.data,bodyDataLength=bodyData.length;tableHeadHtml+="<tr>";for(var i=0;i<headDataLength;i++){var presentHeader=headData[i];presentHeader=presentHeader.name,"sname"!=presentHeader.toLowerCase()&&"recordid"!=presentHeader.toLowerCase()&&(tableHeadHtml+="<th>"+presentHeader+"</th>")}tableHeadHtml+="</tr>";for(var j=0;j<bodyDataLength;j++){var presentBody=bodyData[j];tableBodyHtml+="<tr>";for(var k=0;k<headDataLength;k++)if(3!=k&&4!=k){var headerTxt=presentBody[k]||"";if(headerTxt=makeMeInitCap(headerTxt),1==k){var url="tstruct.aspx?transid="+presentBody[3]+"&recordid="+presentBody[4];tableBodyHtml+="<td><a  onclick=\"javascript:parent.LoadIframe('"+url+"')\" href='javascript:void(0)'>"+headerTxt+"</a></td>"}else tableBodyHtml+="<td>"+headerTxt+"</td>"}tableBodyHtml+="</tr>"}var tableHtml="<table class='themeTable'><thead>"+tableHeadHtml+"</thead><tbody>"+tableBodyHtml+"</tbody></table>";$("#zoomDummyLayout .sqlContentCard").html(tableHtml),$.fn.dataTable.moment("DD/MM/YYYY");var cutMsg=eval(callParent("lcm[0]"));$("#zoomDummyLayout .sqlContentCard table").DataTable({dom:"<'#mainSearchFldSpn'f<'icon-magnifier searchIcon'>><'#dataLength'l>tip",language:{search:"_INPUT_",searchPlaceholder:"Search...",lengthMenu:"Show _MENU_ rows",emptyTable:cutMsg},scrollY:"calc(100vh - 293px)",scrollCollapse:!0}),$(".dataTables_length select").addClass("browser-default")}else{var tableHtml="",tableBodyHtml="",tableHeadHtml="",headData=myTaskDetails.metaData,headDataLength=headData.length,bodyData=myTaskDetails.data,bodyDataLength=bodyData.length;tableHeadHtml+="<tr>";for(var i=0;i<headDataLength;i++){var presentHeader=headData[i];presentHeader=presentHeader.name,"sname"!=presentHeader.toLowerCase()&&"recordid"!=presentHeader.toLowerCase()&&(tableHeadHtml+="<th>"+presentHeader+"</th>")}tableHeadHtml+="</tr>";for(var j=0;j<bodyDataLength;j++){var presentBody=bodyData[j];tableBodyHtml+="<tr>";for(var k=0;k<headDataLength;k++)if(3!=k&&4!=k){var headerTxt=presentBody[k]||"";if(headerTxt=makeMeInitCap(headerTxt),1==k){var url="tstruct.aspx?transid="+presentBody[3]+"&recordid="+presentBody[4];tableBodyHtml+="<td><a  onclick=\"javascript:parent.LoadIframe('"+url+"')\" href='javascript:void(0)'>"+headerTxt+"</a></td>"}else tableBodyHtml+="<td>"+headerTxt+"</td>"}tableBodyHtml+="</tr>"}var tableHtml="<table class='themeTable'><thead>"+tableHeadHtml+"</thead><tbody>"+tableBodyHtml+"</tbody></table>";$("#zoomDummyLayout .sqlContentCard").html(tableHtml),$.fn.dataTable.moment("DD/MM/YYYY");var cutMsg=eval(callParent("lcm[0]"));$("#zoomDummyLayout .sqlContentCard table").DataTable({dom:"<'#mainSearchFldSpn'f<'icon-magnifier searchIcon'>><'#dataLength'l>tip",language:{search:"_INPUT_",searchPlaceholder:"Search...",lengthMenu:"Show _MENU_ rows",emptyTable:cutMsg},scrollY:"calc(100vh - 293px)",scrollCollapse:!0}),$(".dataTables_length select").addClass("browser-default")}}function zoomInTheWidget(e,a){var t=$("#"+e),n=t.offset(),r=t.data("widthclass")||"m4 l3";$('<div id="zoomDummyLayout"><div class="blurTheWholeScreen"></div><div class="expandingContent"></div><div class="dummyWidget col s12 '.concat(r,'  ui-state-default"></div></div>')).insertBefore(t),t.find(".titleLessCardTitleClear i").toggleClass("icon-expand icon-contract"),t.find(".titleLessCardTitleClear").attr({onclick:'zoomOutTheWidget("'+e+'", "'+a+'")',title:"Collapse"}),t.css({width:t.outerWidth()+"px",height:t.outerHeight()+"px",top:n.top+"px",left:n.left+"px"});var i=t.detach();$("#zoomDummyLayout .expandingContent").html(i),setTimeout(function(){$("#zoomDummyLayout .expandingContent .ui-state-default").addClass("expandMe"),$("#zoomDummyLayout .blurTheWholeScreen").addClass("expand")},10),"myTsk"==a&&(t.find(".mtskContentCard").html("<div class='sqlContentCard'></div>"),setTimeout(function(){createMyTaskDeatiledData()},700))}function zoomOutTheWidget(e,a){var t=$("#"+e);"myTsk"==a&&t.find(".mtskContentCard").html("<div data-indicators='true' class='carousel carousel-slider center corusalAdded sqlContentCard'></div>"),$("#zoomDummyLayout .expandingContent .ui-state-default").removeClass("expandMe"),$("#zoomDummyLayout .blurTheWholeScreen").removeClass("expand"),setTimeout(function(){var n=$("#zoomDummyLayout .expandingContent .ui-state-default").detach();$(n).insertAfter($("#zoomDummyLayout")),$("#zoomDummyLayout").remove(),t.removeAttr("style"),t.find(".titleLessCardTitleClear i").toggleClass("icon-expand icon-contract"),t.find(".titleLessCardTitleClear").attr({onclick:'zoomInTheWidget("'+e+'", "'+a+'")',title:"Expand"}),"myTsk"==a&&createMyTaskData(myTaskDetails,e)},400)}function modifyTheMsgForInvSess(msg){return"not a valid session"==msg.toLowerCase()&&(msg=eval(callParent("lcm[124]"))),msg}function flipAndshowFlitersInWidget(e){var a=e.target,t=void 0===a?"":a,n=!1,r="",i="";"C__dynamic"===t?(n=!0,t=$("#C__dynamicWrapper").data("dwidgetid"),i=$("#C__dynamicWrapper").data("widgettype"),r="C__dynamicWrapper"):r=t+"Wrapper";var s=$("#"+r);if(s.find(".widgetINParamsCloseIcon").length)resetTheFlippedContainer({container:s});else{var o=s.data("type"),l=[];if("iview"===o||"i"===i)t=t.substr(1),l=(iviewInfo[t]||{}).params;else"widget"===o&&(l=homeJsonObj.jsonContent.jsonData[r].wParams||[]);if(l&&l.length){var d="<button title='close' onclick='flipAndshowFlitersInWidget({ target : \"".concat(s.data("target"),"\"})' class='widgetINParamsCloseIcon waves-effect waves-light btn-flat' type='button'><i class='icon-cross'></i></button>");l.forEach(function(e,a){d+=' <div style="display:none;" class="row inputfldRow">\n                    <div class="input-field col s12">\n                      <input id="param'.concat(a,'" data-name=').concat(e,' class="widgetParameter" type="text">\n                      <label for="param').concat(a,'">').concat(e,"</label>\n                    </div>\n                  </div>")}),n?targetToSend="C__dynamic":"widget"===o?targetToSend=t:"iview"===o&&(targetToSend="i"+t);var c="";s.outerWidth()>600?c+=" right-align":c+=" center-align",d+='<div class="row customParamBtnWrapper '.concat(c,'"><button onclick="applyCustomParametersForWidget({ target: \'').concat(targetToSend,"', targetType:'").concat(o,'\' });" type="button" class="waves-effect waves-light themeButton applyButton btn">Apply</button></div>');var m=s.find(".flip-container");m.find(".flipper-back").html(d),m.find(".widgetParameter").on("keydown",function(e){if(13===e.keyCode){var a=$(e.currentTarget).parents(".ui-state-default");applyCustomParametersForWidget({target:a.data("target"),targetType:a.data("type")})}}),setTimeout(function(){m.find(".inputfldRow").show("fast"),m.find(".flipper-back").mCustomScrollbar({axis:"yx",theme:"minimal-dark",scrollInertia:500,autoExpandScrollbar:!1,updateOnContentResize:!0}),tabFocusEventHandler({task:"bind",parentElem:m.find(".flipper-back"),loopInsideParent:!0,notOf:".widgetINParamsCloseIcon"})},550),m.addClass("hover"),s.addClass("flippedBack")}else showAlertDialog("warning","No parameters")}}function applyCustomParametersForWidget(e){var a=e.target,t=e.targetType,n=$("#"+a+"Wrapper"),r={};if(n.find(".flipper-back .widgetParameter").each(function(e,a){var t=$(this),n=t.val();""!==n&&(r[t.data("name")]=n)}),"Custom__dynamic"===t||"iview"===t){var i="";i="Custom__dynamic"===t?$("#C__dynamicWrapper").data("dwidgetid").substr(1):a.substr(1),iviewInfo[i]&&(iviewInfo[i].oldParamValues=r),ajaxCallObj.getIviewDataNew({target:a,customParams:r,calledFrom:"customParameters"})}else"widget"===t&&ajaxCallObj.getAxpertWidgetDetails({tId:a,customParams:r,widgetId:a.substr(6),calledFrom:"customParameters"})}function createInlineWidgetSearch(e){var a=e.target,t=$("#"+a+"Wrapper"),n=t.find(".inlineWidgetSearch");if(n.length>0)n.is(":visible")||(n.show(),n.find(".mainSrchFld").focus());else{var r=t.data("type");if("iview"===r||"Custom__sql"===r||"Custom__dynamic"===r&&"i"===t.data("widgettype")){var i,s=[];s="Custom__sql"===r?querymetaDataInfo[a+"Wrapper"]:querymetaDataInfo[a];var o=["axphide_","axrnum"],l="";s.forEach(function(e,a){-1===$.inArray(e.toLowerCase(),o)&&(l+='<option value="'.concat(a+1,'">').concat(e.toLowerCase(),"</option>"))});var d=(t.width()||100)-25;i='<div class="inlineWidgetSearch" style="width:'.concat(d,'px">\n                <div class="columnSelection">\n                    <select onchange="onInlineSearchColumnSelectionChange({widgetId:\'').concat(a+"Wrapper",'\'})" class="browser-default">\n                        <option value="" selected>All</option>\n                        ').concat(l,'\n                    </select>\n                </div>\n                <div class="mainSearchWrapper">\n                    <input class="mainSrchFld" onkeyup="onInpChangeSearchTheTable({widgetId:\'').concat(a+"Wrapper",'\',event:event})" type="text" />\n                    <span class="iconsWrapper">\n                        <button type="button" title="Close" onclick="closeInlineWidgetSearch({widgetId:\'').concat(a+"Wrapper",'\'})" class="waves-effect waves-light btn-flat"><span class="icon-cross"></span></button>\n                    </span>\n                </div>\n            </div>');var c="";c="Custom__sql"===r?t.find(".sqlContentCard table"):t.find(".flipper-front .cardContentData table"),$(i).insertBefore(c),t.find("select").material_select(),t.find(".mainSrchFld").focus(),t.find(".inlineWidgetSearch .dropdown-content").css("min-width",d+"px")}}}function closeInlineWidgetSearch(e){var a=e.widgetId;$("#"+a).find(".inlineWidgetSearch").hide()}function onInlineSearchColumnSelectionChange(e){var a=e.widgetId,t=$("#"+a).find(".mainSearchWrapper input");""!==t.val()&&onInpChangeSearchTheTable({widgetId:a}),t.focus()}function onInpChangeSearchTheTable(e){var a=e.widgetId,t=e.event;if(27!==(void 0===t?{}:t).keyCode){var n=$("#"+a),r=n.find("table"),i=n.find(".mainSearchWrapper input").val(),s=n.find(".columnSelection select").val();searchTheTableData({table:r,keyword:i,columnIndex:s})}else closeInlineWidgetSearch({widgetId:a})}theme=theme||"default",$("#homeBuilderLink").attr("href","../App_Themes/"+theme+"/home_builder.min.css?v=4"),jQuery(document).ready(function(e){WireElapsTime(serverprocesstime,requestProcess_logtime),parent.closeFrame();var a=parent.hasPageBuildAccess;e("body").attr("dir",ax_direction),e("body").addClass("mtextDir"+ax_direction),handleLanguageSupprt(),isPageBuilder&&a&&e("#buildMode").show(),e(callParentNew("splitIcon","id")).addClass("hide"),e(callParentNew("spiltHeading","class")).addClass("hide"),GetProcessTime(),GetTotalElapsTime()}),$(document).on("click",".htmlContentCard a",function(e){e.preventDefault();var a=$(this).attr("href");window.open(a,"_blank")}),$(document).on("click","#sortable .ui-state-default .cardClick",function(e){var a="";if("widget"!=(t=(a=$(this).parents(".ui-state-default")).data("type"))){var t,n=a.attr("id"),r=homeJsonObj.jsonDataa[n];if("tstruct"==(t=r.c)||r.tgt&&"tstruct"==r.tgt){var i=r.tg;i=i.substr(1),parent.LoadIframe("tstruct.aspx?transid="+i)}else if(r.tgt&&"iview"==r.tgt){var s=r.tg;s=s.substr(1),parent.LoadIframe("ivtoivload.aspx?ivname="+s)}else-1!==t.indexOf("Custom__")&&"none"!=r.tgt&&"url"==r.tgt&&window.open(r.tg,"_blank")}}),$(document).on("click",".runtimeActionBtn",function(e){var a=$(this).parent();$(".runtimeActionWrapper.active").not(a).each(function(e,a){$(this).removeClass("active"),$(this).find("ul.floatingBtnMenu li a").css({transform:"scaleY(0.4) scaleX(0.4) translateY(40px) translateX(0px)",opacity:0})})});