/*www.agilecloud.biz/minZIP?v=3.3*/!function(){var e=!1;window.createTheTreeView=function(t){var n=t.menuJSON,o=t.treeContainer,a=t.nodeCreatorInput;o=$(o),a=$(a);var r=function d(e){var t=[],n=e.parent;return n.length===undefined&&(n=[n]),n&&n.forEach(function(e,n){var o=e.child;if(o){var a=[];"[object Object]"===Object.prototype.toString.call(o)?a.push(d({parent:[o]})):o.forEach(function(e,t){a.push(d({parent:[e]}))}),t.push({title:e.name,key:e.oname,folder:!0,children:a})}else{var r=e.name,i=e.target,l=e.oname,c=function(e){var t=e.target,n="head";return 0===t.indexOf("tstruct.aspx")?n="tstruct":0!==t.indexOf("iview.aspx")&&0!==t.indexOf("iviewInteractive.aspx")||(n="iview"),n}({target:i});folder="head"===c,t.push({title:r,key:l,folder:folder,icon:c+"-Image"})}}),1===t.length?t[0]:t}(n.root);o.fancytree({extensions:["edit","filter"],source:r,icon:function(e,t){t.node},init:function(e,t){t.tree.rootNode.children[0].setActive()},beforeActive:function(e,t){if(t.node.isFolder())return!1},activate:function(t,n){var a=n.node.key;a="root_1"===a?"":a,o.data("parentnodename",a),e=!0;var r=o.fancytree("getTree");node=r.getActiveNode(),node.parent.folder||r.expandAll(!1),node.setExpanded(!0)}}),a.off("keyup.treeName"),a.on("keyup.treeName",function(t){var n,a=$(this),r=o.fancytree("getTree");if(node=r.getActiveNode(),null==node)return t.preventDefault(),void showAlertDialog("warning","Please select a node");""!==a.val()?e?(r.visit(function(e){"newlyAddedNode"===e.extraClasses&&e.remove()}),e=!1,newData={title:a.val()},(node.folder?node.addChildren(newData):node.appendSibling(newData)).addClass("newlyAddedNode")):"newlyAddedNode"===(n=node.folder?node.getLastChild():node.getNextSibling()).extraClasses&&(n.setTitle(a.val()),n.setSelected(!1)):r.visit(function(t){"newlyAddedNode"===t.extraClasses&&(t.remove(),e=!0)})})}}();