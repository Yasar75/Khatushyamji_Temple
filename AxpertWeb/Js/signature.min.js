/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/var saveSignInfo={fieldName:"",imgSrc:"",isAxpImagePath:"false"};function signatuePadCallBack(e){var a=$(".modal-body ").find("#modal_"+e)[0],t=a.querySelector("[data-action=clear]"),n=a.querySelector("[data-action=change-color]"),i=a.querySelector("[data-action=undo]"),o=a.querySelector("[data-action=save-png]"),r=a.querySelector("[data-action=save-jpg]"),s=a.querySelector("[data-action=save-svg]"),l=a.querySelector("[data-action=save-sign]"),d=a.querySelector("[data-action=close-sign]"),c=a.querySelector("canvas"),g=new SignaturePad(c,{backgroundColor:"rgb(255, 255, 255)"});function u(){var e=Math.max(window.devicePixelRatio||1,1);c.width=c.offsetWidth*e,c.height=c.offsetHeight*e,c.getContext("2d").scale(e,e),g.clear()}function f(e,a){if(navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome"))window.open(e);else{var t=function(e){for(var a=e.split(";base64,"),t=a[0].split(":")[1],n=window.atob(a[1]),i=n.length,o=new Uint8Array(i),r=0;r<i;++r)o[r]=n.charCodeAt(r);return new Blob([o],{type:t})}(e),n=window.URL.createObjectURL(t),i=document.createElement("a");i.style="display: none",i.href=n,i.download=a,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n)}}$(".color-picker").spectrum({type:"color",togglePaletteOnly:!0,hideAfterPaletteSelect:!0,showInput:!isMobile,showPalette:!isMobile,change:function(e){e&&(g.penColor=$(this).spectrum("get").toRgbString())}}),$(".sp-replacer").addClass("opacity-0"),window.onresize=u,u(),t.addEventListener("click",function(e){g.clear()}),i.addEventListener("click",function(e){var a=g.toData();a&&(a.pop(),g.fromData(a))}),n.addEventListener("click",function(e){setTimeout(function(){$(".color-picker").spectrum("show")},0)}),o.addEventListener("click",function(e){g.isEmpty()?showAlertDialog("warning","Please provide a signature first."):f(g.toDataURL(),"signature.png")}),r.addEventListener("click",function(e){g.isEmpty()?showAlertDialog("warning","Please provide a signature first."):f(g.toDataURL("image/jpeg"),"signature.jpg")}),s.addEventListener("click",function(e){g.isEmpty()?showAlertDialog("warning","Please provide a signature first."):f(g.toDataURL("image/svg+xml"),"signature.svg")}),l.addEventListener("click",function(a){if(g.isEmpty())showAlertDialog("warning","Please provide a signature first.");else{saveSignInfo.fieldName=e,saveSignInfo.imgSrc=g.toDataURL(),saveSignInfo.isAxpImagePath=$("#isAxpImagePathHidden").val(),saveSignInfo=JSON.stringify(saveSignInfo);try{$.ajax({type:"POST",url:"tstruct.aspx/signatureUpload",data:JSON.stringify({saveSignInfo:saveSignInfo}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){"done"==a.d.msg?(CloseWindow(e,a.d.imageName,a.d.imgURL),saveSignInfo={}):showAlertDialog("error",a.d.msg)},error:function(e){showAlertDialog("error",e.responseJSON.Message)}})}catch(t){showAlertDialog("error",t.message)}}}),d.addEventListener("click",function(e){closeModalDialog()})}function CloseWindow(e,a,t){""!=a&&""!=t&&($("#"+e).val(a),$("#"+e).attr("src",t),$("#"+e).removeClass("d-none"),$("#"+e).parents(".image-input").find(".delete-button").removeClass("d-none"),navValidator=!1,IsFormDirty=!0,AxGlobalChange=!0),UpdateArray(e,a),setTimeout(function(){closeModalDialog()},500)}function UpdateArray(e,a){for(var t=!1,n=0;n<ChangedFields.length;n++){if(ChangedFields[n].toString()==e){"***"==a?(ChangedFieldDbRowNo.splice(n,1),ChangedFieldValues.splice(n,1),ChangedFieldOldValues.splice(n,1),ChangedFields.splice(n,1)):(ChangedFieldOldValues[n]=ChangedFieldValues[n].toString(),ChangedFieldDbRowNo[n]=ChangedFieldDbRowNo[n],ChangedFieldValues[n]=a),t=!0;break}}if(!t&&"***"!=a){var i=e.lastIndexOf("F"),o=e.substring(i-3,i),r=parseInt(o,10);ChangedFields.push(e),ChangedFieldDbRowNo.push(r),ChangedFieldValues.push(a),ChangedFieldOldValues.push("")}}