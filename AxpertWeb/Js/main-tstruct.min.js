/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var isMozilla,objDiv=null,originalDivHTML="",DivID="",over=!1,addHeader="",fillGridDatatbl="",shouldFaceUser=!1,flipCamera=!1,gridDummyRows=!1,gridDummyRowVal=new Array,AxpGridForm="popup",fldmultiSelectdep=!1,depNotBoundFld="",axplatlongFldName="",axpfilepathold="",axpScanBarFldFocus="",axpScriptaddrowres="",axpScriptIsAddrow=!0,dcLayoutType="default",isDcLayoutSelected=!1,formLabelJSON=[],buttonFieldFontJSON=[],regVarFldExp=new Array,select2EventType="",select2IsOpened=!1,select2IsFocused=!1,setDesProp={},forceRowedit=!1,isGridFileUploadOnLoad=!1,wizardHidenDcNos=[],gridRowEditOnLoad=!1,AxRulesDefValidation="false",AxRulesDefFilter="false",AxRuesDefFormcontrol="false",AxRulesDefComputescript="false",AxRulesDefAllowdup="false",AxRulesDefAllowEmpty="false",AxRulesDefIsAppli="false",AxRulesDefScriptOnLoad="false",AxRulesDefOnSubmit="false",AxRuesDefScriptFormcontrol="false",AxRuesDefScriptFCP="false",AxpDcstateVal="",AxAllowEmptyFlds=new Array,isScriptFormLoad="false",dynamicMobileResolution=function(){$(".grid-stack").hasClass("dynamicRunMode")&&((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=renderGridOptions.minWidth?$(".grid-stack").addClass("grid-stack-one-column-mode"):0==$(".tileLayoutDiv").length&&$(".grid-stack").removeClass("grid-stack-one-column-mode"))};function swicthCompressMode(e){if(appGlobalVarsObject._CONSTANTS.compressedMode)if(void 0!==e&&""!=e)$(".compressedModeUI .inline-edit").each(function(e,t){$(t).find(".form-check-label").addClass("col-form-label-sm fw-boldest"),$(t).find(".form-check-input").removeClass("h-40px w-40px"),$(t).find(".selection .select2-selection").addClass("form-select-sm"),$(t).find(".select2-hidden-accessible").addClass("form-select-sm"),$(t).find(".edit-mode-content").addClass("input-group-sm"),$(t).find(".edit-mode-content .input-group").addClass("input-group-sm"),$(t).find(".edit-mode-content .fldmultiSelect").addClass("py-0"),$(t).find(".edit-mode-content .select2-selection__choice").addClass("py-1 my-0")}),$(".compressedModeUI table.customSetupTableMN tr textarea:not([data-txt-area]),.compressedModeUI  table.customSetupTableMN tr label").addClass("py-0 min-h-25px h-25px"),$(".compressedModeUI table.customSetupTableMN tr textarea[data-txt-area]").addClass("min-h-25px h-30px"),$(".compressedModeUI table.customSetupTableMN").addClass("table-sm"),$(".compressedModeUI .dvdcframe .gridIconBtns a").addClass("btn-sm"),$(".compressedModeUI table.customSetupTableMN .form-check").addClass("py-0");else{if($(".compressedModeUI .input-group").each(function(e,t){$(t).addClass("input-group-sm"),$(t).find(".form-check-label").addClass("col-form-label-sm fw-boldest"),$(t).find(".form-check-input").removeClass("h-40px w-40px"),$(t).find(".selection .select2-selection").addClass("form-select-sm"),$(t).find(".select2-hidden-accessible").addClass("form-select-sm"),$(t).find(".form-check-input").parents(".agform").addClass("d-flex"),void 0!==dcLayoutType&&""!=dcLayoutType&&"default"!=dcLayoutType||$(t).find(".radiohori,.radiovert").parents(".agform").addClass("flex-column"),staticRunMode||$(t).find(".form-check-input").parents(".grid-stack-item").addClass("d-flex")}),$(".compressedModeUI .inline-edit").each(function(e,t){$(t).find(".form-check-label").addClass("col-form-label-sm fw-boldest"),$(t).find(".form-check-input").removeClass("h-40px w-40px"),$(t).find(".selection .select2-selection").addClass("form-select-sm"),$(t).find(".select2-hidden-accessible").addClass("form-select-sm")}),$(".compressedModeUI table.customSetupTableMN tr textarea:not([data-txt-area]),.compressedModeUI  table.customSetupTableMN tr label").addClass("py-0 min-h-25px h-25px"),$(".compressedModeUI table.customSetupTableMN tr textarea[data-txt-area]").addClass("min-h-25px h-30px"),void 0===dcLayoutType||""==dcLayoutType||"default"==dcLayoutType)$(".compressedModeUI .labelcol").removeClass("row");else{var t=parseInt(designObj[0].fieldCaptionWidth);t=12-(t/=10),$(".compressedModeUI .input-group").parent().hasClass("layoutAdded")||$(".compressedModeUI .input-group").wrap("<div class='col-sm-".concat(t," layoutAdded'></div>")),$(".upload-button").addClass("mt-4"),$(".fldImageCamera").removeClass("mt-n4").addClass("mt-0"),staticRunMode||$(".colFldGridStackWidth").addClass("mb-3")}$(".compressedModeUI .fld-wrap3 label").addClass("col-form-label-sm fw-boldest m-0 p-0"),$(".compressedModeUI .agform").addClass("px-1"),$(".compressedModeUI table.customSetupTableMN").addClass("table-sm"),$(".compressedModeUI .toolbarRightMenu a,.compressedModeUI .toolbarRightMenu button").addClass("btn-sm"),$(".compressedModeUI .toolbarRightMenu a span,.compressedModeUI .toolbarRightMenu button span").addClass("material-icons-2"),$(".compressedModeUI .BottomToolbarBar a").addClass("btn-sm"),$(".compressedModeUI .BottomToolbarBar a span").addClass("material-icons-style material-icons-2"),$(".compressedModeUI .tstructBottomLeftButton a span").addClass("material-icons-style material-icons-2"),$(".compressedModeUI .tstructBottomLeftButton div.btn").addClass("btn-sm"),$("select.multiFldChk,select.multiFldChklist,select.fldmultiSelect").parents(".agform").addClass("d-flex flex-column"),$("select.multiFldChk,select.multiFldChklist,select.fldmultiSelect").parent().addClass("flex-root overflow-auto"),$(".compressedModeUI textarea.CodeMirrorApplied").parent().addClass("overflow-auto")}else{if($(".content table.customSetupTableMN tr:not(.inline-edit) textarea:not([data-txt-area]),.content  table.customSetupTableMN tr:not(.inline-edit) label").addClass("py-2 min-h-30px h-30px"),$(".content table.customSetupTableMN tr textarea[data-txt-area]").addClass("min-h-25px h-30px"),$(".content table.customSetupTableMN").removeClass("table-sm"),$(".content .dvdcframe .gridIconBtns a").addClass("btn-sm"),$(".btn.btn-icon").addClass("btn-sm").find(".material-icons").addClass("material-icons-style material-icons-2"),$(".content table.customSetupTableMN .form-check").addClass("py-2"),$(".content .dropzone").parent(".form-control").removeClass("p-0").addClass("p-1 rounded-1"),$(".content [id^=DivFrame] .form-switch .form-check-input").removeClass("w-40px").addClass("w-50px"),$(".content .form-check-input").parents(".agform").addClass("d-flex"),$("textarea.memofam.gridstackCalc").parent().addClass("flex-root overflow-auto").parents(".agform").addClass("d-flex flex-column"),$("select.multiFldChk,select.multiFldChklist,select.fldmultiSelect").parents(".agform").addClass("d-flex flex-column"),$("select.multiFldChk,select.multiFldChklist,select.fldmultiSelect").parent().addClass("flex-root overflow-auto"),$(".content textarea.CodeMirrorApplied").parent().addClass("overflow-auto"),void 0!==dcLayoutType&&""!=dcLayoutType&&"default"!=dcLayoutType||$(".content .radiohori,.content .radiovert").parents(".agform").addClass("flex-column"),staticRunMode||$(".content .form-check-input").parents(".grid-stack-item").addClass("d-flex"),void 0!==dcLayoutType&&("single"==dcLayoutType||"double"==dcLayoutType||"triple"==dcLayoutType)){var i=parseInt(designObj[0].fieldCaptionWidth);i=12-(i/=10),$(".content .input-group").parent().hasClass("layoutAdded")||$(".content .input-group").wrap("<div class='col-sm-".concat(i," layoutAdded'></div>")),$(".upload-button").addClass("mt-4"),$(".fldImageCamera").removeClass("mt-n4").addClass("mt-0"),staticRunMode||$(".colFldGridStackWidth").addClass("mb-3")}$("textarea.select2-search__field").addClass("cursor-pointer")}staticRunMode&&$(".fld-wrap3").addClass("text-truncate"),void 0===dcLayoutType||""==dcLayoutType||"default"==dcLayoutType?$(".imageFileUpload").parents().find(".flex-root").parent().addClass("d-flex flex-column"):$(".imageFileUpload").parents().find(".flex-root").parent().addClass("d-flex"),rtfCkeditorAlignment()}function getlatlongitude(){try{var e=getRedisString("hybridinfo",callParentNew("hybridGUID"));if(""!=e){var t=JSON.parse(e);e=t.location.coords.latitude+","+t.location.coords.longitude;var i=axplatlongFldName+"000F"+GetDcNo(axplatlongFldName);SetFieldValue(i,e),UpdateFieldArray(i,"000",e,"parent"),MainBlur($j("#"+i)),$j("#"+i).blur()}}catch(a){}}function pinItemToTaskbar(e){var t=$(e).clone();if(t.find("a > i").remove(),t.hasClass("dropdown-submenu")){if(t.removeClass("dropdown-submenu"),t.children("a").append('<span class="icon-arrows-down"></span>'),"filterWrapper"==t.attr("id")||"modern"!=AxpTstButtonStyle&&"ivirCButtonsWrapper"==t.attr("id")?t.find("ul").hasClass("dropdown-menu")&&t.find("ul").removeClass("dropdown-menu"):(t.addClass("dropdown"),t.find("ul").removeAttr("style"),t.find("a#tasks")&&t.find("li").addClass("liTaskItems")),"ivirCButtonsWrapper"==t.attr("id")){var i=t.find("ul  a:not(.active):eq(0)");$(i).find(".customIcon").removeClass("customIcon"),$(i).html($(i).html().replace($(i).text(),"")),t.html(i.clone())}}else t.addClass("actionWrapper");t.removeClass("waves-effect").removeClass("waves-block"),t.attr("id")&&t.attr("id","pinned"+t.attr("id")),$.each(t.find("*"),function(e,t){$(t).attr("id")&&$(t).attr("id","pinned"+$(t).attr("id"))}),$("#pinnediconsUl").append(t),setPinedIconContainerWidth()}function setPinedIconContainerWidth(){var e=$("#breadcrumb").outerWidth(!0)+$(".toolbarRightMenu").outerWidth(!0)+50;"undefined"!=typeof isAxpertPopup&&isAxpertPopup&&(e+=35),$(".modernButtonOptions #pinnedsearchBar").css({width:"calc(100vw - ".concat(e,"px)"),"max-width":"calc(100vw - ".concat(e,"px)")});var t=$("#pinnediconsUl").outerWidth(!0),i=0;$("ul#pinnediconsUl").children("li").each(function(){if((i+=$(this).outerWidth(!0))>t)return $(this).hide(),$(this).nextAll().hide(),!1;$(this).show(),$(this).nextAll().show()})}function hideacoptions(){isMobile&&($(".autoClickddl").parent(".edit").removeAttr("style"),$(".autoinputtxtclear").hide(),$(".virtualKeyboard").hide())}function getLocation(){var e={};if(findGetParameter("recordid")>0)e.latitude=$("#latitude000F"+GetDcNo("latitude")).val()||0,e.longitude=$("#longitude000F"+GetDcNo("longitude")).val()||0;else try{var t=callParentNew("ok");t&&(e=JSON.parse(t.getAndroidLocation()))}catch(i){}return($.isEmptyObject(e)||0==e.latitude||0==e.longitude)&&navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition):showPosition({coords:{latitude:e.latitude,longitude:e.longitude}})}function showPosition(e){var t="",i="";if(e&&e.coords&&0!=e.coords.latitude&&0!=e.coords.latitude&&!IsGridField("latitude")&&!IsGridField("longitude")){var a=GetDcNo("latitude"),r=GetDcNo("longitude");t="latitude000F"+a,i="longitude000F"+r,""==$("#"+t).val()&&($("#"+t).val(e.coords.latitude),UpdateFieldArray(t,"000",$("#"+t).val(),"parent"),UpdateAllFieldValues(t,$("#"+t).val())),""==$("#"+i).val()&&($("#"+i).val(e.coords.longitude),UpdateFieldArray(i,"000",$("#"+i).val(),"parent"),UpdateAllFieldValues(i,$("#"+i).val()));var l=callParentNew("googleMapsApiKey"),o={css:[],js:["https://maps.googleapis.com/maps/api/js?key=".concat(callParentNew("googleMapsApiKey"))]};-1!=$.inArray("latlongmap",FNames)&&l&&loadAndCall({files:o,callBack:function(){if(google){var e=GetDcNo("latlongmap"),a=$("#"+("latlongmap000F"+e)),r=center={lat:parseFloat($("#"+t).val()),lng:parseFloat($("#"+i).val())};(new google.maps.Geocoder).geocode({location:r},function(e,t){if("OK"===t&&e[0]&&(a.val(e[0].formatted_address).trigger("blur"),a.is("textarea"))){var i=new google.maps.Map(a.hide().before('<div class="'.concat(a.attr("class"),' style="').concat(a.attr("style"),'"></div>')).prev()[0],{zoom:11,center:center}),l=new google.maps.InfoWindow;googleMapsZoom&&i.setZoom(+googleMapsZoom);var o=new google.maps.Marker({position:r,map:i});l.setContent(e[0].formatted_address),l.open(i,o)}})}}})}return""!=$("#".concat(t)).val()&&""!=$("#".concat(i)).val()}function AxpFileFields(){"undefined"!=typeof AxpFileUploadFields&&AxpFileUploadFields.length>0?callParentNew("tstAxpFileFlds=",!0):callParentNew("tstAxpFileFlds=",!1)}function SetFieldSetCarryValue(){"0"!=recordid||"Save"!=AxActiveAction&&"New"!=AxActiveAction||("undefined"!=typeof FSetCarry&&FSetCarry.forEach(function(e){var t=GetDcNo(e);if(!IsDcGrid(t)){var i=e+"000F"+t;$.each(SetCarryFlds,function(e,a){if(a.split("♠")[0]==i){SetFieldValue(i,a.split("♠")[1]);var r=GetFieldsRowNo(i),l=GetDbRowNo(r,t);UpdateFieldArray(i,l,a.split("♠")[1],"parent","AutoComplete")}})}}),SetCarryFlds=new Array)}function GetFldSetCarryValue(){try{SetCarryFlds.length>0&&(SetCarryFlds=new Array),"undefined"!=typeof FSetCarry&&FSetCarry.forEach(function(e){var t=GetDcNo(e);if(!IsDcGrid(t)){var i=e+"000F"+t;SetCarryFlds.push(i+"♠"+$("#"+i).val())}})}catch(e){}}function OnMobileNewTst(){$("#wizardTstructWrapper wizardWrapper").remove(),$.each(DCIsGrid,function(e,t){"True"===t&&$("#wrapperForEditFields"+(e+1)+" .btnMobile").remove()})}function checkIfFormChanges(){return $(".grid-stack ").hasClass("dirty")?isFormChange=!0:isFormChange=!1,isFormChange}function SetAutoCompAccess(e,t){try{t==undefined?$j("input.fldFromSelect:disabled").parent().find("i").css("display","none"):"enabled"==e?t.parent().find("i").css("display","inline-block"):t.parent().find("i").css("display","none")}catch(i){console.log("SetAutoCompAccess-action"+e+"-msg"+i.message)}}function makeFieldInitCap(e){var t=GetFldNamesIndx("axp_initcap"),i="";if(-1!=t&&(GetExpressionType("axp_initcap",t),i=Expressions[t].toString()),""!=i){i=i.split(",");for(var a=0;a<i.length;a++)e?$("#DivFrame"+e).find('input[id*="'+i[a]+'"]').length>0&&$("#DivFrame"+e).find('input[id*="'+i[a]+'"]').addClass("initCapField"):$("input[id^='"+i[a]+"']").length>0&&$("input[id^='"+i[a]+"']").addClass("initCapField")}}function BeforeWindowClose(){FNames.filter(function(e){return e.toLowerCase().startsWith("axp_weight_")}).length>0&&appGlobalVarsObject._CONSTANTS.isHybrid&&closeWeightScalePort(),draftTimer&&window.clearInterval(draftTimer),window.parent.globalChange&&SetFormDirty(!1),window.opener&&!window.opener.closed&&window.opener.parent.tstructPop&&""!=AxActiveAction&&(window.opener.parent.tstructPop=!1,ReloadListView(window.opener.parent.listViewPage));var e=$j("#recordid000F0").val();if("0"!=e&&0==AxIsTstructLocked&&callParentNew("isLockOnRead"))try{ASB.WebService.UnlockTStructRecord(tst,e,!1)}catch(a){}if(1==axpRefreshParent&&(window.opener.document.title="Iview")){var t=window.opener.document.getElementById("hdnparamValues").value,i="ivtoivload.aspx?ivname="+window.opener.iName;i=i+"&"+t.replace(/¿/g,"&").replace(/~/g,"=")+"&axp_refresh=true",window.opener.document.getElementById("hdnIvRefresh").value="true",window.opener.document.location.href=i,navigator.userAgent.toUpperCase().indexOf("CHROME")>-1&&window.opener.document.getElementById("button1").click()}callParentNew("removeOverlayFromBody()","function")}function CheckCustomTStSave(){var e=$j("#axp_savedirective000F1"),t="",i="",a="";(t=e.val())!=undefined&&(t.indexOf("$")>-1&&(t=GetPopUpVal(t)),t.indexOf("~")>-1?(a=t.split("~"))[1]!=undefined&&(i=a[1].split("*"),a[0]!=undefined&&""!=a[0]&&(a.indexOf("iview")>-1?(axCustomTstAction="ivtoivload.aspx?ivname="+i[0],i[1]!=undefined&&""!=i[1]&&(axCustomTstAction+="&"+i[1])):a.indexOf("tstruct")>-1&&(axCustomTstAction="tstruct.aspx?transid="+i[0]+"&openerIV=".concat("undefined"!=typeof isListView?iName:i[0],"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"),i[1]!=undefined&&""!=i[1]&&(axCustomTstAction+="&"+i[1])))):axCustomTstAction=e.val())}function GetPopUpVal(e){var t=e.indexOf("$"),i=e.indexOf("*");return AxPopup=i>-1?e.substring(t+1,i):e.substring(t+1),e=e.replace("$"+AxPopup,"")}function LoadEvents(dvId){$('[data-toggle="tooltip"]').tooltip(),CKEDITOR.on("instanceReady",function(e){e.editor.on("change",function(){currentCK=this.name}),isReadyCK=!0}),WizardKtInit(),createEditors(),createFormSelect(".fldFromSelect,.multiFldChk"),createFormMultiSelect(".fldmultiSelect");var autoDiv=dvId==undefined?"#divDc1":dvId;DropzoneInit(dvId),DropzoneGridInit(dvId),HeaderAttachFiles(),KTApp.initBootstrapPopovers();try{var _KTApp;null===(_KTApp=KTApp)||void 0===_KTApp||_KTApp.initBootstrapTooltips()}catch(error){}createCheckListTokens(dvId),$j("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField],.flatpickr-input,.gridRowChk,.gridHdrChk),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp)").focus(function(){MainFocus($j(this))});var glType=eval(callParent("gllangType")),dtpkrRTL=!1;dtpkrRTL="ar"==glType;var glCulture=eval(callParent("glCulture")),dtFormat="d/m/Y";"en-us"==glCulture&&(dtFormat="m/d/Y"),$(".flatpickr-input:not(.tstOnlyTime,.tstOnlyTime24hours)").parent(".input-group").flatpickr({dateFormat:dtFormat,disableMobile:"true",allowInput:!0,wrap:!0,onOpen:function(e,t,i){MainFocus($(i.element).find("input"))},onChange:function(e,t,i){}}),$(".tstOnlyTime").parent(".input-group").flatpickr({enableTime:!0,noCalendar:!0,dateFormat:"h:i K",disableMobile:"true",wrap:!0,onOpen:function(e,t,i){MainFocus($(i.element).find("input"))},onChange:function(e,t,i){$(i.element).find("input").val()!=AxOldValue&&MainBlur($(i.element).find("input"))}}),$(".tstOnlyTime24hours").parent(".input-group").flatpickr({enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,disableMobile:"true",wrap:!0,onOpen:function(e,t,i){MainFocus($(i.element).find("input"))},onChange:function(e,t,i){$(i.element).find("input").val()!=AxOldValue&&MainBlur($(i.element).find("input"))}}),$(document).off("mousedown.designer").on("mousedown.designer",".tstructDesignMode .grid-stack-item, .tstructDesignMode .ui-resizable",function(){setSelectedDesignElement(this)}),$(document).off("dragstop.designer").on("dragstop.designer",".tstructDesignMode.grid-stack",function(e,t){selectedDesignObject.elem=e.target}),$(document).off("change.designer").on("change.designer",".tstructDesignMode.grid-stack",function(e,t){setSelectedDesignElement(selectedDesignObject.elem)}),$(document).off("dragstart.designer resizestart.designer").on("dragstart.designer resizestart.designer",".tstructDesignMode.grid-stack",function(e,t){$(this).addClass("dirty"),changeStatus("notSaved")}),$(document).off("gsresizestop.designer").on("gsresizestop.designer",".tstructDesignMode.grid-stack",function(e,t){var i=$(t).attr("data-gs-height"),a=gsiPixels(i);if(gsiHeight={height:(isMobile?a+10:a).toString()+"px"},"undefined"!=typeof CKEDITOR.instances[$(t).find("textarea").attr("id")])try{var r=CKEDITOR.instances[$(t).find("textarea").attr("id")];staticRunMode?r.resize("100%",$(r.ui.contentsElement.$).parents(".grid-stack-item-content").height()-$(r.ui.contentsElement.$).parents(".grid-stack-item-content").children(".fld-wrap3").outerHeight(!0)-2-$(r.ui.contentsElement.$).siblings().toArray().reduce(function(e,t){return e+$(t).outerHeight(!0)},0),!0):r.resize("100%",a)}catch(error){}}),$j("textarea:not(#comment):not(.labelInp,.select2-search__field),[id]:text:not([id=searstr],[class=AxAddRows],[class=AxSearchField],.gridHdrChk,.tstOnlyTime,.tstOnlyTime24hours,.gridHeaderSwitch),[id][type=number]:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),:password").blur(function(e){"design"!=theMode&&MainBlur($j(this))}),$j(document).mousedown(function(e){""!=e.target.id?(blurNextPreventElement=new Object,blurNextPreventId=e.target.id):(blurNextPreventId="",blurNextPreventElement=e.target)}),$j("select:not(#ddlSearch,#selectbox,.fldFromSelect,.fldmultiSelect,.multiFldChk):not(#designLayoutSelector)").change(function(){if(-1==$j(this).find(":selected").text().indexOf("+ Add"))MainBlur($j(this)),$j(this).blur(),$j(this).focus();else if(null!=$j(this).val()||$j(this).val()!=undefined){var ddlrefval=$j(this).val();$j(this).val(""),eval(ddlrefval)}}),$j(":checkbox:not([class=chkAllList],.gridHdrChk,.gridRowChk,.gridHeaderSwitch):not(.tokenSelectAll):not(#ckbCompressedMode):not(#ckbStaticRunMode):not(#ckbWizardDC):not('[id^=ckbGridStretch]'),:radio").not(".chkShwSel").change(function(){MainBlur($j(this))}),$j("textarea:not(.labelInp)").keydown(function(e){LimitText($j(this))}),$j("textarea:not(.labelInp)").keyup(function(){LimitText($j(this))}),$j(".number").keypress(function(e){return CheckNumeric(e,$j(this).val())}),$j("#searchoverrelay").unbind("keypress").keypress(function(e){if(13==e.keyCode&&!valid_submit())return!1}),$j(".axpImg").click(function(){if("Cancelled"!=tstructCancelled){var e=$j(this)[0].id;null==document.getElementById(e).onclick&&UploadImg(e)}}),$j(".signaturePad").click(function(e){if("ClearImageSrc(this);"!=$(e.target).attr("onclick")&&"Cancelled"!=tstructCancelled){var t=$j(this).find(".signatureInput")[0].id;null==document.getElementById(t).onclick&&openSignaturePad(t)}}),$j(".divBarQrScan").click(function(){if("Cancelled"!=tstructCancelled){var e=$j(this).parent().find("input")[0].id;null==document.getElementById(e).onclick&&openBarQrScanner(e)}}),$(".axpBtn").off("click.axpBtn").on("click.axpBtn",function(){var e=$j(this);if(e.length>0){var t=GetFieldsRowNo(e[0].id),i=GetFieldsDcNo(e[0].id);RegisterActiveRow(t,i),CallAction(e[0].id)}}),$j(".rowdelete").click(function(){DeleteCurrentRow($j(this))}),$j(".subGrid").click(function(){ShowPopUp($j(this))}),$j("#taskListPopUp").hide(),$j(".AxAddRows").blur(function(){if(!this.value||isNaN(this.value))return this.value="1"}),$j(".achklist").click(function(){$j(this).parent().next(".chkListBdr").toggle()}),$j(".spandate").click(function(){$j(this).prev().focus()}),$j(".spanTime").click(function(){$j(this).prev().find("input").focus()}),$(document).on("keypress",dvId+" .form-group span.fa-paperclip",function(e){"13"==e.which&&$(this).click()}),$j(".rowdelete img").hover(function(){$j(this).attr("src","../axpimages/icons/16x16/delete.png")},function(){$j(this).attr("src","../axpimages/icons/16x16/delete-fade.png")}),1==parent.MainNewEdit&&$j("html").addClass("makeFullHeight");try{$j("#popupIframeRemodal",parent.document).attr("src")!=undefined&&$j(document).keyup(function(e){27===e.keyCode&&(IsFormDirty&&0===$("#bootstrapModal").length?$.confirm({theme:"modern",closeIcon:!1,title:eval(callParent("lcm[155]")),content:eval(callParent("lcm[121]")),escapeKey:"buttonB",onContentReady:function(){disableBackDrop("bind")},buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){$j(".remodal-close",parent.document).click()}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){return disableBackDrop("destroy"),!0}}}}):1===$("#bootstrapModal").length||$j(".remodal-close",parent.document).click())})}catch(ex){console.log(ex.message)}$==undefined&&($=$j),jQuery.browser={},jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1),$j(".clsPrps").length>0?$j("#tgPurpose").css("display","inline-block"):$j("#tgPurpose").css("display","none"),$j("input.form-control,textarea.memofam").on("focusin",function(e){try{var t=$j(this).attr("id");if(void 0!==t&&""!=t){var i=GetFieldsName(t),a=$j.inArray(i,FNames);if(a!=undefined&&a>-1&&("undefined"!=typeof FldMaskType||"undefined"!=typeof ScriptMaskFields)){var r="";if(ScriptMaskFields.length>0){var l=$j.inArray(i,ScriptMaskFields);r=-1!=l?ScriptMaskFields[l]:FldMaskType[a]}else r=FldMaskType[a];if(""!=r){var o=GetFieldValue(t);""!=o&&"0.00"!=o&&"0"!=o&&($j(this).val(o),$j(this).attr("value",o))}}}}catch(ex){}}),$j("input.number").on("input",function(){var e=$j(this).val(),t=$j(this).attr("id");if(t!=undefined){var i=GetFieldsName(t),a=$j.inArray(i,FNames);if(a!=undefined&&a>-1){var r=FMaxLength[a],l=0;if(l="True"==FCustDecimal[a]&&"undefined"!=typeof gloAxDecimal&&gloAxDecimal>-1?gloAxDecimal:FDecimal[a],"Numeric"==FDataType[a]&&l!=undefined&&l>0){var o=r-l-1;if(-1==e.indexOf("."))e.length>o&&($j(this).val(e.slice(0,o)),UpdateAllFieldValues($j(this).attr("id"),e.slice(0,o)));else if(-1!=e.indexOf(".")){var n=e.substring(0,e.indexOf(".")),s=e.substring(e.indexOf(".")+1,e.length);n.length>o&&(n=n.slice(0,o)),s.length>l&&(s=s.slice(0,l)),$j(this).val(n+"."+s),UpdateAllFieldValues($j(this).attr("id"),n+"."+s)}}}}}),$(document).off("click",".weightScaleIcon").on("click",".weightScaleIcon",function(){var e=this;if(appGlobalVarsObject._CONSTANTS.isHybrid){getRedisString("HybridWeightScaleInfo",callParentNew("hybridGUID"));$(this).parent(".weightScale").parent().children("input").focus();try{ShowDimmer(!0),ASB.WebService.NotifyHybridForWeightScale(callParentNew("hybridGUID"),function(t){"success"==t?getHybridWeightScaleInfo($(e).parent(".weightScale").parent().children("input").attr("id")):(ShowDimmer(!1),showAlertDialog("error","Error occurred while fetching weight. Please try again."))},function(e){ShowDimmer(!1),showAlertDialog("error","Error occurred while fetching weight. Please try again.")})}catch(error){ShowDimmer(!1),showAlertDialog("error","Exception occurred while fetching weight.")}}else showAlertDialog("error","Please close the application and login again.")}),$(document).off("change",".tstfldImage").on("change",".tstfldImage",function(e){TstFldImageUpload(e.target)}),$(document).off("click",".imageFileUpload,img.profile-pic").on("click",".imageFileUpload,img.profile-pic",function(e){$(this).siblings("label.upload-button").find(".tstfldImage").click()}),$j(".fldImageCamera").click(function(){var e=$(".fldImageCamera").parent(".image-input").find("input").attr("id");UploadCaptureImage(e)}),"undefined"!=typeof AxpCameraOption&&("undefined"==typeof AxpCameraOption||""!=AxpCameraOption&&"true"==AxpCameraOption)||$(".fldImageCamera").removeClass("d-none"),$("#wBdr").on("mouseenter mouseleave",".customSetupTableMN textarea",function(e){$(this).attr("title",$(this).val())})}function WizardKtInit(){if("undefined"!=typeof isWizardTstruct&&isWizardTstruct){var e=document.querySelector("#wbdrHtml"),t=new KTStepper(e);t.on("kt.stepper.click",function(e){var t=$(e.element).find(".flex-column.current").attr("id").slice(8);if(t<e.getClickedStepIndex()){if(!ValidateBeforeSubmit(t))return!1;e.goTo(e.getClickedStepIndex())}else e.goTo(e.getClickedStepIndex())}),t.on("kt.stepper.next",function(e){var t=$(e.element).find(".flex-column.current").attr("id").slice(8),i=$(e.element).find(".flex-column.current").nextAll(".flex-column");if(!(wizardHidenDcNos.length>0))return!!ValidateBeforeSubmit(t)&&e.goNext();var a=!1;return i.each(function(){var t=$(this).attr("id");if(t=parseInt(t.slice(8)),!wizardHidenDcNos.includes(t))return a=!0,!1;e.goNext()}),a?!!ValidateBeforeSubmit(t)&&e.goNext():void 0}),t.on("kt.stepper.previous",function(e){$(e.element).find(".flex-column.current").attr("id").slice(8);var t=$(e.element).find(".flex-column.current").prevAll(".flex-column");if(wizardHidenDcNos.length>0){var i=!1;t.each(function(){var t=$(this).attr("id");if(t=parseInt(t.slice(8)),!wizardHidenDcNos.includes(t))return i=!0,!1;e.goPrevious()}),i&&e.goPrevious()}else e.goPrevious()})}}function createCheckListTokens(e){$((e?"#"+e:"")+" .form-select.multiFldChklist:not(span)").each(function(){var e=$(this).data("valuelist"),t="object"==_typeof(e)?e:_toConsumableArray(new Set($(this).data("valuelist").split($(this).data("separator"))));if(""!=t){var i=$.map(t,function(e){return{id:e,text:e}});$(this).select2({data:i}).on("select2:unselect select2:select",function(e){var t=$(this).attr("id"),i=$(this).val();if(void 0!==$(this).data("separator")&&i.length>1){var a=$(this).data("separator");i=i.join(a)}GetFieldsRowFrameNo(t);var r=GetFieldsDcNo(t),l=GetDbRowNo(GetFieldsRowNo(t),r);UpdateFieldArray(t,l,i,"parent","AutoComplete"),UpdateAllFieldValues(t,i)}).on("select2:open",function(e){var t,a=null===(t=$(e.currentTarget).data("select2"))||void 0===t?void 0:t.$dropdown,r=0;if(0!=i.length){if(0==a.find(".select2-results").find(".msSelectAllOption").length){var l='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat($(e.currentTarget).attr("id"),'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');a.find(".select2-results").append(l)}a.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").each(function(e,t){$(t).hasClass("select2-results__option--selected")&&r++}),a.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length==r&&r>0?a.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!0):a.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length!=r&&a.find(".select2-results").find(".msSelectAllOption > .msSelectAll").is(":checked")&&a.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!1)}})}})}function checkAllCheckBoxTokens(e,t){if($("#".concat(t)).hasClass("multiFldChk")){if($(e).is(":checked")){$("#".concat(t)).find("option").remove(),$(".select2-results ul li").each(function(){$("#".concat(t)).append('<option value="'+$(this).text()+'" selected="selected">'+$(this).text()+"</option>")});var i=$("#".concat(t)).val();if(void 0!==$("#".concat(t)).data("separator")&&i.length>1){var a=$("#".concat(t)).data("separator");i=i.join(a)}isGrdEditDirty=!0;var r=GetFieldsDcNo(t),l=GetDbRowNo(GetFieldsRowNo(t),r),o=GetFieldsRowNo(t);IsDcGrid(r)&&isGrdEditDirty&&UpdateFieldArray(axpIsRowValid+r+o+"F"+r,GetDbRowNo(o,r),"","parent","AddRow"),UpdateFieldArray(t,l,i,"parent","AutoComplete"),UpdateAllFieldValues(t,i),setTimeout(function(){MainBlur($j("#"+t))},0)}else{$("#".concat(t)).find("option").remove(),$("#".concat(t)).val("");r=GetFieldsDcNo(t),l=GetDbRowNo(GetFieldsRowNo(t),r);UpdateFieldArray(t,l,"","parent","AutoComplete"),UpdateAllFieldValues(t,""),AxOldValue=" ",setTimeout(function(){MainBlur($j("#"+t))},0)}$("#".concat(t)).trigger("change").select2("close")}else $(e).is(":checked")?($("#".concat(t," > option")).prop("selected","selected"),$("#".concat(t)).trigger("change").select2("close")):($("#".concat(t," > option")).prop("selected",""),$("#".concat(t)).trigger("change").select2("close"))}function ShowPopUp(e){var t=e.attr("id"),i=e.parent().find("input");0==i.length&&(i=e.parent().find("select")),OpenPopUp(i.attr("id"),t)}function FocusOnFirstField(e){if("form"==e)for(var t=$j('[id*="divDc"]'),i=0;i<t.length;i++)if($j(t[i]).is(":visible")){e=t[i].id.substring(t[i].id.indexOf("divDc")+5);break}var a="";if(a=IsDcGrid(e)?"#wrapperForEditFields"+e:"#divDc"+e,$j(a).length>0){try{-1!=$j.inArray("1",TabDCs)||isMobile?isMobile&&$("#wizardBodyContent").length&&$("#wizardBodyContent").scrollTop(0):$j(a).focus()}catch(l){}var r=getFirstFocusElement(a);if(r!=undefined&&r.length>0&&!isMobile)return r.focus(),r;if(isMobile&&$("#wizardBodyContent").length)$("#wizardBodyContent").scrollTop(0);else if(isMobile&&axInlineGridEdit)return r.focus(),r}}function SetFocusAfterSaveOnLoad(){var e=focusAfterSaveOnLoad;focusAfterSaveOnLoad="";GetFieldsName(e);var t=GetFieldsDcNo(e);if(IsDcGrid(t)){var i=e.substring(e.lastIndexOf("F")-3,e.lastIndexOf("F"));$("#ank"+t).length>0&&!$("#ank"+t).parent().hasClass("active")?($("#ank"+t).click(),setTimeout(function(){$("#gridHd"+t+" tbody tr[id=sp"+t+"R"+i+"F"+t+"]").find(".glyphicon-pencil").parent().click(),setTimeout(function(){$j("#"+e).focus()},50)},300)):$("#ank"+t).length>0&&$("#ank"+t).parent().hasClass("active")&&($("#gridHd"+t+" tbody tr[id=sp"+t+"R"+i+"F"+t+"]").find(".glyphicon-pencil").parent().click(),setTimeout(function(){$j("#"+e).focus()},50))}else $("#ank"+t).length>0&&!$("#ank"+t).parent().hasClass("active")?($("#ank"+t).click(),setTimeout(function(){$j("#"+e).focus()},210)):$j("#"+e).focus()}function DisplaySearchDlg(){$j(window).keydown(function(e){OpenSearchPop(e)}),window.parent&&$j(window.parent).keydown(function(e){OpenSearchPop(e)})}function LockTstruct(){Readonlyform(),$j("#icons").find("*").attr("disabled",!0),$j("#icons").find("*").prop("disabled",!0),$j(".search").length>0&&$j(".search").removeProp("disabled"),$j(".add").length>0&&$j(".add").find("*").removeProp("disabled"),$j(".pdf").length>0&&$j(".pdf").find("*").removeProp("disabled"),$j(".listview").length>0&&$j(".listview").find("*").removeProp("disabled")}function loadingNew(){Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler)}function EndRequestHandler(e,t){if(t.get_error()==undefined){if($j("#goval").length>0){var i=$j("#goval");"go"==i.val()&&(FillDiv("Show"),$("#grdSearchRes").parent().hasClass("d-inline-flex")||$("#grdSearchRes").parent().addClass("d-inline-flex w-100 overflow-auto"),$j("#searstr").val(DecodeUrlSplChars($j("#hdnSearchStr").val())),i.val("d"))}ShowDimmer(!1);var a=$j("#hdnHtml"),r=$j("#hdnFilename");"Save"==a.val()&&(showAlertDialog("success",2028,"client",r.val()),a.val(""))}else showAlertDialog("error",2029,"client",t.get_error().message)}function displaysearchDiv(e,t){$j("#"+e).show(),$j("#"+e).addClass("Pagebody Bordercolor"),$j("#searchoverrelay").parent().removeClass("d-none"),$j("#searchoverrelay").css("display","block"),Resizewindow()}function FillDiv(e){"Show"==e?$("#srchcontent").removeClass("d-none"):$("#srchcontent").addClass("d-none"),Resizewindow()}function Pagination(){$j("#goval").val("go"),ShowDimmer(!0)}function Closediv(){$j("#Panel1").hide(),$j("#srchcontent").addClass("d-none"),$j("#searchoverrelay").parent().addClass("d-none"),$j("#searchoverrelay").css("display","none")}function hiddenFloatingDiv(e){document.getElementById(e).style.display="none",document.getElementById("dimmer").style.display="none",DivID="",Resizewindow()}function Resizewindow(){document.getElementById("closeimg")}function togglesrchselect(){var e=!1;e=!!document.getElementById("searchall").checked;for(var t=0;t<document.getElementById("s1").options.length;t++){var i="search"+t;document.getElementById(i).checked=e}}function PopupfadeTo(e,t){e=$j("#"+e.id),t<=100&&(t<0?(t=100,document.body.style.cursor="default"):(document.body.style.cursor="Hand",t=65),SetOpacity(e,t))}function valid_submit(){GetCurrentTime("Tstruct load on Search Go button click(ajax call)"),$j("#goval").val("go");var e=$j("#searstr");if(txtVal=CheckUrlSplChars(e.val()),ValidateSrchFlds()){ShowDimmer(!0),$j("#hdnSearchStr").val(txtVal),$j("#searstr").val("");var t=$j("#btnGo");t.length>0&&(GetProcessTime(),$j("#hdnbElapsTimeGo").val(callParentNew("browserElapsTime")),t.click())}else""!=txtVal&&null!=txtVal&&txtVal!=undefined||showAlertDialog("warning",2007,"client")}function DecodeUrlSplChars(e){return e=(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/%25/g,"%")).replace(/%26/g,"&")).replace(/%27/g,"'")).replace(/%22/g,'"')).replace(/%23/g,"#")}function ValidateSrchFlds(){var e=$j("#ddlSearch").val(),t=$j.inArray(e,FNames),i=$j.trim($j("#searstr").val());if(-1!=t&&""!=i){if("Date/Time"==FDataType[t]){var a=$j("#searstr");return isDate(a.val())?(a.focus(),!0):(a.focus(),!1)}return!0}return!1}function loadTstruct(e){WireElapsTime(serverprocesstime,requestProcess_logtime),ShowDimmer(!0),ResetNavGlobalVariables(),AxWaitCursor(!0);try{window.parent.isSessionCleared||window.opener||(ASB.WebService.ClearNavigationSession(),window.parent.isSessionCleared=!0),window.opener?window.opener.parent.disableNavigation=!0:window.parent.disableNavigation=!0,GetLoadData(e,"")}catch(t){Closediv()}}$j(document).ready(function(){if("undefined"!=typeof isTstPostBackVal&&""!=isTstPostBackVal||WireElapsTime(serverprocesstime,requestProcess_logtime),AxpGridForm=""!=AxpGridFormCols?AxpGridFormCols.split("♠")[0]:"popup","design"==theMode&&($(callParentNew("splitIcon","id")).css({display:""}).removeClass("hide"),$(callParentNew("spiltHeading","class")).css({display:""}).removeClass("hide")),tstReadOnly=!1,"function"==typeof commonReadyTasks&&commonReadyTasks(),"undefined"!=typeof isTstPostBackVal&&""!=isTstPostBackVal){var resval=isTstPostBackVal.split("*$*"),wBdrHtml=resval[0];$("#wBdr").html(""),$("#wBdr").prepend(wBdrHtml);var toolBarHtml=resval[1];if(("undefined"==typeof isWizardTstruct||0==isWizardTstruct)&&"False"==IsObjCustomHtml){$("#tstIcons").html(""),$("#tstIcons").prepend(toolBarHtml),$("#iconsNewOptionIcon").after(""),$("#iconsNewOptionIcon").after(toolBarHtml),$("#tstModernOpenIcons").html("");var modenFooter=resval[2];""!=modenFooter&&($("#tstModernOpenIcons").prepend(modenFooter.split("♦")[0]),btnfooteropenlist=modenFooter.split("♦")[1],btnfooteropenlist.indexOf("<li>")>-1&&(btnfooteropenlist=""))}}"undefined"!=typeof AxpTstButtonStyle&&"old"==AxpTstButtonStyle&&($("#breadcrumb-panel").removeClass("justify-content-center"),$("#breadcrumb-panel").parent().removeClass("flex-stack").addClass("flex-column"),$("#breadcrumb-panel").next().removeClass("align-items-center"),$("#searchBar").addClass("vw-100 overflow-scroll"),$("#searchBar").find("ul").addClass("px-0 my-0")),$("#btnSaveTst").prop({value:callParentNew("lcm")[392],title:eval(callParent("lcm[392]"))}),$("#New").prop({value:callParentNew("lcm")[393],title:eval(callParent("lcm[393]"))}),SetFormDirty(!1),AxpIviewDisableSplit=AxpIviewDisableSplit.toLowerCase(),compressedMode=appGlobalVarsObject._CONSTANTS.compressedMode,isMobile||"false"!=isTstPop.toLowerCase()?($(callParentNew("split-btn","class")).addClass("hide"),$(callParentNew("split-btn-vertical","class")).addClass("hide")):AxpIviewDisableSplit!=undefined&&"false"==AxpIviewDisableSplit?($(callParentNew("split-btn","class")).css({display:""}).removeClass("hide"),$(callParentNew("split-btn-vertical","class")).css({display:""}).removeClass("hide")):"true"===AxpIviewDisableSplit?($(callParentNew("splitIcon","id")).addClass("hide"),$(callParentNew("spiltHeading","class")).addClass("hide")):""===AxpIviewDisableSplit&&($(callParentNew("splitIcon","id")).css({display:""}).removeClass("hide"),$(callParentNew("spiltHeading","class")).css({display:""}).removeClass("hide")),"true"==AxpIsAutoSplit.toLowerCase()&&!1===callParentNew("isTstructSplited")&&callParentNew("assocateIframe(true)","function");var glangType=eval(callParent("gllangType"));if("ar"===glangType&&$("[data-toggle=popover]").each(function(){$(this).data("placement","left")}),"undefined"!=typeof AxRulesEngine&&""!=AxRulesEngine){var axruleList=AxRulesEngine.split("~");AxRulesDefScriptOnLoad=axruleList[0],AxRulesDefOnSubmit=axruleList[1],AxRuesDefScriptFormcontrol=axruleList[2],AxRuesDefScriptFCP=axruleList[3]}$==undefined&&($=$j);try{if(DCIsPopGrid.indexOf("True")>-1)return void(window.location.href="err.aspx?errmsg=Axpertweb 11.0 popgrid (subgrid) is not supporting, please change the definition and try again..");AxBeforeTstLoad()}catch(ex){$j("div#wBdr").show(),ShowDimmer(!1)}var t0=performance.now();AxStartTime=new Date,$(document).on("click","#icons,#btnSaveTst,.BottomToolbarBar a",function(e){if(actionCallFlag!=actionCallbackFlag)return e.stopPropagation,e.preventDefault(),void $("#icons,#btnSaveTst,.BottomToolbarBar a").css({"pointer-events":"none"})});try{hideDiscardButton(),switchTstructMode(),GetFormDetails(),loadingNew(),LoadGridScript(),AxAutoGenDeps=GetDependentArray(),AddVisTabDcsInArray(),OnTstructLoad(),SetFieldSetCarryValue(),AxpFileFields(),"undefined"!=typeof isTstPostBackVal&&""!=isTstPostBackVal&&(isTstPostBackVal="",recordid=$("#axp_recid1000F1").val(),$j("#recordid000F0").val($("#axp_recid1000F1").val()))}catch(ex){$j("div#wBdr").show(),ShowDimmer(!1)}"ARABIC"==gl_language&&$j("#pagebdy").css("direction","rtl"),SetGridBtnAccess(),"design"!=mode&&LoadEvents(),$(window).resize(dynamicMobileResolution),CheckCustFooter(),CheckCustomTStSave(),SetAutoCompAccess(""),"undefined"!=typeof focusAfterSaveOnLoad&&""!=focusAfterSaveOnLoad?SetFocusAfterSaveOnLoad():FocusOnFirstField("form"),SetFocusFormControl();try{"axpwf"==transid&&tstwfcomments(),AxAfterTstLoad()}catch(ex){}if(AxIsTstructLocked&&LockTstruct(),jQuery.browser={},jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1),$j(".clsPrps").length>0?$j("#tgPurpose").css("display","inline-block"):$j("#tgPurpose").css("display","none"),$('[data-toggle="popover"]').popover({container:"body"}),checkSuccessAxpertMsg(),eval(callParent("isPrintPDFClick"))&&$j(".printhtmltopdf").click(),eval(callParent("isSaveAndPrintClick"))){var isSPValues=[];isSPValues=eval(callParent("isSavePrintValues")),OpenPdfFile(isSPValues[0],isSPValues[1],isSPValues[2],isSPValues[3],""),eval(callParent("isSaveAndPrintClick")+"= false"),eval(callParent("isSavePrintValues")+"=[]")}makeFieldInitCap();var t1=performance.now();if($("div").scroll(function(){$("#ui-datepicker-div").hide()}),$("[data-axp-url]").each(function(){$(this).after("<br/>"),inputId=$(this).attr("for"),text=$(this).text(),$(this).text(""),$("#"+inputId).attr("type","hidden"),urlValue=$("#"+inputId).val(),url=""==$("#"+inputId).val()?"javascript:void(0);":"window.open('"+urlValue+"','newwindow','width=600,height=500')",$("#"+inputId).after("<a style='cursor:pointer' onclick="+url+">"+text+"</a>")}),"undefined"!=typeof btnfooterlist&&""!=btnfooterlist&&$("#ftbtn_iList").attr("onClick",btnfooterlist),"undefined"!=typeof btnfooteropenlist&&""!=btnfooteropenlist&&"False"==IsObjCustomHtml&&($("#dvFooter").hide(),$.each(btnfooteropenlist.split(","),function(e,t){""!=t&&$("#"+t).removeClass("d-none")})),"undefined"!=typeof dvRefreshFromLoadModern&&"true"==dvRefreshFromLoadModern&&$("#dvRefreshFromLoadModern").removeClass("d-none"),"undefined"!=typeof hideToolBar&&hideToolBar&&0==$("#design").length&&"design"!=theMode){var srchBarHt=28;$("#searchBar").hide(),$(".dvheightframe").first().css("top","0px"),"undefined"!=typeof isWizardTstruct&&isWizardTstruct?$("#wizardBodyContent").height($("#wizardBodyContent").height()+srchBarHt):(srchBarHt=srchBarHt+5+8,$("#pagebdy").height($("#pagebdy").height()+srchBarHt),$(".dvheightframe").first().attr("style",$(".dvheightframe").first().attr("style")+";height:"+($(".dvheightframe").first().height()+srchBarHt)+"px !important;"))}var curFrameObj=$(window.frameElement);if(("axpiframe"===curFrameObj.attr("id")||"homePageDynamicFrame"===curFrameObj.attr("id")||curFrameObj.attr("id").startsWith("homePageFrame"))&&(iframeindex=1,$j("#goback").hide()),callParentNew("IsfieldaddInDesignMode")&&(callParentNew("IsfieldaddInDesignMode=",!1),$(".grid-stack").addClass("dirty")),isMobile&&"none"==mobileCardLayout&&($("#wizardHeader").addClass("mobileHeader"),$.each(DCIsGrid,function(e,t){if("True"===t){$("#wrapperForEditFields"+(e+1)).removeClass("d-none"),$("#wrapperForEditFields"+(e+1)).addClass("mobilewrapperForEditFields"),0!=$(".wrapperForGridData"+(e+1)+" table tbody tr").length||axInlineGridEdit||$("#colScroll"+(e+1)).hide(),axInlineGridEdit&&$(".editWrapTr").hide(),$(".editLayoutFooter").hide(),$("#DivFrame".concat(e+1," .newgridbtn")).addClass("d-none");var i=$("#DivFrame".concat(e+1," .newgridbtn>ul")).html();$("#wrapperForEditFields".concat(e+1)).append('<div class="clearfix"></div><div class="grdButtons btnMobile d-none"><ul class="left">'.concat(i,"</ul></div>")),$("#wrapperForEditFields".concat(e+1," .btnMobile")).find("#viewGrid".concat(e+1)).addClass("d-none")}})),$(document).off("focus",".select2.select2-container"),$(document).on("focus",".select2.select2-container",function(e){var t=e.originalEvent,i=$(this).find(".select2-selection--single").length>0;t&&i&&("open"==select2EventType?(select2EventType="",1==select2IsFocused&&select2IsOpened&&$(this).siblings("select.fldFromSelect").select2("close"),select2IsOpened=!1,select2IsFocused=!1):select2IsOpened?select2EventType="click":(select2IsFocused=!0,select2EventType="tab"),$(this).siblings("select:enabled").select2("open"))}),$j("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox],.fldFromSelect),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox],li.dropdown-chose").bind("keydown",function(e){var t=e.keyCode||e.which,i=$(this);if($(this).hasClass("select2-search__field"))isSelectedValFocus=!1;else if(9!=t||e.shiftKey){if(9==t&&e.shiftKey){var a;l=$(this).closest("[class*=fldindex]").data("dataindex");void 0!==$(this).attr("id")?a=$(this).attr("id").substring($(this).attr("id").lastIndexOf("F")+1,$(this).attr("id").length):$(this).hasClass("tokenSelectAll")&&(a=$(this).closest("div").attr("name").substring($(this).closest("div").attr("name").lastIndexOf("F")+1,$(this).closest("div").attr("name").length));o=[];$(this).closest("#divDc"+a).find(".grid-stack-item").find("[class*=fldindex]").each(function(e,t){var i=GetFieldsName($(this).find("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox]").attr("id")),a=$j.inArray(i,FNames);"none"!=$(this).css("display")&&"F"!=GetFieldProp(a,"tabStop")&&o.push($(this).data("dataindex"))}),o.sort(function(e,t){return e-t}).reverse(),$.each(o,function(t,r){if(l>r){var n=$j(i).closest("#divDc"+a).find("[data-dataindex="+r+"]").find("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox]");if(void 0===$("#"+$(n).attr("id")).attr("disabled")&&void 0===$("#"+$(n).attr("id")).attr("readonly")){if(!$("#"+$(n).attr("id")).hasClass("axpImg")&&!$("#"+$(n).attr("id")).hasClass("fldmultiSelect"))return 4!=$(n).length&&($("#"+$(n).attr("id")).focus().select(),e.preventDefault(),!1);if($("#"+$(n).attr("id")).hasClass("fldmultiSelect"))return 4!=$(n).length&&($("#"+$(n).attr("id")).parent(".dropdown-mul").find(".fldmultiSelectInput").click(),e.preventDefault(),!1)}else o.length-1==t&&$(".tstructMainBottomFooter a:visible:eq(0)").focus()}})}}else{var r,l=$(this).closest("[class*=fldindex]").data("dataindex");void 0!==$(this).attr("id")?r=$(this).attr("id").substring($(this).attr("id").lastIndexOf("F")+1,$(this).attr("id").length):$(this).hasClass("tokenSelectAll")&&(r=$(this).closest("div").attr("name").substring($(this).closest("div").attr("name").lastIndexOf("F")+1,$(this).closest("div").attr("name").length));var o=[];$(this).closest("#divDc"+r).find(".grid-stack-item").find("[class*=fldindex]").each(function(e,t){var i=GetFieldsName($(this).find("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox]").attr("id")),a=$j.inArray(i,FNames);"none"!=$(this).css("display")&&"F"!=GetFieldProp(a,"tabStop")&&o.push($(this).data("dataindex"))}),o.sort(function(e,t){return e-t}),$.each(o,function(t,a){if(l<a){var n=$j(i).closest("#divDc"+r).find("[data-dataindex="+a+"]").find("input:not([id=searstr],[class=AxAddRows],[class=AxSearchField]),select:not([id=selectbox]),textarea:not(#txtCommentWF):not(.labelInp),input[type=checkbox]");if(void 0===$("#"+$(n).attr("id")).attr("disabled")&&void 0===$("#"+$(n).attr("id")).attr("readonly")){if(!$("#"+$(n).attr("id")).hasClass("axpImg")&&!$("#"+$(n).attr("id")).hasClass("fldmultiSelect"))return 4!=$(n).length&&($("#"+$(n).attr("id")).focus().select(),e.preventDefault(),!1);if($("#"+$(n).attr("id")).hasClass("fldmultiSelect"))return 4!=$(n).length&&($("#"+$(n).attr("id")).parent(".dropdown-mul").find(".fldmultiSelectInput").click(),e.preventDefault(),!1)}else o.length-1==t&&$(".tstructMainBottomFooter a:visible:eq(0)").focus()}})}}),setTimeout(function(){if("undefined"!=typeof isWizardTstruct&&isWizardTstruct){$("#wizardTstructWrapper").outerHeight(!0),$("#toolBarBtns").outerHeight();var e=$("#wizardBodyFooterWrapper").outerHeight(!0);$("#wizardHeader").outerHeight(!0)}else{e=$("#heightframe").outerHeight(!0),$("#dvlayout").outerHeight(!0);var t=$(".tstructMainBottomFooter").outerHeight(!0);if("axglo"==transid);else{if($("body").hasClass("formLayoutWidth")){var i=$("#wBdr").outerHeight(!0);i<e?$(".tstructMainBottomFooter").css({bottom:"".concat(e-(i+t),"px")}):$(".tstructMainBottomFooter").css({bottom:"-".concat(t,"px")})}if(!isMobile&&$("#DivFrame1").outerHeight()<$("#heightframe").outerHeight()){if($("#tabsCont2 .dvdcframe").length>0){var a=$("#tabsCont2 .dvdcframe").height()+$("#myTab").outerHeight(!0)+($("#heightframe").outerHeight(!0)-$("#DivFrame1").outerHeight(!0)-$("#tabsCont2").parents(".wrapper").outerHeight(!0)-20);$("#tabsCont2 .dvdcframe").css({"min-height":a})}$.each(DCIsGrid,function(e){"False"==DCIsGrid[e]&&0!=e&&$("#DivFrame"+(e+1)).addClass("nonGridDcTab")})}}}},50),"design"!=theMode&&isMobile&&-1!=$.inArray("axp_latlong",FNames)){var llIndex=$.inArray("axp_latlong",FNames);axplatlongFldName=FNames[llIndex],callParentNew("LocationInfoAPI()","function")}if("design"!=theMode&&-1!=$.inArray("latitude",FNames)&&-1!=$.inArray("longitude",FNames))var counter=0,intervalID=setInterval(function(){10==++counter&&clearInterval(intervalID);var e="latitude000F".concat(GetDcNo("latitude")),t="longitude000F".concat(GetDcNo("longitude"));""==$("#".concat(e)).val()&&""==$("#".concat(t)).val()&&!0===getLocation()&&clearInterval(intervalID)},1e3);if(breadCrumbStr){var brcList="";breadCrumbStr.split(" > ").forEach(function(e){""!=e&&(brcList+='<li class="breadcrumb-item text-muted">'+e+"</li>")}),$("#breadcrumb-panel ul.breadcrumb").length>0&&$("#breadcrumb-panel ul.breadcrumb").remove(),$("#breadcrumb-panel").append('<ul class="breadcrumb fw-bold fs-base my-1">'+brcList+'<li class="breadcrumb-item text-dark">'+$("#breadcrumb-panel h1").text()+"</li></ul>")}isMobile&&($("#breadcrumb-panel").attr({"data-toggle":"popover","data-placement":"bottom","data-content":""}),$("#breadcrumb-panel[data-toggle=popover]").popover({content:$(".menuBreadCrumb").length>1?$(".menuBreadCrumb").text():$(".tstivCaption ").text(),container:"body"})),"undefined"!=typeof AutosaveDraft&&"true"==AutosaveDraft&&""!=savedraftKeyCreatedtime&&(window.location.href.includes("act")||window.location.href.includes("recordid")||loadSavedDraft(savedraftKeyCreatedtime),savedraftKeyCreatedtime=""),"undefined"!=typeof AutosaveDraft&&"true"==AutosaveDraft&&""!=AutosaveDraftTime&&(draftSetTimeoutObj=setInterval(SaveAsDraft,parseInt(AutosaveDraftTime))),$(".griddivColumn ").addClass("gridFixedHeader").css({overflow:"auto"}),"undefined"!=typeof gridFixedHeader&&"true"!=gridFixedHeader||($(".griddivColumn ").addClass("gridFixedHeader").css({"max-height":"calc(100vh - 130px)"}),$(".gridFixedHeader table thead tr th").css({background:"#fff",position:"sticky",top:"0"})),hideacoptions(),$("input.fldFromSelect").off("click"),$("input.fldFromSelect").on("click",function(){if(isMobile){var e=$(this).attr("id");""!=e&&$("#"+e).hasClass("fldFromSelect")&&$("#"+e).removeClass("fldFromSelect")}}),appGlobalVarsObject._CONSTANTS.compressedMode&&appGlobalVarsObject.methods.toggleCompressModeUI($("body")),$(".toolbarRightMenu .menu").find(".menu-sub").addClass("mh-300px scroll-y"),$(".nav.nav-tabs").each(function(e,t){1==$(t).find(".nav-item a.nav-link").length&&$(t).find(".nav-item a.nav-link").removeClass("active").addClass("bg-white")}),setTimeout(function(){swicthCompressMode()},0),$(".fldCustTableIcon").off("click.fldCustTableIcona"),$(".fldCustTableIcon").on("click.fldCustTableIcona",function(e){FieldTypeTable(e,this)}),$(".fldCustTable ").off("keydown.fldtblA"),$(".fldCustTable ").on("keydown.fldtblA",function(e){13==e.keyCode&&FieldTypeTable(e,this)}),$(".toggle-password").click(function(){$(this).toggleClass("fa-eye fa-eye-slash");var e=$($(this).attr("toggle"));"password"==e.attr("type")?e.attr("type","text"):e.attr("type","password")}),$("#searchBar").on("click","ul.dropdown-menu [data-toggle=dropdown]",function(e){e.preventDefault(),e.stopPropagation(),$(this).parent().siblings().removeClass("open"),$(this).parent().toggleClass("open")}),isMobile&&($("body").addClass("isMobile"),$("#design").hide()),$("#iconsNew .right").off("click.subMenu",".dropdown-submenu a").on("click.subMenu",".dropdown-submenu a",function(e){var t=$(this).next("ul");$.each($("#iconsUl ul").not(t),function(e,t){$(t).is(":visible")&&$(t).hide()}),$(this).next("ul").toggle(),e.stopPropagation(),e.preventDefault()}),$("#iconsNew .right.dropdown").off("click.menu").on("click.menu",function(e){isMobile&&$(".pinIcon, .iconUIPin").hide(),$(this).hasClass("open")&&$(this).find(".dropdown-submenu ul.dropdown-menu").hide()}),GetProcessTime(),GetTotalElapsTime(),$(".modernButtonOptions #iconsUl > li.dropdown-submenu").on("click",function(e){$("#iconsUl > li:visible").index(this)%3==0?$(this).find("ul").css({left:"0px"}):$("#iconsUl > li:visible").index(this)%3==1?$(this).find("ul").css({left:"-110px"}):$("#iconsUl > li:visible").index(this)%3==2&&$(this).find("ul").css({left:"-223px"})}),barCodeScannerInit()}),$(document).on("click",".virtualKeyboard",function(){$(this).parent().children("input").attr("onfocus",function(e,t){return"blur()"==t?null:"blur()"}),$(this).parent().children("input").focus(),$(this).children().toggleClass("green")}),window.onbeforeunload=BeforeWindowClose,document.all||document.captureEvents(Event.MOUSEMOVE);var iX=0,iY=0;function getPosition(e){document.all?(iX=event.clientX+document.body.scrollLeft,iY=event.clientY+document.body.scrollTop):(iX=e.pageX,iY=e.pageY)}function findPosX(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetLeft,e=e.offsetParent;else e.x&&(t+=e.x);return t}function findPosY(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;else e.y&&(t+=e.y);return t}function FindCtrlPos(e){"string"==typeof e&&(e=document.getElementById(e));var t=e;jQuery(e).offset();iX=findPosX(t)+t.clientWidth+1,iY=findPosY(t)+t.clientHeight+1}function ShowTooltipDiv(){document.getElementById?div=document.getElementById("dvTip"):document.all&&(div=document.all.dvTip),""==div.style.display&&div.offsetWidth!=undefined&&div.offsetHeight!=undefined&&(div.style.display=0!=div.offsetWidth&&0!=elem.offsetHeight?"block":"none"),div.style.display="block",div.style.left=iX+"px",div.style.top=iY+"px"}var regexFld=new RegExp("^[a-zA-z0-9_]+$");function ShowTooltip(e,t){HideTooltip();var i=0,a="",r=new Array,l="";for(i=0;i<FNames.length;i++)if(FNames[i]==e){var o=(a=FToolTip[i]).indexOf("<h>");if(-1!=o){var n=a.indexOf("</h>");l="<a class='curHand' id='lblTip'  onclick='javascript:HyperlinkToolTip(\""+a.substring(o+3,n)+"\");'>"+a.substring(0,o)+" </a>",a=a.substring(n+4,a.length)}""!=a&&(r=a.split("/"));break}var s=0,d=t.attr("id"),c=t.value;for(s=0;s<r.length;s++)if(""!=r[s])if(-1==r[s].toString().indexOf(":"))r[s]=r[s].trim(),r[s].trim();else{var p=new Array,u=r[s],f="",m=0,h="",v=!1;for(m=0;m<=u.length;m++)if(":"==(h=u.charAt(m)))if("+"==u.charAt(m+1)){var g=u.substring(u.indexOf(":+"),u.indexOf("+:")+2);g=(g=g.replace(":+","")).replace("+:",""),g=Evaluate(d,c,g,"expr"),p.push(g),m=u.indexOf("+:")+2}else v=!0,""!=f&&p.push(f),f="";else{if(1==v){var b=regexFld.test(h);if(0==b){var $=GetFieldsRowFrameNo(d);b=GetFieldValue(f+$),p.push(b),f="",v=!1}}f+=h}""!=f&&p.push(f);var w=0;for(r[s]="",w=0;w<p.length;w++)r[s]+=p[w]}if(r.length>0){FindCtrlPos(d);var F=$j("#dvInnerTip");a="";for(i=0;i<r.length;i++)""!=r[i]&&(a+=r[i]+"<br/>");""!=l?(F.html("<br/>"+l+" "+a),ShowTooltipDiv()):""!=a&&(F.html("<br/>"+a),ShowTooltipDiv())}}function HideTooltip(){var e=$j("#dvTip");e.length>0&&e.hide()}document.onkeypress=function(e){27==e.keyCode&&HideTooltip()};var hlTipProps="",hlTipParmUrl="",hlTipUrl="",hlTipParamXml="";function HyperlinkToolTip(e){hlTipParmUrl="";var t="",i=new Array;new Array;i=e.split(",");var a="",r="",l="",o=new Array;if(i.length>0)for(var n=0;n<i.length;n++)"type"==(o=i[n].split("="))[0]?(temp=o[1],temp.startsWith("t")?(hlTipUrl="tstruct.aspx?act=open&transid=",r="t"):temp.startsWith("i")&&(hlTipUrl="ivtoivload.aspx?ivname=",r="i")):"name"==o[0]?(hlTipUrl=hlTipUrl+o[1]+"&openerIV=".concat("undefined"!=typeof isListView?"":o[1],"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"),t=o[1]):"popup"==o[0]?a=o[1]:"refresh"==o[0]?o[1]:"load"==o[0]?l=o[1]:"param"==o[0]&&CreatParamUrl(i[n]);if(hlTipProps=r+","+l+","+a,"t"==r&&""!=t&&l.startsWith("t"))try{ASB.WebService.GetRecordId(t,hlTipParamXml,SuccessGetRecId,OnException)}catch(s){}else GetUrl()}function SuccessGetRecId(e,t){var i="0";if(""!=e){var a=$j.parseXML(e),r=$j(a);r.find("recordid").length>0&&(i=r.find("recordid").text())}GetUrl(i)}function GetUrl(rId){var pType="",load="",openWin="",newWindow;if(""!=hlTipProps){var strHlProps=hlTipProps.split(",");pType=strHlProps[0],load=strHlProps[1],openWin=strHlProps[2]}if(""!=hlTipUrl)if("t"==pType&&rId!=undefined&&"0"!=rId&&load.startsWith("t")?hlTipUrl+="&recordid="+rId:hlTipUrl+=hlTipParmUrl,openWin.startsWith("t"))try{newWindow=window.open(hlTipUrl,"MyPopUp","resizable=yes")}catch(ex){showAlertDialog("warning",eval(callParent("lcm[356]")))}else window.document.location.href=hlTipUrl}function CreatParamUrl(e){var t="";""!=hlTipProps&&(t=hlTipProps.split(",")[0]);if(hlTipParmUrl="",-1!=(a=e.indexOf("param="))){e.indexOf("=");e=e.substring(6,e.length)}if(arrParam=e.split("~"),arrParam.length>0)for(var i=0;i<arrParam.length;i++){var a=arrParam[i].indexOf("="),r=arrParam[i].substring(a+1,arrParam[i].count),l=arrParam[i].substring(0,a);if(r.startsWith(":")){r=r.substring(1,r.length);IsGridField(r);var o="";if(IsGridField(r)){var n=r+GetRowNoHelper(AxActiveRowNo)+"F"+AxActiveDc;o=GetFieldValue(n)}else{n=r+"000F"+GetDcNo(r);o=GetFieldValue(n)}}else r.startsWith("{")?(-1!=r.indexOf("{")&&(r=r.replace("{","")),-1!=r.indexOf("}")&&(r=r.replace("}","")),o=r.endsWith("*d")?r.substring(0,r.length-2):r):o=r;hlTipParamXml=hlTipParamXml+"<"+l+">"+o+"</"+l+">","i"==t&&""!=o?hlTipUrl=hlTipUrl+"&"+l+"="+o:""!=o&&(hlTipParmUrl=hlTipParmUrl+"&"+l+"="+o)}}function GetSetTtipHgt(e){var t=$j("#dvInnerTip"),i=$j("#dvTip");"new"==e?(t.height()<50&&t.height("50"),t.width()<100&&t.width("100"),i.height()<50&&i.height("50"),i.width()<100&&i.width("100")):(t.css("height","auto"),t.css("width","auto"),i.css("height","auto"),i.css("width","auto"))}var tmpFldName="";function DisplayPickList(e){ShowDimmer(!0),AxWaitCursor(!0);var t,i=e.attr("id").split("~"),a=i[t=2==i.length?1:0].substring(0,i[t].lastIndexOf("F")-3),r="",l=$j("#"+i[t]);if(l.attr("readonly")!=undefined||l.attr("disabled")!=undefined)return ShowDimmer(!1),void AxWaitCursor(!1);l.length>0&&(AxOldValue=l.val(),r=l.val()),totalPLRows=0,curPageNo=1;var o=$j("#hdnPickFldId");-1==e.attr("id").indexOf("~")?o.val("img~"+e.attr("id")):o.val(e.attr("id")),AxFromAssociated=!0,GetPickListData(a,r,curPageNo.toString(),pageSize.toString(),i[t])}function ShowPickList(){$j("#pickDimmer").css("display","none");var e,t=$j("#hdnPickFldId").val().split("~");e=2==t.length?1:0,FindCtrlPos(i=document.getElementById(t[e]));var i,a=(i=$j("#"+t[e])).width()+19,r=(i.height(),$j("#dvPickList")),l=GetFieldsDcNo(t[e]);IsDcGrid(l);r.width(a),r.show();$(".dvheightframe ").scrollLeft();var o=$(".dvheightframe ").scrollTop();axInlineGridEdit&&(o-=36);var n=i.offset().top-i.parents("."+(axInlineGridEdit?"input":"form")+"-group").outerHeight()+o;r.css("top",n+"px"),r.css("left",i.offset().left+"px"),$("#dvPickList .pickLstResultCntnr").length>0&&$("#dvPickList .pickLstResultCntnr").offset().top+$("#dvPickList .pickLstResultCntnr").outerHeight()-$(".dvheightframe").offset().top>$(".dvheightframe").outerHeight()&&$(".dvheightframe").animate({scrollTop:$("#dvPickList .pickLstResultCntnr").offset().top+$("#dvPickList .pickLstResultCntnr").outerHeight()-$(".dvheightframe").offset().top-$(".dvheightframe").outerHeight()+$(".dvheightframe").scrollTop()},100)}function CheckHeight(e,t){var i=$j("#middle1",parent.document),a=document.body.offsetHeight,r=e+t;r>a&&(a+=r-a,i.height(a+10))}function GetPickListData(e,t,i,a,r){currentPickList=r,initialSrchVal=t;var l="";if(arrRefreshDcs.length>0)for(var o=0;o<arrRefreshDcs.length;o++){var n=arrRefreshDcs[o].split(":");l=n[1].replace("dc","")+","+n[0].replace("dc","")}t=CheckSpecialCharsInStr(t);var s=GetFieldsDcNo(r);AxActiveRowNo=parseInt(GetFieldsRowNo(r),10),AxActiveRowNo=GetDbRowNo(AxActiveRowNo,s);var d=AxActiveRowNo,c="";""!=AxActivePRow&&""!=AxActivePDc&&(c=AxActivePDc+"~"+AxActivePRow);var p="";IsParentField(e,s)&&(p=GetSubGridInfoForParent(s,AxActiveRowNo));try{ASB.WebService.GetSearchResult(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,t,i.toString(),a.toString(),tstDataId,s,d,c,p,l,SuccGetSearchResult,OnException)}catch(f){AxWaitCursor(!1),ShowDimmer(!1);var u=f.name+"^♠^"+f.message;showAlertDialog("error",2030,"client",u)}}function GetTdFrameNo(){var e=$j("#hdnPickFldId").val();return GetFieldsDcNo(e)}var pickStatus=!0,selectedRow=0;function SuccGetSearchResult(result,eventArgs){if(!CheckSessionTimeout(result)){var hdnFilter=$j("#hdnFiltered"),resultArr;if(hdnFilter.val("true"),""!=result&&"<error>"!=result.substring(0,7)){TogglePrevNextLink("inline");var tableStr="";if(-1!=result.indexOf("♣")){var totRowStr=result.split("♣");totalPLRows=parseInt(totRowStr[0],10),totalPLRows/pageSize%1>0?noOfPLPages=Math.floor(totalPLRows/pageSize)+1:noOfPLPages=totalPLRows/pageSize,resultArr=totRowStr[1].split("¿")}else resultArr=result.split("¿");var dv=$j("#dvPickHead");if(resultArr!=undefined&&""!=resultArr){tableStr="<table id='tblPickData'  data-pick='"+currentPickList+"' class='pickGridData'>";for(var i=0;i<resultArr.length;i++){var tdId="axPickTd00"+(i+1)+"F"+GetTdFrameNo(),pickValue=CheckSpecialCharsInHTML(resultArr[i]);if(-1!=resultArr[i].toString().indexOf("^")){var displayText=resultArr[i].toString().split("^")[1];tableStr+="<tr><td id ="+tdId+" onclick='javascript:SetPickVal(\""+pickValue+"\")' class='handCur'><a>"+displayText+"</td></tr>"}else displayText=resultArr[i].toString(),-1!=pickValue.indexOf("\\")?(pickValue=pickValue.replace("\\","\\\\"),tableStr+="<tr><td id ="+tdId+" onclick='javascript:SetPickVal(\""+pickValue+"\")' class='handCur' ><a>"+displayText+"</td></tr>"):tableStr+="<tr><td id ="+tdId+" onclick='javascript:SetPickVal(\""+pickValue+"\")' class='handCur'><a>"+displayText+"</td></tr>"}dv.length>0&&dv.html(tableStr),$j("#tblPickData tr").length>0&&$j("#tblPickData tr:nth-child(1)").addClass("active")}else if(dv.length>0){var cutMsg=eval(callParent("lcm[0]"));dv.html("<span>"+cutMsg+"</span>")}SetPrevNextLinks(),document.getElementById("advancebtn").style.visibility="visible",document.getElementById("advancesrch").style.visibility="visible"}else{tableStr="<table style='width:100%;height:auto;' id='tblPickData' cellpadding='1' cellspacing='1'>",tableStr+="</table>",document.getElementById("advancebtn").style.visibility="hidden",document.getElementById("advancesrch").style.visibility="hidden";var cutMsg=eval(callParent("lcm[0]"));tableStr+='<span style="font-size: 12px;">'+cutMsg+"</span>",TogglePrevNextLink("none");var dv=$j("#dvPickHead");dv.length>0&&dv.html(tableStr)}pickListRowCount=$j("#tblPickData tbody tr").length,pickListRowCount>1&&$j(".inputClass2").keydown(function(e){if(40==e.which){if(selectedRow<pickListRowCount){0==$j("#tblPickData tr:nth-child("+selectedRow+++")").length&&(selectedRow=2),$j("#tblPickData tr").removeClass("pickbg"),$j("#tblPickData tr:nth-child("+selectedRow+")").addClass("pickbg");for(var t=0,i=0;i<selectedRow;i++)t+=$j("#tblPickData tr:nth-child("+i+")").height();t+20>$j("#dvPickHead").height()&&$j("#dvPickHead").scrollTop($j("#dvPickHead")[0].scrollHeight)}}else if(38==e.which){if(selectedRow>2){0==$j("#tblPickData tr:nth-child("+selectedRow--+")").length&&selectedRow++,$j("#tblPickData tr").removeClass("pickbg"),$j("#tblPickData tr:nth-child("+selectedRow+")").addClass("pickbg"),1==selectedRow&&e.preventDefault();for(t=0,i=pickListRowCount;i>=selectedRow;i--)t+=$j("#tblPickData tr:nth-child("+i+")").height();if(t+10>$j("#dvPickHead").height()){var a=selectedRow-1;$j("#dvPickHead").scrollTop($j("#tblPickData tr:nth-child("+a+")").height())}}}else 39==e.which?$j("#nextPick").attr("onclick")!=undefined&&""!=$j("#nextPick").attr("onclick")&&(GetData("next"),$j("#dvPickHead").scrollTop(0),selectedRow=1):37==e.which?$j("#prevPick").attr("onclick")!=undefined&&""!=$j("#prevPick").attr("onclick")&&(GetData("prev"),selectedRow=1,$j("#dvPickHead").scrollTop(0)):27!=e.which&&9!=e.which||(HidePLDiv(!1),selectedRow=0);e.which=-1}),$j(document).keypress(function(e){if(-1!=e.keyCode){if(13==e.keyCode){var t=GetActivePickListId(),i=GetFieldsDcNo(t),a=GetFieldsRowNo(t);if(AxActiveRowNo=GetDbRowNo(a,i),$j("#dvPickList").is(":visible")){var r="#axPickTd00"+--selectedRow+"F"+GetTdFrameNo();if($j(r).length>0){var l=$j(r).find("a")[0].innerText;l==undefined&&(l=$j(r).find("a")[0].textContent),SetPickVal(l),pickStatus=!1}selectedRow=0}}e.which=-1}}),$j(document).click(function(e){"nextPick"!=e.target.id&&"prevPick"!=e.target.id&&"curHand"!=e.target.className&&"hdrRow"!=e.target.className&&("nextPick"==e.target.parentElement.id||"prevPick"==e.target.parentElement.id?$j("#pickDimmer").css("display","block"):HidePLDiv(!1),selectedRow=0)}),currentPickList="",ShowPickList(),ShowDimmer(!1),AxWaitCursor(!1)}}function GetActivePickListId(){var e=$j("#hdnPickFldId").val().split("~");return e[e.length>1?1:0]}function HidePLDiv(e){if(1==e){var t=$j("#hdnPickFldId").val();if(""!=t&&-1!=t.indexOf("~")){var i="#"+t.split("~")[1];$j(i).focusNextInputField()}}var a=$j("#dvPickList");a.length>0&&a.hide()}function GetData(e){"prev"==e&&curPageNo>1?curPageNo-=1:"next"==e&&curPageNo<noOfPLPages&&(curPageNo+=1);var t=$j("#hdnPickFldId");if(t.length>0){var i=t.val();if(""!=i&&-1!=i.indexOf("~")){var a=i.split("~");GetPickListData(a[1].substring(0,a[1].lastIndexOf("F")-3),$j("#"+a[1]).val(),curPageNo.toString(),pageSize.toString(),a[1])}}}function TogglePrevNextLink(e){var t=$j("#prevPick"),i=$j("#nextPick");"block"==e||"inline"==e?(t.show(),i.show()):(t.hide(),i.hide())}function SetPrevNextLinks(){var e=$j("#prevPick"),t=$j("#nextPick"),i=$j("#tblPickData");1==curPageNo?(e.attr("disabled","disabled"),e.css("display","none"),e.removeAttr("onclick")):(e.attr("disabled",!1),e.css("color","black"),t.css("color","black"),e.attr("onclick","javascript:GetData('prev')")),curPageNo<noOfPLPages?(t.attr("disabled",!1),t.css("color","black"),t.attr("onclick","javascript:GetData('next')")):curPageNo>=noOfPLPages?(t.attr("disabled","disabled"),t.css("display","none"),t.removeAttr("onclick")):(i.attr("disabled","disabled"),i.removeAttr("onclick"))}function SetPickVal(e){var t=$j("#hdnPickFldId");if(t){var i=t.val().split("~"),a=i[i.length>1?1:0],r=$j("#"+a);if($j("#pickfld000F0").val(a),-1!=e.indexOf("^")){GetFieldsRowFrameNo(a);var l=$j("#pickIdVal_"+a),o=e.split("^");l.val(o[0]),e=o[1]}e=RepSpecialCharsInHTML(e),r.val(e);try{r.focus()}catch(n){}AxFromAssociated=!0}HidePLDiv(!1)}function CallSearchOpen(){if(window.chrome&&$j("#HdnAxAdvPickSearch").val("true"),ShowDimmer(!0),AxWaitCursor(!0),HidePLDiv(!1),$j("#hdnPickFldId")){var e=$j("#hdnPickFldId").val(),t=$j("#"+e);$j(".pickimg").each(function(){$j(this).attr("id")==e&&(t=$j(this))}),t.length>0&&SearchOpen(t)}AxWaitCursor(!1)}$j.fn.focusNextInputField=function(){return this.each(function(){setTimeout(function(){var e=$(this);if(axInlineGridEdit&&!$($(e).closest("div")).hasClass("form-group"))var t=$j(e).parents("input:eq(0),body").find('button,input[type!="hidden"],textarea,select');else t=$j(e).parents("form:eq(0),body").find('button,input[type!="hidden"],textarea,select');var i=t.index(e);if(i>-1&&i+1<t.length){var a=t.eq(i+1),r=a.prop("disabled");if(1==r||"disabled"==r||"togCol"==a.prop("class"))t.eq(i+1).focusNextInputField();else if(axInlineGridEdit&&!$(e.closest("div")).hasClass("form-group")){var l=t.eq(i).closest("td").attr("data-focus-index");t.eq(i).closest("tr").attr("last-focus-index")!=l&&(l=parseInt(l)+1),$j(e).parents("input:eq(0),body").find("td[data-focus-index='"+l+"']").find("input").focus()}else isMobile||t.eq(i+1).focus()}return!1},0)})};var fcontrols=new Array,found=!1,process=!1,fc=0,ch,strch,cmdfchar,cresult=!0,cond="",skip,fld,count=0,cont=!1,fldExtn="",isobject=!1,btnObject=!1,firstFldDc="NONGRID",secFldDc="NONGRID",isFieldBtn=!1,arrVisibleTabDcs=new Array;function DoFormControl(e){var t,i=GetFieldsName(e),a=GetFieldsDcNo(e),r=GetFieldsRowNo(e),l=IsDcGrid(a);if(fldExtn=r+"F"+a,firstFldDc=l?"GRID":"NONGRID",0==fcontrols.length)for(var o=0;o<Formcontrols.length;o++){var n=Formcontrols[o];n.startsWith("f")&&(t=n.substr(1,n.length),fcontrols[fc]=t,fc++)}found=!1;for(var s=0;s<fcontrols.length;s++)if(fcontrols[s]==i){found=!0;break}process=!1,found&&EvaluateFormControl(i)}function AddVisTabDcsInArray(){for(var e=PagePositions.length,t=0;t<e;t++)arrVisibleTabDcs.push("")}function DoFormControlOnload(){if(0==fcontrols.length)for(var e=0;e<Formcontrols.length;e++){var t=Formcontrols[e];t.startsWith("f")&&(v=t.substr(1,t.length),fcontrols[fc]=v,fc++)}try{var i=$j("#recordid000F0").val();""==i&&(i="0");for(var a=0;a<fcontrols.length;a++)("0"==i&&"_On Form Load"==fcontrols[a]||"0"!=i&&"_On Data Load"==fcontrols[a])&&EvaluateFormControl(fcontrols[a])}catch(r){console.log(r.message)}}function EvaluateFormControl(e){for(var t=0;t<Formcontrols.length;t++)if(a=Formcontrols[t],strch=a,a=a.split(""),"1"==(cmdfchar=strch.startsWith("10")||strch.startsWith("11")||strch.startsWith("12")?a[0]+a[1]:a[0])&&a.length>1&&("0"==a[1]||"1"==a[1])&&"d"==a[2]&&"c"==a[3]?(cmdfchar=a[0]+a[1],fldname=strch.substr(2,strch.length)):fldname="10"==cmdfchar||"11"==cmdfchar||"12"==cmdfchar?strch.substr(2,strch.length):strch.substr(1,strch.length),"f"!=cmdfchar||fldname!=e)if("e"!=cmdfchar||1!=process){if(0!=process){if(3==cmdfchar&&1==cresult){t+=1,"''"==(i=(i=Formcontrols[t]).substring(1,i.length))&&(i="");if(":"==(a=i.split(""))[0]){if("yes",i=i.substring(1,i.length),i=GetComponentName(GetExactFieldName(i),fldExtn),!($j("#"+i).length>0))continue;i=GetFieldValue(i)}CallProcessFormControl(fldname,fldExtn,"3",i)}else if(12==cmdfchar&&1==cresult){var i;t+=1,"''"==(i=(i=Formcontrols[t]).substring(2,i.length))&&(i="");var a;if(":"==(a=i.split(""))[0]){if("yes",i=i.substring(1,i.length),i=GetComponentName(GetExactFieldName(i),fldExtn),!($j("#"+i).length>0))continue;i=GetFieldValue(i)}CallProcessFormControl(fldname,fldExtn,"12",i)}else if(1!=cmdfchar&&2!=cmdfchar&&4!=cmdfchar&&5!=cmdfchar&&6!=cmdfchar&&7!=cmdfchar&&8!=cmdfchar&&9!=cmdfchar&&10!=cmdfchar&&11!=cmdfchar||1!=cresult){if("c"==cmdfchar)if("if"==fldname){count=0;try{cresult=Getcondition(t),(skip=cresult)&&(count=1),t+=3}catch(r){}}else"elseif"==fldname?(skip?(cresult=!1,count=3):cresult=!cresult,cresult&&(cresult=Getcondition(t),(skip=cresult)&&(count=2)),t+=3):"else"==fldname?skip=cresult=1!=skip&&!cresult:"and"==fldname?(cresult=cresult&&Getcondition(t),1==count&&1==count&&0==cresult&&(skip=!1),2==count&&(skip=2==count&&1==cresult),3==count&&(skip=!0),t+=3):"or"==fldname?(cresult=cresult||Getcondition(t),1==count&&1==count&&0==cresult&&(skip=!1),2==count&&(skip=2==count&&1==cresult),3==count&&(skip=!0),t+=3):"end"==fldname&&(cresult=!0,skip=!1)}else CallProcessFormControl(fldname,fldExtn,cmdfchar.toString())}}else process=!1;else process=!0}function CallProcessFormControl(e,t,i,a){if("4"==i||"5"==i||"dc"==e.substring(0,2)&&("8"==i||"9"==i||"10"==i||"11"==i))ProcessFormControl(e,i,a);else{e=GetExactFieldName(e);var r=GetDcNo(e),l=IsDcGrid(r);if(secFldDc=l?"GRID":"NONGRID","NONGRID"==firstFldDc&&"NONGRID"==secFldDc||"GRID"==firstFldDc&&"NONGRID"==secFldDc)ProcessFormControl(e=e+"000F"+r,i,a);else if("NONGRID"==firstFldDc&&"GRID"==secFldDc)for(var o=GetDcRowCount(r),n=1;n<=o;n++){ProcessFormControl(e+GetRowNoHelper(n)+"F"+r,i,a)}else if("GRID"==firstFldDc&&"GRID"==secFldDc){ProcessFormControl(e=e+GetClientRowNo(AxActiveRowNo,r)+"F"+r,i,a)}else ProcessFormControl(e=e,i,a)}}function ProcessFormControl(e,t,i){isFieldBtn=!1,-1!=e.indexOf(".")&&e.replace(".","\\.");var a=$j("#"+e);if("4"==t||"5"==t||"dc"==e.substr(0,2)&&("8"==t||"9"==t||"10"==t||"11"==t)){var r=e.substr(2);0==(a=$j("#DivFrame"+e.toString().substring(2))).length&&-1!=$j.inArray(r,TabDCs)&&(a=$j("#ank"+r))}var l=GetFieldsRowNo(e),o=GetFieldsDcNo(e),n=GetDbRowNo(l,o),s=!1;if(a.length<=0){var d,c=e;-1!=e.toString().indexOf("F")&&(c=e.substring(0,e.lastIndexOf("F")-3)),$j(".axpBtn,.axpBtnCustom").each(function(){if($j(this).attr("id")==c)return a=$j(this),isFieldBtn=!0,!1}),$j(".action img").each(function(){if($j(this).attr("id")==c)return d=$j(this),isFieldBtn=!0,!1});var p=!1;$j(".AxpTstBtn input,img").each(function(){if($j(this).attr("value")==c||$j(this).attr("id")=="AxpTstBtn_"+c)return d=$j(this),isFieldBtn=!0,p=!0,!1}),"remove"==c.toLowerCase()?c="delete":"list view"==c.toLowerCase()?c="listview":"new"==c.toLowerCase()&&(c="add"),"save"==c.toLowerCase()&&(s=!0);var u=c;"listview"==u.toLowerCase()&&(u="list view"),$j("#icons").find("a").each(function(){return void 0!==$j(this).attr("title")&&$j(this).attr("class")==c.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName?(a=$j(this),isFieldBtn=!0,!1):void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==u.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName?(a=$j(this),isFieldBtn=!0,!1):void 0}),$j(".toolbarRightMenu").find("a").each(function(){if(void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==u.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)return a=$j(this),isFieldBtn=!0,!1}),isFieldBtn||$j("#nextprevicons").find("a").each(function(){$j(this).attr("class")==c.toLowerCase()&&(a=$j(this),isFieldBtn=!0)}),isFieldBtn||$j(".tstructMainBottomFooter").find("a").each(function(){$j(this).attr("id").toLowerCase()==c.toLowerCase()&&(a=$j(this),isFieldBtn=!0)}),isFieldBtn||$(".toolbarRightMenu .menu-item a").each(function(){(void 0!==$j(this).attr("id")&&$j(this).attr("id").toLowerCase()==c.toLowerCase()||void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==u.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)&&(a=$j(this),isFieldBtn=!0)}),d!=undefined&&d.length>0&&(a=d.parent(0)),p&&(a=d)}if(a.length>0)switch(t){case"1":if(isFieldBtn)s?EnableSaveBtn(!0):EnableDisableBtns(a,!0);else{if(1==IsPickListField(a.attr("id")))(h=document.getElementById("img~"+a.attr("id"))).disabled=!1,h.className="input-group-addon handCur pickimg";if(0==a.val()&&"select-one"!=a.prop("type")&&a.val(""),a.attr("title")==dateString&&""==a.val()&&a.val(dateString),"checkbox"==a.attr("type"))EnableDisableCheckbox(a.attr("id"),!1);else(a.attr("id").startsWith("rtf_")||a.attr("id").startsWith("rtfm_")||a.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(a.attr("id"))))&&($j("#cke_"+a.attr("id")).prop("disabled",!1),a.css("display","none"),$j("#cke_"+a.attr("id")).removeAttr("disabled")),"axpImg"==a.attr("class")&&a.attr("onclick",null),a.prop("disabled",!1),a.prop("readOnly",!1),a.removeAttr("readOnly"),SetAutoCompAccess("enabled",a)}break;case"2":if(isFieldBtn)s?EnableSaveBtn(!1):EnableDisableBtns(a,!1);else{if(1==IsPickListField(a.attr("id")))(h=document.getElementById("img~"+a.attr("id"))).disabled=!0,h.className="pickimg input-group-addon handCur";if(a.attr("title")!=dateString||a.val()!=dateString&&"''"!=a.val()||a.val(""),"checkbox"==a.attr("type")){EnableDisableCheckbox(a.attr("id"),!0)}else{(a.attr("id").startsWith("rtf_")||a.attr("id").startsWith("rtfm_")||a.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(a.attr("id"))))&&($j("#cke_"+a.attr("id")).attr("disabled","disabled"),a.css("display","none"),$j("#cke_"+a.attr("id")).prop("readonly",!0)),"axpImg"==a.attr("class")&&a.attr("onclick","callnull");try{if(a.hasClass("selectTextArea")){var f=GetFieldsDcNo(a.attr("id"));IsDcGrid(f)||a.prop("disabled",!0)}else a.prop("disabled",!0)}catch(w){a.prop("disabled",!0)}SetAutoCompAccess("disabled",a)}}break;case"3":var m=GetDcNo(fldname);if($j("#"+e).hasClass("multiFldChk")&&""==i.trim())if(IsDcGrid(m))$j("input[id="+e+"]").each(function(){$j(this).removeAttr("checked"),$j(this).prop("checked",!1)});else try{$("#"+e).val(""),$("#"+e).data("valuelist",""),$("#"+e).tokenfield("setTokens",[])}catch(w){}else CallSetFieldValue(e,i);UpdateFieldArray(e,n,i,"parent","");break;case"4":if("dc"==fldname.substr(0,2))ShowingDc(m=parseInt(fldname.substr(2,fldname.length),10),"enable");break;case"5":if("dc"==fldname.substr(0,2))ShowingDc(m=parseInt(fldname.substr(2,fldname.length),10),"disable");break;case"6":if(isFieldBtn)s?EnableSaveBtn(!0):EnableDisableBtns(a,!0);else{if(1==IsPickListField(a.attr("id")))(h=document.getElementById("img~"+a.attr("id"))).disabled=!1,h.className="input-group-addon handCur pickimg";a.prop("disabled",!1),a.prop("readOnly",!1),isFieldBtn||a.removeClass("dis"),a[0].children[0].className="handCur"}break;case"7":if(isFieldBtn)s?EnableSaveBtn(!1):EnableDisableBtns(a,!1);else{var h;if(1==IsPickListField(a.attr("id")))(h=document.getElementById("img~"+a.attr("id"))).disabled=!0,h.className="input-group-addon  pickimg";a.prop("disabled",!0),a.prop("readOnly",!1),a.addClass("dis"),a[0].children[0].className=""}break;case"8":if("dc"==fldname.substr(0,2)){m=parseInt(fldname.substr(2,fldname.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(m,"hide"):ShowingDc(m,"hide")}else{HideShowField(fldname,"hide");var v=GetFieldIndex(fldname),g=GetDWBFieldType("",v);(fldname.startsWith("axptm_")||fldname.startsWith("axpdbtm_")||""!=g&&"time"==g.toLowerCase())&&($j("#"+a.attr("id")+" .tstOnlyTime").removeClass("hasDatepicker"),$j("#"+a.attr("id")+" .tstOnlyTime24hours").removeClass("hasDatepicker"))}break;case"9":if("dc"==fldname.substr(0,2)){m=parseInt(fldname.substr(2,fldname.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(m,"show"):ShowingDc(m,"show")}else{HideShowField(fldname,"show");v=GetFieldIndex(fldname),g=GetDWBFieldType("",v);(fldname.startsWith("axptm_")||fldname.startsWith("axpdbtm_")||""!=g&&"time"==g.toLowerCase())&&($j("#"+a.attr("id")+" .tstOnlyTime").addClass("hasDatepicker"),$j("#"+a.attr("id")+" .tstOnlyTime24hours").addClass("hasDatepicker"))}break;case"10":if("dc"==fldname.substr(0,2))ShowingDc(m=parseInt(fldname.substr(2,fldname.length),10),"hidepopdc");break;case"11":if("dc"==fldname.substr(0,2))ShowingDc(m=parseInt(fldname.substr(2,fldname.length),10),"showpopdc");break;case"12":m=GetDcNo(fldname);IsDcGrid(m)?($("#gridHd"+m+" th[id='th-"+fldname+"']").text(i),$("#wrapperForEditFields"+m+" label[for='"+e+"']").text(i)):"checkbox"==$j("#"+e).attr("type")?$("label[for='"+e+"'] span").text(i):$("label[for='"+e+"']").text(i);break;default:return}else if(EnableDisableField(e,t,"0"),("4"==t||"5"==t)&&"dc"==fldname.substr(0,2)){var b="";b="4"==t?"enable":"disable";m=parseInt(fldname.substr(2,fldname.length),10);-1==$j.inArray(m+"~"+b,DisabledDcs)&&DisabledDcs.push(m+"~"+b)}}function EnableDisableCheckbox(e,t){$j("#chkAll_"+e).prop("disabled",t),$j("#chkAll_"+e).attr("readOnly",t),$j("input:checkbox[id='"+e+"']").each(function(){$j(this).prop("disabled",t),$j(this).attr("readOnly",t)})}function EnableDisableField(e,t,i){"1"==i?ProcessFormControl(e,t,""):-1==$j.inArray(e+"~"+t,AxFormContDisableFlds)&&AxFormContDisableFlds.push(e+"~"+t)}function HideShowField(e,t){var i=GetDcNo(e),a="";if(IsDcGrid(i)){"hide"==t?$j("#th-"+e).hide():$j("#th-"+e).show();var r;r=GetDcRowCount(i);try{var l=GetFieldIndex(e);FFieldHidden[l]="hide"==t?"True":"False"}catch(c){}getGridFldType(e,i);for(var o=1;o<=r;o++){var n;if((a=$j("#"+e+GetClientRowNo(o,i)+"F"+i)).length>0)if("hide"==t)a.hide(),inputValue.css("display","none"),a.parent().hide(),(n=a.attr("data-style"))!=undefined&&a.attr("data-style",n.indexOf("display: inline")>0?n.replace("display: inline;","display: none;"):n.indexOf("display: none")>0?n:n+"display: none;"),$j("#dvGrid"+e).length&&$j("#dvGrid"+e).hide(),a.closest(".gridElement").length&&a.closest(".gridElement").hide(),!a.parent().is("td")&&a.parent().parent().length>0&&(a.parent().parent().is("td")?a.parent().parent().hide():a.parent().parent().parent().is("td")&&a.parent().parent().parent().hide());else a.show(),a.parent().show(),inputValue.css("display","inline"),(n=a.attr("data-style"))!=undefined&&a.attr("data-style",n.indexOf("display: inline")>0?n:n+"display: inline;"),$j("#dvGrid"+e)&&$j("#dvGrid"+e).show(),a.closest(".gridElement").length&&a.closest(".gridElement").show(),!a.parent().is("td")&&a.parent().parent().length>0&&(a.parent().parent().is("td")?a.parent().parent().show():a.parent().parent().parent().is("td")&&a.parent().parent().parent().show());else-1==$j.inArray(e+"~"+t,AxFormContHiddenFlds)&&AxFormContHiddenFlds.push(e+"~"+t)}}else{a=$j("#dv"+e);try{var s=GetFieldIndex(e);FFieldHidden[s]="hide"==t?"True":"False"}catch(c){}if(a.length>0)if("hide"==t)a.addClass("d-none").parents(".grid-stack-item").addClass("d-none");else{a.removeClass("d-none").parents(".grid-stack-item").removeClass("d-none");var d=a.find(":input");d.css("visibility"),d.css("visibility","")}else-1==$j.inArray(e+"~"+t,AxFormContHiddenFlds)&&AxFormContHiddenFlds.push(e+"~"+t)}}var inputValue="",s;function getGridFldType(e,t){var i=0==$("#gridHd"+t+" tbody tr").length?1:$("#gridHd"+t+" tbody tr").length,a=(inputValue=$j("#"+e+GetClientRowNo(i,t)+"F"+t)).closest(".gridElement");return eleType="",a.find("span.picklist").length>0?(eleType="pickList",hiddenData=a.find("span.picklist input[type = hidden]").attr("id")+"~"+a.find("span.picklist input[type = hidden]").val()):a.find("input.grdAttach").length>0?(eleType="gridattach",isAttachMentExist=!0):a.find("input.date").length>0?eleType="datepicker":inputValue.hasClass("fldFromSelect")?(inputValue.hasClass("fastdll")?eleType="fromselect-select":eleType="fromselect-pick",eleType=inputValue.hasClass("isrefreshsave")?eleType+"~isrefreshsave":eleType):(eleType=inputValue[0].nodeName.toLowerCase(),"input"==eleType&&"checkbox"==inputValue[0].type&&(eleType="checkbox"),"input"==eleType&&inputValue.hasClass("number")&&(eleType="numeric")),eleType}function Getcondition(i){var isfld=!1,expFldname1="",fieldVal="";s=Formcontrols[i+1];var firstChar=s.substring(0,1);":"==firstChar&&(s=s.substring(1,s.length)),s=GetExactFieldName(s),fld=GetComponentName(s,fldExtn),cond=GetCondFldValue(fld),""==cond&&(cond="''");var op=Formcontrols[i+2];"et"==op&&(op="=="),"net"==op&&(op="!="),"gt"==op&&(op=">"),"lt"==op&&(op="<"),"gtoet"==op&&(op=">="),"ltoet"==op&&(op="<="),cond+=op,s=Formcontrols[i+3];var firstChar=s.substring(0,1);return":"==firstChar&&(s=s.substring(1,s.length),s=GetExactFieldName(s),s=GetComponentName(s,fldExtn),s=GetCondFldValue(s)),s=TrimAll(s),s=s.replace(/\s/g,""),isNaN(s)&&(s=s.replace(/\"/g,""),s='"'+s+'"'),cond+=s,result=eval(cond),result}function GetComponentName(e,t){var i=GetDcNo(e),a=IsDcGrid(i);if(""==t)r=a?e+"001F"+i:e+"000F"+i;else var r=e+t;return document.getElementById(r)||(r=a?e+"001F"+i:e+"000F"+i),r}function GetCondFldValue(e){var t="";if($j("#"+e).length>0)t=GetFieldValue(e);else{var i=0;if(Parameters.length>1)for(var a=1;a<Parameters.length;a++){var r=Parameters[a].toString();r=r.split("~"),varlist[i]=r[0].toString(),valuelist[i]=r[1].toString(),i++}for(var l=0;l<varlist.length;l++)if(s==varlist[l]){t=valuelist[l];break}}return(t=t!=undefined?t.replace(/\s/g,""):"''")==dateString&&(t="''"),isNaN(t)&&(t='"'+t+'"'),t}function ShowingDc(e,t,i){IsDcGrid(e);var a=parseInt(e,10),r="visible",l="glyphicon glyphicon-chevron-down icon-arrows-down",o="show",n="hand";if("hide"==(t=t.toString().toLowerCase()))r="hidden","none",l="glyphicon glyphicon-chevron-up icon-arrows-up",o="show",n="default","true";else if("show"==t){var s=GetTabDcIndexPagePos(a);-1!=s&&(""==arrVisibleTabDcs[s]?(arrVisibleTabDcs[s]=a,!0):!1),r="visible","block",l="glyphicon glyphicon-chevron-down icon-arrows-down",o="hide",n="hand","false"}var d=$j("#dcButspan"+e);d.length>0&&(d.attr("alt",o),d.attr("class",l),d.css("visibility",r),d.css("cursor",n)),$j(".fbutton").each(function(){"hide"==t?$j(this).prop("disabled",!0):$j(this).prop("disabled",!1)});var c=$j("#DivFrame"+e),p="";if(c.length>0){if("showpopdc"!=t&&"hidepopdc"!=t||(createPopDcDialog(e,c),void 0!==fld||null!=fld||""!=fld?p=fld:parseInt(dcno,10)>0&&("true"==DCIsGrid[dcno-1].toLowerCase()?(rowNo=GetRowNoHelper(AxActiveRowNo),p=AxActiveField+rowNo+"F"+GetDcNo(AxActiveField)):(rowNo="000",p=AxActiveField+rowNo+"F"+GetDcNo(AxActiveField)))),"show"==t)c.removeClass("d-none");else if("hide"==t)c.addClass("d-none");else if("showpopdc"==t)"complete"==document.readyState&&c.dialog("open"),c.find("#head"+e).find("a[onclick^='javascript:ShowDc(']").hide(),$("#"+p).parent().next().hasClass("ShowPopDc")||$('<span class="fa fa-external-link ShowPopDc" onclick="ShowingDc(\''+e+"','showpopdc'); return false;\"></span>").insertAfter($("#"+p).parent());else if("hidepopdc"==t)"complete"==document.readyState&&c.dialog("close"),$("#"+p).parent().next().hasClass("ShowPopDc")&&$("#"+p).parent().next().remove();else if("enable"==t)$j("#DivFrame"+e).find("input,textarea, img, select, a").removeAttr("disabled"),$j("#DivFrame"+e).find(".rowdelete").removeClass("disabledelete"),$j("#wrapperForEditFields"+e).show(),$j("#gridToggleBtn"+e).removeClass("disables").prop("disables",!1),$j("#DivFrame"+e).find(".rowadd").removeClass("disableadd"),$j("#DivFrame"+e).find(".fillcls").removeClass("disablefill"),$j("#gridAddBtn"+e).prop("disabled",!1),$j("#wrapperForEditFields"+e).find(".editLayoutFooter button").removeClass("disabled").prop("disabled",!1),$j("[id ^= 'fillgrid']").prop("disabled",!1).removeClass("disabled"),$j("#gridHd"+e+" tbody tr").removeClass("disableTheRow"),$j("#gridHd"+e+" tbody tr").find(".glyphicon.glyphicon-pencil,.glyphicon.glyphicon-trash").removeClass("disabled").prop("disabled",!1).parent().removeClass("disabled").prop("disabled",!1),$("#gridAddBtn"+e).next().find(":button").attr("disabled",!1).on("click"),$j("#DivFrame"+e+" .newgridbtn ul li").css("pointer-events","");else if("disable"==t){for(var u in $j("#DivFrame"+e).find("input,textarea, img, select, a").not(".subGrid,.chkShwSel").attr("disabled",!0),CKEDITOR.instances)try{CKEDITOR.instances[u].setReadOnly(!0)}catch(h){}$j("#DivFrame"+e).find("a img").removeClass("handCur"),$j("#DivFrame"+e).find("img").attr("onclick","javascript:void(0);"),$j("#DivFrame"+e).find(".dvImgClear .icon-arrows-remove").attr("onclick","javascript:void(0);"),$j("#DivFrame"+e).find(":button").removeClass("handCur"),$j("#DivFrame"+e).find(".rowdelete").addClass("disabledelete"),$j("#DivFrame"+e).find(".rowadd").addClass("disableadd"),$j("#gridAddBtn"+e).prop("disabled",!0),$j("#clearThisDC"+e).prop("disabled",!0).find(".gridActs").addClass("disabled"),$j("#wrapperForEditFields"+e).hide(),$j("#gridToggleBtn"+e).addClass("disabled").prop("disabled",!0),$j("#DivFrame"+e).find(".fillcls").addClass("disablefill"),$j("[id ^= 'fillgrid']").prop("disabled",!0).addClass("disabled"),$j("#wrapperForEditFields"+e).find(".editLayoutFooter button").addClass("disabled").prop("disabled",!0),$j("#colScroll"+e+" table tbody tr").addClass("disableTheRow"),$j("#colScroll"+e+" table tbody tr").find(".glyphicon.glyphicon-pencil,.glyphicon.glyphicon-trash").addClass("disabled").prop("disabled",!0).parent().addClass("disabled").prop("disabled",!0),$("#gridAddBtn"+e).next().find(":button").attr("disabled",!0).off("click"),$j("#DivFrame"+e+" .newgridbtn ul li").css("pointer-events","none"),$j("#DivFrame"+e).find(".upload-icon").hover(function(){$(this).css("cursor","not-allowed")}).attr("onclick","javascript:void(0)"),$j("#DivFrame"+e).find(".attach-files .grdAttach, .grdAttach").hover(function(){$(this).css("cursor","not-allowed")}).attr("onclick","javascript:void(0)"),$j("#DivFrame"+e).find(".attachment-count").removeAttr("disabled")}}else"disable"!=t&&"enable"!=t||-1==$j.inArray(e+"~"+t,DisabledDcs)&&DisabledDcs.push(e+"~"+t);var f=$j("#li"+e);if(f.length>0&&("show"==t?f.removeClass("d-none"):"hide"==t&&f.addClass("d-none")),f.hasClass("active")&&"hide"==t){var m=GetFirstTabDcNo(e);-1!=m&&$j("#ank"+m).click()}}function createPopDcDialog(e,t){var i=.97*$(window).width();$(window).height();"complete"==document.readyState&&(t.dialog({modal:!0,autoOpen:!1,width:i,open:function(){$(".ui-widget-overlay").bind("click",function(){t.dialog("close")})},close:function(){$(this).dialog("close"),$(this).dialog("destroy"),t.hide()},buttons:[{text:"Save",click:function(){ValidateBeforeSubmit(e)&&t.dialog("close")},"class":"ui-button ui-corner-all ui-widget hotbtn"},{text:"Cancel",click:function(){ClearFieldsInDC(e),t.dialog("close")},"class":"coldbtn btn",style:"background: antiquewhite"}]}),$(".ui-dialog-titlebar").hide(),0==t.find("div:eq(0) button").length&&t.find("div:eq(0)").prepend('<button class="remodal-close icon-basic-remove" style="color:rgba(76, 53, 53, 0.61);"></button>'),$(".remodal-close").bind("click",function(){t.dialog("close")}))}function createDataGridDialog(e){createBootstrapModal("divDc"+e+" #gridheaddiv","DC"+e+" ","wrapperForEditFields"+e,"","","97%")}function clearDataGrid(editGridDC){var isExitDummy=!1;if(gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==editGridDC&&(isExitDummy=!0)}),isExitDummy)return!1;if($j("#clearThisDC"+editGridDC).find("a[disabled='disabled']").length>0)return!1;if($j("#chkallgridrow"+editGridDC).prop("checked"))if($(".wrapperForGridData"+editGridDC+" table tbody tr").length>0){var cutMsg=eval(callParent("lcm[25]"));cutMsg=cutMsg.replace("{0}",GetDcCaption(editGridDC));var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var rid=$j("#recordid000F0").val();if("0"!=rid)var clearThisDCGrid=$.confirm({theme:"modern",closeIcon:!1,rtl:isRTL,title:eval(callParent("lcm[155]")),onContentReady:function(){$(".jconfirm-buttons .hotbtn").focus(),disableBackDrop("bind")},backgroundDismiss:"false",escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){clearThisDCGrid.close();var e=GetDcRowCount(editGridDC);DeleteAllRows(editGridDC,e),ShowDimmer(!1),$("#chkallgridrow"+editGridDC).prop("checked",!1),$("#clearThisDC"+editGridDC).addClass("disabled"),AxFormContSetGridCell.length>0&&(AxFormContSetGridCell=jQuery.grep(AxFormContSetGridCell,function(e){return e.split("~")[0]!=editGridDC}))}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){AxWaitCursor(!1),ShowDimmer(!1),disableBackDrop("destroy")}}}});else{var fDcRowCount=GetDcRowCount(editGridDC);DeleteAllRows(editGridDC,fDcRowCount),ShowDimmer(!1),$("#chkallgridrow"+editGridDC).prop("checked",!1),$("#clearThisDC"+editGridDC).addClass("disabled"),AxFormContSetGridCell.length>0&&(AxFormContSetGridCell=jQuery.grep(AxFormContSetGridCell,function(e){return e.split("~")[0]!=editGridDC}))}}else showAlertDialog("info",2004,"client");else $j("input[name=grdchkItemTd"+editGridDC+"]:checked").length>0&&DeleteSelectedRows(editGridDC)}function DeleteSelectedRows(editGridDC){var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var cutMsg=eval(callParent("lcm[5]")),rid=$j("#recordid000F0").val();if("0"!=rid)$.confirm({theme:"modern",title:eval(callParent("lcm[155]")),content:cutMsg,escapeKey:"buttonB",rtl:isRTL,onContentReady:function(){disableBackDrop("bind")},buttons:{buttonA:{text:eval(callParent("lcm[279]")),btnClass:"btn btn-primary",action:function(){try{var e=$j("input[name=grdchkItemTd"+editGridDC+"]:checked").length,t=0;$j("input[name=grdchkItemTd"+editGridDC+"]:checked").each(function(){t++;var i=$j(this).attr("id"),a=i.substring(i.lastIndexOf("F"),i.lastIndexOf("F")-3);axInlineGridEdit&&updateInlineGridRowValues(),t==e?DeleteGridRow(editGridDC,a,undefined):DeleteGridRow(editGridDC,a,"all")})}catch(i){AxWaitCursor(!1)}}},buttonB:{text:eval(callParent("lcm[280]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){}}}});else try{var chkdCount=$j("input[name=grdchkItemTd"+editGridDC+"]:checked").length,loopCount=0;$j("input[name=grdchkItemTd"+editGridDC+"]:checked").each(function(){loopCount++;var e=$j(this).attr("id"),t=e.substring(e.lastIndexOf("F"),e.lastIndexOf("F")-3);axInlineGridEdit&&updateInlineGridRowValues(),loopCount==chkdCount?DeleteGridRow(editGridDC,t,undefined):DeleteGridRow(editGridDC,t,"all")})}catch(ex){AxWaitCursor(!1)}if(arrRefreshDcs.length>0)for(var i=0;i<arrRefreshDcs.length;i++){var arrDcNos=arrRefreshDcs[i].split(":");if(arrDcNos[1]=="dc"+editGridDC){arrRefreshFldDirty[i]=!0;break}}OnRowChangeSetHeight(editGridDC),checkTableBodyWidths(editGridDC),"True"==isTstPop&&TstructTabEventsInPopUP("")}function GetFirstTabDcNo(e){var t=0;for(t=0;t<PagePositions.length;t++)if(-1!=PagePositions[t].toString().indexOf(",")){var i=PagePositions[t].toString().split(","),a=0;for(a=0;a<i.length;a++)if(e==i[a])return i[0]}return-1}function EnableDisableDc(e,t){var i=IsDcGrid(e),a=(parseInt(e,10),!1),r="hand";"Enable"==t?(a=!1,r="hand"):"Disable"==t&&(a="disabled",r="default");var l=$j("#dcButspan"+e);if(l.length>0&&(l.attr("alt","hide"),l.attr("class","glyphicon glyphicon-chevron-down icon-arrows-down"),l.attr("disabled",a),l.css("cursor",r)),i){var o=$j("#DivFrame"+e);o.length>0&&("Enable"==t?o.attr("disbaled",!1):o.attr("disbaled","disbaled"))}else{var n=$j("#DivFrame"+e);if(n.length>0)"Enable"==t?n.attr("disbaled",!1):n.attr("disbaled","disbaled");else{var s=$j("#tab-"+e);s.length>0&&("Enable"==t?s.attr("disbaled",!1):s.attr("disbaled","disbaled"))}}}function AddGroup(e,t){fillDcname=e;var i=GetDcRowCount(e);if(1==parseInt(i,10)){var a=t+GetClientRowNo("001",e)+"F"+e,r=GetFieldValue(a);""!=r&&UpdateFieldArray(a,"001",r,"")}var l=$j("#recordid000F0").val();ArrActionLog="AddGroup-DcNo-"+e+"-KeyColumn-"+t+"-Recordid-"+l;var o=GetFormatGridIndex(e);if(-1!=o){var n=DcMultiSelect[o].toString().toLowerCase();try{if("true"==n)ASB.WebService.GetAddGroupsHtml(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,transid,tstDataId,SuccessGetFillGridMS,OnException);else{var s=GetDeletedRows(),d=GetChangedRows(),c=$j("#recordid000F0").val();ShowDimmer(!0),ASB.WebService.ExecuteAction(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,ArrActionLog,c,transid,e,"","",s,d,tstDataId,SuccExecActionValue,OnException)}}catch(u){AxWaitCursor(!1);var p=u.name+"^♠^"+u.message;showAlertDialog("error",2030,"client",p)}}}$j.curCSS=function(e,t,i){$j(e).css(t,i)};var fillGridDc="",fillOrAdd="",AxActivefillGridName="",dialogObj;function FillGrid(frNo,addGroup,fillGridName,fastFill){GetCurrentTime("Tstruct FillGrid button click(ws call)"),fastFill!=undefined||(fastFill=!1);var IsConfirm=!1;AxStartTime=new Date,AxStartTime=GetAxDate(AxStartTime);var stTime=new Date;try{AxBeforeFillGrid()}catch(ex){}if(AxActivefillGridName=fillGridName,-1==$j("[name="+fillGridName+"]").attr("class").indexOf("disablefill")){var vallist=new Array;fillGridDc=frNo;var ind=$j.inArray(fillGridName,FillGridName),dcIdx=$j.inArray(frNo,DCFrameNo),isExitDummy=!1;if(gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&(isExitDummy=!0)}),"APPEND"==FillCondition[ind]&&$("#gridHd"+frNo+" tbody tr").length>0&&isExitDummy)UpdateFieldArray(axpIsRowValid+frNo+"001F"+frNo,GetDbRowNo("001",frNo),"false","parent","fillgrid");else if("INIT"==FillCondition[ind]){if($("#gridHd"+frNo+" tbody tr").length>0&&!isExitDummy){IsConfirm=!0;var cutMsg=eval(callParent("lcm[26]")),glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var FillGridCB=$.confirm({theme:"modern",closeIcon:!1,title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",rtl:isRTL,escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){GetCurrentTime("Tstruct FillGrid button click(ws call)"),FillGridCB.close(),gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&gridDummyRowVal.splice($.inArray(e,gridDummyRowVal),1),gridRowEditOnLoad=!1}),FillGridAfterConfirm(fastFill)}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy"),AxWaitCursor(!1),ShowDimmer(!1)}}}})}}else if("AOWE"==FillCondition[ind]&&$("#gridHd"+frNo+" tbody tr").length>0&&!isExitDummy&&"True"==DCHasDataRows[dcIdx]){IsConfirm=!0;var cutMsg=eval(callParent("lcm[519]")),glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var FillGridCB=$.confirm({theme:"modern",closeIcon:!1,title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",rtl:isRTL,escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){GetCurrentTime("Tstruct FillGrid button click(ws call)"),FillGridCB.close();var e=GetDcRowCount(frNo);DeleteAllRows(frNo,e),gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&gridDummyRowVal.splice($.inArray(e,gridDummyRowVal),1),gridRowEditOnLoad=!1}),FillGridAfterConfirm(fastFill)}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy"),AxWaitCursor(!1),ShowDimmer(!1)}}}})}0==IsConfirm&&FillGridAfterConfirm(fastFill)}function FillGridAfterConfirm(e){AxWaitCursor(!0),ShowDimmer(!0);var t="";-1!=ind&&(ashow=FillAutoShow[ind],multiselect=FillMultiSelect[ind].toString().toLowerCase(),t=FillParamFld[ind]),""!=FillSourceDc[ind]&&"true"==multiselect&&(multiselect="false");var i="";if(""!=t&&"true"==multiselect)for(var a=t.toString().split(","),r=0;r<a.length;r++){var l=IsGridField(a[r]),o=GetDcNo(a[r]);if(1==l){var n=GetDcRowCount(o);n=parseInt(n,10);for(var s=1;s<=n;s++){if(s=GetRowNoHelper(s),a[r]=GetExactFieldName(a[r]),$j("#"+a[r]+s+"F"+o)){var d=a[r].toString()+s+"F"+o,c=GetFieldValue(d,"fillGrid");c=CheckSpecialCharsInStr(c),i+="<"+a[r]+" rowno='"+s+"' >"+c+"</"+a[r]+">"}}}else{d=a[r].toString()+"000F"+o;if($("#"+d).length>0){c=GetFieldValue(d,"fillGrid");c=CheckSpecialCharsInStr(c),i+="<"+a[r]+">"+c+"</"+a[r]+">"}else{(c=CheckGlobalVars(a[r].toString()))==a[r].toString()?i+="<"+a[r]+"></"+a[r]+">":i+="<"+a[r]+">"+c+"</"+a[r]+">"}}}var p="fill";if(addGroup&&""!=addGroup&&(p=addGroup),fillOrAdd=p,"true"==multiselect)if(e){var u="t";try{callBackFunDtls="FillGridAfterConfirm♠"+e,GetProcessTime(),ASB.WebService.GetFastFillGridData(frNo,fillGridName,transid,p,tstDataId,u,SuccessGetFillGridMS,OnException)}catch(ex){AxWaitCursor(!1);var f=ex.name+"^♠^"+ex.message;showAlertDialog("error",2030,"client",f)}}else{u="t";""!=FillGridVExpr[ind]&&(u=EvalPrepared("","000",FillGridVExpr[ind],"expr")),i="<tid>"+transid+"</tid><dc>"+frNo+"</dc>"+i;try{callBackFunDtls="FillGridAfterConfirm♠"+e,GetProcessTime(),ASB.WebService.GetFillGridData(i,ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,frNo,fillGridName,transid,p,tstDataId,u,SuccessGetFillGridMS,OnException)}catch(ex){AxWaitCursor(!1);f=ex.name+"^♠^"+ex.message;showAlertDialog("error",2030,"client",f),UpdateExceptionMessageInET("GetFillGridData exception : "+ex.message)}}else{IsFormDirty||SetFormDirty(!0);try{changeFillGridDc=frNo,callBackFunDtls="FillGridAfterConfirm♠"+e,GetProcessTime(),ASB.WebService.DoGetFillGridNonMS(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,frNo,fillGridName,tstDataId,SuccessFillGridNonMS,OnException)}catch(ex){AxWaitCursor(!1);f=ex.name+"^♠^"+ex.message;showAlertDialog("error",2030,"client",f),UpdateExceptionMessageInET("DoGetFillGridNonMS exception : "+ex.message),GetProcessTime(),GetTotalElapsTime()}}var m=new Date;AxTimeBefSerCall=m-stTime}}var fgHt=400,fgWid=400;function SuccessGetFillGridMS(result,eventArgs){if(""!=result)if(result.split("*♠♠*").length>1){var serverprocesstime=result.split("*♠♠*")[0],requestProcess_logtime=result.split("*♠♠*")[1];result=result.split("*♠♠*")[2],WireElapsTime(serverprocesstime,requestProcess_logtime,!0)}else UpdateExceptionMessageInET("Error : "+result);if(-1===result.toLowerCase().indexOf("access violation")){if(CheckSessionTimeout(result))return;try{AxBeforeFillPopUp()}catch(ex){}var fillTitle="";if(fillTitle="FILL"==fillOrAdd?"FILL "+GetDcCaption(fillGridDc):"ADD "+GetDcCaption(fillGridDc),""==result){var cutMsg=eval(callParent("lcm[0]"));result="<label>"+cutMsg+"</label>"}var resSplit=result.split("*♠*");ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array;var tablehtml=resSplit[0].toString();if($j("#dvFillGrid").length>0?$j("#dvFillGrid").html(tablehtml):($("#bootstrapModalWrapP").remove(),$("#pagebdy").append('<div id="dvFillGrid" style=""></div>'),$j("#dvFillGrid").html(tablehtml)),resSplit.length>1&&""!=resSplit[1].toString()){var fgSize=resSplit[1].toString(),fgsizeSplit=fgSize.split(",");try{fgHt=fgsizeSplit[2].toString(),fgWid=fgsizeSplit[3].toString()}catch(e){}"0"!=fgHt&&"0"!=fgWid||(fgHt=400,fgWid=400);var modalData="";modalData+=$j("#dvFillGrid").wrap('<p id="bootstrapModalWrapP"/>').parent().html(),$j("#bootstrapModalWrapP").html(""),buttons={count:2,button1:{name:eval(callParent("lcm[281]")),"function":"ProcessFillGrid("+fillGridDc+", '"+AxActivefillGridName+"')","class":"btn hotbtn",id:"modalCnfirmbtn"},button2:{name:eval(callParent("lcm[192]")),"class":"btn coldbtn"}};var myModal=new BSModal("dvFillGrid",fillTitle,modalData,function(){},function(){});myModal.changeSize("lg"),myModal.scrollableDialog(),myModal.okBtn.innerText=eval(callParent("lcm[281]")),myModal.okBtn.setAttribute("onClick","ProcessFillGrid('"+fillGridDc+"','"+AxActivefillGridName+"')"),myModal.cancelBtn.innerText=eval(callParent("lcm[192]")),jQuery("table[id^=tblFillGrid]").length&&bindUpdownEvents(jQuery("table[id^=tblFillGrid]").attr("id"),"multiple"),$("#wrapperForMainNewData",window.parent.document).hide()}else{var modalData="",buttons={count:1,button1:{name:eval(callParent("lcm[281]")),"class":"btn hotbtn"}};modalData+=$j("#dvFillGrid").wrap('<p id="bootstrapModalWrapP"/>').parent().html(),createBootstrapModal("dvFillGrid",fillTitle,modalData,buttons),jQuery("table[id^=tblFillGrid]").length&&bindUpdownEvents(jQuery("table[id^=tblFillGrid]").attr("id"),"multiple"),$("#wrapperForMainNewData",window.parent.document).hide()}$("#bootstrapModal").ready(function(){try{var glCulture=eval(callParent("glCulture")),dtFormat="DD/MM/YYYY";"en-us"==glCulture&&(dtFormat="MM/DD/YYYY"),$.fn.dataTable.moment(dtFormat)}catch(ex){}fillGridDatatbl=$("table[id^=tblFillGrid]").DataTable({fixedHeader:!0,dom:'<"float-start"f><"float-end"l><"d-inline-flex w-100 overflow-auto"t>ip',columnDefs:[{orderable:!1,targets:0}],aaSorting:"undefined"!=typeof fillGridDataQueryOrder&&"true"==fillGridDataQueryOrder.toString()?[]:[[1,"asc"]],language:{search:"_INPUT_",searchPlaceholder:"Search..."},scrollCollapse:!0,lengthMenu:"undefined"!=typeof fillGridDataShowAll&&"true"==fillGridDataShowAll.toString()?[[-1,500,100],["All",500,100]]:[[100,500,-1],[100,500,"All"]],autoWidth:!1}),$("#dvFillGrid .dataTables_filter input[type=search]").addClass("serachdatatbl form-control"),$("#dvFillGrid .dataTables_length select").removeClass("form-control input-sm selectPaddingFix").addClass("showentries")}),AxWaitCursor(!1),ShowDimmer(!1)}else AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide();GetProcessTime(),GetTotalElapsTime()}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function GetDcCaption(e){e="dc"+e;var t="",i=$j.inArray(e,DCName);return-1!=i&&(t=DCCaption[i]),t}function SuccessFillGridNonMS(e,t){if(""!=e)if(e.split("*♠♠*").length>1){var i=e.split("*♠♠*")[0],a=e.split("*♠♠*")[1];e=e.split("*♠♠*")[2],WireElapsTime(i,a,!0)}else UpdateExceptionMessageInET("Error : "+e);if(-1===e.toLowerCase().indexOf("access violation")){gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==fillGridDc&&gridDummyRowVal.splice($.inArray(e,gridDummyRowVal),1),gridRowEditOnLoad=!1});var r=new Date;if(CheckSessionTimeout(e))return;""!=e&&ParseServiceResult(e,"FillGrid");var l=$j("#axp_colmerge_"+fillGridDc+"000F1");null!=(l=l.val())&&""!=l&&l!=undefined&&GetGridDcTable(l,fillGridDc),UpdateFldArrayInFillgrid(fillGridDc);try{AxAfterFillGrid()}catch(s){}if(changeEditLayoutIds(FillGridFillRows,FillGridCurrentDC,"fillGrid"),EvaluateSetFont(fillGridDc),showAttachmentPopover(),"true"==AxLogTimeTaken){var o=(new Date).getTime()-r.getTime();CreateTimeLog(AxStartTime,AxTimeBefSerCall,o,ASBTotal,ASBDbTime,"FillGridNonMS")}if(setDesignedLayout("#divDc"+fillGridDc),FocusOnFirstGridField(fillGridDc),isMobile&&"none"==mobileCardLayout){$("#wrapperForEditFields"+fillGridDc).removeClass("d-none"),$("#wrapperForEditFields"+fillGridDc).addClass("mobilewrapperForEditFields"),0!=$(".wrapperForGridData"+fillGridDc+" table tbody tr").length||axInlineGridEdit||$("#colScroll"+fillGridDc).hide(),axInlineGridEdit&&$(".editWrapTr").hide(),$(".editLayoutFooter").hide(),$("#DivFrame".concat(fillGridDc," .newgridbtn")).addClass("d-none");var n=$("#DivFrame".concat(fillGridDc," .newgridbtn>ul")).html();$("#wrapperForEditFields".concat(fillGridDc)).append('<div class="clearfix"></div><div class="grdButtons btnMobile"><ul class="left">'.concat(n,"</ul></div>")),$("#wrapperForEditFields".concat(fillGridDc," .btnMobile")).find("#viewGrid".concat(fillGridDc)).addClass("d-none"),$(".dcTitle").hide().nextAll("hr.hrline").hide();try{"undefined"!=typeof designObj&&null!=designObj[0]&&null!=designObj[0].selectedLayout&&""!=designObj[0].selectedLayout&&"tile"==designObj[0].selectedLayout&&$(".dcTitle").show().nextAll("hr.hrline").show()}catch(s){}}}else AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide();GetProcessTime(),GetTotalElapsTime()}var addGroupDc="";function ProcessAddGroup(e){addGroupDc=e;var t=$j("#tblFillGrid"+e),i="";t.find(".fgChk").each(function(){if($j(this).prop("checked")!=undefined&&0==$j(this).prop("disabled")){var e=$j(this).val().split("¿");i+=""==i?e[0].toString():"¿"+e[0].toString()}});var a=GetDcClientRows(e).getMaxVal(),r=parseInt(a,10)+1,l=GetRowNoHelper(r);try{ASB.WebService.GetNewGroupsHtml(e,transid,i,l,tstDataId,SuccAddGroups)}catch(n){AxWaitCursor(!1);var o=n.name+"^♠^"+n.message;showAlertDialog("error",2030,"client",o)}}function SuccAddGroups(e,t){if(!CheckSessionTimeout(e)&&""!=addGroupDc){var i=e.split("♣");$j("#gridDc"+addGroupDc).html();if($j("#gridDc"+addGroupDc+" > tbody:last").append(i[1]),""!=i[0])for(var a=new Array,r=i[0].toString().split(","),l=0;l<r.length;l++)UpdateDcRowArrays(addGroupDc,r[l],"Add"),UpdateKeyColValues(addGroupDc,r[l]);ResetRowCount(addGroupDc,r.length),ResetGridRowsStyle(addGroupDc),a.push("#DivFrame"+addGroupDc),AssignJQueryEvents(a),AxWaitCursor(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show())}}function ResetRowCount(e,t){var i=parseInt($j("#hdnRCntDc"+addGroupDc).val(),10);SetRowCount(addGroupDc,i+t)}function UpdateKeyColValues(e,t){var i=GetFormatGridIndex(e);if(-1!=i){var a=DcKeyColumns[i],r=($j("#"+a+t+"F"+e),GetFieldValue(a+t+"F"+e)),l=GetDbRowNo(t,e);UpdateFieldArray(a+t+"F"+e,l,r,"parent"),UpdateAllFieldValues(a+t+"F"+e,r)}}function ProcessFormatStaticFill(e){fillDcname=e,AxWaitCursor(!0);var t=$j("#tblFillGrid"+e),i="",a="",r="",l=$j.inArray("dc"+e,DCName),o="";-1!=l&&(o=DcKeyColumns[l]),t.find(".fgChk").each(function(){if($j(this).prop("checked")!=undefined)for(var e=$j(this).val().split("¿"),t=0;t<e.length;t++){var i=e[t].split("♣");0==t&&i[0]==o&&(r=i[0]),i[0]==r&&(""==a?a=i[1]:a+=","+i[1])}}),i=i.replace(/&/g,"&amp;");$j("#recordid000F0").val();try{ASB.WebService.ExecuteFormatFill(transid,e,a,tstDataId,SuccExecActionValue)}catch(s){AxWaitCursor(!1);var n=s.name+"^♠^"+s.message;showAlertDialog("error",2030,"client",n)}}function ProcessFormatFill(e){fillDcname=e,AxWaitCursor(!0);var t=$j("#tblFillGrid"+e),i="",a="",r="",l="";if(t.find(".fgChk").each(function(){if($j(this).prop("checked")!=undefined)for(var e=$j(this).val().split("¿"),t=0;t<e.length;t++){var i=e[t].split("♣");0==t&&"selection"==i[0].substring(1)&&(r=i[0],l=i[0].substring(0,1)),i[0]==r&&("n"!=l?""==a?a="'"+i[1]+"'":a+=",'"+i[1]+"'":""==a?a=i[1]:a+=","+i[1])}}),""==a)return showAlertDialog("warning",2005,"client"),void AxWaitCursor(!1);i=(i="<selections>"+a+"</selections>").replace(/&/g,"&amp;");var o=$j("#recordid000F0").val(),n=$j("#recordid000F0").val();ArrActionLog="FillFormatGrid-DcNo-"+e+"-Selected groups-"+a+"-Recordid-"+n;var s=GetDeletedRows(),d=GetChangedRows();try{ASB.WebService.ExecuteAction(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,ArrActionLog,o,transid,e,i,a,s,d,tstDataId,SuccExecActionValue,OnException)}catch(p){AxWaitCursor(!1);var c=p.name+"^♠^"+p.message;showAlertDialog("error",2030,"client",c)}}function SuccExecActionValue(e,t){ArrActionLog="",CheckSessionTimeout(e)||(""!=e&&ParseServiceResult(e,"Action"),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show()))}function ProcessFillGrid(e,t){GetCurrentTime("Tstruct Process FillGrid Ok button click(ws call)"),gridDummyRowVal.length>0&&gridDummyRowVal.map(function(t){t.split("~")[0]==e&&gridDummyRowVal.splice($.inArray(t,gridDummyRowVal),1),gridRowEditOnLoad=!1}),AxStartTime=new Date,AxStartTime=GetAxDate(AxStartTime);var i=new Date;fillDcname=e,ShowDimmer(!0),AxWaitCursor(!0),IsFormDirty||SetFormDirty(!0);$j("#tblFillGrid"+e);var a="",r="";if(0!=$('input[name="grdchkItemTd"]:checked').length,fillGridDatatbl.rows().every(function(){var e=this.node(),t=($(e).find("td"),$(e).find('td input[type="checkbox"]'));if(t.is(":checked")){r=t.val(),a+="<row>";for(var i=r.split("¿"),l=0;l<i.length;l++){var o=i[l].split("♣"),n=CheckSpecialCharsInStr(o[1]);a+="<"+o[0]+">"+n+"</"+o[0]+">"}a+="</row>"}}),"<GridList></GridList>"!=(a="<GridList>"+a+"</GridList>"))try{changeFillGridDc=e,callBackFunDtls="ProcessFillGrid♠"+e+"♠"+t,GetProcessTime(),ASB.WebService.DoGetFillGrid(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,t,a,tstDataId,SuccGetResultValue,OnException)}catch(n){AxWaitCursor(!1),ShowDimmer(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show());var l=n.name+"^♠^"+n.message;showAlertDialog("error",2030,"client",l),UpdateExceptionMessageInET("DoGetFillGridWS exception : "+n.message),GetProcessTime(),GetTotalElapsTime()}else ShowDimmer(!1),AxWaitCursor(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show()),GetProcessTime(),GetTotalElapsTime();var o=new Date;AxTimeBefSerCall=o-i,AxActivefillGridName=""}function SuccGetResultValue(e,t){if(""!=e)if(e.split("*♠♠*").length>1){var a=e.split("*♠♠*")[0],r=e.split("*♠♠*")[1];e=e.split("*♠♠*")[2],WireElapsTime(a,r,!0)}else UpdateExceptionMessageInET("Error : "+e);if(-1===e.toLowerCase().indexOf("access violation")){var l=new Date;if(CheckSessionTimeout(e))return;ParseServiceResult(e,"FillGrid"),UpdateFldArrayInFillgrid(fillDcname);try{$(".griddivColumn ").addClass("gridFixedHeader").css({overflow:"auto"}),"undefined"!=typeof gridFixedHeader&&"true"!=gridFixedHeader||($(".griddivColumn ").addClass("gridFixedHeader").css({"max-height":"calc(100vh - 130px)"}),$(".gridFixedHeader table thead tr th").css({background:"#fff",position:"sticky",top:"0"}))}catch(v){}var o=!0;if("true"==AxRuesDefFormcontrol&&(o=AxRulesDefParser("formcontrol","","formcontrol")),"Approved"!=appstatus&&"Rejected"!=appstatus&&"design"!=theMode&&o&&DoFormControlOnload(),"Approved"!=appstatus&&"Rejected"!=appstatus&&"design"!=theMode&&o){var n=$j("#recordid000F0").val();DoScriptFormControl("",""!=n&&"0"!=n?"On Data Load":"On Form Load")}var s=$(".wrapperForGridData"+fillDcname+" table tbody tr td").find("textarea[id^=dc"+fillDcname+"_image]"),d=$(".wrapperForGridData"+fillDcname+" table tbody tr td").find("textarea[id^=axp_gridattach_]"),c=$(".wrapperForGridData"+fillDcname+" table tbody tr td").find("textarea[class^=axpAttach]");s.length>0&&s.each(function(e,t){if("gridattach"==$(t).attr("data-type")){var i=$("textarea#"+$(t).attr("id")).text();""!=i&&i!=undefined&&(ConstructAttachHTML(i,$(t).attr("id"),"FillGrid"),showAttachmentPopover())}}),d.length>0&&d.each(function(e,t){var i=$("textarea#"+$(t).attr("id")).text();ConstructAttachHTML(i,$(t).attr("id"),"FillGrid"),showAttachmentPopover()}),c.length>0&&c.each(function(e,t){if("gridattach"==$(t).attr("data-type")){var i=$("textarea#"+$(t).attr("id")).text();""!=i&&i!=undefined&&(ConstructAxpAttachHTML(i,$(t).attr("id"),"FillGrid"),showAttachmentPopover())}});var p=$j("#axp_colmerge_"+fillDcname+"000F1");null!=(p=p.val())&&""!=p&&p!=undefined&&GetGridDcTable(p,fillDcname);try{AxAfterFillGrid()}catch(v){}fillgridColOptVisibility(fillDcname),EvaluateSetFont(fillDcname),changeEditLayoutIds(FillGridFillRows,FillGridCurrentDC,"fillGrid"),axInlineGridEdit&&UpdateDcRowArrays(FillGridCurrentDC,GetRowNoHelper(parseInt(FillGridFillRows,10)+1),"Add");var u=GetGridFields(FillGridCurrentDC),f=getNewEditRowNo(FillGridCurrentDC);if(AxActiveRowNo=parseInt(f),AxActiveDc=FillGridCurrentDC,"undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?CallEvaluateOnAddPerf(FillGridCurrentDC,GetRowNoHelper(parseInt(FillGridFillRows,10)+1),u,"FillGrid"):CallEvaluateOnAdd(FillGridCurrentDC,GetRowNoHelper(parseInt(FillGridFillRows,10)+1),u,"FillGrid"),AxWaitCursor(!1),dialogObj&&(dialogObj.dialog("close"),$("#wrapperForMainNewData",window.parent.document).show()),"true"==AxLogTimeTaken){var m=(new Date).getTime()-l.getTime();CreateTimeLog(AxStartTime,AxTimeBefSerCall,m,ASBTotal,ASBDbTime,"FillGridMS")}if(setDesignedLayout("#divDc"+fillDcname),FocusOnFirstGridField(fillDcname),customAlignTstructFlds([],FillGridCurrentDC),$j("textarea[id^='axpvalid']").each(function(){DoFormControlPrivilege($j(this).attr("id"),$j(this).val())}),isMobile&&"none"==mobileCardLayout){$("#wrapperForEditFields"+fillDcname).removeClass("d-none"),$("#wrapperForEditFields"+fillDcname).addClass("mobilewrapperForEditFields"),0!=$(".wrapperForGridData"+fillDcname+" table tbody tr").length||axInlineGridEdit||$("#colScroll"+fillDcname).hide(),axInlineGridEdit&&$(".editWrapTr").hide(),$(".editLayoutFooter").hide(),$("#DivFrame".concat(fillDcname," .newgridbtn")).addClass("d-none");var h=$("#DivFrame".concat(fillDcname," .newgridbtn>ul")).html();$("#wrapperForEditFields".concat(fillDcname)).append('<div class="clearfix"></div><div class="grdButtons btnMobile"><ul class="left">'.concat(h,"</ul></div>")),$("#wrapperForEditFields".concat(i+1," .btnMobile")).find("#viewGrid".concat(i+1)).addClass("d-none"),$(".dcTitle").hide().nextAll("hr.hrline").hide();try{"undefined"!=typeof designObj&&null!=designObj[0]&&null!=designObj[0].selectedLayout&&""!=designObj[0].selectedLayout&&"tile"==designObj[0].selectedLayout&&$(".dcTitle").show().nextAll("hr.hrline").show()}catch(v){}}}else AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide();GetProcessTime(),GetTotalElapsTime()}function UpdateFldArrayInFillgrid(e){try{$(".wrapperForGridData"+e+" table tbody tr").each(function(){$(this).find("td").each(function(){var t=$(this).find("textarea").attr("id");if(void 0!==t&&""!=t&&!t.startsWith("axp_recid"+e)){t=t.replace("EDIT~","");var i=$(this).find("textarea").val();UpdateAllFieldValues(t,i)}})})}catch(t){}}function UpdateFldArrayInDeleteRow(e,t){try{$(".wrapperForGridData"+e+" table tbody tr#"+("sp"+e+"R"+t+"F"+e)).each(function(){$(this).find("td").each(function(){var e=$(this).find("textarea").attr("id");if(AllFieldNames.length>0&&void 0!==e&&""!=e){e=e.replace("EDIT~","");var t=$j.inArray(e,AllFieldNames);-1!=t&&(AllFieldValues.splice(t,1),AllFieldNames.splice(t,1))}})})}catch(i){}}function ClearFldArrays(){ChangedFields.length=0,ChangedFieldDbRowNo.length=0,ChangedFieldValues.length=0,DeletedDCRows.length=0}function ParseServiceResult(e,t){if(""!=e){ClearFldArrays();var i=e.split("*♠*"),a=e.split("*♠*~");if(i[0]!=undefined)try{AssignLoadValues(i[0].toString(),t)}catch(d){AxWaitCursor(!1),ShowDimmer(!1)}if(i[2]!=undefined){try{var r=designObj,l=JSON.parse(i[2]);if($.isEmptyObject(l))designObj=r;else{var o=designObj[0].dcs.map(function(e,t){return e.dc_id}).indexOf(l.dc_id);o>-1?designObj[0].dcs[o]=l:designObj[0].dcs=_.sortBy([].concat(_toConsumableArray(designObj[0].dcs),[l]),"dc_id")}}catch(d){designObj=r}jsonText=JSON.stringify(designObj,null,"")}if(i[1]!=undefined)if(i[1].substring(0,ErrLength)==ErrStr){var n=i[1].substring(ErrLength,i[1].length-8);AxWaitCursor(!1),showAlertDialog("error",n)}else AssignHTML(i[1],"FillGrid",t),0!=changeFillGridDc&&(CheckShowHideFldsGrid(changeFillGridDc.toString()),changeFillGridDc=0),AxWaitCursor(!1);if("GetTabData"==t&&a!=undefined&&a.length>1&&"false"==a[1]){var s=$j.inArray(CurrTabNo.toString(),DCFrameNo);IsDcGrid(CurrTabNo)&&"False"==DCHasDataRows[s]&&UpdateAxpRowVldInArray(CurrTabNo,"001","1"),EvalDcFldExpressions(CurrTabNo)}}try{AfterParseServiceResult(t)}catch(d){}ShowDimmer(!1),AxWaitCursor(!1)}function EvalDcFldExpressions(e){for(var t=GetGridFields(e),i=0;i<t.length;i++){var a=t[i];a!="axp_recid"+e&&(IsGridField(a)?EvaluateAxFunction(t[i],a,"001F"+e):EvaluateAxFunction(t[i],a,"000F"+e))}}function DoFillControlPrivilege(strSingleLineText){var rno,noofrows=1;if(""!=strSingleLineText)for(var myfdcJSONObject=eval("("+strSingleLineText+")"),i=0;i<myfdcJSONObject.root.length;i++)for(var dcvalues=myfdcJSONObject.root[i].dc,fields=dcvalues.split("###"),gdslno=1,fpar=0;fpar<fields.length;fpar++){var valSplit=fields[fpar].toString();valSplit=valSplit.split("~"),rno=noofrows+"";var rnolength=rno.length;2==rnolength?nrno="0"+rno:1==rnolength?nrno="00"+rno:3==rnolength&&(nrno=rno),nrno=nrno+"F"+fillDcname;var fldVal="";for(m=0;m<valSplit.length;m++){var FldSplit=valSplit[m].split("=");if(-1!=FldSplit[0].toString().indexOf("axpvalid")&&(fldVal=FldSplit[1]),""!=fldVal){var strValue=fldVal.toString().toUpperCase();if("B"==strValue){var delImg=window.opener.document.getElementById("del"+nrno);delImg&&(delImg.removeAttribute("onclick"),delImg.removeAttribute("onmouseover"),delImg.removeAttribute("onmouseout"))}if("C"==strValue){var delImg=window.opener.document.getElementById("del"+nrno);delImg&&(delImg.removeAttribute("onclick"),delImg.removeAttribute("onmouseover"),delImg.removeAttribute("onmouseout"));for(var l=0;l<valSplit.length;l++){var FldSplit=valSplit[l].split("="),FieldId=window.opener.document.getElementById(FldSplit[0]+nrno);if(FieldId){var id=FieldId.id;window.opener.document.getElementById(id).disabled="true"}}break}}}dnrno="'"+nrno+"'",noofrows+=1}}function CheckAll(e,t){"t"==t||"true"==t?$j("input[name=chkItem]:checkbox").each(function(){0==$j(this).prop("disabled")&&"none"!=$j(this).parent().parent().parent().css("display")&&$j(this).prop("checked",e.checked)}):e.checked=!1,$j("#dvFillGrid").height($j("#dvFillGrid").height())}function ChkHdrCheckbox(e,t){"t"==t||"true"==t?$j(".fgChk").parents("table.gridData tbody").find(".fgChk:visible").length==$j(".fgChk").parents("table.gridData tbody").find(".fgChk:checked").length?$j(".fgHdrChk").parents("table.gridData thead").find(".fgHdrChk").prop("checked",!0):$j(".fgHdrChk").parents("table.gridData thead").find(".fgHdrChk").prop("checked",!1):e.checked=!1,$j("#dvFillGrid").height($j("#dvFillGrid").height())}function DeleteAllRows(e,t){var i=parseInt(t,10);i>1&&!axInlineGridEdit&&"form"!=AxpGridForm&&(grdRCOunt=$("#gridHd"+e+" tbody tr").length,grdRCOunt==i&&i++);for(var a=axInlineGridEdit?i:"form"==AxpGridForm?i:i-1;a>=1;a--)DeleteGridRow(e,GetClientRowNo(a,e),"all");if(axInlineGridEdit||"form"!=AxpGridForm){adjustEditLayoutId(e),AxActiveRowNo="1";var r=GetGridFields(e);"undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?CallEvaluateOnAddPerf(e,"001",r):CallEvaluateOnAdd(e,"001",r),IsAddRowCalled?axInlineGridEdit||UpdateDcRowArrays(e,"001","Add"):(IsDcPopGridCleared=!0,DeleteGridRow(e,"001F"+e,undefined))}else $("#divDc"+e+" .grid-icons").append(gridDivHtml[e]),$("#divDc"+e+" .formGridRow").remove(),0==$(".wrapperForGridData"+e+" table tbody tr").length&&adjustEditLayoutId(e),setDesignedLayout("divDc"+e),editTheRow("",e,"",event)}function ChangeDir(e){$j("#form1").attr("dir",e)}function LoadPdfDDL(e){document.getElementById("dvPdfDDl").innerHTML=e}function bindUpdownEvents(e,t){unbindKeyDownEvent(),"single"!=t&&$("#"+e+" input[type='checkbox']").each(function(){$(this).parents("td,th").addClass("text-center")}),jQuery("#"+e+" tr:nth-child(2)").length,jQuery("#"+e).length>0&&(jQuery("#"+e).on("keydown.tstrctSrch","tr:not(:first)",function(i){var a=$(this);if($(a).addClass("activeSearchTr"),9!=i.keyCode||i.shiftKey)if(9==i.keyCode&&i.shiftKey)jQuery("#"+e).find("tr.activeSearchTr").prevAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,a,"top"),$(a).prev().is("tr")&&!$(a).prev().is("#"+e+" tr:first")&&(jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr"),$(a).prev().addClass("activeSearchTr"),jQuery(".activeSearchTr").find("input").focus(),i.preventDefault()));else if(38==i.keyCode){i.preventDefault(),0!=jQuery("#"+e).find("tr.activeSearchTr").index()&&jQuery("#"+e).find("tr.activeSearchTr").prevAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,a,"top"),jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr").prevAll("tr:visible:first").addClass("activeSearchTr").find("input").focus())}else if(40==i.keyCode){"single"==t&&i.preventDefault(),jQuery("#"+e).find("tr.activeSearchTr").index()<jQuery("#"+e).find("tr").last().index()&&jQuery("#"+e).find("tr.activeSearchTr").nextAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,a,"bottom"),jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr").nextAll("tr:visible:first").addClass("activeSearchTr").find("input").focus())}else 32==i.keyCode?"searchInput"!=$(i.target).attr("id")&&"single"==t&&unbindKeyDownEvent():13==i.keyCode&&"searchInput"!=$(i.target).attr("id")&&("multiple"==t?(i.preventDefault(),unbindKeyDownEvent(),$("#dvFillGrid").parents(".modal-body").next().find("#modalCnfirmbtn").click()):(jQuery("#"+e+" tr.activeSearchTr input").click(),"single"==t&&unbindKeyDownEvent()),unbindKeyDownEvent());else jQuery("#"+e).find("tr.activeSearchTr").prevAll("tr:visible").length>0&&("multiple"==t&&checkTheHeight(e,a,"bottom"),$(a).next().is("tr")&&(jQuery("#"+e).find("tr.activeSearchTr").removeClass("activeSearchTr"),$(a).next().addClass("activeSearchTr"),jQuery(".activeSearchTr").find("input").focus(),i.preventDefault()))}),jQuery("#"+e).on("keydown.tstrctSrch","tr:first",function(e){13==e.keyCode&&$("#dvFillGrid").parents(".modal-body").next().find("#modalCnfirmbtn").click()}),jQuery("#"+e+" tr").hover(function(){jQuery("#"+e+" tr.activeSearchTr").removeClass("activeSearchTr")},function(){}),jQuery("#"+e+" tr").click(function(e){"single"==t&&unbindKeyDownEvent(),"checkbox"!=$(e.target).attr("type")&&"radio"!=$(e.target).attr("type")&&0==$(this).parent("thead").length&&("single"==t?jQuery(this).find('input[type="radio"]').click():jQuery(this).find('input[type="checkbox"]').click())}))}function checkTheHeight(e,t,i){var a=parseInt(jQuery("#dvFillGrid").parents(".modal-body-content").css("height").replace("px","")),r=jQuery("#dvFillGrid").parents(".modal-body-content").scrollTop(),l=$(t),o=$(t).next().height(),n=$(t).prev().height(),s=l.position().top;"bottom"==i?s+o+50>a&&jQuery("#dvFillGrid").parents(".modal-body-content").animate({scrollTop:r+o+30},"fast"):"top"==i&&s-n<0&&jQuery("#dvFillGrid").parents(".modal-body-content").animate({scrollTop:r-n-30},"fast")}function unbindKeyDownEvent(){jQuery(document).unbind("keydown.tstrctSrch")}function GetGridDcTable(e,t){var i="gridHd"+t,a=document.getElementById(i),r=e.split("#"),l=a.outerHTML;l=l.replace(i,"mergeHd"+t),$j("#"+i).before(l);for(var o=$j("#mergeHd"+t)[0].childNodes[0].childNodes[0].childNodes,n=0;n<o.length;n++)for(var s=r[0].split(",").toString(),d=s.substr(s.indexOf("~")+1).split(","),c=s.split("~",1).toString(),p=0;p<d.length;p++){var u=o[n];u.innerHTML="",thName="th-"+d[p],u.id==thName&&(SetHeader(d,p,c),r.length>1&&r.splice(0,1),n=n+d.length-1);break}}function SetHeader(e,t,i){for(var a=0;a<e.length;a++){theadName="th-"+e[t+a];var r=document.getElementById(theadName);a-(e.length-1)!=0&&(r.style.borderColor="grey"),0==a?(r.innerHTML='<div id="div-'+e[0]+'"><b style="font-weight:101">'+i+"</b></div>",r.style.borderBottom="solid 1px white",r.style.maxWidth=r.style.width):(r.innerHTML="",r.style.borderBottom="solid 1px white")}SetHeaderWidth(e,e[0],t)}function SetHeaderWidth(e,t,i){for(var a=parseInt(0),r=(parseInt(0),$j("#div-"+t)),l=0;l<e.length;l++)theadName="th-"+e[i+l],a+=parseInt(document.getElementById(theadName).offsetWidth);navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(r=document.getElementById("div-"+t)).childNodes[0].innerHTML.indexOf("_")>-1?(r.style.width=a+"px",r.style.maxWidth=a+"px",r.childNodes[0].innerHTML=r.childNodes[0].innerHTML.replace(/_/g," ")):(r.style.width=a+"px",r.style.maxWidth=a+"px"):(r=$j("#div-"+t))[0].innerText.indexOf("_")>-1?(r.css({width:a,maxWidth:a}),r[0].innerText=r[0].innerText.replace(/_/g," ")):(a=40*a/100,r.css({marginLeft:a}))}$("body").on("click",function(e){$("[data-toggle=popover]").each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}),$j(function(){for(var e=0;e<VisibleDCs.length;e++)if("true"==DCIsGrid[e].toLowerCase()&&$j("#axp_colmerge_"+VisibleDCs[e]+"000F1").length>0){var t=$j("#axp_colmerge_"+VisibleDCs[e]+"000F1");null!=(t=t[0].value)&&""!=t&&t!=undefined&&GetGridDcTable(t,VisibleDCs[e])}});var popUpTitle="";function OpenPopUp(e,t){var i=GetFieldsRowNo(e),a=GetFieldsDcNo(e);AxActivePDc=a,RegisterActivePRow(i,a),AxIsPopActive=!0;var r=t.substring(t.lastIndexOf("F")+1);AxActiveDc=r;var l=$j.inArray(r,PopGridDCs);if(-1!=l){if(""!=PopCondition[l]&&"f"==EvalPrepared("","000",PopCondition[l],"expr").toLowerCase())return void showAlertDialog("error",2006,"client")}var o=IsPopGridFirmBind(r);SetPopDcStyle(r,o);var n=GetPopRows(a,i,r),s=n.split(",");parseInt($j("#hdnRCntDc"+r).val(),10),popUpTitle="<span style='font-size: 20PX;color: white;font-weight: bold;'>"+(popUpTitle=$j("#popDcTitle"+r).val())+"</span>",$j("#gridDc"+r+" tbody tr").each(function(){$j(this);$j(this).hide()});for(var d=0;d<s.length;d++){var c="#sp"+r+"R"+s[d]+"F"+r;$j(c).show()}if($j(".AxAddRows").length>0&&$j(".AxAddRows").val("1"),""==n&&1==IsPopParBound(r,a,i)){if(1==GetDcRowCount(r)&&IsEmptyRow("001",r))0==IsRowInPopRows(a,r,i,"001")&&(1,UpdatePopUpArrays(r,"001",!0,"Add"),UpdatePopParentFlds(r,a,"001",i),SetRowCount(r,"1"),$j("#sp"+r+"R001F"+r).show(),RefreshFillFldsInSubGrid(r,"001"),AxActiveRowNo="1",CallGetSubGridDDL(r,i,a,"001"));else AddSubGridRow(r)}else RefreshFillFldsInSubGrid(r,n),$j("#DivFrame"+r).dialog({title:popUpTitle,height:400,width:550,close:function(){ClosePopUp(r)},position:"top",modal:!0,buttons:{Ok:function(){ClosePopUp(r,$j(this))}}})}function RefreshFillFldsInSubGrid(e,t){for(var i=GetGridFields(e),a=0;a<i.length;a++){var r=GetFieldIndex(i[a]),l=FldParents[r].toString().split(",");if("Fill"==FMoe[r]&&""!=l)for(var o=0;o<l.length;o++){var n=GetDcNo(l[o]);if(!IsDcGrid(n)&&-1!=$j.inArray(l[o],ComboParentField))for(var s=GetFieldValue(l[o]+"000F"+n),d=(l[o],l[o]),c=0;c<ComboParentField.length;c++)if(ComboParentField[c]==d&&ComboParentValue[c]==s){for(var p=t.split(","),u=0;u<p;u++)if(""!=p[u]){var f=p[u]+"F"+e,m=GetDbRowNo(p[u],e),h=ComboDepField[c]+f,v=ComboDepValue[c].toString();$j("#"+h).length>0&&(CallSetFieldValue(h,v),UpdateFieldArray(h,m,v,"parent"))}break}}}}function AddSubGridRow(dcNo,calledFrom){var tableName="gridDc"+dcNo,newRow="",sTRowIndx=-1;newRow=$j("#"+tableName+" tbody>tr:last").clone(!0);var oldRowNo=newRow.attr("id"),hdnRowCount=$j("#hdnRCntDc"+dcNo);if(hdnRowCount.length>0){var dcClientRows=GetDcClientRows(dcNo),lastRow=dcClientRows.getMaxVal(),rowCount=$j("#hdnRCntDc"+dcNo).val(),newCnt=parseInt(lastRow,10)+1,newRowNo=GetRowNoHelper(newCnt);newRow.attr("id","sp"+dcNo+"R"+newRowNo+"F"+dcNo),newRow.find(":input").val(""),newRow.find("select,input,label,img,.Grdlnk").each(function(){ConvertFieldID($j(this),newRowNo)}),RegisterActiveRow(newRowNo,dcNo),AxActiveDc=dcNo;var glType=eval(callParent("gllangType")),dtpkrRTL=!1;dtpkrRTL="ar"==glType;var glCulture=eval(callParent("glCulture")),dtFormat="dd/mm/yy";"en-us"==glCulture&&(dtFormat="mm/dd/yy"),$j(".date").datepicker({isRTL:dtpkrRTL,dateFormat:dtFormat,showOn:"both",buttonImage:"../AxpImages/icons/16x16/calendar.png",buttonImageOnly:!0,buttonText:"Select date",changeMonth:!0,changeYear:!0,yearRange:"-100:+100"}),delImg=newRow.find(".rowdelete"),delImg.attr("id")!=undefined&&delImg.attr("id","del"+newRowNo+"F"+dcNo),newRow.insertAfter("#"+tableName+" tbody>tr:last"),$j("#sp"+dcNo+"R"+newRowNo+"F"+dcNo).show(),calledFrom==undefined?SetRowCount(dcNo,newCnt,"i"+newRowNo):SetRowCount(dcNo,parseInt(rowCount,10)+1),"GetDep"==calledFrom&&UpdateNewPopInfo(dcNo,newRowNo);var rowFrameNo=newRowNo+"F"+dcNo,ind=$j.inArray(rowFrameNo,DeletedDCRows);if(-1!=ind&&DeletedDCRows.splice(ind,1),CheckScroll(dcNo),UpdateDcRowArrays(dcNo,newRowNo,"Add"),calledFrom==undefined&&(UpdateFieldsInNewRow(dcNo,newRowNo),UpdatePopParentFlds(dcNo,AxActivePDc,newRowNo,GetClientRowNo(AxActivePRow,AxActivePDc))),IsFunction="","GetDep"==calledFrom)if(""!=AxParStrFromDep){var parStr=AxParStrFromDep.split("~"),parDc=parStr[0],pRow=GetClientRowNo(parStr[1],parDc);UpdatePopUpArrays(dcNo,newRowNo,!0,"Add",pRow,parDc)}else UpdatePopUpArrays(dcNo,newRowNo,!0,"Add");else UpdatePopUpArrays(dcNo,newRowNo,!0,"Add");calledFrom==undefined&&(RefreshFillFldsInSubGrid(dcNo,newRowNo),""==subGridJson?CallGetSubGridDDL(dcNo,AxActivePRow,AxActivePDc,newRowNo):ApplyPopJson(dcNo)),adjustwin("10",window)}}function CallGetSubGridDDL(e,t,i,a){try{var r=$j("#recordid000F0").val();ASB.WebService.GetSubGridDropdown(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,e,tstDataId,r,t,i,a,SuccessSubGridCombos,OnException)}catch(l){AxWaitCursor(!1),showAlertDialog("error",ServerErrMsg)}}var subGridJson="",result;function SuccessSubGridCombos(e,t){if(!CheckSessionTimeout(e)&&(ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,""!=e)){subGridJson=e;var i=GetDcClientRows(AxActiveDc);AxPopRowNo=i.getMaxVal(),AssignLoadValues(e,"PopGridCombos");try{AxAfterSubGridAddRow()}catch(a){}$j("#DivFrame"+AxActiveDc).dialog({title:popUpTitle,height:400,width:550,close:function(){ClosePopUp(AxActiveDc)},position:"top",modal:!0,buttons:{Ok:function(){ClosePopUp(AxActiveDc,$j(this))}}})}}function ApplyPopJson(e){var t=GetDcClientRows(e);AxPopRowNo=t.getMaxVal(),AssignLoadValues(subGridJson,"PopGridCombos"),UpdateRowInDataObj();try{AxAfterSubGridAddRow()}catch(i){}}function IsRowInPopRows(e,t,i,a){for(var r=GetPopRows(e,i,t).split(","),l=0;l<r.length;l++)if(r[l]==a)return!0;return!1}function IsPopParBound(e,t,i){for(var a=GetParentFields(e),r=!0,l=0;l<a.length;l++){var o=a[l]+i+"F"+t,n=GetFieldValue(o);try{n=parseFloat(n)}catch(s){}if(""==n.toString()){r=!1;break}}return r}function UpdatePopParentFlds(e,t,i,a){for(var r=GetParentFields(e),l=0;l<r.length;l++){var o=r[l].toString().trim()+a+"F"+t,n=GetSubFieldId("sub"+e+"_"+r[l].toString(),i,e),s=GetFieldValue(o);SetFieldValue(n,s);var d=GetDbRowNo(i,e);UpdateFieldArray(n,d,s,"parent")}}function EvaluateSubGridDep(e){for(var t=GetGridFields(e),i=0;i<t.length;i++){var a,r=GetFieldIndex(t[i]);if(-1!=r&&(depStr=FldDependents[r].toString()),""!=depStr&&(a=depStr.split(","))!=undefined)for(var l=0;l<a.length;l++){var o=a[l].toString(),n=o.substring(0,1),s=o.substring(1);e!=GetDcNo(s)&&"e"==n&&EvaluateAxFunction(s,t[i]+AxActiveRowNo+"F"+e)}}}function ClosePopUp(e,t){var i=GetPopRows(AxActivePDc,GetClientRowNo(AxActivePRow,AxActivePDc),e).split(",");if(1!=i.length)for(var a=i.length-1;a>=0;a--){var r=GetDcRowCount(e);""!=i[a].toString()&&IsEmptyRow(i[a],e)&&1!=r&&DeletePopRow(e,i[a])}$j("#dvPickList").is(":visible")&&$j("#dvPickList").hide(),AxIsPopActive=!1,t!=undefined&&t.dialog("close");var l=$j("#"+AxActiveField);l.length>0&&l.focus(),subGridJson="",EvaluateSubGridDep(e),DisplaySummaryInPopUp(e)}function DeletePopRow(e,t){var i=GetSerialNoCnt(e);i=parseInt(i,10)-1,SetSerialNoCnt(e,i);GetDcRowCount(e);var a=t+"F"+e;UpdateDcRowArrays(e,t,"Delete");for(var r=GetGridFields(e),l=0;l<r.length;l++){var o=r[l]+a;RemoveDeletedFields(o)}$j("#"+("sp"+e+"R"+t+"F"+e)).remove(),UpdatePopUpArrays(e,t,!0,"Delete");var n=GetDcRowCount(e);SetRowCount(e,n-1)}function UpdatePopUpParents(e){for(var t=GetFieldsName(e),i=GetFieldsDcNo(e),a=GetFieldsRowNo(e),r=0;r<PopParentDCs.length;r++)if(PopParentDCs[r]==i){popParentFlds=PopParentFlds[r].toString().split(",");var l;l=GetParentString(i,a,PopGridDCs[r]);for(var o=!1,n=GetParentFields(PopGridDCs[r]),s=0;s<n.length;s++)if(n[s]==t){o=!0;break}if(!o)continue;if(CheckDuplicateParents(i,popParentFlds,l,PopGridDCs[r],a)&&""!=l)return errorFlag=!0,void(errorField=e);SetPopParents(i,PopGridDCs[r],a,l);for(var d=PopGridDCs[r],c=GetPopRows(i,a,d).split(","),p=GetFieldValue(e),u=0;u<c.length;u++)if(""!=c[u].toString()){var f=GetSubFieldId("sub"+d+"_"+t,c[u].toString(),d);f="#"+f;try{var m=f.substring(1);SetFieldValue(m,p);var h=GetDbRowNo(c[u].toString(),d);UpdateFieldArray(m,h,p,"parent")}catch(v){}}}}function CheckDuplicateParents(e,t,i,a,r){var l,o=!1;l=parseInt(GetDcRowCount(e),10);for(var n=1;n<l;n++){GetParentString(e,GetRowNoHelper(n),a)==i&&n!=parseInt(r,10)&&(o=!0)}return o}function SetPopParents(e,t,i,a){for(var r=0;r<ParentDcNo.length;r++)ParentDcNo[r]==e&&PopGridDcNo[r]==t&&ParentClientRow[r]==i&&(PopParentsStr[r]=a)}function DisplaySummaryInPopUp(e){var t=-1,i=0;for(i=0;i<PopGridDCs.length;i++)if(PopGridDCs[i]==e){t=i;break}var a="",r="",l="",o="";-1!=t&&(a=PopSummaryParent[t],r=PopSummaryFld[t],l=""==PopSummDelimiter[t]?",":PopSummDelimiter[t]),-1!=r.indexOf(":")&&(r=r.replace(":",""));for(var n=GetPopRows(AxActivePDc,GetClientRowNo(AxActivePRow,AxActivePDc),e).split(","),s=0;s<n.length;s++){var d=r+n[s]+"F"+e;(d=$j("#"+d)).length>0&&(o+=d.val()+l)}o=o.substring(0,o.length-1),a=a+GetClientRowNo(AxActivePRow,AxActivePDc)+"F"+AxActivePDc,$j("#"+a).length>0&&$j("#"+a).val(o)}function GetPopRows(e,t,i){for(var a="",r=0;r<ParentDcNo.length;r++)if(ParentDcNo[r]==e&&ParentClientRow[r]==GetRowNoHelper(t)&&PopGridDcNo[r]==i){a=PopRows[r];break}return a}function ClearPopRows(e,t,i){for(var a=0;a<ParentDcNo.length;a++)ParentDcNo[a]==e&&ParentClientRow[a]==t&&PopGridDcNo[a]==i&&(PopRows[a]="")}function AddDeletePopRow(e,t,i,a,r){for(var l=!1,o=0;o<ParentDcNo.length;o++)if(ParentDcNo[o]==e&&ParentClientRow[o]==t&&PopGridDcNo[o]==i){l=!0;var n=PopRows[o].toString();if("Add"==r){if(""==n)n=a;else{var s=n.split(",");-1==$j.inArray(a,s)&&(n+=","+a)}PopRows[o]=n}else{for(var d=(n=n.split(",")).length-1;d>=0;d--)if(n[d].toString()==a){n.splice(d,1);break}for(var c="",p=0;p<n.length;p++)c+=""==c?n[p].toString():","+n[p].toString();PopRows[o]=c}break}if("Add"==r){if(!l){ParentDcNo.push(e),ParentClientRow.push(t);var u=GetParentString(e,t,i);PopGridDcNo.push(i),PopParentsStr.push(u),PopRows.push(a)}for(var f=0;f<PopParentDCs.length;f++)if(PopParentDCs[f]==e){parentFlds=PopParentFlds[f].toString().split(",");for(o=0;o<parentFlds.length;o++){var m=parentFlds[o]+t+"F"+e,h=GetSubFieldId("sub"+i+"_"+parentFlds[o],a,i),v=$j("#"+m),g=$j("#"+h);v.length>0&&g.length>0&&g.val(v.val())}}}}function IsEmptyRow(e,t){for(var i,a=!1,r=0;r<FldDcRange.length;r++){var l=FldDcRange[r].split("~");if(l[0]==t){i=l[1].split(",");break}}if(i!=undefined)for(var o=parseInt(i[0].toString(),10),n=parseInt(i[1].toString(),10),s=o;s<=n;s++){var d=FNames[s];if("Accept"==FMoe[s]||"Select"==FMoe[s]){d=d+e+"F"+t;var c=GetFieldValue(d),p=$j("#"+d);if(p.length>0&&"hidden"!=p.attr("type")){if("numeric"==FDataType[s].toLowerCase()&&""!=c&&(c=parseInt(c,10)),""!=c&&"0"!=c){a=!1;break}a=!0}}}return a}function SetPopDcStyle(e,t){var i=document.getElementById("add"+e),a=document.getElementById("btnClear"+e),r=document.getElementById("btnOk"+e);t?(i&&(i.disabled=!0,i.style.cursor="default"),a&&(a.style.visibility="hidden"),r&&(r.value="Close"),ShowingDc(e,"Disable")):(i&&(i.disabled=!1,i.style.cursor="hand"),a&&(a.style.visibility="visible"),r&&(r.value="Ok"))}function RegisterActivePRow(e,t){AxActivePRow=GetDbRowNo(e,t),AxActivePDc=t;for(var i=!1,a=Parameters.length-1;a>=0;a--){if("activeprow"==Parameters[a].split("~")[0]){Parameters[a]="activeprow~"+AxActivePRow,i=!0;break}}i||(Parameters[Parameters.length]="activeprow~"+AxActivePRow)}function IsPopGridFirmBind(e){for(var t=0;t<PopGridDCs.length;t++)if(PopGridDCs[t]==e&&"t"==PopGridDCFirm[t].toString().toLowerCase())return!0;return!1}function GetParentFields(e){for(var t,i=0;i<PopGridDCs.length;i++)if(PopGridDCs[i]==e){t=PopParentFlds[i].toString().split(",");break}return t}function GetParentString(e,t,i){var a="",r=GetParentFields(i);if(r!=undefined)for(var l=0;l<r.length;l++){var o=r[l]+t+"F"+e;""==a?a=GetFieldValue(o):a+="¿"+GetFieldValue(o)}return a}function GetPopGrids(e){for(var t="",i=0;i<PopParentDCs.length;i++)PopParentDCs[i]==e&&(""==t?t=PopGridDCs[i]:t+=","+PopGridDCs[i]);return t}function GetPopGridDcNo(e){for(var t="",i=0;i<PopParentDCs.length;i++)PopParentDCs[i]==e&&(""==t?t="dc"+PopGridDCs[i]:t+=",dc"+PopGridDCs[i]);return t}function AddParentRow(e,t,i,a){for(var r=!1,l=0;l<=e.length;l++)if(ParentDcNo[l]==e&&PopGridDcNo[l]==i&&ParentClientRow[l]==t){PopParentsStr[l]=a,r=!0;break}r||(ParentDcNo.push(e),ParentClientRow.push(t),PopGridDcNo.push(i),PopParentsStr.push(a),PopRows.push(""))}function UpdatePopUpArrays(e,t,i,a,r,l){if(TstructHasPop)if(i){var o=GetClientRowNo(AxActivePRow,AxActivePDc),n=AxActivePDc,s=o;r!=undefined&&l!=undefined&&(n=l,s=r),AddDeletePopRow(n,s,AxActiveDc,t,"Add"==a?"Add":"Delete")}else for(var d=GetPopGrids(e).split(","),c=0;c<d.length;c++)""!=d[c]&&AddParentRow(e,t,d[c],"")}function DeletePopRowsAfterGetDep(){for(var e=AxSubGridRows.split("¿"),t=AxParStrFromDep.split("~"),i=0;i<e.length;i++)if(""!=e[i]){var a=e[i].split("~"),r=a[0];ClearPopRows(t[0],GetClientRowNo(t[1],t[0]),r);for(var l=a[1].split(","),o=l.length-1;o>=0;o--){var n=GetClientRowNo(parseInt(l[o],10),r);if(1==$j("#gridDc"+r)[0].rows.length){var s=$j("#gridDc"+r)[0].rows[0].id;n=s.substring(s.lastIndexOf("R")+1,s.lastIndexOf("F"));ClearDeletedFields(r,n);var d=$j.inArray(r,DCFrameNo);DCHasDataRows[d]="False";var c="sp"+r+"R"+l[o]+"F"+r,p=$j("#"+c);p.attr("id","sp"+r+"R001F"+r),p.find(":input").val(""),p.find("select,a,input,label,img,.Grdlnk").each(function(){ConvertFieldID($j(this),"001")}),SetRowCount(r,"1"),UpdatePopUpArrays(r,n,!0,"Delete"),UpdateDcRowArrays(r,n,"Delete",-1)}else{c="sp"+r+"R"+n+"F"+r;$j("#"+c).remove(),UpdatePopUpArrays(r,n,!0,"Delete"),UpdateDcRowArrays(r,n,"Delete",-1),SetRowCount(r,GetDcRowCount(r)-1)}}}}function AddRowAfterGetDep(e,t,i){if(TstructHasPop)if("1"!=e||"True"==i)AddRow(t,"GetDep"),AxDepRows.push(e+"~"+GetDcRowCount(t));else{if(AxDepRows.push(e+"~1"),$j("#sp"+t+"R001F"+t).show(),UpdateNewPopInfo(t,"001"),""!=AxParStrFromDep){var a=AxParStrFromDep.split("~"),r=a[0];UpdatePopUpArrays(t,"001",!0,"Add",GetClientRowNo(a[1],r),r)}UpdateDcRowArrays(t,"001","Add")}}function GetDbPopRows(e,t){if(""!=e){var i=e.split(",");i.sort();for(var a="",r=0;r<i.length;r++){var l=GetRowNoHelper(GetDbRowNo(i[r],t));""==a?a=l:a+=","+l}return a}return e}function GetSubDsRowNo(e,t){var i=0,a=$j.inArray(e,AxSubWsRows);return-1==a?(AxSubWsRows.push(e),i=GetDcRowCount(t)+1,AxSubDsRows.push(i)):i=AxSubDsRows[a],i}function toggleSwitch(e){var t="";1==$j("#ckbPurposeUser").prop("checked")?($j("#ckbPurposeUser").prop("checked",!1),t="0",$j(".clsPrps").css("display","none")):($j("#ckbPurposeUser").prop("checked",!0),t="1",$j(".clsPrps").css("display","block"));try{result=ASB.WebService.GetChoices("normal",t)}catch(i){result=i.toString()}}function toggleSwitchDesign(e){var t="";1==$("#ckbPurposeDev").prop("checked")?($("#ckbPurposeDev").prop("checked",!1),t="0",$j(".clsPrps").css("display","none")):($("#ckbPurposeDev").prop("checked",!0),t="1",$j(".clsPrps").css("display","block"));try{result=ASB.WebService.GetChoices("design",t)}catch(i){result=i.toString()}}function GetChoiceStatusForDSign(){$.ajax({type:"POST",url:"TstructDesign.aspx/GetPrpLblStatusForDSign",data:"",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){"true"==e.d?($j(".clsPrps").css("display","block"),$j("#ckbPurposeDev").prop("checked",!0)):($j(".clsPrps").css("display","none"),$j("#ckbPurposeDev").prop("checked",!1))}})}function pageloadlogtime(e){console.log("Page Load:  "+e+" milliseconds.")}function disableDC(e){var t=$j("#DivFrame"+e);t.find("input,textarea, img, select, a").not(".subGrid,.chkShwSel,.swtchDummyAnchr,.tgl").attr("disabled",!0),t.find("a img").removeClass("handCur"),t.find("img").attr("onclick","Callnull"),t.find(":button").removeClass("handCur"),t.find(".rowdelete").addClass("disabledelete"),t.find(".rowadd").addClass("disableadd"),t.find(".axpBtn").css({"pointer-events":"none",cursor:"default"}),t.find(".axpBtnCustom").css({"pointer-events":"none",cursor:"default"}),t.find(".upload-icon").attr("disabled",!0).css("cursor","default"),t.find(".fillcls").addClass("disablefill"),$j("#gridAddBtn"+e).prop("disabled",!0),axInlineGridEdit||"form"==AxpGridForm||$j("#wrapperForEditFields"+e).hide(),$j("#gridToggleBtn"+e).addClass("disabled").prop("disabled",!0),$j("[id ^= 'fillgrid']").prop("disabled",!0).addClass("disabled"),$j("#wrapperForEditFields"+e).find(".editLayoutFooter button").addClass("disabled").prop("disabled",!0),$j("#colScroll"+e+" table tbody tr").addClass("disableTheRow"),$j("#colScroll"+e+" table tbody tr").find(".glyphicon.glyphicon-pencil,.glyphicon.glyphicon-remove").addClass("disabled").prop("disabled",!0).parent().addClass("disabled").prop("disabled",!0),$("#gridAddBtn"+e).next().find(":button").attr("disabled",!0).off("click")}function createEditors(){$("textarea").each(function(){var e=$(this),t="";if(0===(t=e.attr("id")!=undefined?e.attr("id"):"").toLowerCase().indexOf("sql_editor")||0===t.toLowerCase().indexOf("exp_editor")||"SQL Editor"==GetDWBFieldType(GetFieldsName(t))||"Expression Editor"==GetDWBFieldType(GetFieldsName(t))||0===t.toLowerCase().indexOf("js_editor")||0===t.toLowerCase().indexOf("html_editor")){if(IsGridField(GetFieldsName(t))&&"form"!=AxpGridForm&&!e.parent("div").hasClass("edit-mode-content")&&!e.parents(".modal").length)return!0;if(e.hasClass("CodeMirrorApplied"))return!0;if(e.addClass("CodeMirrorApplied"),e.data("myeditor")&&e.data("myeditor").toTextArea(),0===t.toLowerCase().indexOf("sql_editor")||"SQL Editor"==GetDWBFieldType(GetFieldsName(t))){createTheEditor({type:"sql",textarea:t,loadSqlHintObj:!1,sqlHintObj:"mainSQLhintObj",customValidationFn:customValidationFn});var i='<div id="dvpop'+t+'" class="tstsqleditorbtn"><a value="SQL Editor" onclick=javascript:createPopup(\'AxDBScript.aspx\',true); tooltip="SQL Editor"><i class="fa fa-external-link"></i></a></div>';$("#"+t).after(i)}else 0===t.toLowerCase().indexOf("exp_editor")||"Expression Editor"==GetDWBFieldType(GetFieldsName(t))?createTheEditor({type:"expression",textarea:t,customValidationFn:customValidationFn}):0===t.toLowerCase().indexOf("html_editor")?createHtmlEditor(t):0===t.toLowerCase().indexOf("js_editor")?createJSEditor(t,"text/javascript"):console.log("Not Applied "+t)}})}function createPopupdesignnew(e){htmlContent='<div id="axpertPopupWrapperDWB"  class="remodal" data-pushtxt-id="'+e+'" data-remodal-id="axpertPopupModalDWB"><button data-remodal-action="close" class="remodal-close remodalCloseBtn icon-basic-remove" title="Close"></button><div style="height:100%;" id="iframeMarkUp1"><div id="QryEditor"><div ><button id="exeQuery" title="Execute"><i class="fa fa-bolt"></i></button><textarea id="dwbtxtEditorsql" rows="4" cols="50"></textarea></div><div class="dvOutput"><div class="rsltHeader">Result<span id="spnRowCnt"></span></div><div id="txtOutput"></div><table id="tblOutput" class="table-responsive"></table></div></div></div></div>',$("head").append(htmlContent);var t=$("[data-remodal-id=axpertPopupModalDWB]:not(.remodal-is-initialized):not(.remodal-is-closed):eq(0)").remodal({closeOnOutsideClick:!0,hashTracking:!1,closeOnEscape:!0});t&&"opened"!=t.state&&t.open(),CodeMirror.fromTextArea(document.getElementById("dwbtxtEditorsql"),{mode:"text/x-sql",smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,theme:"default",hintOptions:{tables:callParentNew("mainSqlHintObj")}}).on("keyup",function(e,t){(!t.ctrlKey&&t.keyCode>=65&&t.keyCode<=90||t.keyCode>=97&&t.keyCode<=122||t.keyCode>=46&&t.keyCode<=57)&&CodeMirror.commands.autocomplete(e,null,{completeSingle:!1})});var i="#dv"+$("#axpertPopupWrapperDWB").attr("data-pushtxt-id").split("0")[0];$("#QryEditor .CodeMirror")[0].CodeMirror.setValue($(i+" .CodeMirror")[0].CodeMirror.getDoc().getValue())}function customValidationFn(textarea){var jsonData="",webServiceName="",textSqlandExpression=textarea.value;if(!(textSqlandExpression.length<=0)&&(textarea.id.toLocaleLowerCase().startsWith("sql_editor")||textarea.id.toLocaleLowerCase().startsWith("exp_editor")||"SQL Editor"==GetDWBFieldType(GetFieldsName(textarea.id))||"Expression Editor"==GetDWBFieldType(GetFieldsName(textarea.id)))){var SuccessCallbackAction=function(e,t){ShowDimmer(!1);try{var i=$.parseJSON(e),a=i.result[0].msg,r=i.result[0].status;"undefined"!=typeof i.result[0].metadata?autocompleteMetadataJson(i.result[0].metadata):(sourceAcMetaJsonFlds=new Array,fldSourceAcMetaJson=""),"failed"==r.toLowerCase()&&(a=a.replace("<error>","").replace("</error>",""),showAlertDialog("warning",a))}catch(l){}},_OnException=function(e){ShowDimmer(!1)},sourcefield="",sourcetable="",Axp_Web_SqlExp_Val_Def_RestRad="",calfrom="",fgname="",fieldname="",fldordno="",datatype="",fieldType="",sfrom="",expression="",validateExpression="",transid="",savenorm="",refresh="",autoselect="",combobox="",sql="",iviewparams="",pmetadata="",sourcefieldid="",sourcetableid="",dcNo="";fieldType=GetFieldValue(GetComponentName("type",GetDcNo("type")))||"",fieldname=GetFieldValue(GetComponentName("name",GetDcNo("name")))||"",fldordno=GetFieldValue(GetComponentName("fldordno",GetDcNo("fldordno")))||"",datatype=GetFieldValue(GetComponentName("datatype",GetDcNo("datatype")))||"","field"===fieldType.toLowerCase()?sfrom=GetFieldValue(GetComponentName("modeofentry",GetDcNo("modeofentry")))||"":"Fill Grid"===fieldType.toLowerCase()&&(sfrom="fillgrid"),transid=GetFieldValue(GetComponentName("stransid",GetDcNo("stransid")))||callParentNew("transid"),expression=GetFieldValue(GetComponentName("exp_editor_expression",GetDcNo("exp_editor_expression")))||"",validateExpression=GetFieldValue(GetComponentName("exp_editor_validateexpression",GetDcNo("exp_editor_validateexpression")))||"",sfrom=sfrom.toLowerCase(),"select from sql"===sfrom?(savenorm=GetFieldValue(GetComponentName("savenormalized",GetDcNo("savenormalized")))||"",refresh=GetFieldValue(GetComponentName("refreshonsav",GetDcNo("refreshonsav")))||"",autoselect=GetFieldValue(GetComponentName("autoselect_sql",GetDcNo("autoselect_sql")))||"",combobox=""|GetFieldValue(GetComponentName("combobox_sql",GetDcNo("combobox_sql"))),sql=GetFieldValue(GetComponentName("sql_editor_test",GetDcNo("sql_editor_test")))||"",sourcefield=GetFieldValue(GetComponentName("sourcefield",GetDcNo("sourcefield")))||"",sourcetable=GetFieldValue(GetComponentName("sourcetable",GetDcNo("sourcetable")))||"",pmetadata=GetFieldValue(GetComponentName("pmetadata",GetDcNo("pmetadata")))||"",sourcefieldid="sourcefield",sourcetableid="sourcetable"):"select from form"===sfrom?(savenorm=GetFieldValue(GetComponentName("savenormalized_form",GetDcNo("savenormalized_form")))||"",refresh=GetFieldValue(GetComponentName("refreshonsave_form",GetDcNo("refreshonsave_form")))||"",autoselect=GetFieldValue(GetComponentName("autoselect_form",GetDcNo("autoselect_form")))||"",combobox=GetFieldValue(GetComponentName("combobox_form",GetDcNo("combobox_form")))||"",sql=GetFieldValue(GetComponentName("sql_editor_sqltextform",GetDcNo("sql_editor_sqltextform")))||"",sourcefield=GetFieldValue(GetComponentName("selectfield",GetDcNo("selectfield")))||"",sourcetable=GetFieldValue(GetComponentName("tname",GetDcNo("tname")))||"",pmetadata=GetFieldValue(GetComponentName("pmetadata",GetDcNo("pmetadata")))||""):"accept"===sfrom?sql=GetFieldValue(GetComponentName("sql_editor_detail",GetDcNo("sql_editor_detail")))||"":""==sql&&(sql=textSqlandExpression),Axp_Web_SqlExp_Val_Def_RestRad=GetFieldValue(GetComponentName("Axp_Web_SqlExp_Val_Def_RestRad",GetDcNo("Axp_Web_SqlExp_Val_Def_RestRad")))||"",textarea.id.toLocaleLowerCase().startsWith("sql_editor")?(jsonData={_parameters:[{tstructs:{axpapp:callParentNew("mainProject"),transid:transid,fieldname:fieldname,iviewparams:iviewparams,fldordno:fldordno,datatype:datatype,sfrom:sfrom,expression:expression,validateexpression:validateExpression,savenorm:savenorm,refresh:refresh,autoselect:autoselect,combobox:combobox,sql:sql,sourcefield:sourcefield,sourcetable:sourcetable,Axp_Web_SqlExp_Val_Def_RestRad:Axp_Web_SqlExp_Val_Def_RestRad,metadata:pmetadata,sourcefieldid:sourcefieldid,sourcetableid:sourcetableid}}]},webServiceName="ValidateSQL"):textarea.id.toLocaleLowerCase().startsWith("exp_editor")&&(textAreaID=textarea.id.toLocaleLowerCase(),calfrom=-1!=textAreaID.indexOf("exp_editor_expression")?"field":-1!=textAreaID.indexOf("exp_editor_validateexpression")?"fgval":-1!=textAreaID.indexOf("exp_editor_footerstring")?"fgfootstr":"field",jsonData={_parameters:[{tstructs:{axpapp:eval(callParent("mainProject")),transid:transid,calfrom:calfrom,expression:textSqlandExpression,fgname:fieldname,Axp_Web_SqlExp_Val_Def_RestRad:Axp_Web_SqlExp_Val_Def_RestRad}}]},webServiceName="ValidateExpression"),ShowDimmer(!0);try{ASB.WebService.CallRestWS(JSON.stringify(jsonData),webServiceName,SuccessCallbackAction,_OnException)}catch(exp){}}}function IsTabDc(e){return-1!=$j.inArray(e,TabDCs)}function createJSEditor(e,t){var i={smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,autoRefresh:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]};i.mode=t,jsCodeMirror=CodeMirror.fromTextArea(document.getElementById(e),i),jsCodeMirror.on("blur",function(){SetFieldValue(e,jsCodeMirror.getValue()),UpdateFieldArray(e,"000",$("#"+e).val(),"parent")}),jsCodeMirror.on("keyup",function(e,t){(!t.ctrlKey&&t.keyCode>=65&&t.keyCode<=90||t.keyCode>=97&&t.keyCode<=122||t.keyCode>=46&&t.keyCode<=57)&&CodeMirror.commands.autocomplete(e,null,{completeSingle:!1})})}function discardLodaData(){try{var e=$j("#recordid000F0").val();GetLoadData(e,"")}catch(t){}}function hideDiscardButton(){try{var e=$j("#recordid000F0").val();""!=e&&"0"!=e&&"old"!=AxpTstButtonStyle?$("#ftbtn_iDiscard").removeClass("d-none"):$("#ftbtn_iDiscard").hasClass("d-none")||$("#ftbtn_iDiscard").addClass("d-none")}catch(t){}}function autocompleteMetadataJson(e){if(""!=e)try{sourceAcMetaJsonFlds=new Array,fldSourceAcMetaJson=e,e.forEach(function(e){sourceAcMetaJsonFlds.push(e.name)})}catch(t){}}function tstwfcomments(){if(0==$(".toolbarRightMenu").find(".content").length){var e='<section class="content">';$("#breadcrumb-panel .bcrumb span:not(.ivirCButton):not(.icon-arrows-down).tstivtitle").css("padding","3px 0px 0px 46px"),e+='<button type="button" class="btn btn-default btn-circle waves-effect waves-circle waves-float wftstBackBtn" onclick="wftstBackBtn();" style="float: left;margin-top: -8px;margin-left: -15px;">',e+='<i class="material-icons">arrow_back</i>',e+="</button></section>",$(".toolbarRightMenu .newRequestJson").length>0?$($(".toolbarRightMenu .newRequestJson")[0]).before(e):$(".toolbarRightMenu #iconsNewOption").length>0?$(".toolbarRightMenu #iconsNewOption").before(e):$(".toolbarRightMenu").append(e)}}function wftstBackBtn(){window.parent.globalChange=!1;var e=$("#stransid000F1").val(),t=$("#wfname000F1").val();parent.LoadIframeac("WorkflowNew.aspx?prevTransId="+e+"&prevWfName="+t)}function DoScriptFormControl(e,t){if(SFormControls.length>0)if("On Form Load"==t||"On Data Load"==t){var i=$j("#recordid000F0").val();$.each(SFCApply,function(e,t){if("On Form Load"==t&&"0"==i)isScriptFormLoad="true",EvaluateScriptFormControl(SFormControls[e]);else if("On Data Load"==t&&"0"!=i){isScriptFormLoad="true",EvaluateScriptFormControl(SFormControls[e])}})}else if(""!=e){var a=GetFieldsName(e);$.each(SFCFldNames,function(i,r){("On Click"==SFCApply[i]&&"On Field Enter"==t&&(t="On Click"),r==a&&SFCApply[i]==t)&&(isScriptFormLoad="false",EvaluateScriptFormControl(SFormControls[i],e))})}}function EvaluateScriptFormControl(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(""!=e){""!=t&&GetFieldValue(t);var i=""==t?"":t,a=e.split("♥");AxFormControlList=new Array;var r=EvalExprSet(a);AxFormControlList.length>0?ProcessScriptFormControlOnList(i):""!=r&&r.split("~").length>=2?ProcessScriptFormControl(r.split("~")[1],r.split("~")[0],i):""!=r&&r.split("♠").length>0&&ProcessScriptFormControlEvents(r,i)}}function ProcessScriptFormControlOnList(e){$.each(AxFormControlList,function(t,i){""!=i&&ProcessScriptFormControl(i.split("~")[1],i.split("~")[0],e)})}function ProcessScriptFormControl(e,t,i){var a="",r=0;e.indexOf("♦")>0&&(r=e.split("♦")[2],a=e.split("♦")[1],e=e.split("♦")[0]),e.split(",").forEach(function(e){var l="";e.indexOf("^")>0&&(l=e.split("^")[1],e=e.split("^")[0]);var o=GetExactFieldName(e);if(e=o,"0"!=(L=GetDcNo(e))){var n=IsDcGrid(L);if("NONGRID"==(secFldDc=n?"GRID":"NONGRID"))e=e+"000F"+L;else if("GRID"==secFldDc){var s,d=e;if("0"==AxActiveRowNo||""==AxActiveRowNo)e=e+"001"+"F"+L;else e=e+GetClientRowNo(AxActiveRowNo,L)+"F"+L;if(0==(s=$j("#"+e+":not(.tstformbutton,.axpBtnCustom)")).length){var c=$("#gridHd"+L+" tbody tr:first").length>0?$("#gridHd"+L+" tbody tr:first").attr("id"):"";""!=c&&(e=d+(c=c.substring(c.lastIndexOf("F")-3)))}}}if(isFieldBtn=!1,0==(s=$j("#"+e+":not(.tstformbutton,.axpBtnCustom,.dwbIvBtnbtm,.dwbBtn,.menu-link)")).length){if(0==(s=$j("#DivFrame"+e.toString().substring(2))).length){var p=e.substr(2);-1!=$j.inArray(p,TabDCs)&&(s=$j("#ank"+p))}}else s.length>0&&s.parents(".menu.menu-sub-dropdown").length>0&&(isFieldBtn=!0);var u=GetFieldsRowNo(e),f=GetFieldsDcNo(e),m=(GetDbRowNo(u,f),!1);if(s.length<=0){var h,v=e;-1!=e.toString().indexOf("F")&&(v=e.substring(0,e.lastIndexOf("F")-3)),$j(".axpBtn,.axpBtnCustom").each(function(){if($j(this).attr("id")==v)return s=$j(this),isFieldBtn=!0,!1}),$j(".action img").each(function(){if($j(this).attr("id")==v)return h=$j(this),isFieldBtn=!0,!1});var g=!1;$j(".AxpTstBtn input,img").each(function(){if($j(this).attr("value")==v||$j(this).attr("id")=="AxpTstBtn_"+v)return h=$j(this),isFieldBtn=!0,g=!0,!1}),$j(".tstformbutton").each(function(){if($j(this).attr("id")==v)return h=$j(this),isFieldBtn=!0,g=!0,!1}),"remove"==v.toLowerCase()?v="delete":"list view"==v.toLowerCase()?v="listview":"new"==v.toLowerCase()&&(v="add"),"save"!=v.toLowerCase()&&"submit"!=v.toLowerCase()||(m=!0,v="save");var b=v;"listview"==b.toLowerCase()&&(b="list view"),$j("#icons").find("a").each(function(){return void 0!==$j(this).attr("title")&&$j(this).attr("class")==v.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName?(s=$j(this),isFieldBtn=!0,!1):void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==b.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName||void 0!==$j(this).attr("id")&&$j(this).attr("id").toLowerCase()==b.toLowerCase()?(s=$j(this),isFieldBtn=!0,!1):void 0}),$j(".toolbarRightMenu").find("a").each(function(){if(void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==b.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)return s=$j(this),isFieldBtn=!0,!1}),isFieldBtn||$j("#nextprevicons").find("a").each(function(){$j(this).attr("class")==v.toLowerCase()&&(s=$j(this),isFieldBtn=!0)}),isFieldBtn||$j(".tstructMainBottomFooter").find("a").each(function(){($j(this).attr("id").toLowerCase()==v.toLowerCase()||void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==b.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)&&(s=$j(this),isFieldBtn=!0)}),isFieldBtn||$(".toolbarRightMenu .menu-item a").each(function(){(void 0!==$j(this).attr("id")&&$j(this).attr("id").toLowerCase()==v.toLowerCase()||void 0!==$j(this).attr("title")&&$j(this).attr("title").toLowerCase()==b.toLowerCase()||"undefined"!=typeof btnName&&$j(this).text()==btnName)&&(s=$j(this),isFieldBtn=!0)}),h!=undefined&&h.length>0&&(s=h.parent(0)),g&&(s=h)}if(s.length>0)switch(t){case"enable":if(isFieldBtn)m?EnableSaveBtn(!0):EnableDisableBtns(s,!0);else if("dc"==o.substr(0,2)){var w=parseInt(o.substr(2,o.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(w,"enable"):ShowingDc(w,"enable")}else{var F=GetDcNo(o);try{var C=GetFieldsName(s.attr("id")),D=$j.inArray(C,FNames);FFieldReadOnly[D]="False"}catch(le){}if(IsDcGrid(F)){var x=0;x=GetDcRowCount(F);getGridFldType(o,F);for(var y=1;y<=x;y++){s=$j("#"+o+GetClientRowNo(y,F)+"F"+F);GetClientRowNo(y,F);if(s.length>0){if(-1==(ae=$j.inArray(F+"~"+o+"~disable",AxFormContSetFldActGrid))&&-1==(ae=$j.inArray(F+"~"+o+"~enable",AxFormContSetFldActGrid))?AxFormContSetFldActGrid.push(F+"~"+o+"~enable"):AxFormContSetFldActGrid[ae]=F+"~"+o+"~enable",1==IsPickListField(s.attr("id")))(re=document.getElementById("img~"+s.attr("id"))).disabled=!1,re.className="input-group-addon handCur pickimg";if(0==s.val()&&"select-one"!=s.prop("type")&&s.val(""),s.attr("title")==dateString&&""==s.val()&&s.val(dateString),"checkbox"==s.attr("type"))EnableDisableCheckbox(s.attr("id"),!1);else(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).prop("disabled",!1),s.css("display","none"),$j("#cke_"+s.attr("id")).removeAttr("disabled")),"axpImg"==s.attr("class")&&s.attr("onclick",null),s.prop("disabled",!1),s.prop("readOnly",!1),s.removeAttr("readOnly"),SetAutoCompAccess("enabled",s)}}}else{if(1==IsPickListField(s.attr("id")))(re=document.getElementById("img~"+s.attr("id"))).disabled=!1,re.className="input-group-addon handCur pickimg";if(0==s.val()&&"select-one"!=s.prop("type")&&s.val(""),s.attr("title")==dateString&&""==s.val()&&s.val(dateString),"checkbox"==s.attr("type"))EnableDisableCheckbox(s.attr("id"),!1);else(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).prop("disabled",!1),s.css("display","none"),$j("#cke_"+s.attr("id")).removeAttr("disabled")),"axpImg"==s.attr("class")&&s.attr("onclick",null),s.prop("disabled",!1),s.prop("readOnly",!1),s.removeAttr("readOnly"),SetAutoCompAccess("enabled",s)}}break;case"disable":if(isFieldBtn)m?EnableSaveBtn(!1):EnableDisableBtns(s,!1);else if("dc"==o.substr(0,2)){w=parseInt(o.substr(2,o.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(w,"disable"):ShowingDc(w,"disable")}else{F=GetDcNo(o);try{var A=GetFieldsName(s.attr("id")),G=$j.inArray(A,FNames);FFieldReadOnly[G]="True"}catch(le){}if(IsDcGrid(F)){x=0;x=GetDcRowCount(F);for(getGridFldType(o,F),y=1;y<=x;y++){s=$j("#"+o+GetClientRowNo(y,F)+"F"+F);GetClientRowNo(y,F);if(s.length>0){if(-1==(ae=$j.inArray(F+"~"+o+"~enable",AxFormContSetFldActGrid))&&-1==(ae=$j.inArray(F+"~"+o+"~disable",AxFormContSetFldActGrid))?AxFormContSetFldActGrid.push(F+"~"+o+"~disable"):AxFormContSetFldActGrid[ae]=F+"~"+o+"~disable",1==IsPickListField(s.attr("id")))(re=document.getElementById("img~"+s.attr("id"))).disabled=!0,re.className="pickimg input-group-addon handCur";if(s.attr("title")!=dateString||s.val()!=dateString&&"''"!=s.val()||s.val(""),"checkbox"==s.attr("type"))EnableDisableCheckbox(s.attr("id"),!0);else(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).attr("disabled","disabled"),s.css("display","none"),$j("#cke_"+s.attr("id")).prop("readonly",!0)),"axpImg"==s.attr("class")&&s.attr("onclick","callnull"),SetAutoCompAccess("disabled",s)}}}else{if(1==IsPickListField(s.attr("id")))(re=document.getElementById("img~"+s.attr("id"))).disabled=!0,re.className="pickimg input-group-addon handCur";if(s.attr("title")!=dateString||s.val()!=dateString&&"''"!=s.val()||s.val(""),"checkbox"==s.attr("type"))EnableDisableCheckbox(s.attr("id"),!0);else(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).attr("disabled","disabled"),s.css("display","none"),$j("#cke_"+s.attr("id")).prop("readonly",!0)),"axpImg"==s.attr("class")&&s.attr("onclick","callnull"),s.prop("disabled",!0),SetAutoCompAccess("disabled",s)}}break;case"hide":if("dc"==o.substr(0,2)){w=parseInt(o.substr(2,o.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(w,"hide"):ShowingDc(w,"hide")}else if(isFieldBtn)EnableDisableSFCBtns(s,"hide"),void 0!==s.attr("id")&&"ftbtn_iSave"==s.attr("id")&&(btnfooteropenlist=btnfooteropenlist.replace("ftbtn_iSave","")),void 0!==s.attr("id")&&"ftbtn_iNew"==s.attr("id")&&(btnfooteropenlist=btnfooteropenlist.replace("ftbtn_iNew",""));else{HideShowField(o,"hide");var S=GetFieldIndex(o),k=GetDWBFieldType("",S);(o.startsWith("axptm_")||o.startsWith("axpdbtm_")||""!=k&&"time"==k.toLowerCase())&&($j("#"+s.attr("id")+" .tstOnlyTime").removeClass("hasDatepicker"),$j("#"+s.attr("id")+" .tstOnlyTime24hours").removeClass("hasDatepicker"))}break;case"show":if("dc"==o.substr(0,2)){w=parseInt(o.substr(2,o.length),10);"undefined"!=typeof isWizardTstruct&&isWizardTstruct?ToggleWizardDc(w,"show"):ShowingDc(w,"show")}else if(isFieldBtn)EnableDisableSFCBtns(s,"show");else{HideShowField(o,"show");S=GetFieldIndex(o),k=GetDWBFieldType("",S);(o.startsWith("axptm_")||o.startsWith("axpdbtm_")||""!=k&&"time"==k.toLowerCase())&&($j("#"+s.attr("id")+" .tstOnlyTime").addClass("hasDatepicker"),$j("#"+s.attr("id")+" .tstOnlyTime24hours").addClass("hasDatepicker"))}break;case"setvalue":axpScriptIsAddrow=!1;w=GetDcNo(o);var j="";if(IsDcGrid(w)){var P="001",N=r.length;2==N?P="0"+r:1==N?P="00"+r:3==N&&(P=r),j=o+GetClientRowNo(r,w)+"F"+w,AxActiveRowNo=GetDbRowNo(P,w)}else j=o+"000F"+w;if($j("#"+j).hasClass("multiFldChk")&&""==a.trim())if(IsDcGrid(w))$j("input[id="+j+"]").each(function(){$j(this).removeAttr("checked"),$j(this).prop("checked",!1)});else try{$("#"+j).val(""),$("#"+j).data("valuelist",""),$("#"+j).tokenfield("setTokens",[])}catch(le){}else CallSetFieldValue(j,a);var T=GetFieldsRowNo(j),R=GetDbRowNo(T,w);UpdateFieldArray(j,R,a,"parent",""),""!=i&&i.startsWith("barqr_")&&$j($j("#"+i)).val("");break;case"axaddrow":axpScriptIsAddrow=!0;var I=e.substring(2),E=!1;gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==I&&(E=!0)}),AxWaitCursor(!0),ShowDimmer(!0),CallAddRowFromScript(I,i,E);break;case"setfieldcaption":var L;if("0"!=(L=GetFieldsDcNo(e)))if(n=IsDcGrid(L)){var B=GetFieldsName(e);s.parents(".customSetupTableMN").find("thead th#th-".concat(B," .thhead")).text(l)}else s.parents(".grid-stack-item").find(".fld-wrap3 label").text(l);break;case"collapse":if("dc"==o.substr(0,2)){var O=parseInt(o.substr(2,o.length),10);$("#dcBlean"+O).length>0&&($("#dcBlean"+O).is(":checked")&&$("#dcBlean"+O).removeAttr("checked"),$("#divDc"+O+" .gridIconBtns").length>0?($("#divDc"+O+" .griddivColumn").addClass("d-none"),$("#divDc"+O+" .gridIconBtns").addClass("d-none")):$("#divDc"+O).addClass("d-none"),GetDcStateValue(O,"F"))}break;case"expand":if("dc"==o.substr(0,2)){var _=parseInt(o.substr(2,o.length),10);$("#dcBlean"+_).length>0&&($("#dcBlean"+_).is(":checked")||$("#dcBlean"+_).attr("checked","checked"),$("#divDc"+_+" .gridIconBtns").length>0?($("#divDc"+_+" .griddivColumn").removeClass("d-none"),$("#divDc"+_+" .gridIconBtns").removeClass("d-none")):$("#divDc"+_).removeClass("d-none"),GetDcStateValue(_,"T"))}break;case"mask":var M=GetFieldIndex(o);if(M>-1){var V=a,W=r.split("♠");if("false"==isScriptFormLoad)if(ScriptMaskFields.length>0)-1==(ae=$j.inArray(o,ScriptMaskFields))&&ScriptMaskFields.push(o);else ScriptMaskFields.push(o);W.length>1?(FldMaskType[M]="Show few characters",FldMaskDetails[M]=W[0]+"♦"+W[1]+"♦"+V+"♦"):(FldMaskType[M]="Mask all characters",FldMaskDetails[M]="0♦0♦"+V+"♦");var U=GetDcNo(o);if(IsDcGrid(U)){var z=GetDcRowCount(U);for(y=1;y<=z;y++){var H=o+GetClientRowNo(y,U)+"F"+U;if($j("#"+H).length>0){var q=GetFieldValue(H);""!=q&&(UpdateAllFieldValues(H,q),"all"==W[0]?q=MaskCharacter(q.toString(),V,0):(q=MaskCharacter(q.toString(),V,q.length-W[0]),q=RevMaskCharacter(q.toString(),V,W[1])),$("#"+H).val(q),$("#"+H).attr("value",q))}}}else{var Q=o+"000F"+U,K=GetFieldValue(Q);""!=K&&(UpdateAllFieldValues(Q,K),"all"==W[0]?K=MaskCharacter(K.toString(),V,0):(K=MaskCharacter(K.toString(),V,K.length-W[0]),K=RevMaskCharacter(K.toString(),V,W[1])),$("#"+Q).val(K),$("#"+Q).attr("value",K))}}break;case"nomask":var J=GetFieldIndex(o);if(J>-1){if("false"==isScriptFormLoad)if(ScriptMaskFields.length>0)(ae=$j.inArray(o,ScriptMaskFields))>-1&&ScriptMaskFields.splice(ae,1);FldMaskType[J]="",FldMaskDetails[J]="";var Y=GetDcNo(o);if(IsDcGrid(Y)){var X=GetDcRowCount(Y);for(y=1;y<=X;y++){var Z=o+GetClientRowNo(y,Y)+"F"+Y;if($j("#"+Z).length>0){var ee=GetFieldValue(Z);""!=ee&&(UpdateAllFieldValues(Z,ee),$("#"+Z).val(ee),$("#"+Z).attr("value",ee))}}}else{var te=o+"000F"+Y,ie=GetFieldValue(te);""!=ie&&(UpdateAllFieldValues(te,ie),$("#"+te).val(ie),$("#"+te).attr("value",ie))}}break;case"gridcelldisable":F=GetDcNo(o);if(IsDcGrid(F)&&""!=a&&0!=a&&(s=$j("#"+o+GetClientRowNo(a,F)+"F"+F)).length>0){if(-1==(ae=$j.inArray(F+"~"+o+"~"+GetClientRowNo(a,F)+"~enable",AxFormContSetGridCell))&&-1==(ae=$j.inArray(F+"~"+o+"~"+GetClientRowNo(a,F)+"~disable",AxFormContSetGridCell))?AxFormContSetGridCell.push(F+"~"+o+"~"+GetClientRowNo(a,F)+"~disable"):AxFormContSetGridCell[ae]=F+"~"+o+"~"+GetClientRowNo(a,F)+"~disable",1==IsPickListField(s.attr("id")))(re=document.getElementById("img~"+s.attr("id"))).disabled=!0,re.className="pickimg input-group-addon handCur";if(s.attr("title")!=dateString||s.val()!=dateString&&"''"!=s.val()||s.val(""),"checkbox"==s.attr("type"))EnableDisableCheckbox(s.attr("id"),!0);else(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).attr("disabled","disabled"),s.css("display","none"),$j("#cke_"+s.attr("id")).prop("readonly",!0)),"axpImg"==s.attr("class")&&s.attr("onclick","callnull"),s.prop("disabled",!0),SetAutoCompAccess("disabled",s)}break;case"gridcellenable":F=GetDcNo(o);if(IsDcGrid(F)&&""!=a&&0!=a&&(s=$j("#"+o+GetClientRowNo(a,F)+"F"+F)).length>0){var ae,re;if(-1==(ae=$j.inArray(F+"~"+o+"~"+GetClientRowNo(a,F)+"~disable",AxFormContSetGridCell))&&-1==(ae=$j.inArray(F+"~"+o+"~"+GetClientRowNo(a,F)+"~enable",AxFormContSetGridCell))?AxFormContSetGridCell.push(F+"~"+o+"~"+GetClientRowNo(a,F)+"~enable"):AxFormContSetGridCell[ae]=F+"~"+o+"~"+GetClientRowNo(a,F)+"~enable",1==IsPickListField(s.attr("id")))(re=document.getElementById("img~"+s.attr("id"))).disabled=!1,re.className="input-group-addon handCur pickimg";if(0==s.val()&&"select-one"!=s.prop("type")&&s.val(""),s.attr("title")==dateString&&""==s.val()&&s.val(dateString),"checkbox"==s.attr("type"))EnableDisableCheckbox(s.attr("id"),!1);else(s.attr("id").startsWith("rtf_")||s.attr("id").startsWith("rtfm_")||s.attr("id").startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(s.attr("id"))))&&($j("#cke_"+s.attr("id")).prop("disabled",!1),s.css("display","none"),$j("#cke_"+s.attr("id")).removeAttr("disabled")),"axpImg"==s.attr("class")&&s.attr("onclick",null),s.prop("disabled",!1),s.prop("readOnly",!1),s.removeAttr("readOnly"),SetAutoCompAccess("enabled",s)}break;default:return}})}function ProcessScriptFormControlEvents(e,t){if(""!=e){var i=e.split("♠");switch(i[0]){case"LoadForm":case"LoadFormAndData":o=i[1];l=(l=i[2]).replace(/♦/g,"&");n=i[3],i[4];if(""==n||"d"==n.toLowerCase()||"default"==n.toLowerCase())if(transid==o){s="";""!=l?(l.split("&").forEach(function(e){s+=e+"♠"}),s+="act=load"):s="act=load♠",FormControlSameFormLoad=!0,GetFormLoadData(s)}else callParentNew("LoadIframe(tstruct.aspx?transid="+o+"&"+l+"&act=load)","function");else{tparams=l+"&AxPop=true",tparams+="&axp_refresh=true";d="tstruct.aspx?act=load&transid="+o+"&"+tparams;createPopup(d)}break;case"LoadIView":var a=i[1];l=(l=i[2]).replace(/♦/g,"&");n=i[3],i[4];if(""==n||"d"==n.toLowerCase()||"default"==n.toLowerCase())callParentNew("LoadIframe(ivtoivload.aspx?ivname="+a+"&"+l+"&act=load)","function");else{tparams=l+"&AxIsPop=true";var r="ivtoivload.aspx?ivname="+a+"&"+tparams;createPopup(r)}break;case"LoadPage":o=i[1];l=(l=i[2]).replace(/♦/g,"&");n=i[3],i[4];if(""==n||"d"==n.toLowerCase()||"default"==n.toLowerCase())if(transid==o){s="";""!=l?(l.split("&").forEach(function(e){s+=e+"♠"}),s+="act=load"):s="act=load♠",FormControlSameFormLoad=!0,GetFormLoadData(s)}else callParentNew("LoadIframe(tstruct.aspx?transid="+o+"&"+l+"&act=load)","function");else{tparams=l+"&AxPop=true",tparams+="&axp_refresh=true";d="tstruct.aspx?act=load&transid="+o+"&"+tparams;createPopup(d)}break;case"OpenPage":var l,o=i[1];l=(l=i[2]).replace(/♦/g,"&");var n=i[3];i[4];if(""==n||"d"==n.toLowerCase()||"default"==n.toLowerCase())if(transid==o){var s="";""!=l?(l.split("&").forEach(function(e){s+=e+"♠"}),s+="act=open"):s="act=open♠",FormControlSameFormLoad=!0,GetFormLoadData(s)}else callParentNew("LoadIframe(tstruct.aspx?transid="+o+"&"+l+"&act=open)","function");else{tparams=l+"&AxPop=true",tparams+="&axp_refresh=true";var d="tstruct.aspx?act=open&transid="+o+"&"+tparams;createPopup(d)}break;default:return}}}function CallAddRowFromScript(addDcNo,sfName,isExitDummy){var dcClientRows=GetDcClientRows(addDcNo),lastRow=dcClientRows.getMaxVal();0==lastRow&&(lastRow=1),isExitDummy&&(lastRow=1);var newCnt=parseInt(lastRow,10),newRowNo=GetRowNoHelper(newCnt),visDcname=GetOpenTabDcs(),dbRowNo=GetDbRowNo(newRowNo,addDcNo),rid=$j("#recordid000F0").val(),filename=traceSplitStr+"AddRowFromScript-"+transid+traceSplitChar,ixml='<sqlresultset axpapp="'+proj+'" transid="'+transid+'" recordid="'+rid+'" dcname="'+addDcNo+'" rowno="'+dbRowNo+'" dcnames="'+visDcname+'" sessionid="'+sid+'" trace="'+filename+'" >';try{ASB.WebService.AddRowPerfWS(ChangedFields,ChangedFieldDbRowNo,ChangedFieldValues,DeletedDCRows,ixml,addDcNo,tstDataId,!0,SuccessCalAddDataForce,ErrorAddRowForceWS)}catch(exp){$j($j("#"+sfName)).val(""),AxWaitCursor(!1),ShowDimmer(!1),showAlertDialog("error",ServerErrMsg)}function SuccessCalAddDataForce(result,eventArgs){var passResult=result;if(""!=result&&(result=result.split("*♠*")[2]),!CheckSessionTimeout(result)){var isValidRow=!0;""==result||"Not a valid row!"!=result&&!result.startsWith("Notavalidrow♦")||(isValidRow=!1,"Not a valid row!"==result?showAlertDialog("warning",eval(callParent("lcm[517]"))):showAlertDialog("warning",result.split("♦")[1])),isValidRow&&(axpScriptaddrowres=passResult,isExitDummy&&!isMobile?(isScriptFCAddClick=!0,$("#gridHd"+addDcNo+" tbody tr[id=sp"+addDcNo+"R001F"+addDcNo+"]").find(".glyphicon-pencil").parent().click(),isScriptFCAddClick=!1):axInlineGridEdit?addNewInlineGridRow(addDcNo):AddNewRowInDc(addDcNo),axpScriptaddrowres="",updateInlineGridRowValues()),$j($j("#"+sfName)).val(""),AxWaitCursor(!1),ShowDimmer(!1)}}function ErrorAddRowForceWS(){ArrActionLog="",ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,$j($j("#"+sfName)).val(""),AxWaitCursor(!1),ShowDimmer(!1)}}function EnableDisableSFCBtns(e,t){e.length>0&&("hide"==t?$(e).hasClass("dwbIvBtnbtm")?$(e).addClass("d-none"):$(e).hasClass("dwbBtn")?$(e).addClass("d-none"):$(e).parent(".toolbarRightMenu").length>0?$(e).addClass("d-none"):$(e).parent("li").length>0?$(e).parent("li").hide():$(e).parent("div").length>0?$(e).parent("div").hide():($(e).parent("td").hide(),$(e).parents("table").find("th#th-"+$(e).attr("id")).hide()):$(e).hasClass("dwbIvBtnbtm")?$(e).removeClass("d-none"):$(e).hasClass("dwbBtn")?$(e).removeClass("d-none"):$(e).parent(".toolbarRightMenu").length>0?$(e).removeClass("d-none"):$(e).parent("li").length>0?$(e).parent("li").show():$(e).parent("div").length>0?$(e).parent("div").show():($(e).parent("td").show(),$(e).parents("table").find("th#th-"+$(e).attr("id")).show()))}function AlertNoAction(){var e=$("#smtphost000F1").val(),t=$("#smtpport000F1").val(),i=$("#smtpuser000F1").val(),a=$("#smtppwd000F1").val();try{ASB.WebService.TestMailSettings(e,t,i,a,sucessCallbackMail,OnException)}catch(r){}}function sucessCallbackMail(e,t){var i=e;try{var a=jQuery.parseXML(e);a&&(i=-1!=e.indexOf("result")?a.getElementsByTagName("result")[0].firstChild.nodeValue:a.getElementsByTagName("error")[0].firstChild.nodeValue),-1!=i.indexOf("Test mail has been sent to")?showAlertDialog("success",i):showAlertDialog("warning",i)}catch(r){}}function barCodeScannerInit(){var e=$j(document).find("input[id^=barqr_]").attr("id");if(void 0!==e){try{onScan.detachFrom(document)}catch(t){}loadAndCall({files:{css:[],js:["/ThirdParty/onscan.js-master/onscan.min.js"]},callBack:function(){onScan.attachTo(document,{reactToPaste:!0,ignoreIfFocusOn:"none"==$j("#waitDiv").css("display")!=1,onScan:function(t){"none"==$j("#waitDiv").css("display")==1?($j("#"+e).val(t),isScriptFCAddClick=!0,axpScanBarFldFocus=e,$j($j("#"+e)).blur(),0==axpScriptIsAddrow&&$j($j("#"+e)).val("").focus(),isScriptFCAddClick=!1):showAlertDialog("warning","Please wait till the process complete!")}})}})}}function getHybridWeightScaleInfo(e){try{var t=0,i=setInterval(function(){10==++t&&(clearInterval(i),ShowDimmer(!1));var a=getRedisString("HybridWeightScaleInfo",callParentNew("hybridGUID"));if(""!=a){var r=JSON.parse(a);a=r.data.weight+r.data.unit,SetFieldValue(e,a),UpdateFieldArray(e,GetFieldsRowNo(e),a,"parent",""),MainBlur($j("#"+e)),$("#"+e).blur(),clearInterval(i),ShowDimmer(!1)}},1e3)}catch(a){}}function closeWeightScalePort(){try{ASB.WebService.NotifyCloseWeightScalePort(callParentNew("hybridGUID"),function(e){},function(e){})}catch(e){}}function DropzoneInit(dvId){var _thisDiv;_thisDiv=void 0!==dvId?$(dvId+" .dropzone:not(.dropzoneGrid)"):$("[id^='divDc']:not(:has(.editWrapTr)) .dropzone:not(.dropzoneGrid)"),_thisDiv.each(function(){if(!($(this).parents(".editWrapTr").length>0)){var id="#"+$(this).attr("id"),dropzone=document.querySelector(id),previewNode=dropzone.querySelector(".dropzone-item");previewNode.id="";var previewTemplate=previewNode.parentNode.innerHTML;previewNode.parentNode.removeChild(previewNode);var url=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx")),fuName=$(id).attr("id").substr(9);funame=fuName.substring(0,fuName.lastIndexOf("F")-3);var attachmentSizeMB=callParentNew("axAttachmentSize","axAttachmentSize")==undefined?1:callParentNew("axAttachmentSize","axAttachmentSize"),maxFilesUpload="0"!=AxpFileUploadlmt?AxpFileUploadlmt:100,UploadFileTypes="";"undefined"!=typeof UploadFileTypesVal&&(UploadFileTypes=UploadFileTypesVal);var myDropzone=new Dropzone(id,{url:url+"TstFileUpload.ashx?thisFld=".concat($(id).attr("id").substr(9),"&filePath=").concat($(".axpFilePath_"+$(id).attr("id").substring("dropzone_axpfile_".length)).val()==undefined?"":$(".axpFilePath_"+$(id).attr("id").substring("dropzone_axpfile_".length)).val(),"&dcNo=").concat(GetFieldsDcNo($(id).attr("id")),"&attFldName=").concat(funame,"&fileExt=").concat(UploadFileTypes),maxFilesize:attachmentSizeMB,previewTemplate:previewTemplate,previewsContainer:id+" .dropzone-items",clickable:id+" .dropzone-select",maxFiles:maxFilesUpload}),dzdefault=dropzone.querySelectorAll(".dz-default");$(dzdefault).addClass("d-none"),myDropzone.on("addedfile",function(file){var extension=file.name.substring(file.name.lastIndexOf(".")+1);if(""==UploadFileTypes||-1!=UploadFileTypes.indexOf(extension)){if(gridRowEditOnLoad){var thisFldId=$(id).attr("id").substr(9),fieldRowNo=GetFieldsRowNo(thisFldId),fldDcNo=GetFieldsDcNo(thisFldId);UpdateGridRowFlags(thisFldId,fldDcNo,fieldRowNo)}this.options.url=url+"TstFileUpload.ashx?thisFld=".concat($(id).attr("id").substr(9),"&filePath=").concat($(".axpFilePath_"+$(id).attr("id").substring("dropzone_axpfile_".length)).val()==undefined?"":$(".axpFilePath_"+$(id).attr("id").substring("dropzone_axpfile_".length)).val(),"&dcNo=").concat(GetFieldsDcNo($(id).attr("id")),"&attFldName=").concat(funame,"&fileExt=").concat(UploadFileTypes);var dropzoneItems=dropzone.querySelectorAll(".dropzone-item");dropzoneItems.forEach(function(e){e.style.display=""})}else showAlertDialog("error",eval(callParent("lcm[521]")))}),myDropzone.on("complete",function(e){dropzone.querySelectorAll(".dz-complete");if("success"==e.status)if("success"==e.xhr.response||e.xhr.response.startsWith("success:")){var t=e.xhr.response,i="";""!=t&&(i=t.split("♠")[1]),$(e.previewElement).parents(".dropzone").find(".fileuploadmore").removeClass("d-none");var a=$(e.previewElement).parents(".dropzone").attr("id").substr(9),r=$("#"+a).val();if(""==r){r=i;var l=$("#"+a).parent().width();$("#"+a).parent().width(l);var o=0!=$("a#"+a).length?$("a#"+a):$("#"+a).next().find("a.dropzone-select"),n=o.find("span")[0];o.text(e.name),o.prepend(n).attr("title","Drop files here or click to upload")}else{var s;if(null===(s=r.split(",").filter(function(e){return e==i}))||void 0===s?void 0:s[0])return myDropzone.removeFile(e),!1;r=r+","+i}$("#"+a).val(r);var d=$j("#hdnScriptsUrlpath").val()+"axpert/"+sid+"/";d+=i,$(e.previewElement).find(".dropzone-filename").attr("onclick","ShowAxpFileuploadLink('"+a+"','"+i+"','"+d+"')");var c=GetFieldsRowNo(a),p=GetFieldsDcNo(a),u=GetDbRowNo(c,p);UpdateFieldArray(a,u,r,"parent",""),UpdateAllFieldValues(a,r),showAlertDialog("success",t.split(":")[1])}else{var f=e.xhr.response;myDropzone.removeFile(e),showAlertDialog("error",f.split(":")[1])}else"error"==e.status&&showAlertDialog("warning",$(e.previewTemplate).find(".dropzone-error").text())}),myDropzone.on("error",function(e){myDropzone.removeFile(e)}),myDropzone.on("removedfile",function(e){var t=$(myDropzone.element).attr("id").substr(9),i=$("#"+t).val(),a=t.substr(7),r="";r="undefined"!=typeof $("textarea[id*="+a+"]").not(".axpAttach")[0]?$("textarea[id*="+a+"]").not(".axpAttach")[0].value:$("input[id*="+a+"]").not(".axpAttach")[0].value,i=i.replace(e.name+",","").replace(e.name,"");try{$("textarea#"+t).val(i),$("textarea#"+t).attr("value",i)}catch(u){}$("input#"+t).val(i),$("input#"+t).attr("value",i);var l=GetFieldsRowNo(t),o=GetFieldsDcNo(t),n=GetDbRowNo(l,o);UpdateFieldArray(t,n,i,"parent",""),UpdateAllFieldValues(t,i);var s=0!=$("a#"+t).length?$("a#"+t):$("#"+t).next().find("a.dropzone-select");if(""==i){$(myDropzone.element).find(".fileuploadmore").addClass("d-none");var d=s.find("span")[0];s.text("Drop files here or click to upload"),s.prepend(d).attr("title","")}else{var c=s.find("span")[0],p=i.split(",")[0];""!=r&&r.endsWith("\\*")&&(p=p.substr(20)),s.text(p),s.prepend(c).attr("title","Drop files here or click to upload")}});var fuInpId=$(id).attr("id").substr(9),fuInpVal=$("#"+fuInpId).val();if(""!=fuInpVal){var axpFName=fuInpId.substr(7),axpPath="";if(axpPath="undefined"!=typeof $("textarea[id*="+axpFName+"]").not(".axpAttach")[0]?$("textarea[id*="+axpFName+"]").not(".axpAttach")[0].value:$("input[id*="+axpFName+"]").not(".axpAttach")[0].value,$.each(fuInpVal.split(","),function(e,t){var i=t;if(""!=i){""!=axpPath&&axpPath.endsWith("\\*")&&(t=t.substr(20));var a={name:i,size:"0",status:Dropzone.ADDED,accepted:!0};myDropzone.emit("addedfile",a),myDropzone.emit("complete",a),myDropzone.files.push(a);var r=$j("#hdnScriptsUrlpath").val()+"axpert/"+sid+"/";r+=i,$(a.previewElement).find(".dropzone-filename span").text(t),$(a.previewElement).find(".dropzone-filename span").attr("data-fullfile",i),$(a.previewElement).find(".dropzone-filename").attr("onclick","ShowAxpFileuploadLink('"+$(myDropzone.files[0].previewElement).parents(".dropzone").attr("id").substr(9)+"','"+i+"','"+r+"')")}}),""!=fuInpVal){var _thisATag=0!=$("a#"+fuInpId).length?$("a#"+fuInpId):$("#"+fuInpId).next().find("a.dropzone-select"),_thisSpan=_thisATag.find("span")[0],_thissrFile=fuInpVal.split(",")[0];""!=axpPath&&axpPath.endsWith("\\*")&&(_thissrFile=_thissrFile.substr(20)),_thisATag.text(_thissrFile),_thisATag.prepend(_thisSpan).attr("title","Drop files here or click to upload")}$(id).find(".fileuploadmore").removeClass("d-none")}}})}function TstFldImageUpload(e){for(var t=e.files,i=new FormData,a=0;a<t.length;a++)i.append(t[a].name,t[a]);var r=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx")),l=$("#isAxpImagePathHidden").val();$.ajax({url:r+"TstImageUpload.ashx?fldname=".concat($(e).attr("id"),"&isAxpImagePath=").concat(l),type:"POST",data:i,contentType:!1,processData:!1,success:function(i){var a=$(e).attr("id");if(i.indexOf("success:")>-1){$(e).parents(".image-input").find(".imageFileUpload").addClass("d-none"),$(e).parents(".image-input").find(".profile-pic").removeClass("d-none");var r=$j("#hdnScriptsUrlpath"),o=GetFieldsName(a),n="";n=o.startsWith("nodb_")||"true"==l?r.val()+"axpert/"+sid+"/"+o+"/"+t[0].name:r.val()+"axpert/"+sid+"/"+t[0].name,$("img#"+a).css({"background-image":"unset"}),$("img#"+a).prop("src",n),$("#"+a).parent().find(".delete-button").removeClass("d-none"),UpdateFieldArray(a,"0",t[0].name,"parent",""),UpdateAllFieldValues(a,t[0].name),showAlertDialog("success",i.replace("success:",""))}else $("img#"+a).css({"background-image":"unset"}),"error:sessionexpired"==i?CheckSessionTimeout(i):i.startsWith("error:")&&showAlertDialog("error",i.replace("error:",""))},error:function(e){handlerType="upload",showAlertDialog("error",e.statusText)}})}function HeaderAttachFiles(){var e="#attachment-overlay",t=document.querySelector(e),i=t.querySelector(".dropzone-item");i.id="";var a=i.parentNode.innerHTML;i.parentNode.removeChild(i);var r=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx")),l=callParentNew("axAttachmentSize","axAttachmentSize")==undefined?1:callParentNew("axAttachmentSize","axAttachmentSize"),o=new Dropzone(e,{url:r+"HeaderFileUpload.ashx?act=attach",maxFilesize:l,previewTemplate:a,previewsContainer:e+" .dropzone-items",clickable:e+" .dropzone-select",dictDuplicateFile:"Duplicate Files Cannot Be Uploaded",preventDuplicates:!0}),n=t.querySelectorAll(".dz-default");$(n).addClass("d-none"),o.on("addedfile",function(e){t.querySelectorAll(".dropzone-item").forEach(function(e){e.style.display=""})}),o.on("complete",function(e){t.querySelectorAll(".dz-complete");if("success"==e.status)if("success"==e.xhr.response||e.xhr.response.startsWith("success:")){var i=e.xhr.response;$(e.previewElement).parents(".dropzone").find(".fileuploadmore").removeClass("d-none"),$(e.previewElement).parents(".dropzone").find("#hattachCounter").removeClass("d-none"),$(e.previewElement).parents(".dropzone").find("span.spanAttCount").text(this.files.length),filenamearray.push(e.name);var a=0;$j("#recordid000F0").length>0&&(a=$j("#recordid000F0").val());var r=CheckUrlSpecialChars(e.name);$(e.previewElement).find(".dropzone-filename").attr("onclick","OpenAttachment('"+r+"','"+a+"');"),showAlertDialog("success",i.split(":")[1])}else{var l=e.xhr.response;o.removeFile(e),showAlertDialog("error",l.split(":")[1])}else"error"==e.status&&showAlertDialog("warning",$(e.previewTemplate).find(".dropzone-error").text())}),o.on("error",function(e){o.removeFile(e)}),o.on("removedfile",function(e){RemoveArrVal(e.name,filenamearray),this.files.length>0?$(this.element).find("span.spanAttCount").text(this.files.length):($(this.element).find(".fileuploadmore").addClass("d-none"),$(this.element).find("span.spanAttCount").text(this.files.length),$(this.element).find("#hattachCounter").addClass("d-none"))}),fileonloadarray.length>0&&($.each(fileonloadarray,function(e,t){var i={name:t,size:"0",status:Dropzone.ADDED,accepted:!0};o.emit("addedfile",i),o.emit("complete",i),o.files.push(i);var a=0;$j("#recordid000F0").length>0&&(a=$j("#recordid000F0").val());var r=CheckUrlSpecialChars(i.name);$(i.previewElement).find(".dropzone-filename").attr("onclick","OpenAttachment('"+r+"','"+a+"');")}),$(e).find("span.spanAttCount").text(o.files.length),$(e).find(".fileuploadmore").removeClass("d-none"),$(e).find("#hattachCounter").removeClass("d-none"))}function rtfCkeditorAlignment(){for(var e=document.getElementsByTagName("textarea")&&document.getElementsByClassName("memofam"),t=0;t<e.length;t++){var i;if(e[t].id.startsWith("rtf_")||e[t].id.startsWith("rtfm_")||e[t].id.startsWith("fr_rtf_")||"Rich Text"==GetDWBFieldType(GetFieldsName(e[t].id))||"Large Text"==GetDWBFieldType(GetFieldsName(e[t].id))&&!e[t].id.startsWith("exp_editor_"))e[t].parentElement.classList.add("flex-root"),(i=e[t].parentElement.parentElement.classList).add.apply(i,_toConsumableArray("d-flex flex-column".split(" ")));else if(e[t].id.startsWith("exp_editor_")){var a;e[t].parentElement.classList.add("flex-root"),staticRunMode&&(a=e[t].parentElement.parentElement.classList).add.apply(a,_toConsumableArray("d-flex flex-column".split(" ")))}}}function DropzoneGridInit(e){(void 0!==e?$(e+" .dropzoneGrid"):$("[id^='divDc']:not(:has(.editWrapTr)) .dropzoneGrid")).each(function(){if(!($(this).parents(".editWrapTr").length>0)){var e="#"+$(this).attr("id"),t=document.querySelector(e),i=t.querySelector(".dropzone-item");i.id="";var a=i.parentNode.innerHTML;i.parentNode.removeChild(i);var r=location.origin+location.pathname.substr(0,location.pathname.indexOf("aspx")),l=$(e).attr("id").substr(9);funame=l.substring(0,l.lastIndexOf("F")-3);var o=callParentNew("axAttachmentSize","axAttachmentSize")==undefined?1:callParentNew("axAttachmentSize","axAttachmentSize"),n="0"!=AxpFileUploadlmt?AxpFileUploadlmt:100,s=new Dropzone(e,{url:r+"TstGridFileUpload.ashx?thisFld=".concat($(e).attr("id").substr(9),"&filePath=").concat($("#"+funame+"path"+$(e).attr("id").substring($(e).attr("id").lastIndexOf("F")-3)).val()==undefined?"":$("#"+funame+"path"+$(e).attr("id").substring($(e).attr("id").lastIndexOf("F")-3)).val(),"&dcNo=").concat(GetFieldsDcNo($(e).attr("id")),"&attFldName=").concat(funame,"&attTransId=").concat(transid),maxFilesize:o,previewTemplate:a,previewsContainer:e+" .dropzone-items",clickable:e+" .dropzone-select",maxFiles:n}),d=t.querySelectorAll(".dz-default");$(d).addClass("d-none"),s.on("addedfile",function(i){if(gridRowEditOnLoad){var a=$(e).attr("id").substr(9),l=GetFieldsRowNo(a),o=GetFieldsDcNo(a);UpdateGridRowFlags(a,o,l)}this.options.url=r+"TstGridFileUpload.ashx?thisFld=".concat($(e).attr("id").substr(9),"&filePath=").concat($("#"+funame+"path"+$(e).attr("id").substring($(e).attr("id").lastIndexOf("F")-3)).val()==undefined?"":$("#"+funame+"path"+$(e).attr("id").substring($(e).attr("id").lastIndexOf("F")-3)).val(),"&dcNo=").concat(GetFieldsDcNo($(e).attr("id")),"&attFldName=").concat(funame,"&attTransId=").concat(transid),t.querySelectorAll(".dropzone-item").forEach(function(e){e.style.display=""})}),s.on("complete",function(e){t.querySelectorAll(".dz-complete");if("success"==e.status)if("success"==e.xhr.response||e.xhr.response.startsWith("success:")){var i=e.xhr.response;$(e.previewElement).parents(".dropzone").find(".fileuploadmore").removeClass("d-none");var a=$(e.previewElement).parents(".dropzone").attr("id").substr(9),r=$("#"+a).val();if(""==r){var l=$("#"+a).parent().width();$("#"+a).parent().width(l);var o=$("a#"+a).find("span")[0];$("a#"+a).text(e.name),$("a#"+a).prepend(o).attr("title","Drop files here or click to upload")}r=""==r?e.name:r+","+e.name,$("#"+a).val(r);var n=$j("#hdnScriptsUrlpath").val()+"axpert/"+sid+"/";n+=e.name,$(e.previewElement).find(".dropzone-filename").attr("onclick","ShowGridAttLink('"+n+"')");var d=GetFieldsRowNo(a),c=GetFieldsDcNo(a),p=GetDbRowNo(d,c);UpdateFieldArray(a,p,r,"parent",""),UpdateAllFieldValues(a,r),showAlertDialog("success",i.split(":")[1])}else{var u=e.xhr.response;s.removeFile(e),showAlertDialog("error",u.split(":")[1])}else"error"==e.status&&showAlertDialog("warning",$(e.previewTemplate).find(".dropzone-error").text())}),s.on("error",function(e){s.removeFile(e)}),s.on("removedfile",function(e){var t=$(s.element).attr("id").substr(9),i=$("#"+t).val();","==(i=i.replace(e.name+",","").replace(e.name,""))[i.length-1]&&(i=i.substring(0,i.length-1)),$("#"+t).val(i);var a=GetFieldsRowNo(t),r=GetFieldsDcNo(t),l=GetDbRowNo(a,r);if(UpdateFieldArray(t,l,i,"parent",""),UpdateAllFieldValues(t,i),""==i){$(s.element).find(".fileuploadmore").addClass("d-none");var o=$("a#"+t).find("span")[0];$("a#"+t).text("Drop files here or click to upload"),$("a#"+t).prepend(o).attr("title","")}else{var n=$("a#"+t).find("span")[0];$("a#"+t).text(i.split(",")[0]),$("a#"+t).prepend(n).attr("title","Drop files here or click to upload")}});var c=$(e).attr("id").substr(9),p=$("#"+c).val();if(""!=p){if($.each(p.split(","),function(e,t){var i={name:t,size:"0",status:Dropzone.ADDED,accepted:!0};s.emit("addedfile",i),s.emit("complete",i),s.files.push(i);var a=$j("#hdnScriptsUrlpath").val()+"axpert/"+sid+"/";a+=i.name,$(i.previewElement).find(".dropzone-filename").attr("onclick","ShowGridAttLink('"+a+"')")}),""!=p){var u=$("a#"+c).find("span")[0];$("a#"+c).text(p.split(",")[0]),$("a#"+c).prepend(u).attr("title","Drop files here or click to upload")}$(e).find(".fileuploadmore").removeClass("d-none")}}})}function GetDcStateValue(e,t){try{if($("#axp_dcstate000F1").length>0){var i=IsFormDirty;if(""==e){if(AxpDcstateVal=$("#axp_dcstate000F1").val(),$("[id^=dcBlean]").length>0){var a="";""==a&&DCName.forEach(function(){a+="T"});var r=Array.from(a);$("[id^=dcBlean]").each(function(){if($(this).hasClass("gridHeaderSwitch")){var e=$(this).attr("id");e=parseInt(e.substring(7)),$("#dcBlean"+e).is(":checked")?r[e-1]="T":r[e-1]="F"}});var l=r.join(""),o=$("#axp_dcstate000F1").attr("id");SetFieldValue(o,l),UpdateFieldArray(o,"000",l,"parent"),MainBlur($("#axp_dcstate000F1"))}AxExecFormControl=!1}else{var n=$("#axp_dcstate000F1").val();(r=Array.from(n))[parseInt(e)-1]=t;var s=r.join(""),d=$("#axp_dcstate000F1").attr("id");SetFieldValue(d,s),UpdateFieldArray(d,"000",s,"parent"),MainBlur($("#axp_dcstate000F1"))}i||(IsFormDirty=!1)}}catch(c){}}function GetDcStateOnLodaData(){"0"!=$j("#recordid000F0").val()&&($("#axp_dcstate000F1").length>0&&""!=$("#axp_dcstate000F1").val()&&""!=AxpDcstateVal&&(Array.from(AxpDcstateVal).forEach(function(e,t){if(0==t)return!0;"T"==e?AxFormControlList.push("expand~"+DCName[t]):AxFormControlList.push("collapse~"+DCName[t])}),AxFormControlList.length>0&&ProcessScriptFormControlOnList("axp_dcstate")))}$(document).on("mouseover",".fileuploadmore",function(){if($(this).parents(".dropzone").find(".dropzone-items").hasClass("d-none")){var e=$(this).parents(".dropzone").attr("id"),t=bootstrap.Popover.getInstance(this);null!=t.tip&&t.tip.classList.add("mw-350px"),t._config.content='<div class="dropzone dropzone-queue mt-n3" id="'+e+'">'+$(this).parents(".dropzone").find(".dropzone-items").html()+"</div>",t.show()}else $(this).parents(".dropzone").find(".dropzone-items").addClass("d-none")}),$j(document).on("mouseover","body",function(e){$(e.target).hasClass("fileuploadmore")||$(e.target).hasClass("grdattch")||$(e.target).hasClass("gridattach")||$(e.target).hasClass("fw-boldest")||$(e.target).hasClass("popover-arrow")||$(e.target).hasClass("popover-body")||$(e.target).hasClass("dropzone-delete")||$(e.target).hasClass("dropzoneItemDelete")||$(e.target).hasClass("dropzoneGridItemDelete")||$(e.target).hasClass("dropzone-panel")||$(e.target).hasClass("dropzone-file")||$(e.target).hasClass("dropzone")||$(e.target).hasClass("dropzone-items")||$(e.target).hasClass("dropzone-item")||$(e.target).hasClass("dropzone-filename")||$(e.target).parent().hasClass("dropzone-filename")||$("[data-bs-toggle]").popover("hide")}),$j(document).on("click",".popover-body .dropzoneItemDelete",function(e){var t,i=$(e.target).parents(".dropzone").attr("id"),a=document.querySelector("#"+i),r=Dropzone.forElement(a),l=void 0===$(e.target).parents(".dropzone-item").find(".dropzone-filename span").data("fullfile")?$(e.target).parents(".dropzone-item").find(".dropzone-filename").text():$(e.target).parents(".dropzone-item").find(".dropzone-filename span").data("fullfile"),o=null===(t=r.files.filter(function(e){return e.name==l}))||void 0===t?void 0:t[0];o&&($("[data-bs-toggle]").popover("hide"),r.removeFile(o))}),$j(document).on("click",".popover-body .dropzoneItemDeleteHeader",function(e){var t,i=document.querySelector("#attachment-overlay"),a=Dropzone.forElement(i),r=$(e.target).parents(".dropzone-item").find(".dropzone-filename").text(),l=null===(t=a.files.filter(function(e){return e.name==r}))||void 0===t?void 0:t[0];if(l){var o=0;$j("#recordid000F0").length>0&&(o=$j("#recordid000F0").val()),RemoveFile(r,o,l)}}),$j(document).on("click",".popover-body .dropzoneGridItemDelete",function(e){var t,i=$(e.target).parents(".dropzone").attr("id"),a=document.querySelector("#"+i),r=Dropzone.forElement(a),l=$(e.target).parents(".dropzone-item").find(".dropzone-filename").text(),o=null===(t=r.files.filter(function(e){return e.name==l}))||void 0===t?void 0:t[0];o&&($("[data-bs-toggle]").popover("hide"),r.removeFile(o))}),$j(document).off("click",".gridHeaderSwitch").on("click",".gridHeaderSwitch",function(e){var _thisDicId=$(this).attr("id");if(_thisDicId=_thisDicId.substr(7),$(this).is(":checked"))$("#divDc"+_thisDicId+" .gridIconBtns").length>0?($("#divDc"+_thisDicId+" .griddivColumn").removeClass("d-none"),$("#divDc"+_thisDicId+" .gridIconBtns").removeClass("d-none")):$("#divDc"+_thisDicId).removeClass("d-none"),GetDcStateValue(_thisDicId,"T");else{var isRecLoad=!1,rid=$j("#recordid000F0").val();"0"!=rid&&(isRecLoad=!0);var isExitDummy=!1;if(gridDummyRowVal.length>0&&gridDummyRowVal.map(function(e){e.split("~")[0]==_thisDicId&&(isExitDummy=!0)}),!isExitDummy&&$(".wrapperForGridData"+_thisDicId+" table tbody tr").length>0){var cutMsg=eval(callParent("lcm[520]"));cutMsg=cutMsg.replace("{0}",GetDcCaption(_thisDicId));var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var clearThisDCGrid=$.confirm({theme:"modern",closeIcon:!1,rtl:isRTL,title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){clearThisDCGrid.close();var e=GetDcRowCount(_thisDicId);DeleteAllRows(_thisDicId,e),ShowDimmer(!1),$("#chkallgridrow"+_thisDicId).prop("checked",!1),$("#divDc"+_thisDicId+" .griddivColumn").addClass("d-none"),$("#divDc"+_thisDicId+" .gridIconBtns").addClass("d-none"),GetDcStateValue(_thisDicId,"F")}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){$("#divDc"+_thisDicId+" .griddivColumn").removeClass("d-none"),$("#divDc"+_thisDicId+" .gridIconBtns").removeClass("d-none"),$("#dcBlean"+_thisDicId).prop("checked",!0),disableBackDrop("destroy")}}}})}else if($("#divDc"+_thisDicId+" .gridIconBtns").length>0)$("#divDc"+_thisDicId+" .griddivColumn").addClass("d-none"),$("#divDc"+_thisDicId+" .gridIconBtns").addClass("d-none");else if(IsFormDirty||isRecLoad){var cutMsg=eval(callParent("lcm[520]"));cutMsg=cutMsg.replace("{0}",GetDcCaption(_thisDicId));var glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var clearThisDCGrid=$.confirm({theme:"modern",closeIcon:!1,rtl:isRTL,title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",escapeKey:"buttonB",content:cutMsg,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){clearThisDCGrid.close(),GetGridFields(_thisDicId).forEach(function(e){if(e!="axp_recid"+_thisDicId){var t=e+"000F"+_thisDicId;SetFieldValue(t,""),UpdateFieldArray(t,0,"","parent","")}}),ShowDimmer(!1),$("#divDc"+_thisDicId).addClass("d-none"),GetDcStateValue(_thisDicId,"F")}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){$("#divDc"+_thisDicId).removeClass("d-none"),$("#dcBlean"+_thisDicId).prop("checked",!0),disableBackDrop("destroy")}}}})}else $("#divDc"+_thisDicId).addClass("d-none")}});