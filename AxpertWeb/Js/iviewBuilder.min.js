/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$(function(){try{new IviewBuilder(structureJSON,isMobileDevice())}catch(e){console.error(e),showAlertDialog?showAlertDialog("error",e.message):alert(e.message)}});var IviewBuilder=function(){function e(t,n){return _classCallCheck(this,e),_defineProperty(this,"AxClColors",AxClColors),_defineProperty(this,"showAlertDialog",showAlertDialog),_defineProperty(this,"callParentNew",callParentNew),_defineProperty(this,"displayBootstrapModalDialog",displayBootstrapModalDialog),_defineProperty(this,"closeModalDialog",closeModalDialog),_defineProperty(this,"createTheEditor",createTheEditor),_defineProperty(this,"lcm",this.callParentNew("lcm")),e.exists?e.instance:(e.instance=this,e.exists=!0,this.structureJSON=_objectSpread({},t),this.shadowStructure=_objectSpread({},t),this.isMobile=n,this.columns={},this.columns.isChkBox="false",this.stage=new Stages,this._processIView(),this)}return _createClass(e,[{key:"actions",get:function(){return _.pickBy(_.filter(this.shadowStructure.root,function(e){return"actions"==e["@cat"]})[0],function(e,t){return"@cat"!==t})}},{key:"hyperlinks",get:function(){return _.pickBy(_.filter(this.shadowStructure.root,function(e){return"hyperlinks"==e["@cat"]})[0],function(e,t){return"@cat"!==t})}},{key:"_getColumn",value:function(){return this.columns}},{key:"_getStages",value:function(){return this.stage}},{key:"_processIView",value:function(){this._preInit(),this._processColumnObj(),this._processCoreObj(),this._plotDataTable()}},{key:"_preInit",value:function(){switch(this.isMobile&&$(this.stage.body).addClass("isMobile"),this.stage.propertySheet.type){case"div":$(this.stage.body).addClass("isNavPropDiv");break;case"popup":$(this.stage.body).addClass("isPropPopUp")}}},{key:"_processColumnObj",value:function(){var e=this,t=0;e.shadowStructure.root=_.map(e.shadowStructure.root,function(e){return"querycol"==e["@cat"]||"column"==e["@cat"]?(e["@seq"]=++t,e):e}),this.columns.raw=_.filter(e.shadowStructure.root,function(e){return"querycol"==e["@cat"]||"column"==e["@cat"]}),this.columns.FieldName=["rowno"].concat(_toConsumableArray(this.columns.raw.map(function(e){return e&&e.a2}))),this.columns.HeaderText=["rowno"].concat(_toConsumableArray(this.columns.raw.map(function(e){return e&&e.a3}))),this.columns.ColumnType=["c"].concat(_toConsumableArray(this.columns.raw.map(function(e){return e&&e.a4&&e.a4.length>0&&e.a4.toLowerCase()[0]}))),this.columns.HideColumn=["false"].concat(_toConsumableArray(this.columns.raw.map(function(e){return e&&e.a21&&e.a21.toLowerCase()}))),this.columns.ColumnWidth=[""].concat(_toConsumableArray(this.columns.raw.map(function(e){return e&&e.a17}))),this.columns.rowTypeExist=this.columns.FieldName.filter(function(e){return"axrowtype"==e}).length>0,this.columns.filteredColumns=this.columns.FieldName.filter(function(t,n,o){return"false"==e.columns.HideColumn[n]&&"rowno"!=e.columns.FieldName[n]&&"axrowtype"!=e.columns.FieldName[n]}),this.columns.hiddenColumnIndex=this.columns.FieldName.map(function(t,n,o){return"rowno"==e.columns.FieldName[n]||"axrowtype"==e.columns.FieldName[n]?"":"true"==e.columns.HideColumn[n]?n-(e.columns.rowTypeExist?1:0):""}).filter(function(e){return""!==e}),"true"==this.columns.isChkBox?this.columns.filteredColumns=[""].concat(_toConsumableArray(this.columns.filteredColumns)):this.columns.hiddenColumnIndex=[0].concat(_toConsumableArray(this.columns.hiddenColumnIndex))}},{key:"_processCoreObj",value:function(){}},{key:"_plotDataTable",value:function(){this._drawTable(),this._initDatatable(),this.ShowDimmer(!1),this.ShowLoader(!1)}},{key:"_drawTable",value:function(){var e=this,t=0;t+=null==findGetParameter("tstcaption")?15:40;var n='<button title="Actions Menu" class="hide noBg pull-right rightClickMenuIcn" type="button"><span class="fa fa-ellipsis-v " aria-hidden="true"></span></button>';$(this.stage.table.stage).html($('\n        <table class="gridData ivirMainGrid iviewBuilder stripe row-border hover order-column table" rules="all" border="1" id="'.concat(this.stage.table.tableId,'" style="" data-row>\n            <thead>\n                <tr>\n                    <th id="GridView1_ctl01_rowno" scope="col"><input name="chkall" id="chkall" onclick="javascript:CheckAll();" style="width:').concat(null==findGetParameter("tstcaption")?15:40,'px; height:12px;" type="checkbox">').concat(n,"</th>\n                    ").concat(e.columns.HeaderText.map(function(o,a,r){if("rowno"!=e.columns.FieldName[a]){var c=e.columns.ColumnWidth[a]||15;return"false"==(e.columns.HideColumn[a].toString()||"true")&&(t+=parseInt(c,10)),'<th id="GridView1_ctl01_'.concat(e.columns.FieldName[a],'" scope="col" style="width:').concat(c,'px;">').concat(o.replace(/~/g,"<br />")).concat(n,"</th>")}}).join(""),"\n                </tr>\n            </thead>\n            <tfoot>\n                <tr>\n                    <td></td>\n                    ").concat(e.columns.HeaderText.map(function(t,n,o){if("rowno"!=e.columns.FieldName[n])return"<td></td>"}).join(""),"\n                </tr>\n            </tfoot>\n        </table>\n        ")).css({width:"".concat(t,"px")}).removeAttr("cellspacing rules border style").addClass("ivirMainGrid stripe row-border hover order-column table"))}},{key:"_generateData",value:function(){var e=this,t=this;return[t.columns.FieldName.map(function(n,o){switch(t.stage.propertySheet.type){case"div":return'\n                    <a class="btn btn-default dropdown-toggle fa fa-ellipsis-h col-xs-12 col-sm-12 col-md-12 col-lg-12" data-toggle="dropdown" href="#" title=" Open '.concat(t.columns.HeaderText[o],' Properties" data-toggle="tooltip"data-field="').concat(n,'" onclick="').concat(e.stage.propertySheet.call[e.stage.propertySheet.type].create,'">\n                    </a>\n                    ');case"popup":return'\n                    <div class="dropdown">\n                        <span class="btn btn-default dropdown-toggle fa fa-ellipsis-v" data-toggle="dropdown">\n                        </span>\n                        <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">\n                            '.concat("rowno"!=n?t.stage.propertySheet.sheets.filter(function(e){return"column"==e.propertyIs}).map(function(e,t){return'\n                                        <li role="presentation">\n                                            <a role="menuitem" class="'.concat(e.icon,'" tabindex="-1" href="#" title="').concat(e.title,'" data-toggle="tooltip" data-type="').concat(e.type,'" data-field="').concat(n,'" data-property-is="').concat(e.propertyIs,'" onclick="').concat(e["function"],'">\n                                                ').concat(e.title,'\n                                            </a>\n                                        </li>\n                                        \x3c!--<a href="#" class="btn btn-default ').concat(e.icon,'" aria-label="Left Align" title="').concat(e.title,'" data-toggle="tooltip" data-type="').concat(e.type,'" data-field="').concat(n,'" data-property-is="').concat(e.propertyIs,'" onclick="').concat(e["function"],'">\n                                        </a>\n                                        <br />\n                                        <span>').concat(e.title,"</span>--\x3e\n                                    ")}).join(""):"","\n                        </ul>\n                    </div>\n                    ")}})]}},{key:"_initDatatable",value:function(){$.fn.dataTableExt.ofnSearch["alt-status"]=function(e){},$.fn.dataTable.moment("DD/MM/YYYY"),$.fn.dataTable.ext.errMode="none",$.fn.dataTable.Api.register("order.neutral()",function(){return this.iterator("table",function(e){e.aaSorting.length=0,e.aiDisplay.sort(function(e,t){return e-t}),e.aiDisplayMaster.sort(function(e,t){return e-t})})});var e=new DataTableObj;this.dataTableApi=$("#"+this.stage.table.tableId).DataTable(e)}},{key:"ShowDimmer",value:function(e){var t=!0,n=$(this.stage.dimmer);if(n.length>0&&n!=undefined)if(1==e){var o=$(this.stage.mainIframe,parent.document);o&&n.width(o.width()),n.show(),document.onkeydown=function(){return!1}}else n.hide(),document.onkeydown=function(){if(1==t)return!0};else window.opener!=undefined&&(n=$(this.stage.dimmer,window.opener.document)).length>0&&(1==e?n.show():n.hide());t=!1}},{key:"ShowLoader",value:function(e){e?$(this.stage.table.loader).show():$(this.stage.table.loader).hide()}}]),e}(),Stages=_createClass(function e(){_classCallCheck(this,e);var t=this;this.body="body",this.table={stageWrapper:".iviewTableWrapper",stage:"#GridView2Wrapper",tableId:"GridView1",loader:".animationLoading"},this.AxClColors=(new IviewBuilder).AxClColors,this.dimmer="#waitDiv",this.mainIframe="#middle1",this.colorPicker={icon:"fa fa-ellipsis-h",title:"Color Picker",containerClass:"colorPickerInput",call:{}},this.fontPicker={icon:"fa fa-ellipsis-h",title:"Font",modalTitle:"Font Picker",stage:"body",containerId:"fontPickerContainer",fontPickerSampleId:"fontPickerSampleText",call:{generate:"new PropertySheet().generateFontPicker($(this));",generatePreview:"new PropertySheet()._generateFontPickerPreview($(this));",save:"new PropertySheet().saveFontPicker($(this));"},objects:{fontFamily:"fontFamily",fontSize:"fontSize",fontEffects:"fontEffects",fontColor:"fontColor",fontScript:"fontScript"},fontFamily:[{value:"Arial",caption:"Arial",cssProp:"font-family",cssValue:"Arial,Helvetica,sans-serif"},{value:"Arial Black",caption:"Arial Black",cssProp:"font-family",cssValue:"Arial Black,Gadget,sans-serif"},{value:"Comic Sans MS",caption:"Comic Sans MS",cssProp:"font-family",cssValue:"Comic Sans MS,cursive"},{value:"Courier New",caption:"Courier New",cssProp:"font-family",cssValue:"Courier New,Courier,monospace"},{value:"Georgia",caption:"Georgia",cssProp:"font-family",cssValue:"Georgia,serif"},{value:"Impact",caption:"Impact",cssProp:"font-family",cssValue:"Impact,Charcoal,sans-serif"},{value:"Lucida Console",caption:"Lucida Console",cssProp:"font-family",cssValue:"Lucida Console,Monaco,monospace"},{value:"Lucida Sans Unicode",caption:"Lucida Sans Unicode",cssProp:"font-family",cssValue:"Lucida Sans Unicode,Lucida Grande,sans-serif"},{value:"Palatino Linotype",caption:"Palatino Linotype",cssProp:"font-family",cssValue:"Palatino Linotype,Book Antiqua,Palatino,serif"},{value:"Tahoma",caption:"Tahoma",cssProp:"font-family",cssValue:"Tahoma,Geneva,sans-serif"},{value:"Times New Roman",caption:"Times New Roman",cssProp:"font-family",cssValue:"Times New Roman,Times,serif"},{value:"Trebuchet MS",caption:"Trebuchet MS",cssProp:"font-family",cssValue:"Trebuchet MS,Helvetica,sans-serif"},{value:"Verdana",caption:"Verdana",cssProp:"font-family",cssValue:"Verdana,Geneva,sans-serif"},{value:"Gill Sans",caption:"Gill Sans",cssProp:"font-family",cssValue:"Gill Sans,Geneva,sans-serif"}],fontSize:[{value:"8",caption:"8pt",cssProp:"font-size",cssValue:"10.67px"},{value:"9",caption:"9pt",cssProp:"font-size",cssValue:"12px"},{value:"10",caption:"10pt",cssProp:"font-size",cssValue:"13.34px"},{value:"11",caption:"11pt",cssProp:"font-size",cssValue:"14.66px"},{value:"12",caption:"12pt",cssProp:"font-size",cssValue:"16px"},{value:"14",caption:"14pt",cssProp:"font-size",cssValue:"18.66px"},{value:"16",caption:"16pt",cssProp:"font-size",cssValue:"21.32px"},{value:"18",caption:"18pt",cssProp:"font-size",cssValue:"24px"},{value:"20",caption:"20pt",cssProp:"font-size",cssValue:"26.68px"},{value:"22",caption:"22pt",cssProp:"font-size",cssValue:"29.32px"},{value:"24",caption:"24pt",cssProp:"font-size",cssValue:"32px"},{value:"26",caption:"26pt",cssProp:"font-size",cssValue:"34.64px"},{value:"28",caption:"28pt",cssProp:"font-size",cssValue:"37.36px"},{value:"36",caption:"36pt",cssProp:"font-size",cssValue:"48px"},{value:"48",caption:"48pt",cssProp:"font-size",cssValue:"64px"},{value:"72",caption:"72pt",cssProp:"font-size",cssValue:"96px"}],fontEffects:[{caption:"Bold",cssProp:"font-weight",cssValue:"bold",selectedValue:{checked:"True",unchecked:"False"}},{caption:"Italic",cssProp:"font-style",cssValue:"italic",selectedValue:{checked:"True",unchecked:"False"}},{caption:"Underline",cssProp:"text-decoration",cssValue:"underline",selectedValue:{checked:"True",unchecked:"False"}},{caption:"Strikeout",cssProp:"text-decoration",cssValue:"line-through",selectedValue:{checked:"True",unchecked:"False"}}],fontColor:[{value:"clBlack",caption:"Black",cssProp:"color",cssValue:this.AxClColors.clBlack},{value:"clMaroon",caption:"Maroon",cssProp:"color",cssValue:this.AxClColors.clMaroon},{value:"clGreen",caption:"Green",cssProp:"color",cssValue:this.AxClColors.clGreen},{value:"clOlive",caption:"Olive",cssProp:"color",cssValue:this.AxClColors.clOlive},{value:"clNavy",caption:"Navy",cssProp:"color",cssValue:this.AxClColors.clNavy},{value:"clPurple",caption:"Purple",cssProp:"color",cssValue:this.AxClColors.clPurple},{value:"clTeal",caption:"Teal",cssProp:"color",cssValue:this.AxClColors.clTeal},{value:"clGray",caption:"Gray",cssProp:"color",cssValue:this.AxClColors.clGray},{value:"clSilver",caption:"Silver",cssProp:"color",cssValue:this.AxClColors.clSilver},{value:"clRed",caption:"Red",cssProp:"color",cssValue:this.AxClColors.clRed},{value:"clLime",caption:"Lime",cssProp:"color",cssValue:this.AxClColors.clLime},{value:"clYellow",caption:"Yellow",cssProp:"color",cssValue:this.AxClColors.clYellow},{value:"clBlue",caption:"Blue",cssProp:"color",cssValue:this.AxClColors.clBlue},{value:"clFuchsia",caption:"Fuchsia",cssProp:"color",cssValue:this.AxClColors.clFuchsia},{value:"clAqua",caption:"Aqua",cssProp:"color",cssValue:this.AxClColors.clAqua},{value:"clWhite",caption:"White",cssProp:"color",cssValue:this.AxClColors.clWhite},{value:"clWindowText",caption:"Custom",cssProp:"color",cssValue:this.AxClColors.clWindowText}],fontScript:[]},this.expressionBuilder={icon:"fa fa-ellipsis-h",title:"Expression",modalTitle:"Expression Builder",stage:"body",containerId:"expressionBuilderContainer",call:{generate:"new PropertySheet().generateExpressionBuilder($(this));",save:"new PropertySheet().saveExpressionBuilder($(this));"}},this.propertySheet={parent:"#form1",containerId:"Wrapperpropsheet",propTableContentId:"propTableContent",type:"div",call:{div:{create:"new PropertySheet()._generatePropSheetAsNavDiv($(this));"},popup:{save:"new PropertySheet().save($(this));",close:"new PropertySheet().close($(this));"}},sheets:[{name:"addedPsProperties",type:"properties",title:"Properties",icon:"fa fa-edit",propertyIs:"column","function":"new PropertySheet().show($(this));",sheetMap:[{name:"colPropName",caption:"Name",disabled:!0,mandatory:!0,type:"text",map:"a2",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropCaption",caption:"Caption",disabled:!1,mandatory:!0,type:"text",map:"a3",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropDecimals",caption:"Decimals",disabled:!1,mandatory:!1,type:"number",map:"a5",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropDataType",caption:"Data Type",disabled:!1,mandatory:!0,type:"dropdown",dropdownOptions:[{value:"Character",caption:"Character"},{value:"Numeric",caption:"Numeric"},{value:"Date/Time",caption:"Date/Time"}],map:"a4",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropExpression",caption:"Expression",disabled:!1,mandatory:!1,type:"expression",map:"a6",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropWidth",caption:"Column Width",disabled:!0,mandatory:!0,type:"number",map:"a17",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropAlignment",caption:"Alignment",disabled:!1,type:"dropdown",mandatory:!0,dropdownOptions:[{value:"Left",caption:"Left"},{value:"Right",caption:"Right"},{value:"Center",caption:"Center"}],map:"a14",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropRunningTotal",caption:"Running Total",disabled:!1,mandatory:!1,type:"checkbox",map:"a7",defaultValue:!1,value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropDisplayTotal",caption:"Display Total",disabled:!1,mandatory:!1,type:"checkbox",map:"a8",defaultValue:!0,value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropApplyComma",caption:"Apply Comma",disabled:!1,mandatory:!1,type:"checkbox",map:"a10",defaultValue:!0,value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropNoRepeat",caption:"No Repeat",disabled:!1,mandatory:!1,type:"checkbox",map:"a13",defaultValue:!1,value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropZeroOff",caption:"Zero Off",disabled:!1,mandatory:!1,type:"checkbox",map:"a16",defaultValue:!1,value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropHidden",caption:"Hidden",disabled:!1,mandatory:!1,type:"checkbox",map:"a21",defaultValue:!1,value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropFont",caption:"Font",disabled:!1,mandatory:!1,fontPickerType:"properties",type:"fontpicker",map:"a9",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colPropBackColor",caption:"Background Color",disabled:!1,mandatory:!1,colorPickerType:"properties",type:"colorpicker",map:"a12",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)},events:[{eventAttribute:"onfocus",eventFunction:function(e,t,n){return"blur();"}}]},{name:"colPropHyperlinkAction",caption:"Hyperlink Action",disabled:!1,type:"dropdown",mandatory:!1,dropdownOptions:function(e,t,n){var o=(new IviewBuilder).actions,a=[];return o&&!_.isEmpty(o)&&(a=_.map((new IviewBuilder).actions,function(e,t){return{value:t,caption:e["@cap"]||""}})),a},map:"a55",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}}],sheetInit:function(e){$(".".concat(t.colorPicker.containerClass)).spectrum({showInput:!0,className:"full-spectrum",showInitial:!0,showPalette:!0,showSelectionPalette:!0,maxSelectionSize:10,preferredFormat:"hex",localStorageKey:"spectrum.agile",chooseText:"Apply",cancelText:"Close",clickoutFiresChange:!1,type:"div"==t.propertySheet.type?"text":"color",showAlpha:!1,togglePaletteOnly:!0,hideAfterPaletteSelect:!0,allowEmpty:!0,move:function(e){e||$(this).spectrum("set",(new PropertySheet)._parseHexAndDelphiColors("",!0))},show:function(e){},beforeShow:function(e){},hide:function(e){},change:function(e){e&&(new IviewBuilder).showAlertDialog("info",(new PropertySheet)._parseHexAndDelphiColors(e.toHexString(),!1))},palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]})}},{name:"addedPsHyperlink",type:"hyperlink",title:"Hyperlink",icon:"fa fa-external-link",propertyIs:"column",map:"@source","function":"new PropertySheet().show($(this));",sheetMap:[{name:"colHyperlinkName",caption:"Name",disabled:!1,mandatory:!0,type:"text",map:function(e){return e||""},value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colHyperlinkType",caption:"Hyperlink Type",disabled:!1,mandatory:!1,type:"dropdown",dependent:{structure:"#colHyperlinkStructure"},tempValue:"",dropdownOptions:[{value:"i",caption:"Report"},{value:"t",caption:"Form"}],map:function(e){return e?(this.tempValue=(new IviewBuilder).hyperlinks[e]["@sname"][0],this.tempValue):""},events:[{eventAttribute:"onchange",eventFunction:function(e,t,n){return"new PropertySheet()._getHyperlinkInfo($(this).val(), '', '".concat(e.dependent.structure,"')")}}],value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colHyperlinkStructure",caption:"Structure Name",disabled:!1,mandatory:!1,type:"dropdown",dependent:{tablerows:"#colHyperlinkParamFieldMap tbody tr"},parentDependent:{type:"#colHyperlinkType"},dropdownOptions:function(e,t,n){var o="";if(!e.parentDependent.type||!(o=n.sheetMap.filter(function(t){return t.name==e.parentDependent.type.substr(1)})[0].tempValue))return[];try{return(new PropertySheet)._ajaxGetHyperlinkData(o)}catch(a){return[]}},map:function(e){return e?(new IviewBuilder).hyperlinks[e]["@sname"].substr(1):""},events:[{eventAttribute:"onchange",eventFunction:function(e,t,n){return"new PropertySheet()._clearParamFieldMap('".concat(e.dependent.tablerows,"')")}}],value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colHyperlinkLoadOpen",caption:"Load/Open Structure",disabled:!1,type:"dropdown",mandatory:!0,dropdownOptions:[{value:"True",caption:"Load",selected:!0},{value:"False",caption:"Open"}],map:"@load",value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colHyperlinkPopup",caption:"Popup Structure",disabled:!1,mandatory:!1,type:"checkbox",map:function(e){return e&&JSON.parse((new IviewBuilder).hyperlinks[e]["@pop"].toLowerCase())||this.defaultValue},defaultValue:!1,value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colHyperlinkRefreshParent",caption:"Refresh parent on close",disabled:!1,mandatory:!1,type:"checkbox",map:function(e){return e&&JSON.parse((new IviewBuilder).hyperlinks[e]["@refresh"].toLowerCase())||this.defaultValue},defaultValue:!1,value:function(e,t,n){return(new PropertySheet)._getPropertyInputValues(e,t,n)}},{name:"colHyperlinkParamFieldMap",caption:"Param/Field Map",type:"table",parentDependent:{type:"#colHyperlinkType",structure:"#colHyperlinkStructure"},parentDependentError:"Structure type and Structure is mandatory.",hasCheckbox:!0,buttons:[{name:"colHyperlinkMapAdd",caption:"Add",icon:"fa fa-plus","function":"new PropertySheet()._addTableFields($(this));",style:"color: grey;"},{name:"colHyperlinkMapDelete",caption:"Delete",icon:"fa fa-minus","function":"new PropertySheet()._deleteSelectedTableFields($(this));",style:"color: grey;"},{name:"colHyperlinkMapClear",caption:"Delete Hyperlink",icon:"fa fa-close","function":"new PropertySheet()._clearTableFields($(this));",style:"color: red;"}],columns:[{name:"colHypParFldName",caption:"Name",type:"dropdown",mandatory:!1,parentDependent:{type:"#colHyperlinkType",structure:"#colHyperlinkStructure"},"class":"colHypParFldName",dropdownOptions:function(e,t,n){return $(e.parentDependent.type).val()&&$(e.parentDependent.structure).val()?(new PropertySheet)._ajaxGetHyperlinkData($(e.parentDependent.type).val(),$(e.parentDependent.structure).val()):[]}},{name:"colHypParFldValue",caption:"Value",type:"dropdown",mandatory:!1,"class":"colHypParFldName",dropdownOptions:function(e,t,n){return(new IviewBuilder).columns.FieldName.filter(function(e){return"rowno"!=e}).map(function(e){return{value:":".concat(e),caption:":".concat(e)}})}}],map:function(e){if(e)return _.filter((new IviewBuilder).hyperlinks[e],function(e,t){return"0"!=t.indexOf("@")})},value:function(e,t,n){var o=(new PropertySheet)._getPropertyInputValues(e,t,n);return o||[]},valueHTML:function(e,t,n){return(new PropertySheet)._addTableFields($("<div></div>").data({table:e.name,propSheet:n.type}),!0)}}],sheetInit:function(){}},{name:"addedPsCondFormat",type:"condFormat",title:"Conditional Format",icon:"fa fa-paint-brush",propertyIs:"column","function":"new PropertySheet().show($(this));",sheetMap:[{name:"colCondFormat",caption:"Conditional Format",type:"table",hasCheckbox:!0,buttons:[{name:"colCondFormatAdd",caption:"Add",icon:"fa fa-plus","function":"new PropertySheet()._addTableFields($(this));",style:"color: grey;"},{name:"colCondFormatDelete",caption:"Delete",icon:"fa fa-minus","function":"new PropertySheet()._deleteSelectedTableFields($(this));",style:"color: grey;"}],columns:[{name:"colCondFormatExpression",caption:"Expression",type:"expression",mandatory:!1,"class":"colCondFormatExpression"},{name:"colCondFormatFont",caption:"Font Settings",type:"fontpicker",mandatory:!1,"class":"colCondFormatFont"}]}],sheetInit:function(){}}],allSheetInit:function(){$("#propertySearchFld").on("keyup",function(e){var t=$(this),n=t.val().toLowerCase();$("#propTableContent table tbody .noDatFoundTr").remove(),$("#propTableContent table tr:not('.notSearchable')").each(function(e,t){var o=$(this),a=o.find("td:first");""!=n&&a.hasClass("subHeading")?o.hide():-1===a.text().toLowerCase().indexOf(n)?o.hide():o.show()}),""!=t.val()&&0==$("#propTableContent table tr:visible").length&&$("#propTableContent table tbody").append('<tr class="noDatFoundTr"><td colspan="2" class="center">No data found</td></tr>')}),$("#propTableContent .propShtDataToggleIcon").on("click",function(e){var t=$(this),n=t.data("target");$("#propTableContent table tr[data-group='"+n+"']:not('.notSearchable')").toggle(),t.hasClass("icon-arrows-up")?t.removeClass("icon-arrows-up").addClass("icon-arrows-down"):t.hasClass("icon-arrows-down")&&t.removeClass("icon-arrows-down").addClass("icon-arrows-up")})}}}),DataTableObj=function(){function e(){_classCallCheck(this,e);var t=(new IviewBuilder)._getColumn();(new IviewBuilder)._getStages();this.data=(new IviewBuilder)._generateData(),this.dom="R<'#ivirCustomContainer.container-fluid'<'row'<'#pillsWrapper.col-md-6 col-sm-6'><'col-md-6 col-sm-6 pull-right'l>>><'#ivirMainDataTableWrapper'<'iviewPreTableCustom'>t<'iviewPostTableCustom'>>",this.ordering=!1,this.lengthChange=!1,this.initComplete=function(e,t){},"true"==t.isChkBox?this.columnDefs=[{targets:0,orderable:!1}]:this.columnDefs=[],this.columnDefs.push({targets:t.hiddenColumnIndex,visible:!1,searchable:!1}),this.columnDefs.push({targets:0,searchable:!1})}return _createClass(e,[{key:"_getPropertyAccess",value:function(e){return e.startsWith("@")?e:"@"+e.toUpperCase()}}]),e}(),PropertySheet=function(){function e(){return _classCallCheck(this,e),e.exists?e.instance:(e.instance=this,e.exists=!0,this.propSheet="",this.propColumn="",this.columns=(new IviewBuilder)._getColumn(),this.stage=(new IviewBuilder)._getStages(),this.fontPickerObj={},this._initPropSheetContainer(),this)}return _createClass(e,[{key:"_initPropSheetContainer",value:function(){switch(this.stage.propertySheet.type){case"div":this._initPropSheetAsNavDiv();break;case"popup":this._initPropSheetAsPopUp()}}},{key:"_initPropSheetAsNavDiv",value:function(){}},{key:"_generatePropSheetAsNavDiv",value:function(e){var t=this,n=e.data("field");this.propColumn==n||(this.propColumn=n);var o,a="";if(this.propColumn){try{a=this.columns.HeaderText.filter(function(e,n){if(t.columns.FieldName[n]==t.propColumn)return!0})[0]}catch(r){}a||(a=this.propColumn)}$("#".concat(this.stage.propertySheet.containerId)).remove(),$(this.stage.propertySheet.parent).append('\n        <div id="'.concat(this.stage.propertySheet.containerId,'" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n            <div id="').concat(this.stage.propertySheet.propTableContentId,'Navigation" style="padding: 10px; background: #fdfdfd; border-radius: 3px; margin: 5px 0px; border: 1px solid #f0f0f0;">\n            <strong>{{').concat(a,"}}</strong> - ").concat(this.stage.propertySheet.sheets.map(function(e){return'<a href="#'.concat(e.name,'" class="btn btn-default"><span class="').concat(e.icon,'"></span> ').concat(e.title,"</a>")}).join(" "),'\n            </div>\n            <div id="').concat(this.stage.propertySheet.propTableContentId,'">\n            </div>\n        </div>\n        ')),$("#".concat(this.stage.propertySheet.propTableContentId)).html("\n        ".concat(this.stage.propertySheet.sheets.map(function(e){return'\n            <div id="'.concat(e.name,'">\n                <div class="panel panel-default">\n                    <div class="panel-heading">\n                        <h3 class="panel-title"><span class="').concat(e.icon,'"></span> ').concat(a," - ").concat(e.title,'</h3>\n                    </div>\n                    <div class="panel-body">\n                        <p>\n                            ').concat((o=t.stage.propertySheet.sheets.filter(function(t){return t.type==e.type&&"column"==t.propertyIs}))&&o.length>0&&setTimeout(function(){e.sheetInit(e)},0)&&'\n                                    <div id="'.concat(o[0].name,'" class=\'bordered row\' data-parent="addedPsWrapper" data-title="Add Property Sheet" data-prop-column="').concat(t.propColumn,'" data-prop-sheet="').concat(t.propSheet,'" style="min-width: 350px;">\n                                        ').concat(o[0].sheetMap.map(function(e){return"\n                                            <div class=\"col-xs-12 col-sm-6 col-md-4 col-lg-4\" data-group='general'>\n                                            ".concat("table"!=e.type?'\n                                            <div class="form-group '.concat("checkbox"==e.type||"expression"==e.type||"fontpicker"==e.type||"colorpicker"==e.type?"rowx":"",'">\n                                                <div ').concat("checkbox"==e.type||"expression"==e.type||"fontpicker"==e.type||"colorpicker"==e.type?'class="col-form-label fw-boldest"':"",">").concat(e.caption).concat(e.mandatory?"<sup>*</sup>":"","</div>\n                                                <div>\n                                                    ").concat(t._generatePropertyInput(e,t.propColumn,o[0]),"\n                                                </div>\n                                            </div>\n                                            "):'\n                                            <div class="form-group">\n                                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                                                    '.concat(t._generatePropertyInput(e,t.propColumn,o[0]),"\n                                                </div>\n                                            </div>\n                                            "),"\n                                            </div>\n                                            ")}).join(""),"\n                                    </div>\n                                    "),"\n                        </p>\n                    </div>\n                </div>\n            </div>\n            ")}).join(" "),"\n        ")).css(this._getPropSheetAsNavDivCss())}},{key:"_getPropSheetAsNavDivCss",value:function(){var e=0;try{$("".concat(this.stage.table.stageWrapper)).length&&(e=$("".concat(this.stage.table.stageWrapper)).outerHeight(!0))}catch(n){}var t=0;try{$("#".concat(this.stage.propertySheet.propTableContentId,"Navigation")).length&&(t=$("#".concat(this.stage.propertySheet.propTableContentId,"Navigation")).outerHeight(!0))}catch(n){}return{height:"calc(100vh - ".concat(e+t,"px)"),overflow:"auto"}}},{key:"_initPropSheetAsPopUp",value:function(){$(this.stage.propertySheet.parent).append('\n        <div id="'.concat(this.stage.propertySheet.containerId,"\" style=\"display: block;\">\n            <div class='col s3 card hoverable scale-transition scale-out' id='propertySheet'>\n                <div class='hpbHeaderTitle'>\n                    <span class='icon-paint-roller'></span>\n                    <span class='title'>Property Sheet</span>\n                    <button title='Close' type='button' id='propertySrchCls' onclick='").concat(this.stage.propertySheet.call[this.stage.propertySheet.type].close,"' class='btn-flat waves-effect btn-floating pull-right'><i class='icon-arrows-remove'></i></button>\n                    <button title='Save' type='button' onclick='").concat(this.stage.propertySheet.call[this.stage.propertySheet.type].save,"' id='updateWidget' class='btn-flat waves-effect btn-floating pull-right '><span class='icon-arrows-check'></span></button>\n                    <div class='clear'></div>\n                </div>\n                <div id='propertySheetDataWrapper'>\n                    <div class='clear'></div>\n                    <div id='propertySearch'>\n                        <input placeholder='Search...' type='text' id='propertySearchFld' class='normalFld searchFld'>\n                        <span class='srchIcn icon-magnifier'></span>\n                    </div>\n                    <div class='posr' id='").concat(this.stage.propertySheet.propTableContentId,"'>\n                        \x3c!--My Name is Prashik--\x3e\n                    </div>\n                </div>\n            </div>\n        </div>\n        "))}},{key:"_generatePropertySheet",value:function(){var e=this,t="";try{t=this.stage.propertySheet.sheets.filter(function(t){return t.type==e.propSheet})[0].title}catch(a){}t||(t=this.propSheet);var n="";if(this.propColumn){try{n=this.columns.HeaderText.filter(function(t,n){if(e.columns.FieldName[n]==e.propColumn)return!0})[0]}catch(a){}n||(n=this.propColumn)}$("#Wrapperpropsheet #propertySheet .hpbHeaderTitle span.title").text("".concat(t).concat(this.propColumn?" - ".concat(n):""));var o=this.stage.propertySheet.sheets.filter(function(t){return t.type==e.propSheet&&"column"==t.propertyIs});o&&o.length>0&&($("#".concat(this.stage.propertySheet.propTableContentId)).html('\n            <table id="'.concat(o[0].name,'" class=\'bordered\' data-parent="addedPsWrapper" data-title="Add Property Sheet" data-prop-column="').concat(this.propColumn,'" data-prop-sheet="').concat(this.propSheet,'" style="min-width: 350px;">\n                ').concat(o[0].sheetMap.map(function(t){return"\n                    <tr data-group='general'>\n                    ".concat("table"!=t.type?"\n                        <td>".concat(t.caption).concat(t.mandatory?"<sup>*</sup>":"","</td>\n                        <td>\n                            ").concat(e._generatePropertyInput(t,e.propColumn,o[0]),"\n                        </td>\n                    "):'\n                        <td colspan="2">\n                            '.concat(e._generatePropertyInput(t,e.propColumn,o[0]),"\n                        </td>\n                    "),"\n                    </tr>\n                    ")}).join(""),"\n            </table>\n            ")),o[0].sheetInit()),this.stage.propertySheet.allSheetInit()}},{key:"_generatePropertyInput",value:function(e,t,n){var o="function"==typeof e.value?e.value(e,t,n):e.value;switch(void 0===o&&(o=""),e.type){case"text":default:return"<input id='".concat(e.name,"' class='form-control' type='text' ").concat(e.disabled?" disabled='disabled' ":"",' value="').concat(o,'" />');case"number":return"<input id='".concat(e.name,"' class='form-control' type='number' ").concat(e.disabled?" disabled='disabled' ":"",' value="').concat(o,'" />');case"checkbox":return'\n                <div class="switch '.concat("popup"!=this.stage.propertySheet.type?"form-control":"",'" onclick="return true;toggleCompressedMode(\'s\');" ').concat("popup"!=this.stage.propertySheet.type?'style="float: none; padding: 0px 8px; position: relative; top: 5px; border: 1px solid transparent; box-shadow: none;"':"",'>\n                    <a href="javascript:void(0)" class="swtchDummyAnchr">\n                        <input class="tgl tgl-ios" name="opt').concat(e.name,'" id="').concat(e.name,'" type="checkbox" ').concat("true"==o.toString().toLowerCase()?' checked="checked" ':"",' />\n                        <label class="tgl-btn togglecustom toggle_btn" for="').concat(e.name,'" id="lbl').concat(e.name,'"></label>\n                    </a>\n                </div>\n                ');case"dropdown":var a;return a="function"==typeof e.dropdownOptions?_toConsumableArray(e.dropdownOptions(e,t,n)):_toConsumableArray(e.dropdownOptions),'\n                <select class="form-control '.concat(e["class"]?e["class"]:"",'" id="').concat(e.name,'" ').concat(e.mandatory?' data-mandatory="true" ':' data-mandatory="false" '," ").concat(e.events&&e.events.length>0?e.events.map(function(o){return"".concat(o.eventAttribute,'="').concat("function"==typeof o.eventFunction?o.eventFunction(e,t,n):o.eventFunction,'"')}).join(" "):""," >\n                    ").concat(this._generateSelectOptions(a,e.mandatory,o),"\n                </select>\n                ");case"expression":var r=this.stage.expressionBuilder;return'\n                <div class="'.concat("popup"!=this.stage.propertySheet.type?"form-control":"",'" style="').concat("popup"==this.stage.propertySheet.type?"float: right;":"border: 1px solid transparent; box-shadow: none; padding-left: 3px;",'">\n                    <a href="#" class="btn btn-default ').concat(r.icon,'" aria-label="Right Align" title="').concat(r.title,'" data-toggle="tooltip" data-expression-builder-type="').concat(e.expressionBuilderType,'" data-value="').concat(o,'" onclick="').concat(r.call.generate,'">\n                    </a>\n                </div>\n                ');case"fontpicker":var c=this.stage.fontPicker;return'\n                <div class="'.concat("popup"!=this.stage.propertySheet.type?"form-control":"",'" style="').concat("popup"==this.stage.propertySheet.type?"float: right;":"border: 1px solid transparent; box-shadow: none; padding-left: 3px;",'">\n                    <a href="#" class="btn btn-default ').concat(c.icon,'" aria-label="Right Align" title="').concat(c.title,'" data-toggle="tooltip" data-font-picker-type="').concat(e.fontPickerType,'" data-value="').concat(o,'" onclick="').concat(c.call.generate,'">\n                    </a>\n                </div>\n                ');case"colorpicker":var i,l=this.stage.colorPicker;return i=this._parseHexAndDelphiColors(o,!0),'\n                <div class="" style="'.concat("popup"==this.stage.propertySheet.type?"float: right;":"",'">\n                    \x3c!--<a href="#" class="btn btn-default ').concat(l.icon,'" aria-label="Right Align" title="').concat(l.title,'" data-toggle="tooltip" data-id="').concat(e.name,'" data-font-picker-type="').concat(e.colorPickerType,'" onclick="').concat(l.call.toggle,'">\n                    </a>\n                    <div class="hide">--\x3e\n                        <input type="text" id="').concat(e.name,'" class="').concat(l.containerClass," \n                        ").concat("popup"!=this.stage.propertySheet.type?"form-control":"",'" value="').concat(i,'" style="cursor: pointer;" ').concat(e.events&&e.events.length>0?e.events.map(function(o){return"".concat(o.eventAttribute,'="').concat("function"==typeof o.eventFunction?o.eventFunction(e,t,n):o.eventFunction,'"')}).join(" "):""," />\n                    \x3c!--</div>--\x3e\n                </div>\n                ");case"fieldmapper":case"addformat":case"deleteformat":case"deletehyperlink":return"";case"table":return'\n                <table id="'.concat(e.name,'" class="table" width="100%">\n                    <thead>\n                        <tr>\n                            <td colspan="').concat((e.hasCheckbox?1:0)+e.columns.length,'">\n                            <b>').concat(e.caption,"</b>\n                            ").concat(e.buttons&&e.buttons.length?'<div style="float:right;">\n                                <div class="btn-group" role="group" aria-label="...">\n                                    '.concat(e.buttons.map(function(t){return'<a class="btn btn-default '.concat(t.icon,'" title="').concat(t.caption,'" style="').concat(t.style,'" onclick="').concat(t["function"],'" data-table="').concat(e.name,'" data-prop-sheet="').concat(n.type,'"></a>')}).join(""),"\n                                </div>\n                            </div>"):"","\n                            </td>\n                        </tr>\n                        <tr>\n                        ").concat(e.hasCheckbox?'\n                            <td align="center">\n                                <input class="hide" type="checkbox" />\n                            </td>\n                            ':"","\n                            ").concat(e.columns.map(function(e){return"\n                                    <td>\n                                        <b>".concat(e.caption,"</b>\n                                    </td>\n                                    ")}).join(""),"\n                        </tr>\n                    </thead>\n                    <tbody>\n                    ").concat("function"==typeof e.valueHTML?e.valueHTML(e,t,n):"","\n                    </tbody>\n                </table>\n                ")}}},{key:"_clearPropertyInput",value:function(e,t,n){switch(e.type){case"text":default:case"number":$("#".concat(e.name)).val("");break;case"checkbox":$("#".concat(e.name)).prop("checked",e.defaultValue||!1);break;case"dropdown":var o;o=("object"==_typeof(e.dropdownOptions)&&e.dropdownOptions.filter(function(e){return e.selected})[0]||"").value||"",$("#".concat(e.name)).val(o);break;case"expression":case"fontpicker":$("#".concat(e.name)).val("");break;case"colorpicker":case"fieldmapper":case"addformat":case"deleteformat":case"deletehyperlink":break;case"table":$("#".concat(e.name)).find("tbody tr").remove()}}},{key:"generateFontPicker",value:function(t){var n=this,o=this.stage.fontPicker,a="";a=(a=t.data("value")).replace(/~/g,"");var r=[];"properties"==t.data("fontPickerType")?(8==a.split(",").length&&(r=a.slice(1,a.length-1).split(",")),n.fontPickerObj={fontFamily:r[0]||o[o.objects.fontFamily][0].value,fontSize:r[1]||o[o.objects.fontSize][1].value,fontColor:r[2]||o[o.objects.fontColor][0].value,unknown:r[3]||"",Bold:r[4]||o[o.objects.fontEffects][0].selectedValue.unchecked,Italic:r[5]||o[o.objects.fontEffects][1].selectedValue.unchecked,Underline:r[6]||o[o.objects.fontEffects][2].selectedValue.unchecked,Strikeout:r[7]||o[o.objects.fontEffects][3].selectedValue.unchecked}):(7==a.split(",").length&&(r=a.split(",")),n.fontPickerObj={fontFamily:r[0]||o[o.objects.fontFamily][0].value,fontSize:r[6]||o[o.objects.fontSize][1].value,fontColor:r[4]||o[o.objects.fontColor][0].value,unknown:r[7]||"",Bold:r[1]||o[o.objects.fontEffects][0].selectedValue.unchecked,Italic:r[2]||o[o.objects.fontEffects][1].selectedValue.unchecked,Underline:r[3]||o[o.objects.fontEffects][2].selectedValue.unchecked,Strikeout:r[5]||o[o.objects.fontEffects][3].selectedValue.unchecked});var c='\n        <div class="bodyAndFooter-cont">\n            <div class="body-cont" data-pillindex="XXXXXXXXXXXXX">\n                <div id="'.concat(o.containerId,'" class="">\n                    <div class="row rowNoMargin fontPickerSeperation">\n                        <select class="col-md-6 col-sm-6 col-xs-6 windowsUI" data-font-picker="').concat(o.objects.fontFamily,'" onchange="').concat(o.call.generatePreview,'">\n                            ').concat(o[o.objects.fontFamily].map(function(e){return'\n                                        <option value="'.concat(e.value,'" style="').concat(e.cssProp,":").concat(e.cssValue,';" ').concat(n.fontPickerObj[o.objects.fontFamily]==e.value?'selected="selected"':"",">").concat(e.caption,"</option>\n                                    ")}).join(""),'\n                        </select>\n                        <select class="col-md-3 col-sm-3 col-xs-3 windowsUI" data-font-picker="').concat(o.objects.fontSize,'" onchange="').concat(o.call.generatePreview,'">\n                            ').concat(o[o.objects.fontSize].map(function(e){return'\n                                        <option value="'.concat(e.value,'" data-style="').concat(e.cssProp,":").concat(e.cssValue,';" ').concat(n.fontPickerObj[o.objects.fontSize]==e.value?'selected="selected"':"",">").concat(e.caption,"</option>\n                                    ")}).join(""),'\n                        </select>\n                        <select class="col-md-3 col-sm-3 col-xs-3 windowsUI" data-font-picker="').concat(o.objects.fontColor,'" onchange="').concat(o.call.generatePreview,'">\n                            ').concat(o[o.objects.fontColor].map(function(e){return'\n                                        <option value="'.concat(e.value,'" data-style="').concat(e.cssProp,":").concat(e.cssValue,';" ').concat(n.fontPickerObj[o.objects.fontColor]==e.value?'selected="selected"':"",">").concat(e.caption,"</option>\n                                    ")}).join(""),'\n                        </select>\n                    </div>\n                    \n                    <div id="fontEffectsDiv" class="row rowNoMargin windowsUI fontEffectsDiv fontPickerSeperation">\n                        ').concat(o[o.objects.fontEffects].map(function(e){return'\n                                    <div class="fontEffectsDivSingle col-md-3 col-sm-3 col-xs-3 rowNoMargin">\n                                        <div class="switch" onclick="return true;">\n                                            <a href="javascript:void(0)" class="swtchDummyAnchr">\n                                                <input class="tgl tgl-ios" name="fe'.concat(e.caption,'" id="fe').concat(e.caption,'" type="checkbox"  data-font-picker="').concat(e.caption,'" data-font-picker-parent="').concat(o.objects.fontEffects,'" onchange="').concat(o.call.generatePreview,'"  ').concat(n.fontPickerObj[e.caption]==e.selectedValue.checked?'checked="checked"':"",'>\n                                                <label class="tgl-btn togglecustom toggle_btn" for="fe').concat(e.caption,'" id="lbl').concat(e.caption,'"></label>\n                                            </a>\n                                        </div>\n                                        <label for="fe').concat(e.caption,'">').concat(e.caption,'</label>\n                                        \x3c!--<input id="fe').concat(e.caption,'" type="checkbox" name="fe').concat(e.caption,'" value="').concat(e.cssValue,'" />\n                                        <label for="fe').concat(e.caption,'">').concat(e.caption,"</label>--\x3e\n                                    </div>\n                                ")}).join(""),'\n                    </div>\n                    \x3c!--<div class="row rowNoMargin fontPickerSeperation">--\x3e\n                        \x3c!--<div class="col-md-2 col-sm-2 col-xs-2 windowsUI fontColorDiv">--\x3e\n                            \x3c!--Color--\x3e\n                        \x3c!--</div>--\x3e\n                        \n                        \x3c!--<select class="col-md-5 col-sm-5 col-xs-5 windowsUI">\n                            <option value="Western">Western</option>\n                        </select>--\x3e\n                    \x3c!--</div>--\x3e\n                    <fieldset class="fontPickerSample col-md-12 col-sm-12 col-xs-12" style="border-radius: 4px;\n                    border: 1px solid #cecece;">\n                        <legend class="fontPickerSampleLegend windowsUI">Sample</legend>\n                        <div id="').concat(o.fontPickerSampleId,'" class="').concat(o.fontPickerSampleId,'">Axpert Web</div>\n                    </fieldset>\n                </div>\n            </div>\n            <div class="footer-cont">\n                <div class="pull-right" id="filterBtn">\n                    \x3c!--<input type="button" name="btnFilterApply" value="Cancel" onclick="" id="btnFilterApply" title="Cancel}" class="normalbtn btn handCursor allow-enter-key"/>--\x3e\n                    <input type="button" name="btnFilter" value="Ok" data-font-picker-type="').concat(t.data("fontPickerType"),'" onclick="').concat(o.call.save,'" id="btnFilter" title="Ok" class="hotbtn btn handCursor allow-enter-key" />\n                </div>\n            </div>\n        </div>\n        ');(new e).close(),(new IviewBuilder).displayBootstrapModalDialog(o.modalTitle,"md","330px",!1,c,"",function(){$(".bodyAndFooter-cont .body-cont").css({height:"calc(100% - 30px)"}),$("input:checkbox, select",".bodyAndFooter-cont .body-cont").trigger("change")},function(){n.fontPickerObj={},n.unhide()})}},{key:"_generateFontPickerPreview",value:function(e){var t=this.stage.fontPicker;switch(e.data("fontPicker")){case"fontFamily":var n=t[e.data("fontPicker")].filter(function(t){return t.value==e.val()})[0];$("#"+t.fontPickerSampleId).css(n.cssProp,n.cssValue),this.fontPickerObj[e.data("fontPicker")]=n.value;break;case"fontSize":var o=t[e.data("fontPicker")].filter(function(t){return t.value==e.val()})[0];$("#"+t.fontPickerSampleId).css(o.cssProp,o.cssValue),this.fontPickerObj[e.data("fontPicker")]=o.value;break;case"fontColor":var a=t[e.data("fontPicker")].filter(function(t){return t.value==e.val()})[0];$("#"+t.fontPickerSampleId).css(a.cssProp,a.cssValue),this.fontPickerObj[e.data("fontPicker")]=a.value;break;case"unknown":break;case"Bold":var r=t[e.data("fontPickerParent")].filter(function(t){return t.caption==e.data("fontPicker")})[0];$("#"+t.fontPickerSampleId).css(r.cssProp,e.prop("checked")?r.cssValue:""),this.fontPickerObj[e.data("fontPicker")]=r.selectedValue[e.prop("checked")?"checked":"unchecked"];break;case"Italic":var c=t[e.data("fontPickerParent")].filter(function(t){return t.caption==e.data("fontPicker")})[0];$("#"+t.fontPickerSampleId).css(c.cssProp,e.prop("checked")?c.cssValue:""),this.fontPickerObj[e.data("fontPicker")]=c.selectedValue[e.prop("checked")?"checked":"unchecked"];break;case"Underline":var i=t[e.data("fontPickerParent")].filter(function(t){return t.caption==e.data("fontPicker")})[0],l=$("#"+t.fontPickerSampleId).css(i.cssProp).split(" ").filter(function(e){return"line-through"==e||" underline"==e}).join(" "),s=e.prop("checked")?_toConsumableArray(new Set([i.cssValue].concat(_toConsumableArray(l.split(" "))))).join(" "):l.split(" ").filter(function(e){return e!=i.cssValue}).join(" ");$("#"+t.fontPickerSampleId).css(i.cssProp,s),this.fontPickerObj[e.data("fontPicker")]=i.selectedValue[e.prop("checked")?"checked":"unchecked"];break;case"Strikeout":var p=t[e.data("fontPickerParent")].filter(function(t){return t.caption==e.data("fontPicker")})[0],u=$("#"+t.fontPickerSampleId).css(p.cssProp).split(" ").filter(function(e){return"line-through"==e||"underline"==e}).join(" "),d=e.prop("checked")?_toConsumableArray(new Set([p.cssValue].concat(_toConsumableArray(u.split(" "))))).join(" "):u.split(" ").filter(function(e){return e!=p.cssValue}).join(" ");$("#"+t.fontPickerSampleId).css(p.cssProp,d),this.fontPickerObj[e.data("fontPicker")]=p.selectedValue[e.prop("checked")?"checked":"unchecked"]}}},{key:"saveFontPicker",value:function(e){var t=this.fontPickerObj,n="";n="properties"==e.data("fontPickerType")?"[".concat(t.fontFamily,",").concat(t.fontSize,",").concat(t.fontColor,",").concat(t.unknown,",").concat(t.Bold,",").concat(t.Italic,",").concat(t.Underline,",").concat(t.Strikeout,"]"):"[".concat(t.fontFamily,",").concat(t.Bold,",").concat(t.Italic,",").concat(t.Underline,",").concat(t.fontColor,",").concat(t.Strikeout,",").concat(t.fontSize,"]"),(new IviewBuilder).showAlertDialog("info",n),this.fontPickerObj={},(new IviewBuilder).closeModalDialog()}},{key:"generateExpressionBuilder",value:function(t){var n=this,o=this.stage.expressionBuilder,a='\n        <div class="bodyAndFooter-cont">\n            <div class="body-cont" data-pillindex="XXXXXXXXXXXXX">\n                <div class="">\n                    <textarea id="'.concat(o.containerId,'" class="hide">').concat("",'</textarea>\n                </div>\n            </div>\n            <div class="footer-cont">\n                <div class="pull-right" id="filterBtn">\n                    \x3c!--<input type="button" name="btnFilterApply" value="Cancel" onclick="" id="btnFilterApply" title="Cancel}" class="normalbtn btn handCursor allow-enter-key"/>--\x3e\n                    <input type="button" name="btnFilter" value="Ok" data-expression-builder-type="').concat(t.data("expressionBuilderType"),'" onclick="').concat(o.call.save,'" id="btnFilter" title="Ok" class="hotbtn btn handCursor allow-enter-key" />\n                </div>\n            </div>\n        </div>\n        ');(new e).close(),(new IviewBuilder).displayBootstrapModalDialog(o.modalTitle,"md","330px",!1,a,"",function(){$(".bodyAndFooter-cont .body-cont").css({height:"calc(100% - 30px)"}),$("input:checkbox, select",".bodyAndFooter-cont .body-cont").trigger("change"),(new IviewBuilder).createTheEditor({type:"expression",textarea:o.containerId})},function(){n.unhide()})}},{key:"saveExpressionBuilder",value:function(e){var t,n=this.stage.expressionBuilder;(t=$("#"+n.containerId).data("myeditor").getValue())&&(new IviewBuilder).showAlertDialog("info",t),(new IviewBuilder).closeModalDialog()}},{key:"_parseHexAndDelphiColors",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return arguments.length>1&&arguments[1]!==undefined&&arguments[1]?(e||(e="$00FFFFFF"),e=e.replace(/~/g,""),this.stage.AxClColors[e]?this.stage.AxClColors[e]:0==e.indexOf("$")&&9==e.length?"#"+[e[7],e[8],e[5],e[6],e[3],e[4]].join("").toUpperCase():e):(e||(e="#FFFFFF"),0==e.indexOf("#")&&7==e.length?"$"+["0","0",e[5],e[6],e[3],e[4],e[1],e[2]].join("").toUpperCase():e)}},{key:"_getPropertyInputValues",value:function(e,t,n){switch(n.type){case"properties":var o=(new IviewBuilder).columns.raw.filter(function(e){return e.a2==t});return o&&o.length>0?"function"==typeof e.map?e.map(o[0])||"":o[0][e.map]:"";case"hyperlink":var a=_.map((new IviewBuilder).hyperlinks,function(e,n){return e["@source"]==t?n:""}).filter(function(e){return e})[0];return a?e.map?"function"==typeof e.map?e.map(a)||"":(new IviewBuilder).hyperlinks[a][e.map]:a:""}switch(e.type){case"text":default:case"number":return"";case"checkbox":case"dropdown":return"\n                ";case"expression":this.stage.expressionBuilder;return"\n                ";case"fontpicker":this.stage.fontPicker;return"\n                ";case"colorpicker":this.stage.colorPicker;return"\n                ";case"fieldmapper":case"addformat":case"deleteformat":case"deletehyperlink":return""}}},{key:"_generateSelectOptions",value:function(e,t,n){return t||(e=[{value:"",caption:(new IviewBuilder).lcm[441]}].concat(_toConsumableArray(e))),e.map(function(e){return'\n            <option value="'.concat(e.value,'" ').concat(n==e.value?' selected="selected" ':"",">").concat(e.caption||e.value,"</option>\n            ")}).join("")}},{key:"_getHyperlinkInfo",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";e?$("".concat(n)).html(this._generateSelectOptions(this._ajaxGetHyperlinkData(e,t),$("".concat(n)).data("mandatory"),"")).trigger("change"):$("".concat(n)).html(this._generateSelectOptions([],$("".concat(n)).data("mandatory"),"")).trigger("change")}},{key:"_clearParamFieldMap",value:function(e){arguments.length>1&&arguments[1]!==undefined&&arguments[1];$("".concat(e)).remove()}},{key:"_ajaxGetHyperlinkData",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",n=[];(new IviewBuilder).ShowDimmer(!0);try{$.ajax({url:"iviewBuilder.aspx/getHyperlinkInfo",type:"POST",cache:!1,async:!1,data:JSON.stringify({type:e,ivTstName:t}),dataType:"json",contentType:"application/json",success:function(e){if("SESSION_TIMEOUT"==e.d)parent.window.location.href="../aspx/sess.aspx";else if(""!=e.d){var t=JSON.parse(e.d);"undefined"!=typeof t.error||"object"==_typeof(t.result)&&t.result.row&&"undefined"==typeof(n=t.result.row).length&&(n=[n])}return(new IviewBuilder).ShowDimmer(!1),n},error:function(e){return(new IviewBuilder).showAlertDialog("error","Error while executing the query."),(new IviewBuilder).ShowDimmer(!1),n}})}catch(o){return(new IviewBuilder).showAlertDialog("error","Error while executing the query."),(new IviewBuilder).ShowDimmer(!1),n}return n}},{key:"_addTableFields",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined&&arguments[1],o=this,a=$("#".concat(e.data("table")));o.propSheet=e.data("propSheet");var r=o.stage.propertySheet.sheets.filter(function(e){return e.type==o.propSheet&&"column"==e.propertyIs});if(r&&r.length>0){var c=r[0].sheetMap.filter(function(t){return t.name==e.data("table")})[0],i=!0;if(c.parentDependent&&(i=Object.keys(c.parentDependent).map(function(e){if(n){var o=r[0].sheetMap.filter(function(t){return t.name==c.parentDependent[e].substr(1)})[0];return o.value(o,t.propColumn,r[0])}return $("".concat(c.parentDependent[e])).val()}).reduce(function(e,t){return t&&e++,e},0)==Object.keys(c.parentDependent).length),i){var l="\n                <tr>\n                    ".concat(c.hasCheckbox?'\n                    <td align="center">\n                        <input type="checkbox" />\n                    </td>\n                    ':"","\n                    ").concat(c.columns.map(function(e){return"\n                            <td>\n                                ".concat(o._generatePropertyInput(e,o.propColumn,r[0]),"\n                            </td>\n                            ")}).join(""),"\n                </tr>\n                ");if(n)return l;a.find("tbody").append(l)}else c.parentDependentError&&(new IviewBuilder).showAlertDialog("error",c.parentDependentError)}}},{key:"_deleteSelectedTableFields",value:function(e){var t=$("#".concat(e.data("table"))),n=$("tbody",t);n.find($.map(n.find("input:checkbox"),function(e,t){return $(e).is(":checked")?"tr:eq(".concat(t,")"):""}).filter(function(e){return""!==e}).join(", ")).remove()}},{key:"_clearTableFields",value:function(e){var t=this,n=t.stage.propertySheet.sheets.filter(function(e){return e.type==t.propSheet&&"column"==e.propertyIs});n&&n.length>0&&n[0].sheetMap.forEach(function(e){t._clearPropertyInput(e,t.propColumn,n)})}},{key:"_addCondFormat",value:function(e){}},{key:"_deleteCondFormat",value:function(e){}},{key:"_showPropertySheet",value:function(){$("#Wrapperpropsheet").css("display","block"),$("#updateWidget").prop("title","Save"),$("#propertySrchCls").prop("title","Cancel"),setTimeout(function(){$("#propertySheet").removeClass("scale-out").addClass("scale-in"),$("#propertySheet").draggable({containment:"body"})},50)}},{key:"show",value:function(e){var t=e.data("type"),n=e.data("field");this.propSheet==t&&this.propColumn==n||(this.propSheet=t,this.propColumn=n),this._generatePropertySheet(),this._showPropertySheet()}},{key:"_update",value:function(){}},{key:"save",value:function(){this._update(),this.close()}},{key:"close",value:function(){if($("#propertySheet").hasClass("scale-out"))return!0;$("#propertySheet").data("target","").removeClass("scale-in").addClass("scale-out")}},{key:"unhide",value:function(){$("#propertySheet").addClass("scale-in").removeClass("scale-out")}}]),e}();