/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var SESSTIMEOUT="SESSION_TIMEOUT",srchDlg="",aXEmptyOption="-- Select --";function SetTstProps(e,t,a,r,i,o){proj=e,proj=CheckSpecialCharsInStr(proj),user=t,user=CheckSpecialCharsInStr(user),tst=a,tst=CheckSpecialCharsInStr(tst),sid=r,sid=CheckSpecialCharsInStr(sid),trace=o,trace=CheckSpecialCharsInStr(trace),window.status=""}function CheckSpecialCharsInStr(e){return e=(e=e)!=undefined?(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;"):""}function CheckSpecialCharsInJson(e){return e=(e=e)!=undefined?(e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")).replace(/\\/g,"&#92;"):""}function CheckSpecialCharsInHTML(e){return e=(e=(e=(e=(e=(e=e).replace(/&/g,"#amp:")).replace(/</g,"#lt:")).replace(/>/g,"#gt:")).replace(/'/g,"#apos:")).replace(/"/g,"#quot:")}function RepSpecialCharsInHTML(e){return e=(e=(e=(e=(e=e.replace(/#amp:/g,"&")).replace(/#lt:/g,"<")).replace(/#gt:/g,">")).replace(/#apos:/g,"'")).replace(/#quot:/g,'"')}function RepSpecialCharForRTB(e){return e=(e=(e=(e=e).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;nbsp;/g," ")}function ShowDimmer(e){DimmerCalled=!0;var t=$("#waitDiv");t.length>0&&t!=undefined?1==e?(closeParentFrame(),$("body").addClass("page-loading"),document.onkeydown=function(){return!1}):$("body").hasClass("stay-page-loading")||($("body").removeClass("page-loading"),document.onkeydown=function(){if(1==DimmerCalled)return!0}):window.opener!=undefined&&(t=$("#waitDiv",window.opener.document)).length>0&&(1==e?$("body",window.opener.document).addClass("page-loading"):$("body",window.opener.document).hasClass("stay-page-loading")||$("body",window.opener.document).removeClass("page-loading")),DimmerCalled=!1}function GetFieldType(e,t){var a="";if(t)a=FDataType[t];else for(var r=0;r<FNames.length;r++)if(FNames[r]==e){a=FDataType[r];break}return a}function GetDWBFieldType(e,t){var a="";if(t)a=FFieldType[t];else for(var r=0;r<FNames.length;r++)if(FNames[r]==e){a=FFieldType[r];break}return a}function GetFieldsName(e){if(e!=undefined){var t=e.lastIndexOf("F");return e.substring(0,t-3)}}function GetFieldsRowNo(e){var t=e.lastIndexOf("F");return e.substring(t-3,t)}function GetFieldsDcNo(e){var t=e.lastIndexOf("F");return e.substring(t+1)}function GetFieldsRowFrameNo(e){var t=e.lastIndexOf("F");return e.substring(t-3)}function GetFieldValueFromArray(e){for(var t=0;t<ChangedFields.length;t++)if(ChangedFields[t]==e)return ChangedFieldValues[t];return""}function GetFieldValue(e,t){var a="";if(""!=e){var r=$j("#"+e);if(r.length>0){var i=r.attr("type");if(i==undefined&&(i=r.prop("type")),"select-one"==i)(a=r.find("option:selected").text())==aXEmptyOption&&(a=""),t!=undefined&&-1!=a.indexOf("#")&&(a=a.replace(/#/,"hash;"));else if("radio"==i)$j(".multiFldRdg").length>0&&$j("input:radio.multiFldRdg").each(function(){$j(this).attr("id")==e&&1==$j(this).prop("checked")&&(a=$j(this).val())}),$j("input:radio[name="+e+"]").each(function(){1!=$j(this).prop("checked")&&"checked"!=$j(this).prop("checked")||(a=$j(this).val())});else if("textarea"==i){var o=r.attr("id");if(AllFieldNames.length>0)-1!=(f=$j.inArray(o,AllFieldNames))?a=AllFieldValues[f]:(a=r.val().replace(/\n/gi,"<br>"),a=r.val());else a=r.val().replace(/\n/gi,"<br>"),a=r.val()}else if("checkbox"==i){var l;l=r.is(":checked");var n=!1;if($j(".multiFldChk").length>0){var s=GetChkSeparator(GetFieldsName(e));$j("input:checkbox:checked.multiFldChk").each(function(){$j(this).attr("id")==e&&1==$j(this).prop("checked")&&(""==a?a=$j(this).val():a+=s+$j(this).val(),n=!0)})}n||$j("#"+e).hasClass("multiFldChk")||(a=GetChkValue(e,l))}else if("select-multiple"==i){var d,c,p,u;if(t!=undefined&&-1!=a.indexOf("#")&&(a=a.replace(/#/,"hash;")),r.hasClass("multiFldChk"))if("select2"==r.data("control")&&r.data("separator"))a=null!==(d=null===(c=r.val())||void 0===c?void 0:c.join(r.data("separator")))&&void 0!==d?d:r.val();else a=r.val();else if("select2"==r.data("control")&&r.data("sep"))a=null!==(p=null===(u=r.val())||void 0===u?void 0:u.join(r.data("sep")))&&void 0!==p?p:r.val();else a=r.val();a==dateString&&(a="")}else{t!=undefined&&-1!=a.indexOf("#")&&(a=a.replace(/#/,"hash;"));var f,g=r.attr("id");if(AllFieldNames.length>0)-1!=(f=$j.inArray(g,AllFieldNames))&&(a=AllFieldValues[f]);"hidden"==i&&""==a&&r.attr("defaultvalue")!=undefined&&(a=r.attr("defaultvalue")),a==dateString&&(a="")}}}try{var m=AxAfterGetFieldValue();void 0!==m&&"@*#"!=m&&(a=m)}catch(h){}return a}function GetFieldValueNew(e,t){var a="";if(""!=e){var r=$j("#"+e);if(r.length>0){var i=r.attr("type");if(i==undefined&&(i=r.prop("type")),"select-one"==i)(a=r.find("option:selected").text())==aXEmptyOption&&(a=""),t!=undefined&&-1!=a.indexOf("#")&&(a=a.replace(/#/,"hash;"));else if("radio"==i)$j(".multiFldRdg").length>0&&$j("input:radio.multiFldRdg").each(function(){$j(this).attr("id")==e&&1==$j(this).prop("checked")&&(a=$j(this).val())}),$j("input:radio[name="+e+"]").each(function(){1!=$j(this).prop("checked")&&"checked"!=$j(this).prop("checked")||(a=$j(this).val())});else if("textarea"==i)a=r.val().replace(/\n/gi,"<br>"),a=r.val();else if("checkbox"==i){var o;o=r.is(":checked");var l=!1;if($j(".multiFldChk").length>0){var n=GetChkSeparator(GetFieldsName(e));$j("input:checkbox:checked.multiFldChk").each(function(){$j(this).attr("id")==e&&1==$j(this).prop("checked")&&(""==a?a=$j(this).val():a+=n+$j(this).val(),l=!0)})}l||$j("#"+e).hasClass("multiFldChk")||(a=GetChkValue(e,o))}else if("select-multiple"==i){var s,d,c,p;if(t!=undefined&&-1!=a.indexOf("#")&&(a=a.replace(/#/,"hash;")),r.hasClass("multiFldChk"))if("select2"==r.data("control")&&r.data("separator"))a=null!==(s=null===(d=r.val())||void 0===d?void 0:d.join(r.data("separator")))&&void 0!==s?s:r.val();else a=r.val();else if("select2"==r.data("control")&&r.data("sep"))a=null!==(c=null===(p=r.val())||void 0===p?void 0:p.join(r.data("sep")))&&void 0!==c?c:r.val();else a=r.val();a==dateString&&(a="")}else t!=undefined&&-1!=a.indexOf("#")&&(a=a.replace(/#/,"hash;")),a=r.val(),"hidden"==i&&""==a&&r.attr("defaultvalue")!=undefined&&(a=r.attr("defaultvalue")),a==dateString&&(a="")}}try{var u=AxAfterGetFieldValue();void 0!==u&&"@*#"!=u&&(a=u)}catch(f){}return a}function GetChkValue(e,t){var a="",r=GetFieldsDcNo(e),i=$j("#"+e).attr("alt");if(i!=undefined)var o=i.split(",");try{t!=undefined&&(IsDcGrid(r)?(o=$j.grep(o,function(e){return e})).length>1&&(a=t?o[0].toString():o[1].toString()):a=t?"T":"F")}catch(l){}return a}function CallSetFieldValue(e,t,a,r){FldOldValue=GetFieldValue(e),r!=undefined?SetFieldValue(e,t,a,r):SetFieldValue(e,t,a);var i=GetFieldsDcNo(e),o=GetFieldsName(e),l=GetFormatGridIndex(i);-1!=l&&UpdateFormatGridTotal(o,i,GetFieldsRowNo(e),l)}function CloneCombo(e){var t=e.clone();return e[0].length=0,t.find("option").each(function(){var t=$j(this);e.append(new Option(t.text(),t.val()))}),e}function SetFieldValue(e,t,a,r){AxDoBlur=!1;var i=GetFieldsName(e),o=GetFieldsDcNo(e);if("''"==t&&(t=""),""!=e){0!==e.indexOf("rtf_",0)&&0!==e.indexOf("rtfm_",0)&&0!==e.indexOf("fr_rtf_",0)&&"Rich Text"!=GetDWBFieldType(i)||"LoadData"!=r&&"GetDep"!=r&&r!=undefined||!isReadyCK||(t=RepSpecialCharForRTB(t),UpdateAllFieldValues(e,t),t=t.replace(/<gmi/g,"<img"),CKEDITOR.instances[e].setData(t));var l=e.toLowerCase();if(!(0!==l.indexOf("sql_editor_",0)&&0!==l.indexOf("exp_editor_",0)&&"SQL Editor"!=GetDWBFieldType(i)&&"Expression Editor"!=GetDWBFieldType(i)||"LoadData"!=r&&"GetDep"!=r&&r!=undefined)){var n=$("#"+e).data("myeditor");n&&(n.setValue(t),UpdateAllFieldValues(e,t))}var s="#"+e,d=$j(s),c=d.data("type")||d.prop("type");if(d.length>0){if($j(s).prop("disabled")&&$j(s).hasClass("autogen")&&""==t)return!1;UpdateAssignedFld(e);try{AxCustomSetValue(d,i,t)}catch(D){!0}if("select-one"==c){d.prev("textarea").length>0&&(d.prev("textarea").text(t),UpdateAllFieldValues(d.attr("id"),t));var p="";d.hasClass("fldFromSelect")?""==t?(UpdateAllFieldValues(d.attr("id"),""),d.empty().trigger("change")):(UpdateAllFieldValues(d.attr("id"),t),d.append('<option value="'+t+'" selected="selected">'+t+"</option>")):($j.browser.msie||(d=CloneCombo(d)),d.find("option").each(function(){t.replace(/ /g,"&nbsp;");var e=t.replace(/ /g,String.fromCharCode(160));$j(this).text()!=e&&t!=$j(this).text()||(""==$j(this).val()?(p=$j(this).text(),$j(this).attr("selected","selected"),$j(this).val(p)):(p=$j(this).val(),d.val(p),$j(this).attr("selected","selected"),d.val(p)))})),""==p||a||ComboFillDependents(e,p)}else if("select-multiple"==c||"multigroupselect"==c){var u="select-multiple"==c?d.data("separator"):d.data("sep");""!=t?(UpdateAllFieldValues(d.attr("id"),t),Array.isArray(t)||(t=_toConsumableArray(new Set(_toConsumableArray(t.split(u)))).join(u),0==d.find("option").length&&$.each(t.split(u),function(e,t){d.append('<option value="'+t+'" selected="selected">'+t+"</option>")})),d.attr("data-selected",t)):""==t&&(d.hasClass("multiFldChk")||d.hasClass("fldmultiSelect"))?(UpdateAllFieldValues(d.attr("id"),t),d.attr("data-selected",t),d.empty().trigger("change")):""==t&&d.hasClass("multiFldChklist")&&(UpdateAllFieldValues(d.attr("id"),t),d.attr("data-selected",t),$("#".concat(d.attr("id")," > option")).prop("selected",""),d.parent().find(".select2-selection__choice").remove())}else if("radio"==c)$j(".multiFldRdg").length>0&&$j("input:radio.multiFldRdg").each(function(){$j(this).attr("id")==e&&$j(this).val()==t&&$j(this).prop("checked",!0)});else if("checkbox"==c){var f=!1,g=GetChkSeparator(GetFieldsName(e)),m=t.split(g);if(IsDcGrid(o)){for(var h=0;h<m.length;h++){var v=m[h];$j("input:checkbox.multiFldChk").each(function(){if($j(this).attr("id")==e&&$j(this).val().toLowerCase()==v.toLowerCase())return $j(this).prop("checked",!0),f=!0,!1})}f||d.text(t)}else try{$j("#"+e).val(t),$(blurNextPreventElement).hasClass("close")||$j("#"+e).tokenfield("setTokens",m)}catch(D){}if($j("#chkAll_"+e).length>0&&"SelectAll"!=r){var w=$j("input[name='"+e+"']").length;m.length<w?($j("#chkAll_"+e).removeAttr("checked"),$j("#chkAll_"+e).prop("checked",!1)):""!=t&&m.length==w&&$j("#chkAll_"+e).prop("checked",!0),ShowSelectedChkItems($j("#hideAll_"+e).attr("id"))}f||("T"==t||"yes"==t.toLowerCase()?d.prop("checked",!0):d.prop("checked",!1))}else if("textarea"==c){c=GetFieldType(i,C=$j.inArray(i,FNames));var b=!1;if(IsGridField(i)&&"numeric"==c.toLowerCase()&&(-1!=t.toString().indexOf(",")&&(t=removeCommas(t.toString())),t=NumericFldOnBlur(t,C),TstructHasPop&&IsParentField(i,o)&&0==t&&(t=""),UpdateAllFieldValues(d.attr("id"),t),d.val(t),d.attr("value",t),b=!0,ApplyFldMask(d.attr("id"),t)),!b){var F=t.replace(new RegExp("<br>","g"),"¿");F=(F=F.replace(new RegExp("¿","g"),"\n")).replace(new RegExp("&#9;","g"),"\t");try{d.next("div").attr("id")=="cke_"+d.attr("id")?F=F.replace(new RegExp("<img","g"),"<gmi"):"Rich Text"==FFieldType[C]&&(F=F.replace(new RegExp("<gmi","g"),"<img"))}catch(D){}UpdateAllFieldValues(d.attr("id"),F),d.val(F),ApplyFldMask(d.attr("id"),F)}}else{var C;if("dd/mm/yyyy"!=d.attr("title")||""!=t||d.prop("disabled")||(t="dd/mm/yyyy"),(c=GetFieldType(i,C=$j.inArray(i,FNames)))!=undefined&&"numeric"==c.toLowerCase())void 0!==t&&-1!=t.toString().indexOf(",")&&(t=removeCommas(t.toString())),d.data("attr",t),d.is("[type=number]")||(t=NumericFldOnBlur(t,C)),TstructHasPop&&IsParentField(i,o)&&0==t&&(t=""),UpdateAllFieldValues(d.attr("id"),t),d.val(t),d.attr("value",t),ApplyFldMask(d.attr("id"),t);else if(d.hasClass("fldmultiSelect"))""!=t&&("textarea"==d[0].type&&(UpdateAllFieldValues(d.attr("id"),t),d.val(t),d.attr("value",t)),SetMultiSelectValue(d.attr("id"),t));else try{var y=d.attr("id");c=GetFieldType(i,C);"undefined"!=typeof AutosaveDraft&&"true"==AutosaveDraft&&"true"==checkIsdraft?c!=undefined&&"image"!=c.toLowerCase()&&(y.startsWith("axp_nga_")||-1!=y.indexOf("axp_gridattach_")||-1!=y.toLowerCase().indexOf("dc"+o+"_image")||-1!=y.toLowerCase().indexOf("dc"+o+"_referimages")||(UpdateAllFieldValues(d.attr("id"),t),d.val(t),d.attr("value",t),ApplyFldMask(d.attr("id"),t))):(UpdateAllFieldValues(d.attr("id"),t),d.val(t),d.attr("value",t),ApplyFldMask(d.attr("id"),t))}catch(D){UpdateAllFieldValues(d.attr("id"),t),d.val(t),d.attr("value",t),ApplyFldMask(d.attr("id"),t)}}}d.hasClass("fldAutocomplete")&&""!=d.val()&&d.addClass("newValueReturned")}if(AxDoBlur=!0,TstructHasPop){var x=GetFieldsRowNo(e);if(r!=undefined&&"GetDep"==r)return;IsParentField(i,o)&&(RegisterActivePRow(x,o),UpdatePopUpParents(e))}}function SetMultiSelectValue(e,t){var a=multiSelectLoadVals.filter(function(t){return t.includes(e+"♦")}).toString();""!=a?multiSelectLoadVals[multiSelectLoadVals.indexOf(a)]=e+"♦"+t:multiSelectLoadVals.push(e+"♦"+t)}function GetChkSeparator(e){var t=$j.inArray(e,FNames),a=FldChkSeparator[t];return""==a&&(a=","),a}function GetDbRowNo(e,t){var a="-1";if(IsDcGrid(t)){for(var r=!1,i=0;i<RowDcNo.length;i++)if(RowDcNo[i]==t&&ClientRowNo[i]==e){a=DbRowNo[i].toString(),r=!0;break}r||(a="000"==e?"1":parseInt(e,10))}else a="0";return a}function GetClientRowNo(e,t){var a="";if(IsDcGrid(t)){for(var r=!1,i=0;i<RowDcNo.length;i++)if(RowDcNo[i]==t&&DbRowNo[i]==e){a=ClientRowNo[i].toString(),r=!0;break}r||(a=GetRowNoHelper(e))}else a="000";return a}function UpdateDcArrays(e,t){0==(t=parseInt(t,10))&&UpdateDcRowArrays(e,"001","Add");for(var a=1;a<=t;a++){var r=GetRowNoHelper(a);UpdateDcRowArrays(e,r,"Add"),UpdatePopArraysOnSetHtml(e,r)}}function UpdatePopArraysOnSetHtml(e,t){if(TstructHasPop&&!IsDcPopGrid(e))for(var a=GetPopGrids(e).split(","),r=0;r<a.length;r++)if(""!=a[r]){var i=GetParentString(e,t,a[r]);AddParentRow(e,t,a[r],i)}}function ClearDcRowArrays(e){for(var t=RowDcNo.length;t>=0;t--)RowDcNo[t]==e&&(RowDcNo.splice(t,1),DbRowNo.splice(t,1),ClientRowNo.splice(t,1))}function UpdateDcRowArrays(e,t,a,r){for(var i=!1,o=-1,l=0;l<RowDcNo.length;l++)if(RowDcNo[l]==e&&ClientRowNo[l]==t){o=l,i=!0;break}if(0==i&&"Add"==a){var n=GetLastDbRowNo(e);n=parseInt(n,10)+1,RowDcNo.push(e),DbRowNo.push(n),ClientRowNo.push(t)}else if(1==i&&"Delete"==a){var s=DbRowNo[o];RowDcNo.splice(o,1),DbRowNo.splice(o,1),ClientRowNo.splice(o,1),ResetDbRowNo(e,s,a,r)}}function ResetDbRowNo(e,t,a,r){for(var i=0;i<RowDcNo.length;i++)if(RowDcNo[i]==e){var o=parseInt(DbRowNo[i],10);if(o>t){if("Delete"==a){if(o-=1,-1==r||r==undefined){var l=ClientRowNo[i],n=$j("#lblSlNo"+l+"F"+e);n.length>0&&n.text(o)}}else o+=1;DbRowNo[i]=o}}}function GetLastDbRowNo(e){for(var t=!1,a=new Array,r="0",i=0;i<RowDcNo.length;i++)RowDcNo[i].toString()==e&&(t=!0,a.push(DbRowNo[i].toString()));if(0==t)r="0";else{r=a.getMaxVal()}return parseInt(r,10)}function GetDcClientRows(e){for(var t=new Array,a=0;a<RowDcNo.length;a++)RowDcNo[a]==e&&t.push(ClientRowNo[a]);return t}function IsDcGrid(e){for(var t=!1,a=0;a<DCFrameNo.length;a++)if(DCFrameNo[a]==e){t="False"!=DCIsGrid[a];break}return t}function IsDcVisible(e){var t="#DivFrame"+e;return $j(t).length>0||(t="#divDc"+e,$j(t).length>0)}function IsDcPopGrid(e){for(var t=!1,a=0;a<DCFrameNo.length;a++)if(DCFrameNo[a]==e&&"true"==DCIsPopGrid[a].toString().toLowerCase()){t=!0;break}return t}function IsDcParentGrid(e){for(var t=!1,a=0;a<PopParentDCs.length;a++)if(PopParentDCs[a]==e){t=!0;break}return t}function IsParentField(e,t){if(TstructHasPop)for(var a=0;a<PopParentDCs.length;a++)if(PopParentDCs[a]==t)for(var r=PopParentFlds[a].split(","),i=0;i<r.length;i++)if(r[i]==e)return!0;return!1}function IsParentDc(e){var t=!1;if(TstructHasPop)for(var a=0;a<PopParentDCs.length;a++)if(PopParentDCs[a]==e){t=!0;break}return t}function RegisterActiveRow(e,t){AxActiveRowNo=GetDbRowNo(e,t);for(var a=!1,r=0;r<Parameters.length;r++){"activerow"==Parameters[r].split("~")[0]&&(Parameters[r]="activerow~"+AxActiveRowNo,a=!0)}a||(Parameters[Parameters.length]="activerow~"+AxActiveRowNo)}function GetRowNoHelper(e){return 1==(e=e.toString()).length?e="00"+e:2==e.length&&(e="0"+e),e}function GetChangedRows(){var e,t="";if("0"==(e=$j("#recordid000F0").val())||""==e)for(var a=0;a<DCName.length;a++){"true"!=DCIsGrid[a].toString().toLowerCase()||!FillGridExecOnSave.includes(DCName[a].toString())&&"False"==DCHasDataRows[a]||(""!=t?t+="~"+DCName[a].toString()+"-*":t=DCName[a].toString()+"-*")}else for(var r=0;r<ChangedDcs.length;r++)""!=t?t+="~"+ChangedDcs[r].toString()+"-"+ChangedDcRows[r]:t=ChangedDcs[r].toString()+"-"+ChangedDcRows[r];return t}function GetDeletedRows(){for(var e="",t=0;t<DeletedDCs.length;t++)""!=e?e+="~"+DeletedDCs[t].toString()+"-"+DeletedRows[t]:e=DeletedDCs[t].toString()+"-"+DeletedRows[t];return e}function IsFGParamChanged(e){for(var t=!1,a=0;a<FillParamFld.length;a++)for(var r=FillParamFld[a].split(","),i=0;i<r.length;i++)if(""!=r[i]&&r[i]==e){t=!0;break}if(t){var o=!1;for(k=0;k<r.length;k++){var l=GetDcNo(r[k]);if(""!=r[k])if(0==IsGridField(r[k])){GetFieldValue(r[k]+"000F"+l);if(0==(o=CheckEmptyValue(r[k]+"000F"+l)))break}else{var n=FillParamDCs[k];if(l==n){var s=GetClientRowNo(AxActiveRowNo,n),d=r[k]+s+"F"+l;GetFieldValue(d);if(0==(o=CheckEmptyValue(d)))break}else{var c=0;c=GetDcRowCount(l),c=parseInt(c,10);for(var p=1;p<c;p++){s=GetRowNoHelper(p),GetFieldValue(r[k]+s+"F"+l);if(0==(o=CheckEmptyValue(r[k]+s+"F"+l)))break}}}}return o}return!1}function IsFGParamChangedPerf(e,t,a){for(var r=!1,i=!0,o=0,l=t.substring(2,t.length),n=0;n<FillParamDCs.length;n++)if(t==FillParamDCs[n]){o=n;break}for(var s=FillParamFld[o].split(","),d=0;d<s.length;d++)if(""!=s[d]){if(s[d]==e){r=!0;break}var c=GetDcNo(s[d]);u=0==(f=IsGridField(s[d]))?$j("#"+s[d]+"000F"+c):$j("#"+s[d]+"001F"+c),c<=l?r=!0:u.length>0?(EvaluateAxFunction(s[d],a),r=!0):0==u.length&&(EvaluateAxFunctionPerf(s[d],a),i=!1)}if(r){var p=!1;for(k=0;k<s.length;k++){var u,f;c=GetDcNo(s[k]);if(u=0==(f=IsGridField(s[k]))?$j("#"+s[k]+"000F"+c):$j("#"+s[k]+"001F"+c),""!=s[k]&&u.length>0)if(0==f){GetFieldValue(s[k]+"000F"+c);if(0==(p=CheckEmptyValuePerf(s[k]+"000F"+c)))break}else{var g=FillParamDCs[k];if(c==g){var m=GetClientRowNo(AxActiveRowNo,g),h=s[k]+m+"F"+c;GetFieldValue(h);if(0==(p=CheckEmptyValuePerf(h)))break}else{var v=0;v=GetDcRowCount(c),v=parseInt(v,10);for(var w=1;w<v;w++){m=GetRowNoHelper(w),GetFieldValue(s[k]+m+"F"+c);if(0==(p=CheckEmptyValuePerf(s[k]+m+"F"+c)))break}}}else p=!0}return p}return 0==i}function CheckEmptyValuePerf(e){var t=!1,a=GetFieldType(e,GetFieldIndex(GetFieldsName(e))),r=GetFieldsName(e).toUpperCase();if(""!=GetFieldValue(e))t=!0;else if(""==GetFieldValue(e)&&void 0!==a&&"numeric"==a.toLowerCase()){SetFieldValue(e,0);var i=GetFieldsDcNo(e),o=$j.inArray(i,DCFrameNo),l=GetDbRowNo(GetFieldsRowNo(e),i);$("#"+e).length>0&&IsDcGrid(i)&&"False"==DCHasDataRows[o]&&UpdateAxpRowVldInArray(i,"001",1),$("#"+e).length>0&&UpdateFieldArray(e,l,0,"parent",""),t=!0}else CheckGlobalVars(CheckSpecialCharInGlobalVar(r))!=r&&(t=!0);return t}function CheckEmptyValue(e){for(var t=!1,a=0;a<FldsAssigned.length;a++)if(FldsAssigned[a].toLowerCase()==e.toLowerCase()){t=!0;break}if(0==t){var r=GetFieldType(e,GetFieldIndex(GetFieldsName(e))),i=GetFieldsName(e).toUpperCase();if(""!=GetFieldValue(e))t=!0;else if(""==GetFieldValue(e)&&void 0!==r&&"numeric"==r.toLowerCase()){SetFieldValue(e,0);var o=GetFieldsDcNo(e),l=GetDbRowNo(GetFieldsRowNo(e),o);$("#"+e).length>0&&UpdateFieldArray(e,l,0,"parent",""),t=!0}else t=CheckGlobalVars(CheckSpecialCharInGlobalVar(i))!=i}return t}function UpdateAssignedFld(e){-1==$j.inArray(e,FldsAssigned)&&FldsAssigned.push(e)}function ISBound(e,t){new Array;var a=!0,r="";t=GetRowNoHelper(t);var i=GetDcNo(e),o=GetFieldIndex(e);if(-1!=o){var l=FldParents[o].toString().split(",");if(""!=l)for(var n=0;n<l.length;n++){var s=GetDcNo(l[n]);IsParDcgrid=IsGridField(l[n]);var d=GetExactFieldName(l[n]);isFldOldField=!1;var c="";if("old"==d.substring(0,3)&&(isFldOldField=!0),s==i||0==IsParDcgrid){if(r=0==IsParDcgrid?d+"000F"+s:d+t+"F"+s,isFldOldField&&(c="#"+r.substring(3),$j(c).length>0&&(UpdateAssignedFld(r),isFldOldField=!1)),!CheckEmptyValue(r)){a=!1;break}}else for(var p=GetDcClientRows(s),u=IsDcPopGrid(i),f=0;f<p.length;f++){if(r=d+p[f]+"F"+s,!u||parseInt(p[f],10)==AxActivePRow)if(isFldOldField&&(c="#"+r.substring(3),$j(c).length>0&&(UpdateAssignedFld(r),isFldOldField=!1)),!CheckEmptyValue(r)){a=!1;break}}if(!a)break}}return a}function ISBoundPerf(e,t){new Array;var a=!0,r="";t=GetRowNoHelper(t);var i=GetDcNo(e),o=GetFieldIndex(e);if(-1!=o){var l="";if(""!=ClientFldParents[o]&&(l=ClientFldParents[o].toString().split(",")),""!=l)for(var n=0;n<l.length;n++)if(e!=l[n]){var s=GetDcNo(l[n]);IsParDcgrid=IsGridField(l[n]);var d=GetExactFieldName(l[n]);isFldOldField=!1;var c="";if("old"==d.substring(0,3)&&(isFldOldField=!0),s==i||0==IsParDcgrid){r=0==IsParDcgrid?d+"000F"+s:d+t+"F"+s,isFldOldField&&(c="#"+r.substring(3),$j(c).length>0&&(UpdateAssignedFld(r),isFldOldField=!1));var p=GetFieldIndex(d);if(!("fill"==FMoe[p].toString().toLowerCase()||CheckEmptyValuePerf(r))){depNotBoundFld=d,a=!1;break}}else for(var u=GetDcClientRows(s),f=IsDcPopGrid(i),g=0;g<u.length;g++)if(r=d+u[g]+"F"+s,!f||parseInt(u[g],10)==AxActivePRow){isFldOldField&&(c="#"+r.substring(3),$j(c).length>0&&(UpdateAssignedFld(r),isFldOldField=!1));p=GetFieldIndex(d);if(!("fill"==FMoe[p].toString().toLowerCase()||CheckEmptyValuePerf(r))){depNotBoundFld=d,a=!1;break}}if(!a)break}}return a}function ISBoundNew(e,t){new Array;var a="",r=GetRowNoHelper(GetFieldsRowNo(t)),i=GetDcNo(e),o=GetFieldIndex(e);if(-1!=o){var l=FldParents[o].toString().split(",");if(""!=l)for(var n=0;n<l.length;n++){var s=GetDcNo(l[n]);IsParDcgrid=IsGridField(l[n]);var d=GetExactFieldName(l[n]);if(s==i||0==IsParDcgrid)a+=d+"~"+GetFieldValue(0==IsParDcgrid?d+"000F"+s:d+r+"F"+s)+"~~";else for(var c=GetDcClientRows(s),p=(IsDcPopGrid(i),0);p<c.length;p++)a+=d+"~"+GetFieldValue(d+c[p]+"F"+s)+"~~"}}return a}function ISBoundAutoCom(e,t){new Array;var a="",r=GetRowNoHelper(GetFieldsRowNo(t)),i=GetDcNo(e),o=GetFieldIndex(e);if(-1!=o){var l="";if(""!=ClientFldParents[o]&&(l=ClientFldParents[o].toString().split(",")),""!=l)for(var n=0;n<l.length;n++)if(e!=l[n]){var s=GetDcNo(l[n]);IsParDcgrid=IsGridField(l[n]);var d=GetExactFieldName(l[n]);if(s==i||0==IsParDcgrid)a+=d+"~"+GetFieldValue(0==IsParDcgrid?d+"000F"+s:d+r+"F"+s)+"~~";else for(var c=GetDcClientRows(s),p=(IsDcPopGrid(i),0);p<c.length;p++)a+=d+"~"+GetFieldValue(d+c[p]+"F"+s)+"~~"}}return a}function IsGridField(e){return IsDcGrid(GetDcNo(e))}function GetDcNo(e){var t="0";if(""!=e&&e!=undefined)for(var a=0;a<FNames.length;a++)if(FNames[a].toLowerCase()==e.toLowerCase()){t=FldFrameNo[a];break}return t}function GetVisibleDCs(){var e=0,t="";for(e=0;e<VisibleDCs.length;e++)""!=VisibleDCs[e]&&(t+=0==e?"dc"+VisibleDCs[e].toString():",dc"+VisibleDCs[e].toString());return t}function GetOpenTabDcs(){var e=0,t="",a="",r="";for(t=GetVisibleDCs(),e=0;e<TabDCs.length;e++)"0"==TabDCStatus[e]?(a="dc"+TabDCs[e].toString()+",",r="dc"+TabDCs[e].toString(),-1!=t.indexOf(a)?t.replace(a,""):-1!=t.indexOf(r)&&t.replace(r,"")):-1==t.indexOf("dc"+TabDCs[e].toString())&&(t+=",dc"+TabDCs[e].toString());return t}function GetFieldCaption(e,t){if(t==undefined){var a=GetFieldsName(e);t=$j.inArray(a,FNames)}else if(-1==t)return"";return FCaption[t]}function CheckAlphaNumeric(e){return new RegExp("^[a-zA-Z0-9]()*.+={};&^%$#@!~':></?-_/,|").test(e)}function CheckAlpha(e){return new RegExp("^[a-zA-Z ]+$").test(e)}function CheckIsNumeric(e){return new RegExp("^[0-9]+$").test(e)}function CheckAxpEmail(e){return new RegExp("^[a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+.[a-zA-Z]{2,4}$").test(e)}function UpdateChangedRows(e,t){var a=GetFieldsDcNo(e),r=(GetFieldsRowNo(e),"dc"+a),i=-1,o=!1;if(IsDcGrid(a))if(-1!=(i=$j.inArray(r,ChangedDcs))){for(var l=ChangedDcRows[i].toString().split(","),n=0;n<l.length;n++)if(l[n]==t){o=!0;break}o||(ChangedDcRows[i]=ChangedDcRows[i]+","+t)}else ChangedDcs.push(r),ChangedDcRows.push(t)}function UpdateFieldArray(e,t,a,r,i){"string"!=typeof a&&(a=a.toString()),a.indexOf("♦")<0&&e.indexOf("axp__isGrdVld")<0&&"popup"!=r&&(navValidator=!1,GetGridFields(GetFieldsDcNo(e)).indexOf(GetFieldsName(e))>-1&&IsGridField(GetFieldsName(e))&&(gridEditValidator=!1)),"axpcurrencydec"==GetFieldsName(e).toLowerCase()&&UpdateAxpCurrDec(a,i),IsFormDirty||i!=undefined||SetFormDirty(!0),"popup"!=r&&UpdateChangedRows(e,t);var o="";if("select-one"==$j("#"+e).prop("type"))$j("#"+e).hasClass("fldFromSelect")?(o=$j("#"+e).find("option:selected").val())!=undefined&&""!=o&&(a=o):(o=$j("#"+e).find("option:selected").val())!=undefined&&""!=o&&(a=o+"¿"+a);else if("textarea"==$j("#"+e).prop("type")){var l=a.replace(new RegExp("<br>","g"),"¿");a=l=l.replace(new RegExp("¿","g"),"\n")}if("popup"!=r){var n=GetFieldsDcNo(e),s=$j.inArray(n,DCFrameNo);-1!=s&&"True"==DCIsGrid[s].toString()&&(DCHasDataRows[s]="True")}var d=GetFieldValue(e),c=!1,p="-1",u="0";if(0===e.indexOf("dc",0)&&IsDcGrid(e.substring(2))||$("#sp"+n+"R"+GetFieldsRowNo(e)+"F"+n).hasClass("editWrapTr")&&"CustomAdd"!=i&&0===!e.indexOf(axpIsRowValid,0)){c=!0;0===e.indexOf("dc",0)&&-1==t?(p=e.substring(2),u=GetRowNoHelper(a.substring(a.indexOf("~")+1,a.length-1))):(p=n,t,u=GetFieldsRowNo(e))}a==undefined&&(a="");var f=!1;if("popup"==r)if(fldNewNameArr.length>0){for(var g=0;g<fldNewNameArr.length;g++)if(fldNewNameArr[g]==e){fldNewValueArr[g]=a,f=!0;break}f||(fldNewNameArr.push(e),fldNewDbRowNo.push(t),fldNewValueArr.push(a))}else fldNewNameArr.push(e),fldNewDbRowNo.push(t),fldNewValueArr.push(a);else if(ChangedFields.length>0){var m=$j.inArray(e,ChangedFields);-1!=m&&(ChangedFieldValues[m]=a,ChangedFieldOldValues[m]=d,f=!0),f||(ChangedFields.push(e),ChangedFieldDbRowNo.push(t),ChangedFieldValues.push(a),ChangedFieldOldValues.push(d),c&&"LoadData"!=i&&"GetDep"!=i&&"FillGrid"!=i&&"Action"!=i&&UpdateAxpRowVldInArray(p,u,GetDbRowNo(u,p)))}else ChangedFields.push(e),ChangedFieldDbRowNo.push(t),ChangedFieldValues.push(a),ChangedFieldOldValues.push(d),c&&"LoadData"!=i&&"GetDep"!=i&&"FillGrid"!=i&&"Action"!=i&&UpdateAxpRowVldInArray(p,u,GetDbRowNo(u,p))}function UpdateAxpRowVldInArray(e,t,a){UpdateFieldArray(axpIsRowValid+e+t+"F"+e,a,"false","parent","CustomAdd")}function ShowDialog(title,message,messageType,messageVars,functionality,hold,isLandingPageSuccess){var alertsTimeout=parseInt(callParentNew("alertsTimeout"),10)||3e3,errorEnable=JSON.parse(callParentNew("errorEnable")||!1),errorTimeout=parseInt(callParentNew("errorTimeout"),10)||0;AxWaitCursor(!1);try{if("client"==messageType&&(message="undefined"==typeof LoadglLangauge?eval(callParent("LoadglLangauge("+message+")","function")):LoadglLangauge(message)),messageVars!=undefined&&""!=messageVars)for(var messageVarArray=messageVars.split("^♠^"),i=0;i<messageVarArray.length;i++)message=message.replace("{"+i+"}",messageVarArray[i])}catch(ex){}functionality==undefined&&(functionality="");for(var index=message.indexOf("^^dq");-1!=index;)message=message.replace("^^dq",'"'),index=message.indexOf("^^dq");msgType=title,"success"==title&&"reloadaftersave"==axCustomTstAction.toLowerCase()&&disableBtnBeforeReload();var shMessage="",wrapperClassForApp="";switch(-1==parent.document.location.href.indexOf("mainnew.aspx")&&-1==parent.document.location.href.indexOf("axmain.aspx")||(wrapperClassForApp="shortMessageWrapperInApp"),shMessage="<div class='shortMessageWrapper "+wrapperClassForApp+" animated pulse'>",title){case"success":shMessage+='<div class="alert agc-alert-wrapper alert-success agc-alert-success">',1!=hold&&"True"!=hold||(shMessage+='<a href="javascript:void(0)" id="btnMsgClose" class="close agc-close-btn" data-dismiss="alert" aria-label="close"  onclick="HideDialog();">&times;</a>'),shMessage+='<span class="fa fa-check agc-alert-icon-wrapper"></span>';break;case"warning":"undefined"!=typeof actionCallbackFlag&&(actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"})),shMessage+='<div class="alert agc-alert-wrapper alert-warning agc-alert-warning">',1!=hold&&"True"!=hold||(shMessage+='<a href="javascript:void(0)" id="btnMsgClose" class="close agc-close-btn" data-dismiss="alert" aria-label="close"  onclick="HideDialog();">&times;</a>'),shMessage+='<span class="fa fa-exclamation-triangle agc-alert-icon-wrapper"></span>';break;default:case"error":case"failure":"undefined"!=typeof actionCallbackFlag&&(actionCallbackFlag=actionCallFlag,$("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"})),shMessage+='<div class="alert agc-alert-wrapper alert-danger agc-alert-error">',shMessage+='<a href="javascript:void(0)" id="btnMsgClose" class="close agc-close-btn" data-dismiss="alert" aria-label="close"  onclick="HideDialog();">&times;</a>',shMessage+='<span class="fa fa-remove agc-alert-icon-wrapper"></span>',hold==undefined&&(hold=!0);break;case"info":shMessage+='<div class="alert agc-alert-wrapper alert-info agc-alert-info">',shMessage+='<a href="javascript:void(0)" id="btnMsgClose" class="close agc-close-btn" data-dismiss="alert" aria-label="close"  onclick="HideDialog();">&times;</a>',shMessage+='<span class="fa fa-info agc-alert-icon-wrapper"></span>'}shMessage+=message,shMessage+="</div>",shMessage+="</div>";try{var _appGlobalVarsObject6,_appGlobalVarsObject7;try{var _appGlobalVarsObject,_appGlobalVarsObject$,_appGlobalVarsObject2,_appGlobalVarsObject3,_appGlobalVarsObject4,_appGlobalVarsObject5;if(((null===(_appGlobalVarsObject=appGlobalVarsObject)||void 0===_appGlobalVarsObject?void 0:null===(_appGlobalVarsObject$=_appGlobalVarsObject._CONSTANTS)||void 0===_appGlobalVarsObject$?void 0:_appGlobalVarsObject$.window)||window).$("#toast-container .toast:last").is(".toast-error"))((null===(_appGlobalVarsObject2=appGlobalVarsObject)||void 0===_appGlobalVarsObject2?void 0:null===(_appGlobalVarsObject3=_appGlobalVarsObject2._CONSTANTS)||void 0===_appGlobalVarsObject3?void 0:_appGlobalVarsObject3.window)||window).toastr.clear(((null===(_appGlobalVarsObject4=appGlobalVarsObject)||void 0===_appGlobalVarsObject4?void 0:null===(_appGlobalVarsObject5=_appGlobalVarsObject4._CONSTANTS)||void 0===_appGlobalVarsObject5?void 0:_appGlobalVarsObject5.window)||window).$("#toast-container .toast:last"))}catch(error){}return void((null===(_appGlobalVarsObject6=appGlobalVarsObject)||void 0===_appGlobalVarsObject6?void 0:null===(_appGlobalVarsObject7=_appGlobalVarsObject6._CONSTANTS)||void 0===_appGlobalVarsObject7?void 0:_appGlobalVarsObject7.window)||window).toastr[["success","warning","info"].indexOf(title)>-1?title:"error"](message,"",{tapToDismiss:!1,newestOnTop:!1,preventDuplicates:!0,positionClass:"toast-top-center",get timeOut(){if("failure"==title||"error"==title){if(1==errorEnable&&errorTimeout>0)return errorTimeout}else if(0==hold||"False"==hold||hold==undefined)return alertsTimeout;return 0},get extendedTimeOut(){return this.timeOut},get closeButton(){return!(["success","warning"].indexOf(title)>-1)||(1==hold||"True"==hold)},onHidden:function(){if("failure"!=title&&"error"!=title||1==errorEnable&&errorTimeout>0){if(""!=functionality){var e=functionality.split("~");"load"==e[0]?window.location.href=e[1]:"reload"==e[0]?window.location.href=window.location.href:"function"==e[0]&&window.eval(e[1])}HideDialog()}}})}catch(ex){}$j("body").append(shMessage),0!=hold&&"False"!=hold&&hold!=undefined||setTimeout(function(){$j(".shortMessageWrapper").removeClass("animated pulse").addClass("animated fadeOut"),HideDialog()},alertsTimeout)}function ShowInfoDialog(e){AxWaitCursor(!1);var t,a=$j("#dvMessage");a.show(),t="ARABIC"==gl_language?"&nbsp;&nbsp;"+e+"&nbsp;&nbsp;":"<table><tr><td>"+e+"</td></tr></table>",a.html(t),"ARABIC"==gl_language?a.removeClass().addClass("AXinfo arabicinfo"):a.removeClass().addClass("AXinfo")}function HideDialog(){var alertsTimeout=parseInt(callParentNew("alertsTimeout"),10)||3e3,listViewNavigating=!1,presentFrameObj=$(window.frameElement);$j(".shortMessageWrapper").removeClass("animated pulse").addClass("animated fadeOut"),setTimeout(function(){$j(".shortMessageWrapper").remove()},alertsTimeout),window.status="";var url="",recPos=findGetParameter("recPos"),Isaxpiframe=callParentNew("axpiframe","id").src;if("success"==msgType.toString().toLowerCase()){var lastIndexOfAxPop=document.URL.lastIndexOf("AxPop");if("true"==axpRefSelect&&""!=axpRefSelectID&&""!=axpSrcSelectID&&""!=axRefreshSelectType)return eval(callParent("isSuccessAlertInPopUp")+"= false"),void tsddlRefreshSelect();if(-1!=lastIndexOfAxPop&&"t"==document.URL.substr(lastIndexOfAxPop+6,1).toLowerCase()&&""==lvNavDetails){if(eval(callParent("isSuccessAlertInPopUp")+"= true"),"axcal"==transid)callParentNew("closeModalDialog()","function");else{$j("#axpertPopupWrapper .remodal-close",window.parent.document).click();try{callParentNew("loadPopUpPage","id").dispatchEvent(new CustomEvent("close"))}catch(ex){}}eval(callParent("closeFrame()","function"))}if("Tstruct"==document.title){url=ApplySaveDirective(axCustomTstAction),""==url&&(""==lvNavDetails?url="tstruct.aspx?transid="+tst+"&openerIV=".concat("undefined"!=typeof isListView?iName:tst,"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"):(navValidator=!0,listViewNavigating=!0,"prev"==lvNavDetails?($("#lnkPrev").removeClass("disabled").prop("disabled",!1),$("#lnkNext").removeClass("disabled").prop("disabled",!1),lnkPrevClick()):"next"==lvNavDetails&&($("#lnkPrev").removeClass("disabled").prop("disabled",!1),$("#lnkNext").removeClass("disabled").prop("disabled",!1),lnkNextClick()))),""!=btnSaveContVal&&"ax_savecontinue"==axFooAction?url="i"==btnSaveContVal.substring(0,1)?"iview.aspx?ivname="+btnSaveContVal.substring(1):"tstruct.aspx?transid="+btnSaveContVal.substring(1)+"&openerIV=".concat("undefined"!=typeof isListView?iName:btnSaveContVal.substring(1),"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"):"ax_savenew"!=axFooAction&&"ax_savesend"!=axFooAction||(url="tstruct.aspx?transid="+tst+"&recordid="+axSaveRecId+"&openerIV=".concat("undefined"!=typeof isListView?iName:tst,"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"));var customUrl=url;try{customUrl=AxCustomRedirect(url)}catch(ex){}if(customUrl==undefined&&(customUrl=url),"true"==fromHyperLink.toString().toLowerCase()&&(customUrl=customUrl+"&AxHypTstRefresh="+fromHyperLink),AxPopup.toLowerCase().indexOf("true")>-1){var left=screen.width/2-200,top=screen.height/2-100,windobj;try{windobj=window.open(customUrl,"PopUp","width=550,height=300,scrollbars=yes,resizable=yes,top="+top+",left="+left)}catch(ex){showAlertDialog("warning",eval(callParent("lcm[356]")))}}else listViewNavigating||(-1!=iframeindex?customUrl.toLowerCase().indexOf("tstruct.aspx?")>-1?"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(customUrl):parent.currAxpFrmUrl=customUrl:customUrl.toLowerCase().indexOf("tstruct.aspx?")>-1?"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(customUrl):window.document.location.href=customUrl)}else if("Load Tstruct"==document.title)if(0!=recordid){if(url=ApplySaveDirective(axCustomTstAction),""==url)if(""==lvNavDetails){navValidator=!0;var url="tstruct.aspx?transid="+tst+"&recordid="+recordid+"&recPos="+recPos+"&openerIV=".concat("undefined"!=typeof isListView?iName:tst,"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false")}else navValidator=!0,listViewNavigating=!0,"prev"==lvNavDetails?($("#lnkPrev").removeClass("disabled").prop("disabled",!1),$("#lnkNext").removeClass("disabled").prop("disabled",!1),lnkPrevClick()):"next"==lvNavDetails&&($("#lnkPrev").removeClass("disabled").prop("disabled",!1),$("#lnkNext").removeClass("disabled").prop("disabled",!1),lnkNextClick());""!=btnSaveContVal&&"ax_savecontinue"==axFooAction?url="i"==btnSaveContVal.substring(0,1)?"iview.aspx?ivname="+btnSaveContVal.substring(1):"tstruct.aspx?transid="+btnSaveContVal.substring(1)+"&openerIV=".concat("undefined"!=typeof isListView?iName:btnSaveContVal.substring(1),"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"):"ax_savereset"==axFooAction&&(url="tstruct.aspx?transid="+tst+"&openerIV=".concat("undefined"!=typeof isListView?iName:tst,"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"));var customUrl=url;try{customUrl=AxCustomRedirect(url)}catch(ex){}if(customUrl==undefined&&(customUrl=url),"true"==fromHyperLink.toString().toLowerCase()&&(customUrl=customUrl+"&AxHypTstRefresh="+fromHyperLink),AxPopup.toLowerCase().indexOf("true")>-1){var left=screen.width/2-200,top=screen.height/2-100,windobj;try{windobj=window.open(customUrl,"PopUp","width=550,height=300,scrollbars=yes,resizable=yes,top="+top+",left="+left)}catch(ex){showAlertDialog("warning",eval(callParent("lcm[356]")))}listViewNavigating||(-1!=iframeindex?customUrl.toLowerCase().indexOf("tstruct.aspx?")>-1?"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(customUrl):parent.currAxpFrmUrl=customUrl:customUrl.toLowerCase().indexOf("tstruct.aspx?")>-1?"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(customUrl):window.document.location.href=customUrl)}else listViewNavigating||(-1!=iframeindex?customUrl.toLowerCase().indexOf("tstruct.aspx?")>-1?"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(customUrl):parent.currAxpFrmUrl=customUrl:customUrl.toLowerCase().indexOf("tstruct.aspx?")>-1?"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(customUrl):window.document.location.href=customUrl)}else $("#icons,#btnSaveTst,.BottomToolbarBar a,.wizardNextPrevWrapper").css({"pointer-events":"auto"});else if("User Access"==document.title||"User Access Iview"==document.title)window.close();else if("Load TStruct with QS"==document.title||"Load Tstruct"==document.title){var saveDirUrl;if(""==btnSaveContVal||"ax_savecontinue"!=axFooAction||listViewNavigating)if("ax_savenew"!=axFooAction&&"ax_savesend"!=axFooAction||listViewNavigating)if(window.opener&&(window.opener.document.title="Iview")){var popupName=window.name;null!=popupName&&popupName!=undefined&&-1!=popupName.indexOf("Pop")&&(window.close(),window.opener&&!window.opener.closed&&window.opener.document.getElementById("button1")&&(window.opener.document.getElementById("hdnIvRefresh").value="true",window.opener.document.getElementById("button1").click()))}else{var _url="";saveDirUrl=ApplySaveDirective(axCustomTstAction),""!=saveDirUrl?(_url=saveDirUrl,"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(_url)):(_url="../aspx/tstruct.aspx?transid="+tst+"&openerIV=".concat("undefined"!=typeof isListView?iName:tst,"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"),listViewNavigating||(0!=recordid&&(_url+="&recordid="+axSaveRecId),-1!=Isaxpiframe.indexOf("axpfrm")&&(_url+="&axpfrm=t"),"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(_url)))}else url="tstruct.aspx?transid="+tst+"&recordid="+axSaveRecId+"&openerIV=".concat("undefined"!=typeof isListView?iName:tst,"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"),"true"==fromHyperLink.toString().toLowerCase()?window.document.location.href=url+"&AxHypTstRefresh="+fromHyperLink:"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(url);else url="i"==btnSaveContVal.substring(0,1)?"iview.aspx?ivname="+btnSaveContVal.substring(1):"tstruct.aspx?transid="+btnSaveContVal.substring(1)+"&openerIV=".concat("undefined"!=typeof isListView?iName:btnSaveContVal.substring(1),"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"),"true"==fromHyperLink.toString().toLowerCase()?window.document.location.href=url+"&AxHypTstRefresh="+fromHyperLink:url.toLowerCase().indexOf("tstruct.aspx?")>-1?"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(url):window.document.location.href=url;if(AxPopup.toLowerCase().indexOf("true")>-1){var left=screen.width/2-200,top=screen.height/2-100,windobj;try{windobj=window.open(url,"PopUp","width=550,height=300,scrollbars=yes,resizable=yes,top="+top+",left="+left)}catch(ex){showAlertDialog("warning",eval(callParent("lcm[356]")))}}else""==url||listViewNavigating||"axpiframe"!==presentFrameObj.attr("id")&&AvoidPostBackAfterSave(url)}window.opener?window.opener.parent.disableNavigation=!0:window.parent.disableNavigation=!0}}function ApplySaveDirective(e){var t="";return e!=undefined&&""!=e&&("reloadaftersave"==e.toLowerCase()?t="tstruct.aspx?transid="+tst+"&recordid="+axSaveRecId+"&axp_IsSaveUrl=true"+"&openerIV=".concat("undefined"!=typeof isListView?iName:tst,"&isIV=").concat("undefined"!=typeof isListView?!isListView:"false"):(e.toLowerCase().indexOf("transid")>-1||e.toLowerCase().indexOf("ivname")>-1)&&(t=GetUrlParams(t=e))),t}function AvoidPostBackAfterSave(e){AxWaitCursor(!0),ShowDimmer(!0);var t="",a="";""!=e&&e.split("&").forEach(function(e){e.indexOf("recordid=")>-1?t=e.split("=")[1]:a+=e+"♠"}),""!=t&&"0"!=t?GetLoadData(t,a):GetFormLoadData(a)}function GetUrlParams(e){var t,a,r,i,o,l=e.split("&"),n="";return e=l[0],l.length>1&&$j.each(l,function(s,d){i=l[s],(o=i.indexOf(":"))>-1&&(t=i.substring(o+1),n=i.substring(0,o),a=GetActualFieldName(t),r=GetFieldValue(a),e=e+"&"+n+r)}),e}function Mouseoutstyle(e){e.className="onmouseout"}function GetDcRowCount(e){var t=0;return $j("#hdnRCntDc"+e).length>0&&(t=$j("#hdnRCntDc"+e).val()),""!=t&&(t=parseInt(t,10)),t}function SetRowCount(e,t,a,r){if($j("#hdnRCntDc"+e).length>0){var i=$("#gridHd"+e+" tbody tr").length;"d"==a&&i>0?$j("#hdnRCntDc"+e).val(i):$j("#hdnRCntDc"+e).val(i+1)}"d"!=a&&(a!=undefined?UpdateFieldArray("dc"+e,"-1","dc"+e+"~"+t+"♦"+a,"parent",r):UpdateFieldArray("dc"+e,"-1","dc"+e+"~"+t+"♦","parent",r))}function GetSerialNoCnt(e){var t=$j("#hdnSlNoCnt"+e),a="1";return t.length>0&&(a=t.val()),a}function SetSerialNoCnt(e,t){var a=$j("#hdnSlNoCnt"+e);a.length>0&&a.val(t)}function GetActualFieldName(e){for(var t="",a=0;a<FNames.length&&FNames[a]!=e;a++);var r=parseInt(FldFrameNo[a],10),i=0;for(i=0;i<DCFrameNo.length&&DCFrameNo[i]!=r;i++);if("True"==DCIsGrid[i]){var o=0;if(o=GetDcRowCount(r),(o=parseInt(o,10))>0)for(var l=1;l<o;l++){var n=e+GetRowNoHelper(l)+"F"+r;""==t?t=n:t+=","+n}}else t=e+"000F"+r;return t}function ReadonlyWfButtons(){$j("#btntabapprove").prop("disabled","disabled"),$j("#btntabapprove").removeClass("enablewfbuttons").addClass("disablewfbuttons"),$j("#btntabreject").prop("disabled","disabled"),$j("#btntabreject").removeClass("enablewfbuttons").addClass("disablewfbuttons"),$j("#btntabreturn").prop("disabled","disabled"),$j("#btntabreturn").removeClass("enablewfbuttons").addClass("disablewfbuttons"),$j("#btntabreview").prop("disabled","disabled"),$j("#btntabreview").removeClass("enablewfbuttons").addClass("disablewfbuttons"),$j("#txtCommentWF").length>0&&($j("#txtCommentWF").prop("disabled","disabled"),$j("#txtCommentWF").css("cursor","default"))}function Readonlyform(){if(parseInt(TotalDCs,10)>0)for(var e=1;e<=parseInt(TotalDCs,10);e++)ShowingDc(e,"Disable")}function FadeImage(e,t){document.getElementById&&(obj=$j("#"+e),t<=100&&(t=30,SetOpacity(obj,t)))}function SetOpacity(e,t){t=100==t?99.999:t,e.css("opacity",t)}function GetExactFieldName(e){var t=0,a=-1;try{if(FLowerNames)for(t=0;t<FLowerNames.length;t++)if(FLowerNames[t]==e.toLowerCase()){a=t;break}}catch(r){}return-1==a?e:FNames[a].toString()}function GetGridFields(e){for(var t,a=new Array,r=0;r<FldDcRange.length;r++){var i=FldDcRange[r].split("~");if(i[0]==e){t=i[1].split(",");break}}if(void 0!==t)for(var o=parseInt(t[0].toString(),10),l=parseInt(t[1].toString(),10),n=o;n<=l;n++)a.push(FNames[n]);return a}function LimitText(e){var t=GetFieldsName(e[0].id),a=$j.inArray(t,FNames);if(-1!=a){var r=parseInt(FMaxLength[a],10);$j(e).val().length>r&&$j(e).val(e.val().substring(0,r))}}function SetFocusOnField(e,t){var a=$j("#"+t);try{a.length>0&&1!=a.prop("disabled")&&a.focus()}catch(r){}}function ValidateDate(e){return 1==AxDoBlur&&("  /  /"!=e.val()&&0==isDate(e.val())?(e.val(dateString),e.focus(),!1):(e.attr("title")==dateString&&""==e.val()&&e.val(dateString),!0))}function GetFieldProp(e,t){var a=FProps[e].toString();return"allowEmpty"==t?a.substring(1,2):"applyComma"==t?a.substring(0,1):"onlyPositive"==t?a.substring(3,4):"tabStop"==t?a.substring(4,5):a.substring(2,3)}function IsPickListField(e){var t=!1,a="img~"+e;return $j(".pickimg").each(function(){if($j(this).attr("id")==a&&!$j(this).hasClass("fastField"))return t=!0,!1}),!!t}function ClearComboBox(e,t,a){var r,i="",o=e.find("option:nth-child(2)").val(),l=e.find("option:nth-child(2)").text();r=$j.inArray(t,FNames),"True"!=FldsFrmLst[r]?(e.length>0&&("select-one"==e.attr("type")||"select-one"==e.prop("type"))&&(i="<option value=''>"+aXEmptyOption+"</option>"),o!=undefined&&l!=undefined&&-1!=l.indexOf("+ Add")&&-1!=o.indexOf("createPopup(")&&(i+='<option value="'+o+'">'+l+"</option>"),e.length>0&&("select-one"==e.attr("type")||"select-one"==e.prop("type"))&&e.html(i)):SetFieldValue(e.attr("id"),a)}function GetFieldIndex(e){var t=$j.inArray(e,FNames);return-1==t&&(t=$j.inArray(e.toLowerCase(),FLowerNames)),t}function AxWaitCursor(e){e?($j("body").css("cursor","wait"),srchDlg&&CloseSearchPop()):($j("body").css("cursor","arrow"),$j("body").css("cursor","default"))}function ChangeTheme(){var theme="";if(theme=eval(callParent("currentThemeColor")),""!=theme)$j("#themecss").attr("href","../App_Themes/"+theme+"/Stylesheet.min.css?v=23");else{var themeref="";window.opener&&(themeref=$j("#themecss",window.opener.document).attr("href"),""!=themeref&&$j("#themecss").attr("href",themeref)),parent.parent.document&&(themeref=$j("#themecss",parent.parent.document).attr("href"),""!=themeref&&$j("#themecss").attr("href",themeref)),""!=themeref&&themeref!=undefined||(themeref="../App_Themes/"+axTheme+"/Stylesheet.min.css?v=23",$j("#themecss").attr("href",themeref))}}var X=0,Y=0;function FindPosX(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetLeft,e=e.offsetParent;else e.x&&(t+=e.x);return t}function FindPosY(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;else e.y&&(t+=e.y);return t}function FindPos(){var e=document.getElementById("imgTsk");X=FindPosX(e),Y=FindPosY(e)}function ShowAndHideActDiv(e){var t=$j("#imgAct"),a=t.attr("alt");$j("#"+e).css("display","show"==a?"block":"none"),"hide"==a?(t.attr("alt","show"),t.attr("src","../AxpImages/icons/16x16/expandwt.png")):"show"==a&&(t.attr("alt","hide"),t.attr("src","../AxpImages/icons/16x16/collapsewt.png")),"Iview"==document.title?Adjustwin():($j("#divActContent").html($j("#dvActivityInfo").html()),$j("#divCustomAct").css("display","block"))}function GetFormatGridIndex(e){var t=-1,a=$j.inArray("dc"+e,DCName);-1!=a&&DcIsFormatGrid.length>a&&("true"==DcIsFormatGrid[a].toLowerCase()&&(t=a));return t}function UpdateSubTotalOnDelRow(e,t,a){for(var r=DcSubTotCols[e].toString().split(","),i=DcKeyColumns[e].toString(),o=0;o<r.length;o++){var l=GetFieldValue(i+a+"F"+t),n=GetSubTotLblValue("lblSt"+r[o]+l+t),s=GetFieldValue(r[o]+a+"F"+t);-1!=s.indexOf(",")&&(s=removeCommas(s)),""==s&&(s=0);var d=n-(s=parseFloat(s,10));SetSubTotLblValue(r[o],"lblSt"+r[o]+l+t,d)}}function GetFieldsOldValue(e){var t="",a=$j.inArray(e,ChangedFields);return-1!=a&&(t=ChangedFieldOldValues[a].toString()),""==t&&(t="0"),-1!=t.indexOf(",")&&(t=removeCommas(t)),t=parseFloat(t,10)}function GetRowIdx(e,t,a){var r="",i=0;return"header"==e?(r="hdr-"+t+"F"+a,$j("#gridDc"+a+" tbody tr.hdrRow").each(function(){if($j(this).attr("id")==r)return i=$j(this).index(),!1})):(r="subt-"+t+"F"+a,$j("#gridDc"+a+" tbody tr.stRow").each(function(){if($j(this).attr("id")==r)return i=$j(this).index(),!1})),i}function UpdateSubTotal(e,t,a,r){var i=GetFieldValue(r+t+"F"+a),o="lblSt"+e+i+a,l=GetSubTotLblValue(o),n=GetFieldValue(e+t+"F"+a);""!=n?(-1!=n.indexOf(",")&&(n=removeCommas(n)),n=parseFloat(n,10)):n=0;var s=FldOldValue;""!=s&&(-1!=s.indexOf(",")&&(s=removeCommas(s)),s=parseFloat(s,10)),SetSubTotLblValue(e,o,l=l-s+n)}function GetSubTotLblValue(e){var t=document.getElementById(e);if(t){var a=t.innerHTML;return-1!=a.toString().indexOf(",")&&(a=removeCommas(a)),a=parseFloat(a,10)}return 0}function SetSubTotLblValue(e,t,a){var r=document.getElementById(t);if(r){var i=GetFieldIndex(e),o=NumericFldOnBlur(a,i);r.innerHTML=o}}function GetTabContainer(){for(var e="",t=0;t<PagePositions.length;t++){if(-1!=PagePositions[t].indexOf(","))e=PagePositions[t].toString().split(",")[0]}return e}function UpdateFormatGridTotal(e,t,a,r){if(-1!=r){var i=DcSubTotCols[r].toString().split(",");if(-1!=$j.inArray(e,i)){var o=$j.inArray("dc"+t,DCName);UpdateSubTotal(e,a,t,DcKeyColumns[o].toString())}}}function GetFormatRowIndex(e,t,a,r,i){var o="";o="header"==r?"hdr-"+a+"F"+t:"subt-"+a+"F"+t;var l=-1;return i!=undefined&&(o=i),$j("#"+e+" tbody>tr").each(function(){if($j(this).attr("id")==o)return l=$j(this)[0].rowIndex,!1}),l}function IsOnlyFormatGridRow(e,t,a){var r=GetFieldValue(DcKeyColumns[a].toString()+t+"F"+e),i=GetFormatRowIndex("gridDc"+e,e,r,"header");return GetFormatRowIndex("gridDc"+e,e,r,"strow")-i==2||"1"==$j("#hdnRCntDc"+e).val()}function ResetFormatGridSlNo(e,t,a){var r=GetFieldValue(DcKeyColumns[a].toString()+t+"F"+e),i=GetFormatRowIndex("gridDc"+e,e,r,"strow");if(-1!=i){var o=$j("#lblSlNo"+t+"F"+e).text();o=parseInt(o,10);for(var l=GetFormatRowIndex("gridDc"+e,e,r,"data","sp"+e+"R"+t+"F"+e),n=o,s=l+=1;s<=i;s++){var d=$j("#gridDc"+e+" tbody>tr:eq("+s+")").attr("id"),c=d.substring(d.indexOf("R")+1,d.indexOf("F"));if(c!=t){var p="#lblSlNo"+c+"F"+e;(p=$j(p)).length>0&&(p.text(n),n+=1)}}}}function SetKeyColValue(e,t,a){var r=GetFormatGridIndex(e),i=DcKeyColumns[r].toString();SetFieldValue(i+t+"F"+e,a),UpdateFieldArray(i+t+"F"+e,GetDbRowNo(t,e),a,"parent"),UpdateAllFieldValues(i+t+"F"+e,a)}function DeleteGroup(deletedRow,dcNo,keyColValue){ShowDimmer("true");var cutMsg=eval(callParent("lcm[65]")),glType=eval(callParent("gllangType")),isRTL=!1;isRTL="ar"==glType;var DeleteGroupCB=$.confirm({theme:"modern",title:eval(callParent("lcm[155]")),onContentReady:function(){disableBackDrop("bind")},backgroundDismiss:"false",escapeKey:"buttonB",content:cutMsg,rtl:isRTL,buttons:{buttonA:{text:eval(callParent("lcm[164]")),btnClass:"btn btn-primary",action:function(){DeleteGroupCB.close(),DeleteGroupAfterConfirm()}},buttonB:{text:eval(callParent("lcm[192]")),btnClass:"btn btn-bg-light btn-color-danger btn-active-light-danger",action:function(){disableBackDrop("destroy")}}}});function DeleteGroupAfterConfirm(){for(var e=!1,t=GetFormatRowIndex("gridDc"+dcNo,dcNo,keyColValue,"header"),a=GetFormatRowIndex("gridDc"+dcNo,dcNo,keyColValue,"strow"),r=GetGrpCntValue(dcNo,keyColValue),i=a;i>=t;i--)if(i==t||i==a)$j("#gridDc"+dcNo+" tbody>tr:eq("+i+")").remove();else{var o=$j("#gridDc"+dcNo+" tbody>tr:eq("+i+")").attr("id"),l=o.substring(o.indexOf("R")+1,o.indexOf("F"));DeleteGridRow(dcNo,l+"F"+dcNo,"group")}a-t==2&&(e=!0),e&&"cleared"==r?(DeletedDCRows=new Array,ShowDimmer(!1),AxWaitCursor(!1)):"undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?CallDeletePerfWS("dc"+dcNo):CallDeleteWS("dc"+dcNo)}}function SetFGSerialNo(e,t,a){var r=a.substring(a.indexOf("R")+1,a.indexOf("F")),i=$j("#lblSlNo"+r+"F"+e),o=$j("#lblSlNo"+t+"F"+e),l=parseInt(i.text(),10)+1;o.text(l)}function RemoveTstDataObj(){if(isSelfOpened)isSelfOpened=!1;else{""==tstDataId&&(tstDataId=$j("#hdnDataObjId").val());try{ASB.WebService.DeleteTstDataObj(tstDataId)}catch(e){}}}function CheckSessionTimeout(e){return e==SESSTIMEOUT?(window.opener&&!window.opener.closed?(window.close(),window.opener.location.reload()):parent.parent.location.href="Signin.aspx?msg=Your session is expired. Please login again.",!0):"Duplicate_session"==e?(CheckSuccCallBackValidate(),!0):e==appGlobalVarsObject._CONSTANTS.MALICIOUSNPUTDETECTED&&(showAlertDialog("error",appGlobalVarsObject.lcm[449]),AxWaitCursor(!1),ShowDimmer(!1),!0)}function CheckScroll(e){var t=$j("#contentScroll"+e);if(t.length>0){var a=$j("#colScroll"+e);t.get(0).scrollHeight;window.navigator.userAgent.indexOf("safari")>0&&parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom")),t.height(),a.css("margin-right","0px")}}function GetSubFieldId(e,t,a){var r=e+t+"F"+a;if($j("#"+r).length>0)return r;var i=$j.inArray(e.toString().toLowerCase(),FLowerNames);return r=(-1!=i?FNames[i]:e)+t+"F"+a,$j("#"+r).length,r}function ClearSqlChkList(e){var t;if(t=document.getElementById(e).title,IsDcGrid(GetDcNo(GetFieldsName(e))))try{$j(".multiChkSpan[name="+e+"]").html("")}catch(a){}else try{$("#"+e).data("valuelist",""),$("#"+e).val(""),$("#"+e).tokenfield("setTokens",[]),$("#"+e).data("bs.tokenfield").$input.autocomplete({source:[]})}catch(a){}return t}function ClearRadioGrp(e){var t;return t=document.getElementById(e).title,$j(".multiRgrpSpan").each(function(){$j(this).attr("name")==e&&(fldChk=$j(this),fldChk.html(""))}),t}function ReloadListView(e){""!=e&&-1==window.opener.location.href.indexOf("pgno")?window.opener.location.href=window.opener.location.href+"&pgno="+e:window.opener.location.href=window.opener.location.href}function IfUnSavedChanges(){if(window.parent.globalChange||"undefined"!=typeof designChanged&&1==designChanged){var cutMsg=eval(callParent("lcm[29]"));return!confirm(cutMsg)}return!1}function BackForwardButtonClicked(e){if("undefined"==typeof theMode||"design"!=theMode){if(!("FALSE"==enableBackButton.toString().toUpperCase()&&"back"==e||"FALSE"==enableForwardButton.toString().toUpperCase()&&"forward"==e)){if("back"==e||"forward"==e){if(IfUnSavedChanges())return;AxWaitCursor(!0),ShowDimmer(!0),callParentNew("loadFrame","function");try{ASB.WebService.NavigateBackForwardButton(e,SuccessButtonClicked,OnNavException)}catch(t){AxWaitCursor(!0),ShowDimmer(!0)}}"back"==e&&($j("#goback").css("cursor","pointer"),$j("#goback").removeAttr("onclick"))}}else goToRenderMode()}function SuccessButtonClicked(e){if(AxWaitCursor(!1),ShowDimmer(!1),""!=e)return window.location=e,!1}function OnNavException(e){AxWaitCursor(!1),ShowDimmer(!1),callParentNew("closeFrame()","function"),showAlertDialog("error",e._message)}function ResetNavGlobalVariables(){window.parent.listViewPage="0",window.parent.clickedColumn="",window.parent.dataRowIndex=-1,window.parent.isParentIview=!1}function SetBackForwardButtonProp(e,t){history.forward(),"FALSE"==t.toString().toUpperCase()?($j("#goback").css("cursor","default"),$j("#goback").unbind("BackForwardButtonClicked")):($j("#goback").css("cursor","pointer"),$j("#goback").unbind("BackForwardButtonClicked")),1==parent.gimportIsOpen&&"Iview"==document.title&&$("#backforwrdbuttons a img#goback").hide()}function CreateTimeLog(e,t,a,r,i,o){try{ASB.WebService.CreateTimeLog(e,t,a,r,i,o,tstDataId)}catch(l){AxWaitCursor(!1),showAlertDialog("error",ServerErrMsg)}}function GetAxDate(e){return e=e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}var imageSuffix="";function GetDateTime(){var e=new Date,t=e.getDate().toString()+e.getMonth().toString()+e.getFullYear().toString()+e.getHours().toString()+e.getMinutes().toString()+e.getSeconds().toString();return imageSuffix=t}function ChangeDir(e){$j("#form1").attr("dir",e)}function GetTabDcIndexPagePos(e){for(var t=0;t<PagePositions.length;t++)if(-1!=PagePositions[t].toString().indexOf(","))for(var a=PagePositions[t].toString().split(","),r=0;r<a.length;r++)if(a[r]==e.toString())return t;return-1}function EnablePageDimmer(e){$("#"+e.target.id).is(":enabled")&&$("#waitDiv").is(":hidden")&&ShowDimmer(!0)}function tsddlRefreshSelect(){try{var popFldDc=GetDcNo(axpSrcSelectID),parFldDc=parent.GetDcNo(axpRefSelectID),tmpSelId=axpSrcSelectID+"000F"+popFldDc,tmpRefSelId=axpRefSelectID+"000F"+parFldDc,tmpSelText=GetFieldValue(tmpSelId),tmpSelVal="";if("yes"==axRefreshSelectType.toLowerCase()&&(tmpSelVal=recordidax),""!=tmpSelText){var tmpSelFld=$j("#"+tmpRefSelId,window.parent.document);if(tmpSelFld.length>0)return""==tmpSelVal?tmpSelFld.append('<option value="'+tmpSelText+'" selected="selected">'+tmpSelText+"</option>"):tmpSelFld.append('<option value="'+tmpSelVal+'" selected="selected">'+tmpSelText+"</option>"),eval(callParent("isTstructPopup")+"= false"),callParentNew("modalIdNewItem","id").dispatchEvent(new CustomEvent("close")),parent.MainBlur(tmpSelFld),tmpSelFld.blur(),void tmpSelFld.focus()}}catch(ex){console.log(ex.message)}}function closeParentFrame(){try{eval(callParent("closeFrame()","function"))}catch(ex){console.log("Error in CloseParentFrame -"+ex.message)}}function EvaluateSetFont(e){for(var t=0;t<Expressions.length;t++){if(-1!=Expressions[t].toString().toLowerCase().indexOf("setfont(")){var a=ExpFldNames[t].toString().split("."),r=GetDcNo(a[1]);"all"!=e&&r.toString()==e?EvaluateAxFunction(a[1].toString(),a[1].toString()):"all"==e&&EvaluateAxFunction(a[1].toString(),a[1].toString())}}}function EvaluateSetFontOnGetDep(e){var t,a=GetFieldIndex(GetFieldsName(e)),r="";if(-1!=a&&(r=FldDependents[a].toString()),""!=r&&(t=r.split(",")),t!=undefined)for(var i=0;i<t.length;i++){var o=t[i].toString(),l=o.substring(0,1),n=o.substring(1);GetDcNo(n);if("e"==l){var s=GetFldNamesIndx(n);-1!=s&&(expression=Expressions[s].toString()),-1!=expression.toLowerCase().indexOf("setfont(")&&EvaluateAxFunction(n,e)}}}function createBootstrapModal(idOfelement,headerTitle,data,buttons,heightOfModal,widthOfModal){var currenttDC="",typeOfModal="";"dvFillGrid"==idOfelement?typeOfModal="fillgrid":data.indexOf("wrapperForEditFields")>-1&&(typeOfModal="gridedit"),"gridedit"==typeOfModal&&(currenttDC=headerTitle.substring(headerTitle.indexOf("DC")+2,headerTitle.indexOf(" ")),headerTitle=DCCaption[parseInt(currenttDC)-1]);var heightcontent="";if("dvFillGrid"!=idOfelement){var currentclass=$("#"+data).attr("style"),editLayoutWrappper=$("#"+data),editLayoutParent=editLayoutWrappper.parent(),editLayoutParentClasses=editLayoutParent.attr("style");editLayoutParent.css({position:"absolute"}),editLayoutWrappper.css({visibility:"hidden"}),editLayoutWrappper.removeClass("hide").show(),GridfieldsHeight=$("#"+data).outerHeight(),$("#"+data).attr("style",currentclass||""),editLayoutParent.attr("style",editLayoutParentClasses||""),$("#"+data).addClass("hide"),iframeheight=$(".dvheightframe").height(),heightcontent=GridfieldsHeight>iframeheight?iframeheight:GridfieldsHeight+100}else heightcontent="400";var modalHTML="";heightOfModal=heightOfModal||"",widthOfModal=widthOfModal||"";var modalHTML='<div class="modal fade" style="width:100%" id="bootstrapModal" role="dialog">';modalHTML+='<div class="modal-dialog" style="height:'+heightOfModal+";width:"+widthOfModal+';margin-bottom:0px;">',modalHTML+='<div class="modal-content" style="height:'+heightcontent+'px !important">',modalHTML+='<div class="modal-header">',modalHTML+="gridedit"==typeOfModal?'<button type="button"  onclick="gridEditSaveNdClose(\'close\')" class="close" title="Save & Close">&times;</button>':'<button type="button" class="close" data-dismiss="modal" title="Close">&times;</button>',modalHTML+='<h4 class="modal-title">'+headerTitle+"</h4>",modalHTML+="</div>";var heights="height: calc(100% - 111px);-webkit-height: calc(100% - 111px);-moz-height: calc(100% - 111px);-o-height: calc(100% - 111px);overflow: auto;";if("gridedit"===typeOfModal&&(heights="height: calc(100% - 55px);-webkit-height: calc(100% - 55px);-moz-height: calc(100% - 55px);-o-height: calc(100% - 55px);overflow: auto;"),modalHTML+='<div class="modal-body" style="'+heights+'">',modalHTML+='<div id="bootstrapModalData" style="width:100%;height:100%;" class="modal-body-content">',modalHTML+="</div>",modalHTML+="</div>",buttons&&buttons.count){modalHTML+='<div class="modal-footer">';for(var i=1;i<=buttons.count;i++){var name=eval("buttons.button"+i+".name")||"Button",classes=eval("buttons.button"+i+".class")||"btn btn-default",functionality=eval("buttons.button"+i+".function")||"",id=eval("buttons.button"+i+".id")||"";modalHTML+='<button id="'+id+'" type="button"  class="'+classes+'" onclick="'+functionality+'"  data-dismiss="modal" title="'+name+'">'+name+"</button>"}modalHTML+="</div>"}if(modalHTML+=" </div>",modalHTML+="</div>",modalHTML+="</div>",$("body").append(modalHTML),"gridedit"==typeOfModal&&($("#"+data).removeClass("hide"),data=$("#"+data).detach()),"gridedit"==typeOfModal){var x=data.find("input[type!='hidden']").first();x.hasClass("hasDatepicker")&&x.unbind("focus")}$(data).appendTo("#bootstrapModalData").show();var optns={};"gridedit"==typeOfModal&&(optns.keyboard=!1,optns.backdrop=!1),$("#bootstrapModal").modal(optns),$("#bootstrapModal").on("shown.bs.modal",function(e){if($("#bootstrapModal .modal-content").draggable({containment:"body"}).resizable(),handleModalTabEvents(),"gridedit"==typeOfModal)$("#bootstrapModal").off("click.gridOutClick"),$("#bootstrapModal").on("click.gridOutClick",function(e){$(e.target).hasClass("modal-content")||0!==$(e.target).parents(".modal-content").length||0!==$(e.target).parents("[id^=wrapperForEditFields]").length||0!==$(e.target).parents(".editLayoutFooter").length||$(e.target).hasClass("grdAttach")||gridEditSaveNdClose("close")}),setModalFooterInEdit(currenttDC),createBlurEventOnLastElem(currenttDC);else if("fillgrid"==typeOfModal){var t=getFirstFocusElement("#dvFillGrid table tr:not(:first)");t!=undefined?t.focus():$("#bootstrapModal .modal-footer button:first").focus()}$(document).off("keydown.bootstrapmodalEscKey"),$(document).on("keydown.bootstrapmodalEscKey",function(e){27==e.keyCode&&("gridedit"==typeOfModal?($(e.target).blur(),gridEditSaveNdClose("close")):$("#bootstrapModal .close").click())})}),$("#bootstrapModal").on("hidden.bs.modal",function(e){"gridedit"!=typeOfModal?unBindModalTabEvents():$("#bootstrapModal").off("click.gridOutClick"),$("#wrapperForMainNewData",window.parent.document).show(),"fillgrid"==typeOfModal?(unbindKeyDownEvent(),$("#bootstrapModalWrapP").html("<div id='"+idOfelement+"'></div>"),$("#bootstrapModalWrapP")&&$("#"+idOfelement).unwrap()):"gridedit"==typeOfModal&&($j("#"+data[0].id).find(".fldAutocomplete").autocomplete("close"),"undefined"!=typeof data[0].id&&"gridedit"==typeOfModal&&""!=data[0].id&&($("#"+data[0].id).addClass("hide"),data=$("#"+data[0].id).detach(),$(data).appendTo("#"+idOfelement))),$("#bootstrapModal").remove()})}function handleModalTabEvents(){jQuery(document).bind("keydown.bootstrapModalPopupKD",function(e){e.shiftKey||9!=e.keyCode?e.shiftKey&&9==e.keyCode&&$(document.activeElement)[0]==$(".modal-content :focusable").first()[0]&&(e.preventDefault(),$(".modal-content :focusable").last().focus()):$(document.activeElement)[0]==$(".modal-content :focusable").last()[0]&&(e.preventDefault(),$(".modal-content :focusable").first().focus())})}function unBindModalTabEvents(){jQuery(document).unbind("keydown.bootstrapModalPopupKD")}function getFirstFocusElement(e){var t=$j(e).find(':input[type!="hidden"]:enabled,textarea:enabled,select:enabled,span.fa-paperclip').filter(":visible").not("button").first();return t!=undefined&&t.length>0?t:"undefined"!=typeof isWizardTstruct&&isWizardTstruct?$j("#wizardBodyContent").find("button.gridBtns,button.lblgridactn").filter(":visible").first():void 0}function doParentOpInIframe(e,t,a,r){a==undefined&&(a="");a.split("~");r=getFrameParent(r);try{r&&"var"==t&&r.eval(e=a)}catch(i){doParentOpInIframe(e,t,a)}}function getFrameParent(e){return _typeof(e)==undefined&&window?window:e==window&&window.parent?window.parent:e==window.parent&&window.parent.parent?window.parent.parent:!(e!=window.parent.parent||!window.parent.parent.parent)&&window.parent.parent.parent}function dateAutoGenerator(e,t){var a=$(e).val().length;if(a>0&&($(e).val().split("/").length-1>0&&($(e).val($(e).val().replace(/\//g,"")),$(e).val().length>8&&$(e).val($(e).val().substr(0,8))),(a=$(e).val().length)>0&&a<=8)){var r="00",i="00",o="0000";if(a<=4){switch(a){case 1:$(e).val("000"+$(e).val());break;case 2:$(e).val("00"+$(e).val());break;case 3:$(e).val("0"+$(e).val())}o=$(e).val().substr(2,2),o=(new Date).getFullYear().toString().substr(0,2)+o,i="00"==(i=$(e).val().substr(0,2))||parseInt(i)>12?"true"==t?"12":"01":i,r="00"==r||DaysInMonth(o,i)<parseInt(r)?"true"==t?DaysInMonth(o,i):"01":r,$(e).val(r+"/"+i+"/"+o)}else{switch(a){case 5:$(e).val("000"+$(e).val());break;case 6:$(e).val("00"+$(e).val());break;case 7:$(e).val("0"+$(e).val())}o=$(e).val().substr(4,4),i="00"==(i=$(e).val().substr(2,2))||parseInt(i)>12?"true"==t?"12":"01":i,r="00"==(r=$(e).val().substr(0,2))||DaysInMonth(o,i)<parseInt(r)?"true"==t?DaysInMonth(o,i):"01":r,$(e).val(r+"/"+i+"/"+o)}}}function MaskCharacter(e,t,a){return _toConsumableArray(e).reduce(function(r,i,o){return o<e.length-a?r+t:r+i},"")}function RevMaskCharacter(e,t,a){return _toConsumableArray(e).reduce(function(r,i,o){return o>=e.length-a?r+t:r+i},"")}function ApplyFldMask(e,t){var a=GetFieldIndex(GetFieldsName(e));if("undefined"!=typeof FldMaskType){var r=FldMaskType[a];if("Show few characters"==r){var i=t;""!=(o=FldMaskDetails[a].split("♦"))[0]&&0!=o[0]&&""!=i&&0!=i&&(i=MaskCharacter(i.toString(),o[2],i.toString().length-o[0])),""!=o[1]&&0!=o[1]&&""!=i&&0!=i&&(i=RevMaskCharacter(i.toString(),o[2],o[1])),$("#"+e).val(i),$("#"+e).attr("value",i)}else if("Mask all characters"==r){var o=FldMaskDetails[a].split("♦"),l=t;""!=l&&0!=l&&(l=MaskCharacter(l.toString(),o[2],0)),$("#"+e).val(l),$("#"+e).attr("value",l)}}}function UpdateAllFieldValues(e,t){"string"!=typeof t&&(t=t.toString());var a="";if("select-one"==$j("#"+e).prop("type"))$j("#"+e).hasClass("fldFromSelect")?(a=$j("#"+e).find("option:selected").val())!=undefined&&""!=a&&(t=a):(a=$j("#"+e).find("option:selected").val())!=undefined&&""!=a&&(t=a+"¿"+t);else if("textarea"==$j("#"+e).prop("type")){var r=t.replace(new RegExp("<br>","g"),"¿");t=r=r.replace(new RegExp("¿","g"),"\n")}t==undefined&&(t="");var i=!1;if(AllFieldNames.length>0){var o=$j.inArray(e,AllFieldNames);-1!=o&&(AllFieldValues[o]=t,i=!0),i||(AllFieldNames.push(e),AllFieldValues.push(t))}else AllFieldNames.push(e),AllFieldValues.push(t)}