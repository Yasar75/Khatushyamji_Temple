/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/var dtAssoc=[],searchResult=[],AutPageNo=1,AutPageSize=50,rcount=0,fetchRCount=FetchPickListRows||1e3;PageCount=0;var CangefldName="",isNavigation=!1,refreshAC=!1,pickarrow=!1,isAutocomBlur=!0,isSelectedValFocus=!1;function createFormSelect(fld){var formSelect=$(fld),fldNameAc="",fieldName="",fastdll="",termVal="",depFldName="",isPickMinChar=!1,isOnCLose=!1;formSelect.select2({ajax:{url:"tstruct.aspx/GetAutoCompleteData",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",delay:250,data:function(e){if(!select2IsOpened||"undefined"!=typeof e.term&&""!=e.term?select2IsFocused?(select2EventType="open",termVal=""==e.term?undefined:isSelectedValFocus?undefined:e.term):"undefined"!=typeof e.term&&""!=e.term&&(termVal=e.term):termVal="",1==(fastdll=!!$(this).hasClass("multiFldChk")||$(this).hasClass("fastdll"))||0==fastdll&&""==termVal||0==fastdll&&(void 0===termVal||termVal.length>2)){isPickMinChar=!1;var t=$(this).hasClass("isrefreshsave"),s=GetAutoCompData(fldNameAc,termVal,AutPageNo,AutPageSize),a=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3),l="";l="undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?ISBoundAutoCom(a,fldNameAc):ISBoundNew(a,fldNameAc);var r=GetFieldIndex(a),i=FldIsAPI[r];return JSON.stringify({tstDataId:tstDataId,FldName:a,FltValue:termVal,ChangedFields:ChangedFields,ChangedFieldDbRowNo:ChangedFieldDbRowNo,ChangedFieldValues:ChangedFieldValues,DeletedDCRows:DeletedDCRows,pageData:s,fastdll:fastdll,fldNameAc:fldNameAc,refreshAC:refreshAC,pickArrow:pickarrow,parentsFlds:l,rfSave:t,IsApiFld:i,tblSourceParams:""})}rcount=0,isPickMinChar=!0},processResults:function processResults(data){select2EventType="open",refreshAC=!1;try{var result=data.d.toString().replace(new RegExp("\\n","g"),"");if(""!=result&&(result.split("*♠*").length>1?(serverprocesstime=result.split("*♠*")[1],requestProcess_logtime=result.split("*♠*")[2],result=result.split("*♠*")[0],WireElapsTime(serverprocesstime,requestProcess_logtime,!0)):UpdateExceptionMessageInET("Error : "+result)),CheckSessionTimeout(result))return;if(result=result.toString().replace(new RegExp("\\t","g"),"&#9;"),ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,!result.toLowerCase().includes("access violation")||!result.toLowerCase().includes("asbtstruct.dll")){var serResult=$.parseJSON(result);if(datasss=serResult,serResult.error)return void ExecErrorMsg(serResult.error,"autocomplete");var rcountNew=serResult.pickdata[0].rcount;if(depFldName=serResult.pickdata[2].dfname,0!=rcountNew&&(rcount=parseInt(rcountNew)),rcount=rcount<fetchRCount?rcount:fetchRCount,PageCount=Math.ceil(rcount/AutPageSize),0==PageCount&&(PageCount=1),countPerPage=rcount,1==AutPageNo?1==PageCount?($("#autoleft"+fldNameAc).prop("disabled",!0).addClass("disabled"),$("#autoright"+fldNameAc).prop("disabled",!0).addClass("disabled")):$("#autoright"+fldNameAc).prop("disabled",!1).removeClass("disabled"):AutPageNo>1&&PageCount<=AutPageNo&&$("#autoright"+fldNameAc).prop("disabled",!0).addClass("disabled"),dtAssoc=serResult.pickdata[3].data,dtAssoc!=undefined&&0!=dtAssoc.length){if($(this.$element).hasClass("multiFldChk")&&$(".msSelectAllOption").removeClass("d-none"),fastdll){var aSearch=[];if($(dtAssoc).each(function(e,t){t.i=t.i.replace(/\^\^dq/g,'"'),t.i.toLowerCase().indexOf(termVal.toLowerCase())>=0&&aSearch.push(t)}),$("#"+fldNameAc).data("rowcount",aSearch.length),0!=aSearch.length){var result=$.map(aSearch,function(e){return e.i=e.i.replace(/\^\^dq/g,'"'),{id:e.i,text:e.i,dep:e.d}});return"true"==AxRulesDefFilter&&(result=AxFilterDropDownResult(fldNameAc,result)),searchResult=result,{results:result}}$(this.$element).hasClass("multiFldChk")&&$(".msSelectAllOption").addClass("d-none");var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}var result=$.map(dtAssoc,function(e){return e.i=e.i.replace(/\^\^dq/g,'"'),{id:e.i,text:e.i,dep:e.d}});return"true"==AxRulesDefFilter&&(result=AxFilterDropDownResult(fldNameAc,result)),searchResult=result,{results:result}}$(this.$element).hasClass("multiFldChk")&&$(".msSelectAllOption").addClass("d-none");var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide()}catch(exception){-1!=exception.message.toLowerCase().indexOf("access violation")&&(AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide())}}},placeholder:"Search for a repository",minimumInputLength:0,language:{errorLoading:function(){return isPickMinChar?"Required to search minimum 3 characters":"Start type characters for searching data.."}}}).on("select2:select",function(event){var depList=event.params.data.dep,fldAcValue=$(this).val();if(void 0!==$(this).data("separator")&&$(this).hasClass("multiFldChk")){var separator=$(this).data("separator");fldAcValue=fldAcValue.join(separator)}refreshAC=!1,isGrdEditDirty=!0,dtAssoc=[];var cutMsg=eval(callParent("lcm[0]")),fName=GetFieldsName(fldNameAc),fldIndex=$j.inArray(fName,FNames);if(-1!=fldIndex&&void 0===$("#"+fldNameAc).attr("disabled")&&"True"!=FFieldReadOnly[fldIndex]&&"True"!=FFieldHidden[fldIndex]){var rcID=GetFieldsRowFrameNo(fldNameAc),acFrNo=GetFieldsDcNo(fldNameAc),rowNum=GetDbRowNo(GetFieldsRowNo(fldNameAc),acFrNo),fldRowNo=GetFieldsRowNo(fldNameAc);if(IsDcGrid(acFrNo)&&isGrdEditDirty&&UpdateFieldArray(axpIsRowValid+acFrNo+fldRowNo+"F"+acFrNo,GetDbRowNo(fldRowNo,acFrNo),"","parent","AddRow"),UpdateFieldArray(fldNameAc,rowNum,fldAcValue,"parent","AutoComplete"),UpdateAllFieldValues(fldNameAc,fldAcValue),depList!=undefined&&null!=depList&&depList!=cutMsg&&""!=depFldName)try{var depText=depList.split("^"),dfCount=0;$.each(depText,function(e,t){var s=depFldName.split("^")[dfCount],a=t;dfCount++,rcID=rcID.substring(0,rcID.lastIndexOf("F")+1)+GetDcNo(s),$("#"+s+rcID).val(a);var l=$j.inArray(s,FNames);"Numeric"==GetFieldType(s,l)&&$("#"+s+rcID).data("attr",a),a!=undefined&&(UpdateFieldArray(s+rcID,rowNum,a,"parent","AutoComplete"),UpdateAllFieldValues(s+rcID,a))})}catch(Ex){}setTimeout(function(){AxOldValue="",MainBlur($j("#"+fldNameAc))},0)}}).on("select2:unselect",function(e){var t=$(this).attr("id"),s=$(this).val();if(void 0!==$(this).data("separator")&&$(this).hasClass("multiFldChk")){var a=$(this).data("separator");s=s.join(a);GetFieldsRowFrameNo(t);var l=GetFieldsDcNo(t),r=GetDbRowNo(GetFieldsRowNo(t),l);UpdateFieldArray(t,r,s,"parent","AutoComplete"),UpdateAllFieldValues(t,s)}""==s?AxOldValue=" ":$(this).hasClass("multiFldChk")||(AxOldValue=s),MainBlur($j("#"+t))}).on("select2:open",function(e){var t="scroll.select2";$(e.target).parents().off(t),$(window).off(t),isPickMinChar=!1,select2IsFocused?(select2EventType="tab",""!=$(this).val()&&null!=$(this).val()?$(this).hasClass("multiFldChk")?($("input.select2-search__field").val($(this).val()),select2IsOpened=!0,isSelectedValFocus=!0):(isSelectedValFocus=!1,select2IsFocused=!0,select2IsOpened=!1):isOnCLose||$(this).hasClass("multiFldChk")?isOnCLose&&null==$(this).val()&&!$(this).hasClass("multiFldChk")?select2IsFocused=!0:isOnCLose&&""!=$(this).val()&&null!=$(this).val()&&!$(this).hasClass("multiFldChk")&&(select2IsFocused=!1):(select2IsOpened=!0,select2EventType="click"),isOnCLose=!1):($(this).attr("id")==AxFocusedFld||""==AxFocusedFld||$("#"+AxFocusedFld).hasClass("fldFromSelect")||$("#"+AxFocusedFld).hasClass("multiFldChk")||$("#"+AxFocusedFld).hasClass("gridHeaderSwitch")?gridRowEditOnLoad&&IsGridField(GetFieldsName($(this).attr("id")))&&UpdateGridRowFlags($(this).attr("id"),GetFieldsDcNo($(this).attr("id")),"001"):(MainBlur($("#"+AxFocusedFld)),AxOldValue="",MainFocus($j(this))),isOnCLose?isOnCLose&&null==$(this).val()&&!$(this).hasClass("multiFldChk")?select2IsFocused=!0:isOnCLose&&""!=$(this).val()&&null!=$(this).val()&&!$(this).hasClass("multiFldChk")&&(select2IsFocused=!1):""==$(this).val()||null==$(this).val()||$(this).hasClass("multiFldChk")?($("input.select2-search__field").val($(this).val()),select2IsOpened=!0,select2EventType="click"):(isSelectedValFocus=!0,select2IsFocused=!0),isOnCLose=!1);var s=void 0===$(this).attr("data-addoption")?"":$(this).attr("data-addoption"),a=void 0===$(this).attr("data-refresh")?"":$(this).attr("data-refresh"),l=$(this).attr("id"),r="";if($(this).hasClass("multiFldChk")?($(".select2-results a.fsautorefresh").remove(),r+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm float-end" id="advSearch'+l+'" title="adv. search" data-ids='+l+'><span class="material-icons material-icons-style material-icons-3">search</span></a><input type=hidden id="pickIdVal_'+l+'" value="" />'):(void 0!==a&&""!=a&&"true"==a?r+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-600 btn-active-primary me-2 shadow-sm ms-2 fsautorefresh" id="autorefresh'+l+'" title="Refresh" data-refresh='+l+'><span class="material-icons material-icons-style material-icons-3">refresh</span></a>':void 0!==a&&""!=a&&"false"==a&&(r+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-600 btn-active-primary me-2 shadow-sm ms-2 disabled" id="autoleft'+l+'" title="Previous" data-fldname='+l+'><span class="material-icons material-icons-style material-icons-3">navigate_before</span></a><a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm disabled" id="autoright'+l+'" title="Next" data-fldname='+l+'><span class="material-icons material-icons-style material-icons-3">navigate_next</span></a>'),r+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm float-end" id="advSearch'+l+'" title="adv. search" data-ids='+l+'><span class="material-icons material-icons-style material-icons-3">search</span></a><input type=hidden id="pickIdVal_'+l+'" value="" />'),void 0!==s&&""!=s&&(r+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-600 btn-active-primary me-2 shadow-sm float-end" id="addOption'+l+'" data-ids='+l+' title="Add Master Data"><span class="material-icons material-icons-style material-icons-3">add</span></a>'),$(".select2-results:not(:has(a))").append(r),fldNameAc=$(this).attr("id"),$(this).hasClass("multiFldChk")){var i,o=null===(i=$(this).data("select2"))||void 0===i?void 0:i.$dropdown;if(0==o.find(".select2-results").find(".msSelectAllOption").length){var d='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5 d-none">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat(fldNameAc,'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');o.find(".select2-results").append(d)}var c=0;o.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").each(function(e,t){$(t).hasClass("select2-results__option--selected")&&c++}),o.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length==c&&c>0?o.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!0):o.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length!=c&&o.find(".select2-results").find(".msSelectAllOption > .msSelectAll").is(":checked")&&o.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!1)}CangefldName!=fldNameAc&&(AutPageNo=1,rcount=0,CangefldName=fldNameAc),isNavigation||(AutPageNo=1),isNavigation=!1,clickEvents(l)}).on("select2:close",function(e){isOnCLose=!1,isSelectedValFocus=!1,select2IsFocused=!0,select2EventType=""}).on("select2:closing",function(e){isOnCLose=!0,select2EventType=""}).on("select2:clear",function(e){isOnCLose=!0,select2EventType=""})}function clickEvents(e){$(document).off("click","#autorefresh"+e),$(document).on("click","#autorefresh"+e,function(e){refreshAC=!0,AutPageNo=1,rcount=0,CangefldName="",PageCount=0,isSelectedValFocus=!1,select2IsFocused=!1,select2IsOpened=!0,select2EventType="click",void 0!==$(".select2-dropdown--below")&&$(".select2-dropdown--below").length>0?$(".select2-dropdown--below").find(".select2-search__field").trigger($.Event("input",{which:13})):($("#"+$(e.currentTarget).data("refresh")).select2("close"),$("#"+$(e.currentTarget).data("refresh")).select2("open"))}),$(document).off("click","#autoleft"+e),$(document).on("click","#autoleft"+e,function(t){isNavigation=!0,pickarrow=!0,AutPageNo--,isSelectedValFocus=!1,$("#autoright"+e).prop("disabled",!1).removeClass("disabled"),1==AutPageNo&&$("#autoleft"+e).prop("disabled",!0).addClass("disabled"),select2IsFocused=!1,select2IsOpened=!0,select2EventType="click",void 0!==$(".select2-dropdown--below")&&$(".select2-dropdown--below").length>0?$(".select2-dropdown--below").find(".select2-search__field").trigger($.Event("input",{which:13})):($("#"+$(t.currentTarget).data("refresh")).select2("close"),$("#"+$(t.currentTarget).data("refresh")).select2("open"))}),$(document).off("click","#autoright"+e),$(document).on("click","#autoright"+e,function(t){isNavigation=!0,pickarrow=!0,AutPageNo++,isSelectedValFocus=!1,$("#autoleft"+e).prop("disabled",!1).removeClass("disabled"),PageCount<=AutPageNo&&$("#autoright"+e).prop("disabled",!0).addClass("disabled"),select2IsFocused=!1,select2IsOpened=!0,select2EventType="click",void 0!==$(".select2-dropdown--below")&&$(".select2-dropdown--below").length>0?$(".select2-dropdown--below").find(".select2-search__field").trigger($.Event("input",{which:13})):($("#"+$(t.currentTarget).data("refresh")).select2("close"),$("#"+$(t.currentTarget).data("refresh")).select2("open"))}),$(document).off("click","#advSearch"+e),$(document).on("click","#advSearch"+e,function(){$("#"+$(this).data("ids")).select2("close"),isSelectedValFocus=!1,SearchOpenNew($(this).data("ids"))}),$(document).off("click","#addOption"+e),$(document).on("click","#addOption"+e,function(){$("#"+$(this).data("ids")).select2("close");var e=$(this).data("ids"),t=$("#"+e).data("addoption"),s=e.substring(0,e.lastIndexOf("F")-3),a="tstruct.aspx?transid="+t.split("~")[0]+"&AxPop=true&AxRefSelect=true&AxRefSelectID="+s+"&AxSrcSelectID="+t.split("~")[1]+"&AxRefType="+t.split("~")[2];isSelectedValFocus=!1;var l=new BSModal("modalIdNewItem","","<iframe class='col-12 h-100' src='"+a+"'></iframe>",function(){},function(){});l.changeSize("fullscreen"),l.hideFooter(),l.hideHeader(),l.showFloatingClose()}),$(document).off("keydown","input.select2-search__field"),$(document).on("keydown","input.select2-search__field",function(e){if(isSelectedValFocus&&(isSelectedValFocus=!1),"9"==e.originalEvent.keyCode){var t=$(e.currentTarget).attr("aria-controls");void 0!==t&&(t=t.replace("select2-","").replace("-results",""),$("#"+t).select2("close"))}}),$(document).off("keypress","input.select2-search__field"),$(document).on("keypress","input.select2-search__field",function(e){isSelectedValFocus&&(isSelectedValFocus=!1)})}function GetAutoCompData(e,t,s,a){var l="";if(arrRefreshDcs.length>0)for(var r=0;r<arrRefreshDcs.length;r++){var i=arrRefreshDcs[r].split(":");l=i[1].replace("dc","")+","+i[0].replace("dc","")}t=CheckSpecialCharsInStr(t);var o=GetFieldsDcNo(e);AxActiveRowNo=parseInt(GetFieldsRowNo(e),10),AxActiveRowNo=GetDbRowNo(AxActiveRowNo,o);var d=AxActiveRowNo,c="";""!=AxActivePRow&&""!=AxActivePDc&&(c=AxActivePDc+"♠"+AxActivePRow);var n="";return IsParentField(e,o)&&(n=GetSubGridInfoForParent(o,AxActiveRowNo)),s.toString()+"~"+a.toString()+"~"+o+"~"+d+"~"+c+"~"+n+"~"+l}function createFormMultiSelect(msfldId){var formSelect=$(msfldId),msData="",refreshMs=!1,fldNameMs="",isrefreshsave="",fieldName="",pageData="",parentFldVal="",igr=1;formSelect.select2({ajax:{url:"tstruct.aspx/GetMultiSelectValues",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",delay:250,data:function(e){return!select2IsOpened||"undefined"!=typeof e.term&&""!=e.term?select2IsFocused?(select2EventType="open",termVal=""==e.term?undefined:e.term):"undefined"!=typeof e.term&&""!=e.term&&(termVal=e.term):termVal="",igr=1,fldNameMs=$(this).attr("id"),isrefreshsave=$(this).hasClass("isrefreshsave"),fieldName=fldNameMs.substring(0,fldNameMs.lastIndexOf("F")-3),pageData=GetMultiSelectPageData(fldNameMs,"",1,AutPageSize),JSON.stringify({tstDataId:tstDataId,FldName:fieldName,ChangedFields:ChangedFields,ChangedFieldDbRowNo:ChangedFieldDbRowNo,ChangedFieldValues:ChangedFieldValues,DeletedDCRows:DeletedDCRows,fldNameMs:fldNameMs,refreshMs:refreshMs,parentsFlds:parentFldVal,rfSave:isrefreshsave,pageData:pageData})},processResults:function processResults(data){select2EventType="open";var result=data.d.toString().replace(new RegExp("\\n","g"),"");if(!CheckSessionTimeout(result)&&(result=result.toString().replace(new RegExp("\\t","g"),"&#9;"),ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,-1===result.toLowerCase().indexOf("access violation"))){var serResult=$.parseJSON(result);if(serResult.error)return void ExecErrorMsg(serResult.error,"autocomplete");if(msData=serResult.multiselectdata[3].data,0!=msData.length){var aSearch=[];if(""!=termVal.toLowerCase()?$(msData).each(function(e,t){t.mslist=t.mslist.replace(/\^\^dq/g,'"'),t.mslist.toLowerCase().indexOf(termVal.toLowerCase())>=0&&aSearch.push(t)}):aSearch=msData,0!=aSearch.length){msData=_.sortBy(aSearch,"grouporder");var grdNo=0,mulResult="[",result=$.map(msData,function(e){0==grdNo?(grdNo=e.grouporder,mulResult+='{"id":"'+e.grouporder+'","text":"'+e.groupby+'","children":[{"id":"'+e.mslist+'","text":"'+e.mslist+'","selected":"'+e.selected+'"}'):grdNo==e.grouporder?(grdNo=e.grouporder,mulResult+=',{"id":"'+e.mslist+'","text":"'+e.mslist+'","selected":"'+e.selected+'"}'):grdNo!=e.grouporder&&(grdNo=e.grouporder,mulResult+=']},{"id":"'+e.grouporder+'","text":"'+e.groupby+'","children":[{"id":"'+e.mslist+'","text":"'+e.mslist+'", "selected":"'+e.selected+'"}')});return"["!=mulResult?mulResult+="]}]":"["==mulResult&&(mulResult=""),{results:$.parseJSON(mulResult)}}var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}}},tags:"true",placeholder:"Search for a repository",minimumInputLength:0,templateResult:function(e,t){if(e.element)return e.text;var s;e.children&&(igr>1&&(null===(s=$("#"+fldNameMs).data("select2"))||void 0===s||s.$dropdown.find("ul.select2-results__options:eq(0)").addClass("d-flex justify-content-between")),igr++);return e.text},closeOnSelect:!1}).on("select2:select",function(e){var t=$(this).val();if(void 0!==$(this).data("sep")){var s=$(this).data("sep");t=t.join(s)}var a=GetFieldsName(fldNameMs),l=$j.inArray(a,FNames);if(-1!=l&&void 0===$("#"+fldNameMs).attr("disabled")&&"True"!=FFieldReadOnly[l]&&"True"!=FFieldHidden[l]){var r=GetFieldsDcNo(fldNameMs),i=GetDbRowNo(GetFieldsRowNo(fldNameMs),r);$(this).attr("data-selected",t),UpdateFieldArray(fldNameMs,i,t,"parent","AutoComplete"),UpdateAllFieldValues(fldNameMs,t),setTimeout(function(){MainBlur($j("#"+fldNameMs))},0)}}).on("select2:unselect",function(e){var t=$(this).attr("id"),s=$(this).val();if(void 0!==$(this).data("sep")){var a=$(this).data("sep");s=s.join(a)}var l=GetFieldsDcNo(t),r=GetDbRowNo(GetFieldsRowNo(t),l);$(this).attr("data-selected",s),UpdateFieldArray(t,r,s,"parent","AutoComplete"),UpdateAllFieldValues(t,s),""==s&&(AxOldValue=" "),MainBlur($j("#"+t))}).on("select2:open",function(e){var t="scroll.select2";$(e.target).parents().off(t),$(window).off(t),select2IsFocused?select2EventType="tab":(select2IsOpened=!0,select2EventType="click"),$(".select2-results a.fsautorefresh").remove(),$(".select2-results a[id*=addOption]").remove()})}function GetMultiSelectPageData(e,t,s,a){var l="";if(arrRefreshDcs.length>0)for(var r=0;r<arrRefreshDcs.length;r++){var i=arrRefreshDcs[r].split(":");l=i[1].replace("dc","")+","+i[0].replace("dc","")}t=CheckSpecialCharsInStr(t);var o=GetFieldsDcNo(e);AxActiveRowNo=parseInt(GetFieldsRowNo(e),10),AxActiveRowNo=GetDbRowNo(AxActiveRowNo,o);var d=AxActiveRowNo,c="";""!=AxActivePRow&&""!=AxActivePDc&&(c=AxActivePDc+"♠"+AxActivePRow);var n="";return IsParentField(e,o)&&(n=GetSubGridInfoForParent(o,AxActiveRowNo)),s.toString()+"~"+a.toString()+"~"+o+"~"+d+"~"+c+"~"+n+"~"+l}function AxGetCustSelectFldData(e){var t="",s=$("#"+e).hasClass("fastdll"),a=GetAutoCompData(e,"",1,1e3),l=e.substring(0,e.lastIndexOf("F")-3),r="";r="undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?ISBoundAutoCom(l,e):ISBoundNew(l,e);var i=GetFieldIndex(l),o=FldIsAPI[i];return $.ajax({url:"tstruct.aspx/GetAutoCompleteData",type:"POST",cache:!1,async:!1,data:JSON.stringify({tstDataId:tstDataId,FldName:l,FltValue:"",ChangedFields:ChangedFields,ChangedFieldDbRowNo:ChangedFieldDbRowNo,ChangedFieldValues:ChangedFieldValues,DeletedDCRows:DeletedDCRows,pageData:a,fastdll:s,fldNameAc:e,refreshAC:!1,pickArrow:!1,parentsFlds:r,rfSave:!0,IsApiFld:o,tblSourceParams:""}),dataType:"json",contentType:"application/json",success:function(e){try{var s=e.d.toString().replace(new RegExp("\\n","g"),"");if(""!=s&&(s=s.split("*♠*")[0]),CheckSessionTimeout(s))return;s=s.toString().replace(new RegExp("\\t","g"),"&#9;"),ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,s.toLowerCase().includes("access violation")&&s.toLowerCase().includes("asbtstruct.dll")?(AxWaitCursor(!1),ShowDimmer(!1),showAlertDialog("error","Access Violation")):t=s}catch(a){AxWaitCursor(!1),ShowDimmer(!1),showAlertDialog("error",a.message)}},error:function(e){AxWaitCursor(!1),ShowDimmer(!1),showAlertDialog("error",e)}}),t}