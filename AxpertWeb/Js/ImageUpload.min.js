/*http://demo.agile-labs.com/minZIP/*//*version=3.9.1*/var cameraFound=!1,canvas="",video="",context="",w,h,ratio,isMobile;function CloseWindow(e){var a=$("#fname").val(),n=$("#filepathna").val(),t=$("#"+e,window.parent.document);""!=a&&""!=n&&(t.val(a),t.attr("src",n),parent.navValidator=!1,parent.IsFormDirty=!0,parent.AxGlobalChange=!0,$(callParentNew(e,"id")).parents(".image-input").find(".imageFileUpload").addClass("d-none"),$(callParentNew(e,"id")).parents(".image-input").find(".profile-pic").removeClass("d-none"),$(callParentNew(e,"id")).parents(".image-input").find(".delete-button").removeClass("d-none")),UpdateArray(e,a),setTimeout(function(){closeUploadDialog()},500)}function UpdateArray(e,a){for(var n=!1,t=0;t<parent.ChangedFields.length;t++){if(parent.ChangedFields[t].toString()==e){"***"==a?(parent.ChangedFields.splice(t,1),parent.ChangedFieldDbRowNo.splice(t,1),parent.ChangedFieldValues.splice(t,1),parent.ChangedFieldOldValues.splice(t,1)):(parent.ChangedFieldOldValues[t]=parent.ChangedFieldValues[t].toString(),parent.ChangedFieldDbRowNo[t]=parent.ChangedFieldDbRowNo[t],parent.ChangedFieldValues[t]=a),n=!0;break}}if(!n&&"***"!=a){var i=e.lastIndexOf("F"),o=e.substring(i-3,i),d=(e.substring(i+1),parseInt(o,10));parent.ChangedFields.push(e),parent.ChangedFieldDbRowNo.push(d),parent.ChangedFieldValues.push(a),parent.ChangedFieldOldValues.push("")}}function closeUploadDialog(){callParentNew("modalIdCaptureImage","id").dispatchEvent(new CustomEvent("close"))}function handleVideo(e){video.src=window.URL.createObjectURL(e),$("#btnCapture").removeAttr("disabled")}function videoError(e){cameraFound=!1,dvCam.innerHTML="<h2>No Camera Found</h2>",$("#btnCapture").prop("disabled"),parent.showAlertDialog("warning",eval(callParent("lcm[294]")))}function snap(){context.fillRect(0,0,w,h),context.drawImage(video,0,0,w,h),convertCanvasToImage()}function convertCanvasToImage(){var e=canvas.toDataURL("image/jpg");document.getElementById("mydata").value=e,document.getElementById("imgCanvas").src=e}function canvasvideo(){var e=callParentNew("shouldFaceUser"),a=1==isMobile?{audio:!1,video:{facingMode:e?{exact:"environment"}:{exact:"user"}}}:{audio:!0,video:{width:1280,height:720}};navigator.mediaDevices.getUserMedia(a).then(function(e){var a=document.querySelector("video");a.srcObject=e,a.onloadedmetadata=function(e){$("#btnCapture").removeAttr("disabled")}})["catch"](function(e){videoError()})}$j(document).ready(function(){(isMobile=callParentNew("isMobileDevice()","function"))?$("#flip-btn").css("display","inline-block"):$("#flip-btn").css("display","none"),void 0!==callParentNew("flipCamera")&&0!=callParentNew("flipCamera")&&(callParentNew("flipCamera=",!1),$j("#rdbImgRadio").removeClass("firsFocusable"),$j("#rdbImgCamera").addClass("firstFocusable").focus(),$("input:radio[id=rdbImgCamera]").checked=!0,canvasvideo(),$j(".rowbor").children().prop("disabled",!0),$j("#dvCam").show()),canvasvideo(),$j(".rowbor").children().prop("disabled",!0),setTimeout(function(){IFrameModalDialogTabEvents("")},500),checkSuccessAxpertMsg(),closeRemodalPopupOnEsc(),video=document.querySelector("#videoElement"),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,"Camera"==$j('input[type="radio"]').attr("data-rdb-value")&&navigator.getUserMedia&&navigator.getUserMedia({video:!0},handleVideo,videoError),canvas=document.querySelector("canvas"),context=canvas.getContext("2d"),video.addEventListener("loadedmetadata",function(){ratio=video.videoWidth/video.videoHeight,w=video.videoWidth-100,h=parseInt(w/ratio,10),canvas.width=w,canvas.height=h},!1),validateFilesize()}),$(document).keydown(function(e){27==e.which&&$(parent.$(".modal .close")!=undefined)&&$(parent.$(".modal .close")).click()}),$(document).on("click","#flip-btn",function(){callParentNew("shouldFaceUser")?callParentNew("shouldFaceUser=",!1):callParentNew("shouldFaceUser=",!0),callParentNew("flipCamera=",!0);var e=window.location.href;window.location.href=e});