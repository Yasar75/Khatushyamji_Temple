/*http://demo.agile-labs.com/minZIP/*//*version=3.8*/function selectedActionChanged(){var e=$("#ddlActions").val();switch($("select#ddlTstruct, select#ddlIview, select#ddlSQL").prop("selectedIndex",0),clearFields(),e){case"Login":$("#apiUrl").html("<span class='url1'>URL </span>: <span class='url2'>"+$("#hdnScriptPath").val()+"ASBMenuRest.dll/datasnap/rest/TASBMenuREST/login</span>"),getLoginApiInfo();break;case"Submit data":$("#apiUrl").html("<span class='url1'>URL </span>: <span class='url2'> "+$("#hdnScriptPath").val()+"ASBTStructRest.dll/datasnap/rest/TASBTStruct/savedata</span>")}}function selectedTstructChanged(){clearFields(),0!=$("select#ddlTstruct").prop("selectedIndex")&&$("#apiUrl").html("<span class='url1'>URL </span>: <span class='url2'>"+$("#hdnScriptPath").val()+"ASBTStructRest.dll/datasnap/rest/TASBTStruct/savedata</span>")}function selectedIviewChanged(){(clearFields(),0!=$("select#ddlIview").prop("selectedIndex"))&&($("select#ddlSQL").prop("selectedIndex",0),$("#apiUrl").html(" <span class='url1'>URL </span>: <span class='url2'>"+$("#hdnScriptPath").val()+"AsbIViewRest.dll/datasnap/rest/TASBIViewREST/getiview</span>"),constructIviewRequestJson($("#ddlIview").val()))}function selectedSQLChanged(){clearFields(),0!=$("select#ddlSQL").prop("selectedIndex")&&($("select#ddlIview").prop("selectedIndex",0),$("#getChoiceParams").removeClass("hide"),$("#apiUrl").html("<span class='url1'>URL </span>: <span class='url2'>"+$("#hdnScriptPath").val()+"api/getchoices/</span>"),$("#dvInputString").html('{ "getchoices": { "axpapp": "'+callParentNew("mainProject")+'", "seed": "1983", "s": "'+sessionID+'", "sql": "'+$("#ddlSQL").val()+'", "direct": "false", "params": "" } }'),$("#dvResponseString").html("{'result': [{ 'result': { 'row': [{ }] } }] }"))}function getIviewParams(e){var a={};return $.ajax({url:"axpertAPI.aspx/getIviewParams",type:"POST",cache:!1,async:!1,data:JSON.stringify({ivName:e}),contentType:"application/json",success:function(e){try{ParamNameJSON=JSON.parse(e.d)}catch(s){}if("undefined"!=typeof ParamNameJSON&&ParamNameJSON.result&&"undefined"!=typeof ParamNameJSON.result.row&&0!=ParamNameJSON.result.row.length){var t=ParamNameJSON.result.fields[0].name;$.each(ParamNameJSON.result.row,function(e,s){var n=s[t];a[n]="Param_value"})}},failure:function(){showAlertDialog("error","Error while getting paramList.")},error:function(){showAlertDialog("error","Error while getting paramList.")}}),a}function constructIviewRequestJson(e){var a={};-1!=$("#hdnParamIviewList").val().indexOf(e)&&(a=getIviewParams(e)),$("#dvInputString").html('{ "getiview": { "name": "'+e+'", "axpapp": "'+callParentNew("mainProject")+'", "s": "'+sessionID+'", "pageno": "1", "pagesize": "100", "sqlpagination": "true", "params": '+JSON.stringify(a)+"} }"),$("#dvResponseString").html('<div class="dvName" >On success :</div><div class="dvContent">{"headrow": { "rowno": { "hide": "true" }, "axrowtype": { "hide": "true", "width": "80", "dec": "0", "type": "c" }, "axp__font": { "axp__font": "axp__fontdetails", "hide": "true", "width": "80", "dec": "0", "type": "c" }, "column1": { "column1": "Sr. No.", "width": "54", "dec": "0", "align": "Center", "ordno": "1", "runningtotal": "False", "type": "n", "hide": "false" }, "emp": { "emp": "emp", "width": "80", "dec": "0", "align": "Left", "ordno": "2", "runningtotal": "False", "type": "c", "hlink": "ttotal", "pop": "True", "hltype": "load", "map": "emp=:emp", "hide": "false" }, "dep": { "dep": "dep", "width": "80", "dec": "0", "align": "Left", "ordno": "3", "runningtotal": "False", "type": "c", "hlaction": "act1", "hlink": "ttotal", "pop": "True", "hltype": "open", "map": "dep=:dep", "hide": "false" }, "sal": { "sal": "sal", "width": "80", "dec": "2", "align": "Center", "ordno": "4", "runningtotal": "False", "type": "n", "hlink": "iAccept", "pop": "True", "hltype": "load", "map": "employeename=:emp", "hide": "false" }, "reccount": "3", "pagesize": "0", "totalrows": "2", "datarows": "2" }, "row": [{ "rowno": "1", "column1": "1", "emp": "rohit", "dep": "marketing", "sal": "12,345.78", "total1id": "1110220000004", "e": "rohit" }, { "rowno": "2", "column1": "2", "emp": "pawan", "dep": "testing", "sal": "7,778.78", "total1id": "1108880000000", "e": "pawan" }], "GrandTotal": [{ "rowno": "3", "axrowtype": "4", "column1": "820", "emp": "", "dep": "", "sal": "7,97,671.40", "total1id": "44820370000374", "e": "" }] }</div><div class="dvName" >On failure :</div><div class="dvContent">{​​​​​​​​"result":[{​​​​​​​​"error":"Sessionid not specified in call to webservice getIView"}​​​​​​​​]}</div>')}function getLoginApiInfo(){$("#dvInputString").html('{"login": { "axpapp": "'+callParentNew("mainProject")+'", "username": "'+callParentNew("mainUserName")+'", "password": "PASSWORD", "seed": "1983", "other": "chrome", "trace": "true" } }'),$("#dvResponseString").html('<div class="dvName" >On success :</div><div class="dvContent">{"result": { "status": "Success", "s": " '+sessionID+' ", "ugroup": "default,designer", "uroles": "default,default", "EMAIL": "virat@agile-labs.com" }}</div><div class="dvName" >On failure :</div><div class="dvContent">{"result":[{"error":{"status":"Failed","msg":"Invalid username or password"}}]}</div>')}function createSubmitDataAPIinfo(e,a){var t=JSON.parse(e),s=JSON.parse(a),n=[],l=1;$.each(s.result.row,function(e,a){var s={},r=a.dname;"t"==a.asgrid.toLowerCase()?s["axp_recid"+l]=JSON.parse('[{"rowno":"001","text":"0","columns":{}},{"rowno":"002","text":"0","columns":{}}]'):s["axp_recid"+l]=JSON.parse('[{"rowno":"001","text":"0","columns":{}}]'),$.each(t.result.row,function(e,a){a.dcname==r&&(null!=a.fname?s["axp_recid"+l][0].columns[a.fname]="FIELD_VALUE":s["axp_recid"+l][0].columns[a.FNAME]="FIELD_VALUE")}),n.push(s),l++}),$("#dvInputString").html('{ "savedata": { "axpapp": "'+callParentNew("mainProject")+'", "transid": "'+$("select#ddlTstruct").val()+'","s":"'+sessionID+'", "changedrows": { "dc2": " * ", "dc3": " * " }, "trace": "true", "recordid": "0", "recdata":  '+JSON.stringify(n)+" } }"),$("#dvResponseString").html('{"message": [{ "msg": "'+$("#ddlTstruct option:selected").text()+' Saved", "recordid": "1690220000000" }] }'),$("#dvResponseString").html('<div class="dvName" >On success :</div><div class="dvContent">{"message": [{ "msg": "'+$("#ddlTstruct option:selected").text()+' Saved", "recordid": "1690220000000" }] }</div><div class="dvName" >On failure :</div><div class="dvContent">{"result": [{"error": {"status": "Failed","msg": "Sessionid not specified in call to webservice savedata" } }] }</div>')}function clearFields(){$("#dvInputString").html(""),$("#dvResponseString").html(""),$("#apiUrl").html(""),$("#loginParams").addClass("hide"),$("#sbmtdataParams").addClass("hide"),$("#getIvewParams").addClass("hide"),$("#getChoiceParams").addClass("hide")}